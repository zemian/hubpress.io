<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Exploring Apache Camel Core - File Component | Zemian&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.5.3">
    
    <meta name="description" content="A file poller is a very useful mechanism to solve common IT problems. Camel&#8217;s built-in file component is extremely flexible, and there are many options available for configuration. Let&#8217;s ...">
    <link rel="preload" href="/assets/css/0.styles.b9bb6c9a.css" as="style"><link rel="preload" href="/assets/js/app.64244392.js" as="script"><link rel="preload" href="/assets/js/6.ad4c2502.js" as="script"><link rel="preload" href="/assets/js/3.02a6dba2.js" as="script"><link rel="preload" href="/assets/js/110.939ac866.js" as="script"><link rel="prefetch" href="/assets/js/10.35f5c581.js"><link rel="prefetch" href="/assets/js/100.bb1e5921.js"><link rel="prefetch" href="/assets/js/101.94ad399c.js"><link rel="prefetch" href="/assets/js/102.82193fc2.js"><link rel="prefetch" href="/assets/js/103.e1278aed.js"><link rel="prefetch" href="/assets/js/104.e52663ad.js"><link rel="prefetch" href="/assets/js/105.c5426fbd.js"><link rel="prefetch" href="/assets/js/106.6121468c.js"><link rel="prefetch" href="/assets/js/107.4f60f2f9.js"><link rel="prefetch" href="/assets/js/108.dc1d8569.js"><link rel="prefetch" href="/assets/js/109.22c4e05f.js"><link rel="prefetch" href="/assets/js/11.1287ec15.js"><link rel="prefetch" href="/assets/js/111.7f265c13.js"><link rel="prefetch" href="/assets/js/112.168f6e61.js"><link rel="prefetch" href="/assets/js/113.1ad0978c.js"><link rel="prefetch" href="/assets/js/114.a6f6d334.js"><link rel="prefetch" href="/assets/js/115.e65ddd7d.js"><link rel="prefetch" href="/assets/js/116.730c96d3.js"><link rel="prefetch" href="/assets/js/117.61b1927f.js"><link rel="prefetch" href="/assets/js/118.94157fc2.js"><link rel="prefetch" href="/assets/js/119.bd844e2f.js"><link rel="prefetch" href="/assets/js/12.cff494d6.js"><link rel="prefetch" href="/assets/js/120.cfe13e68.js"><link rel="prefetch" href="/assets/js/121.ae78e39a.js"><link rel="prefetch" href="/assets/js/122.efeee535.js"><link rel="prefetch" href="/assets/js/123.8fb2d385.js"><link rel="prefetch" href="/assets/js/124.8b077f17.js"><link rel="prefetch" href="/assets/js/125.c2c2df79.js"><link rel="prefetch" href="/assets/js/126.682cc7fc.js"><link rel="prefetch" href="/assets/js/127.32c3979c.js"><link rel="prefetch" href="/assets/js/128.258498d5.js"><link rel="prefetch" href="/assets/js/129.952ed2c9.js"><link rel="prefetch" href="/assets/js/13.7b146506.js"><link rel="prefetch" href="/assets/js/130.1972697a.js"><link rel="prefetch" href="/assets/js/131.4b5641e7.js"><link rel="prefetch" href="/assets/js/132.e602dc5c.js"><link rel="prefetch" href="/assets/js/133.707db339.js"><link rel="prefetch" href="/assets/js/134.9800bce0.js"><link rel="prefetch" href="/assets/js/135.83acc7f9.js"><link rel="prefetch" href="/assets/js/136.7d951651.js"><link rel="prefetch" href="/assets/js/137.efd63eec.js"><link rel="prefetch" href="/assets/js/138.51bb16b4.js"><link rel="prefetch" href="/assets/js/139.50de57ad.js"><link rel="prefetch" href="/assets/js/14.0f20f4fc.js"><link rel="prefetch" href="/assets/js/140.593a0dee.js"><link rel="prefetch" href="/assets/js/141.079ae077.js"><link rel="prefetch" href="/assets/js/142.120fb641.js"><link rel="prefetch" href="/assets/js/143.2b409429.js"><link rel="prefetch" href="/assets/js/144.188af147.js"><link rel="prefetch" href="/assets/js/145.497babe8.js"><link rel="prefetch" href="/assets/js/146.e97966fa.js"><link rel="prefetch" href="/assets/js/147.ee72d60d.js"><link rel="prefetch" href="/assets/js/148.e03736ea.js"><link rel="prefetch" href="/assets/js/149.7ec4fe30.js"><link rel="prefetch" href="/assets/js/15.365acfa2.js"><link rel="prefetch" href="/assets/js/150.4afd710d.js"><link rel="prefetch" href="/assets/js/151.6b230549.js"><link rel="prefetch" href="/assets/js/152.180751eb.js"><link rel="prefetch" href="/assets/js/153.66aad9f5.js"><link rel="prefetch" href="/assets/js/154.9179240e.js"><link rel="prefetch" href="/assets/js/155.9814bce3.js"><link rel="prefetch" href="/assets/js/156.621d4792.js"><link rel="prefetch" href="/assets/js/157.9b026a86.js"><link rel="prefetch" href="/assets/js/158.3de8ecf5.js"><link rel="prefetch" href="/assets/js/159.5456e9de.js"><link rel="prefetch" href="/assets/js/16.ab59718b.js"><link rel="prefetch" href="/assets/js/160.bf7d671c.js"><link rel="prefetch" href="/assets/js/161.7330e530.js"><link rel="prefetch" href="/assets/js/162.6af83bd8.js"><link rel="prefetch" href="/assets/js/163.c8a353ea.js"><link rel="prefetch" href="/assets/js/164.0ea6aa78.js"><link rel="prefetch" href="/assets/js/165.312e5f49.js"><link rel="prefetch" href="/assets/js/166.de6e1906.js"><link rel="prefetch" href="/assets/js/167.9587ee6f.js"><link rel="prefetch" href="/assets/js/168.6cfe3986.js"><link rel="prefetch" href="/assets/js/169.8018f0c6.js"><link rel="prefetch" href="/assets/js/17.cf6b7fda.js"><link rel="prefetch" href="/assets/js/170.3ba225da.js"><link rel="prefetch" href="/assets/js/171.2eebbeb3.js"><link rel="prefetch" href="/assets/js/172.df758c5a.js"><link rel="prefetch" href="/assets/js/173.c7693258.js"><link rel="prefetch" href="/assets/js/174.b3dda473.js"><link rel="prefetch" href="/assets/js/175.741cf510.js"><link rel="prefetch" href="/assets/js/176.333996bb.js"><link rel="prefetch" href="/assets/js/177.4f6fb7e7.js"><link rel="prefetch" href="/assets/js/178.9c512316.js"><link rel="prefetch" href="/assets/js/179.7301f025.js"><link rel="prefetch" href="/assets/js/18.8194aa09.js"><link rel="prefetch" href="/assets/js/180.6f2c9a51.js"><link rel="prefetch" href="/assets/js/181.27945983.js"><link rel="prefetch" href="/assets/js/182.82c808f9.js"><link rel="prefetch" href="/assets/js/183.cad8e5e4.js"><link rel="prefetch" href="/assets/js/184.657b0783.js"><link rel="prefetch" href="/assets/js/185.a7535ef7.js"><link rel="prefetch" href="/assets/js/186.97ac5d5b.js"><link rel="prefetch" href="/assets/js/187.e48e10cf.js"><link rel="prefetch" href="/assets/js/188.f4d97e42.js"><link rel="prefetch" href="/assets/js/189.2977052f.js"><link rel="prefetch" href="/assets/js/19.a9acb6d3.js"><link rel="prefetch" href="/assets/js/190.0c5d6700.js"><link rel="prefetch" href="/assets/js/191.887ca1bf.js"><link rel="prefetch" href="/assets/js/192.f07b3092.js"><link rel="prefetch" href="/assets/js/193.db0f6ff6.js"><link rel="prefetch" href="/assets/js/194.20c17514.js"><link rel="prefetch" href="/assets/js/195.197a4909.js"><link rel="prefetch" href="/assets/js/196.0383be30.js"><link rel="prefetch" href="/assets/js/197.97eb87f2.js"><link rel="prefetch" href="/assets/js/198.b3c0c3c2.js"><link rel="prefetch" href="/assets/js/199.1fbbe1d8.js"><link rel="prefetch" href="/assets/js/20.6bc5a50d.js"><link rel="prefetch" href="/assets/js/200.dc2b7d81.js"><link rel="prefetch" href="/assets/js/201.dc3b956b.js"><link rel="prefetch" href="/assets/js/202.06ae08b5.js"><link rel="prefetch" href="/assets/js/203.d80457e8.js"><link rel="prefetch" href="/assets/js/204.6ed71f7f.js"><link rel="prefetch" href="/assets/js/205.8a1370a5.js"><link rel="prefetch" href="/assets/js/206.852b19ea.js"><link rel="prefetch" href="/assets/js/207.96882636.js"><link rel="prefetch" href="/assets/js/208.49bc311b.js"><link rel="prefetch" href="/assets/js/209.2d79ec68.js"><link rel="prefetch" href="/assets/js/21.f788cb17.js"><link rel="prefetch" href="/assets/js/210.791241e5.js"><link rel="prefetch" href="/assets/js/211.588d0f5c.js"><link rel="prefetch" href="/assets/js/212.870ba9b4.js"><link rel="prefetch" href="/assets/js/213.bcde24fb.js"><link rel="prefetch" href="/assets/js/214.e730e5b0.js"><link rel="prefetch" href="/assets/js/215.ad0645db.js"><link rel="prefetch" href="/assets/js/216.e0fa56ad.js"><link rel="prefetch" href="/assets/js/217.98251d77.js"><link rel="prefetch" href="/assets/js/218.8ffcec49.js"><link rel="prefetch" href="/assets/js/219.cd04feaf.js"><link rel="prefetch" href="/assets/js/22.23a43a2f.js"><link rel="prefetch" href="/assets/js/220.7c84fd44.js"><link rel="prefetch" href="/assets/js/221.3f9e83ad.js"><link rel="prefetch" href="/assets/js/222.e1ed21ff.js"><link rel="prefetch" href="/assets/js/223.f3700ad5.js"><link rel="prefetch" href="/assets/js/224.885c123d.js"><link rel="prefetch" href="/assets/js/225.d34088f3.js"><link rel="prefetch" href="/assets/js/226.abbac63f.js"><link rel="prefetch" href="/assets/js/227.7357324f.js"><link rel="prefetch" href="/assets/js/228.519044c8.js"><link rel="prefetch" href="/assets/js/229.ad3fb049.js"><link rel="prefetch" href="/assets/js/23.cfc95398.js"><link rel="prefetch" href="/assets/js/230.ce2f2c1f.js"><link rel="prefetch" href="/assets/js/231.2ea08608.js"><link rel="prefetch" href="/assets/js/232.cf75a580.js"><link rel="prefetch" href="/assets/js/233.1464439b.js"><link rel="prefetch" href="/assets/js/234.b47b97a2.js"><link rel="prefetch" href="/assets/js/235.2fa3a9d8.js"><link rel="prefetch" href="/assets/js/236.187242b3.js"><link rel="prefetch" href="/assets/js/237.034a2233.js"><link rel="prefetch" href="/assets/js/238.7d8eda1e.js"><link rel="prefetch" href="/assets/js/239.a3a3e517.js"><link rel="prefetch" href="/assets/js/24.d0227914.js"><link rel="prefetch" href="/assets/js/240.1bc8ed1f.js"><link rel="prefetch" href="/assets/js/241.1980ed71.js"><link rel="prefetch" href="/assets/js/242.16426d9a.js"><link rel="prefetch" href="/assets/js/243.f392083a.js"><link rel="prefetch" href="/assets/js/244.b8411d7c.js"><link rel="prefetch" href="/assets/js/245.a80fe5d8.js"><link rel="prefetch" href="/assets/js/246.71e402a9.js"><link rel="prefetch" href="/assets/js/247.b728601a.js"><link rel="prefetch" href="/assets/js/248.ba5b3805.js"><link rel="prefetch" href="/assets/js/249.fbeaad07.js"><link rel="prefetch" href="/assets/js/25.9aece626.js"><link rel="prefetch" href="/assets/js/250.25e09bb5.js"><link rel="prefetch" href="/assets/js/251.0024b110.js"><link rel="prefetch" href="/assets/js/252.d7c8835e.js"><link rel="prefetch" href="/assets/js/253.548ba748.js"><link rel="prefetch" href="/assets/js/254.ed3d28f1.js"><link rel="prefetch" href="/assets/js/255.c4048d3b.js"><link rel="prefetch" href="/assets/js/256.325e7452.js"><link rel="prefetch" href="/assets/js/257.502a2a05.js"><link rel="prefetch" href="/assets/js/258.c22cebb4.js"><link rel="prefetch" href="/assets/js/259.764850e9.js"><link rel="prefetch" href="/assets/js/26.f0103d0a.js"><link rel="prefetch" href="/assets/js/260.a6ce0678.js"><link rel="prefetch" href="/assets/js/261.1e195432.js"><link rel="prefetch" href="/assets/js/262.4e57c2bd.js"><link rel="prefetch" href="/assets/js/263.628874e0.js"><link rel="prefetch" href="/assets/js/264.766ae176.js"><link rel="prefetch" href="/assets/js/265.5bd113f1.js"><link rel="prefetch" href="/assets/js/266.458b1e10.js"><link rel="prefetch" href="/assets/js/267.ce9b92bb.js"><link rel="prefetch" href="/assets/js/268.e80e9ceb.js"><link rel="prefetch" href="/assets/js/269.acfa46e8.js"><link rel="prefetch" href="/assets/js/27.0b273bfa.js"><link rel="prefetch" href="/assets/js/270.67cef947.js"><link rel="prefetch" href="/assets/js/271.a40520da.js"><link rel="prefetch" href="/assets/js/272.4df834fd.js"><link rel="prefetch" href="/assets/js/273.3ce84c7b.js"><link rel="prefetch" href="/assets/js/274.9e02e5e3.js"><link rel="prefetch" href="/assets/js/275.ed13c522.js"><link rel="prefetch" href="/assets/js/276.e585f7c9.js"><link rel="prefetch" href="/assets/js/277.542003be.js"><link rel="prefetch" href="/assets/js/278.e73aa938.js"><link rel="prefetch" href="/assets/js/279.486b8f03.js"><link rel="prefetch" href="/assets/js/28.86efd233.js"><link rel="prefetch" href="/assets/js/280.aa095910.js"><link rel="prefetch" href="/assets/js/281.292b545b.js"><link rel="prefetch" href="/assets/js/282.c9ccda73.js"><link rel="prefetch" href="/assets/js/283.78ff37b1.js"><link rel="prefetch" href="/assets/js/284.78294bbd.js"><link rel="prefetch" href="/assets/js/285.c2fdb9c3.js"><link rel="prefetch" href="/assets/js/286.154706b4.js"><link rel="prefetch" href="/assets/js/287.5a306efa.js"><link rel="prefetch" href="/assets/js/288.894c8ef3.js"><link rel="prefetch" href="/assets/js/289.b42097c7.js"><link rel="prefetch" href="/assets/js/29.a6d78843.js"><link rel="prefetch" href="/assets/js/290.1d2f700e.js"><link rel="prefetch" href="/assets/js/291.d65ca4ec.js"><link rel="prefetch" href="/assets/js/292.44464539.js"><link rel="prefetch" href="/assets/js/293.c924d36b.js"><link rel="prefetch" href="/assets/js/294.ddb2a377.js"><link rel="prefetch" href="/assets/js/295.cfcb42ee.js"><link rel="prefetch" href="/assets/js/296.3a07e46f.js"><link rel="prefetch" href="/assets/js/297.7a905a77.js"><link rel="prefetch" href="/assets/js/298.d8cc56ee.js"><link rel="prefetch" href="/assets/js/30.9ae9e77a.js"><link rel="prefetch" href="/assets/js/31.59814c11.js"><link rel="prefetch" href="/assets/js/32.a1d3fb14.js"><link rel="prefetch" href="/assets/js/33.049d04a9.js"><link rel="prefetch" href="/assets/js/34.4c58ef0d.js"><link rel="prefetch" href="/assets/js/35.b2652264.js"><link rel="prefetch" href="/assets/js/36.9af5226d.js"><link rel="prefetch" href="/assets/js/37.3214996e.js"><link rel="prefetch" href="/assets/js/38.d38dbb4c.js"><link rel="prefetch" href="/assets/js/39.3579876e.js"><link rel="prefetch" href="/assets/js/4.923b4450.js"><link rel="prefetch" href="/assets/js/40.82d56664.js"><link rel="prefetch" href="/assets/js/41.6f3fac12.js"><link rel="prefetch" href="/assets/js/42.02538a24.js"><link rel="prefetch" href="/assets/js/43.33df9bba.js"><link rel="prefetch" href="/assets/js/44.5854b305.js"><link rel="prefetch" href="/assets/js/45.04ee6e59.js"><link rel="prefetch" href="/assets/js/46.10134f30.js"><link rel="prefetch" href="/assets/js/47.42141189.js"><link rel="prefetch" href="/assets/js/48.906c03ce.js"><link rel="prefetch" href="/assets/js/49.d8a0c96d.js"><link rel="prefetch" href="/assets/js/5.d6edbdd5.js"><link rel="prefetch" href="/assets/js/50.c1d5de5f.js"><link rel="prefetch" href="/assets/js/51.dd670b39.js"><link rel="prefetch" href="/assets/js/52.6c27f133.js"><link rel="prefetch" href="/assets/js/53.235d365d.js"><link rel="prefetch" href="/assets/js/54.d1f24f05.js"><link rel="prefetch" href="/assets/js/55.8ca22ecb.js"><link rel="prefetch" href="/assets/js/56.4bcf3321.js"><link rel="prefetch" href="/assets/js/57.f8eb4209.js"><link rel="prefetch" href="/assets/js/58.b12ea839.js"><link rel="prefetch" href="/assets/js/59.8070f163.js"><link rel="prefetch" href="/assets/js/60.08ece6a8.js"><link rel="prefetch" href="/assets/js/61.78b00936.js"><link rel="prefetch" href="/assets/js/62.fd36bcba.js"><link rel="prefetch" href="/assets/js/63.46879f1c.js"><link rel="prefetch" href="/assets/js/64.95d69159.js"><link rel="prefetch" href="/assets/js/65.cc25b111.js"><link rel="prefetch" href="/assets/js/66.868408b1.js"><link rel="prefetch" href="/assets/js/67.08eff183.js"><link rel="prefetch" href="/assets/js/68.c983242a.js"><link rel="prefetch" href="/assets/js/69.788d5817.js"><link rel="prefetch" href="/assets/js/7.1c5c34f3.js"><link rel="prefetch" href="/assets/js/70.538f4558.js"><link rel="prefetch" href="/assets/js/71.d4981d14.js"><link rel="prefetch" href="/assets/js/72.6601b103.js"><link rel="prefetch" href="/assets/js/73.3812d433.js"><link rel="prefetch" href="/assets/js/74.9a6570e9.js"><link rel="prefetch" href="/assets/js/75.c0aa84f5.js"><link rel="prefetch" href="/assets/js/76.4d6d5d4d.js"><link rel="prefetch" href="/assets/js/77.1c59411f.js"><link rel="prefetch" href="/assets/js/78.fd9759c0.js"><link rel="prefetch" href="/assets/js/79.b556ab88.js"><link rel="prefetch" href="/assets/js/8.a4b1730d.js"><link rel="prefetch" href="/assets/js/80.5606f8db.js"><link rel="prefetch" href="/assets/js/81.805ce26c.js"><link rel="prefetch" href="/assets/js/82.d41b8879.js"><link rel="prefetch" href="/assets/js/83.718f4819.js"><link rel="prefetch" href="/assets/js/84.00188e1f.js"><link rel="prefetch" href="/assets/js/85.7fdf4772.js"><link rel="prefetch" href="/assets/js/86.e9b82f3e.js"><link rel="prefetch" href="/assets/js/87.d022969b.js"><link rel="prefetch" href="/assets/js/88.12cdbeda.js"><link rel="prefetch" href="/assets/js/89.6745f1a7.js"><link rel="prefetch" href="/assets/js/9.41eee707.js"><link rel="prefetch" href="/assets/js/90.4957741c.js"><link rel="prefetch" href="/assets/js/91.8e55acb6.js"><link rel="prefetch" href="/assets/js/92.c96f86eb.js"><link rel="prefetch" href="/assets/js/93.ee1f8e8d.js"><link rel="prefetch" href="/assets/js/94.6d96d1ea.js"><link rel="prefetch" href="/assets/js/95.39bda546.js"><link rel="prefetch" href="/assets/js/96.ab050068.js"><link rel="prefetch" href="/assets/js/97.fa0cd6b4.js"><link rel="prefetch" href="/assets/js/98.71676571.js"><link rel="prefetch" href="/assets/js/99.80ccce66.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.927b34c4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b9bb6c9a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">Zemian's Blog </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li><li class="nav-item"><a href="/about-zemian.html" class="nav-link">About</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">Zemian's Blog </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li><li class="mobile-nav-item"><a href="/about-zemian.html" class="nav-link">About</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        Exploring Apache Camel Core - File Component
      </h1> <div class="post-meta"><!----> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2013-09-04T05:00:00.000Z">
      Wednesday, September 4, 2013
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/tag/camel" data-v-42ccfcd5><span data-v-42ccfcd5>camel</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><p>A file poller is a very useful mechanism to solve common IT problems. Camel’s built-in <code>file</code> component is extremely flexible, and there are many options available for configuration. Let’s cover few common usages here.</p> <h2 id="polling-a-directory-for-input-files"><a href="#polling-a-directory-for-input-files" class="header-anchor">#</a> Polling a directory for input files</h2> <p>Here is a typical Camel <code>Route</code> used to poll a directory for input files on every second.</p> <div class="language- extra-class"><pre><code>import org.slf4j.*;
import org.apache.camel.*;
import org.apache.camel.builder.*;
import java.io.*;

public class FileRouteBuilder extends RouteBuilder {
    static Logger LOG = LoggerFactory.getLogger(FileRouteBuilder.class);
    public void configure() {
        from(&quot;file://target/input?delay=1000&quot;)
        .process(new Processor() {
            public void process(Exchange msg) {
                File file = msg.getIn().getBody(File.class);
                LOG.info(&quot;Processing file: &quot; + file);
            }
        });
    }
}
</code></pre></div><p>Run this with following</p> <div class="language- extra-class"><pre><code>mvn compile exec:java -Dexec.mainClass=org.apache.camel.main.Main -Dexec.args='-r camelcoredemo.FileRouteBuilder'
</code></pre></div><p>The program will begin to poll your <code>target/input</code> folder under your current directory, and wait for incoming files. To test with input files, you would need to open another terminal, and then create some files as follow.</p> <div class="language- extra-class"><pre><code>echo 'Hello 1' &gt; target/input/test1.txt
echo 'Hello 2' &gt; target/input/test2.txt
</code></pre></div><p>You should now see the first prompt window start to picking up the files and pass to the next <code>Processor</code> step. In the <code>Processor</code>, we obtain the <code>File</code> object from the message body. It then simply logs it’s file name. You may hit <code>CTRL+C</code> when you are done.</p> <p>There many configurable options from <code>file</code> componet you may use in the URL, but most of the default settings are enough to get you going as simple case above. Some of these default behavior is such that if the input folder doesn’t exists, it will create it. And when the file is done processing by the <code>Route</code>, it will be moved into a <code>.camel</code> folder. If you don’t want the file at all after processing, then set <code>delete=true</code> in the URL.</p> <h2 id="read-in-the-file-content-and-converting-to-different-types"><a href="#read-in-the-file-content-and-converting-to-different-types" class="header-anchor">#</a> Read in the file content and converting to different types</h2> <p>By default, the <code>file</code> component will create a <code>org.apache.camel.component.file.GenericFile</code> object for each file found and pass it down your <code>Route</code> as message body. You may retrieve all your file information through this object. Or alternatively, you may also use the <code>Exchange</code> API to auto convert the message body object to a type you expect to receive (eg: as with <code>msg.getIn().getBody(File.class)</code>). In above example, the <code>File</code> is a type you expect to get from the message body, and Camel hence will try to convert it for you. The Camel uses the context’s registry space to pre-registered many <code>TypeConverter</code>'s that can handle most of the common data types (like Java primative etc) conversion. These <code>TypeConverter</code><em>s</em> are powerful way to make your <code>Route</code> and <code>Processor</code> more flexbile and portable.</p> <p>Camel will not only convert just your <code>File</code> object from message body, but it can also read the file content. If your files are character text based, then you can simply do this.</p> <div class="language- extra-class"><pre><code>        from(&quot;file://target/input?charset=UTF-8&quot;)
        .process(new Processor() {
            public void process(Exchange msg) {
                String text = msg.getIn().getBody(String.class);
                LOG.info(&quot;Processing text: &quot; + text);
            }
        });
</code></pre></div><p>That’s it! Simply specify <code>String</code> type, and Camel will read your file in and pass the entire file text content as body message. You may even use the <code>charset</code> to change the encoding.</p> <p>If you are dealing with binary file, then simply try <code>byte[] bytes = msg.getIn().getBody(byte[].class);</code> conversion instead. Pretty cool huh?</p> <h2 id="polling-and-processing-large-files"><a href="#polling-and-processing-large-files" class="header-anchor">#</a> Polling and processing large files</h2> <p>When working with large files, there few options in <code>file</code> componet that you might want to use to ensure proper handling. For example, you might want to move the input file into a <code>staging</code> folder before the <code>Route</code> starts the processing; and when it’s done, move it to a <code>.completed</code> folder.</p> <div class="language- extra-class"><pre><code>        from(&quot;file://target/input?preMove=staging&amp;move=.completed&quot;)
        .process(new Processor() {
            public void process(Exchange msg) {
                File file = msg.getIn().getBody(File.class);
                LOG.info(&quot;Processing file: &quot; + file);
            }
        });
</code></pre></div><p>To feed input files properly into the polling folder, it’s best if the sender generates the input files in a temporary folder first, and only when it’s ready then move it into the polling folder. This will minimize reading an incomplete file by the <code>Route</code> if the input file might take times to generate. Also another solution to this is to config <code>file</code> endpoint to only read the polling folder when there is a signal or ready marker file exists. For example:</p> <div class="language- extra-class"><pre><code>        from(&quot;file://target/input?preMove=staging&amp;move=.completed&amp;doneFileName=ReadyFile.txt&quot;)
        .process(new Processor() {
            public void process(Exchange msg) {
                File file = msg.getIn().getBody(File.class);
                LOG.info(&quot;Processing file: &quot; + file);
            }
        });
</code></pre></div><p>Above will only read the <code>target/input</code> folder when there is a <code>ReadyFile.txt</code> file exists. The marker file can be just an empty file, and it will be removed by Camel after polling. This solution would allow the sender to generate input files in however long time it might take.</p> <p>Another concern with large file processing is to avoid loading entire file content into memory for processing. To be more practical, you want to split the file into records (eg: per line) and process it one by one (or called &quot;streaming&quot;). Here is how you would do that using Camel.</p> <div class="language- extra-class"><pre><code>        from(&quot;file://target/input?preMove=staging&amp;move=.completed&quot;)
        .split(body().tokenize(&quot;\n&quot;))
        .streaming()
        .process(new Processor() {
            public void process(Exchange msg) {
                String line = msg.getIn().getBody(String.class);
                LOG.info(&quot;Processing line: &quot; + line);
            }
        });
</code></pre></div><p>This <code>Route</code> will allow you to process large size file without cosuming too much memory and process it line by line very efficiently.</p> <h2 id="writing-messages-back-into-file"><a href="#writing-messages-back-into-file" class="header-anchor">#</a> Writing messages back into file</h2> <p>The <code>file</code> component can also be used to write messages into files. Recall that we may use <code>dataset</code> component to generate sample messages. We will use that to feed the <code>Route</code> and send to the <code>file</code> component so you can see that each message generated will be saved into a file.</p> <div class="language- extra-class"><pre><code>package camelcoredemo;

import org.slf4j.*;
import org.apache.camel.*;
import org.apache.camel.builder.*;
import org.apache.camel.main.Main;
import org.apache.camel.component.dataset.*;

public class FileDemoCamel extends Main {
    static Logger LOG = LoggerFactory.getLogger(FileDemoCamel.class);
    public static void main(String[] args) throws Exception {
        FileDemoCamel main = new FileDemoCamel();
        main.enableHangupSupport();
        main.addRouteBuilder(createRouteBuilder());
        main.bind(&quot;sampleGenerator&quot;, createDataSet());
        main.run(args);
    }
    static RouteBuilder createRouteBuilder() {
        return new RouteBuilder() {
            public void configure() {
                from(&quot;dataset://sampleGenerator&quot;)
                .to(&quot;file://target/output&quot;);
            }
        };
    }
    static DataSet createDataSet() {
        return new SimpleDataSet();
    }
}
</code></pre></div><p>Compile and run it</p> <div class="language- extra-class"><pre><code>mvn compile exec:java -Dexec.mainClass=camelcoredemo.FileDemoCamel
</code></pre></div><p>Upon complete you will see that 10 files would be generated in <code>target/output</code> folder with
file name in <code>ID-&lt;hostname&gt;-&lt;unique-number&gt;-&lt;msg-seq-num&gt;</code> format.</p> <p>There are more options availabe from <a href="http://camel.apache.org/file2.html" target="_blank" rel="noopener noreferrer">File<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> component
that you may explore.
<a href="http://saltnlight5.blogspot.com/2013/08/getting-started-with-apache-camel-using.html" target="_blank" rel="noopener noreferrer">Try it out with a Route<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
and see it for yourself.</p></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#polling-a-directory-for-input-files" title="Polling a directory for input files">Polling a directory for input files</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#read-in-the-file-content-and-converting-to-different-types" title="Read in the file content and converting to different types">Read in the file content and converting to different types</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#polling-and-processing-large-files" title="Polling and processing large files">Polling and processing large files</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#writing-messages-back-into-file" title="Writing messages back into file">Writing messages back into file</a></div></div></div></div> <footer class="footer" data-v-fdbf4940><div class="footer-left-wrap" data-v-fdbf4940><ul class="contact" data-v-fdbf4940><li class="contact-item" data-v-fdbf4940><a href="https://github.com/zemian" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-fdbf4940><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-fdbf4940><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-fdbf4940></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-fdbf4940><ul class="copyright" data-v-fdbf4940><li class="copyright-item" data-v-fdbf4940><a href="/about-zemian.html" class="nav-link" data-v-fdbf4940>Copyright © 2011-present Zemian Deng</a></li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.64244392.js" defer></script><script src="/assets/js/6.ad4c2502.js" defer></script><script src="/assets/js/3.02a6dba2.js" defer></script><script src="/assets/js/110.939ac866.js" defer></script>
  </body>
</html>
