<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Exploring More on RequireJS &middot; Zemian's Blog
    
  </title>

  
  <link rel="canonical" href="http://localhost:4000/2020/04/22/more-on-requirejs/">
  

  <link rel="stylesheet" href="http://localhost:4000/public/css/poole.css">
  <link rel="stylesheet" href="http://localhost:4000/public/css/syntax.css">
  <link rel="stylesheet" href="http://localhost:4000/public/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="http://localhost:4000/public/favicon.ico">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://localhost:4000/atom.xml">

  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-135626598-1', 'auto');
    ga('send', 'pageview');
  </script>
  
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>A weblog on software development.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="http://localhost:4000/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="http://localhost:4000/about/">About</a>
        
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    

  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2020. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Zemian's Blog</a>
            <small>Life in programming world!</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">Exploring More on RequireJS</h1>
  <span class="post-date">22 Apr 2020</span>
  <h2 id="configuring-requirejs">Configuring RequireJS</h2>

<p>You can use either <code class="language-plaintext highlighter-rouge">requirejs.config()</code> or <code class="language-plaintext highlighter-rouge">require.config()</code> to setup RequireJS. I preferred the <code class="language-plaintext highlighter-rouge">requirejs.config()</code> and <code class="language-plaintext highlighter-rouge">require()</code> to load modules just so to give them some distinction on usage. A typical config usage is like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>requirejs.config({
    baseUrl: "js/",
    paths: {
        'foo': 'path/foo',
        'bar': 'path/bar',
    }
});
</code></pre></div></div>

<p>You can actually run <code class="language-plaintext highlighter-rouge">requirejs.config()</code> multiple times! Most of the options will be appended together. But the last <code class="language-plaintext highlighter-rouge">baseUrl</code> will override all.</p>

<h2 id="use-shim-for-library-that-has-no-amd-support">Use Shim for Library that has no AMD support</h2>

<p>If you are loading a library (eg: CKEDITOR4), then you need to work with <code class="language-plaintext highlighter-rouge">shim</code> because it expose a global variable named CKEDITOR. Examples:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>requirejs.config({
    paths: {
        ckeditor: 'https://cdn.jsdelivr.net/npm/ckeditor4@4.14.0/ckeditor'
    },
    shims: {
        ckeditor: {
            exports: 'CKEDITOR'
        }
    }
});
require(['ckeditor'], () =&gt; {
    // Notice that CKEDITOR variable is automatically available due to our shims' export.
    CKEDITOR.replace('editor', {width: '100%', height: '85%'});
});
</code></pre></div></div>

<h2 id="writing-modules">Writing Modules</h2>

<p>It’s recommended you don’t explicitly name your module, but simply let your filename be the module name. Example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//file: mymodule.js
define('mymodule', [], function() {
    return {
        uniqueId() {
            return Math.random().toString(16).substring(2);
        }
    }
});
</code></pre></div></div>

<p>You can create many internal functions and variable you want and they do need to be all returned (or exported). Another popular export data is simply the JS function constructor. Example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//file: MyService.js
define(['mylib', function(mylib) {
  function MyService () {
    // ... define your service here.
    // note that 'mylib' is loaded and availabe to use here.
  }
  return MyService;
});require(['MyService'], (MyService) =&gt; {
  let service = new MyService();
  // Use service here...
});
</code></pre></div></div>

<h2 id="loading-modules">Loading Modules</h2>

<p>You should know that when you use <code class="language-plaintext highlighter-rouge">require()</code> to load modules, they are all loaded asynchronously, and all the dependency are loaded accordingly in the proper order!</p>

<p>You can configure RequireJS with <code class="language-plaintext highlighter-rouge">paths</code> that setup hundreds of ready to use libraries, but if you don’t invoke <code class="language-plaintext highlighter-rouge">require()</code>, it will not be loaded into your browser at runtime!</p>

<p>The <code class="language-plaintext highlighter-rouge">require()</code> can be use anywhere in your HTML script code. One popular way to organize the code is that you place your application entry file (usually named <code class="language-plaintext highlighter-rouge">main.js</code>) with entry point of <code class="language-plaintext highlighter-rouge">require()</code> to start your application. Then you can load it in browser like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;script data-main="main" src="https://unpkg.com/requirejs@2.3.6/require.js"&gt;&lt;/script&gt;
</code></pre></div></div>

<p>Note that <code class="language-plaintext highlighter-rouge">.js</code> is optional when you use <code class="language-plaintext highlighter-rouge">data-main</code> attribute. Above can also be loaded in your old fashion way like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;script src="https://unpkg.com/requirejs@2.3.6/require.js"&gt;&lt;/script&gt;
&lt;script src="main.js"&gt;&lt;/script&gt;
</code></pre></div></div>

<h2 id="troubleshooting-tips">Troubleshooting Tips</h2>

<ol>
  <li>The usage and syntax of <code class="language-plaintext highlighter-rouge">require()</code> and <code class="language-plaintext highlighter-rouge">define()</code> is the same, so ensure you use the correct one! Using <code class="language-plaintext highlighter-rouge">define()</code> instead of <code class="language-plaintext highlighter-rouge">require()</code> will obviously fail your application, but the error might not be so straight forward.</li>
  <li>RequireJS loads modules in relative to the <code class="language-plaintext highlighter-rouge">baseUrl</code> path value setup in your config options. Ensure the value it’s loaded properly. Especially if you are using relative path. It default value is relative to the <code class="language-plaintext highlighter-rouge">.html</code> file where you include the <code class="language-plaintext highlighter-rouge">require.js</code> file in script tag. Triple check this if you see error not able to find your modules.</li>
  <li>The <code class="language-plaintext highlighter-rouge">paths</code> configuration option accept value of module with out <code class="language-plaintext highlighter-rouge">.js</code> extension! If you include it, it will fail to find your module.</li>
  <li>If you have large modules that you use all of the time. Try reduce the number of dependency modules your user need to import by writing a wrapper module.</li>
  <li>
    <p>When loading large dependency module list, use a consistent formatting to help. Also, ensure you match up your array of dependency module names with the function callback parameters correctly. Else you get all sort of weird errors. For example:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>require(['mymodulelib',
  'mymodulelib2',
  'mymodulelib3',
  'mymodulelib4',
  'mymodulelib5'
], function(lib, lib2, lib3) {// write your module here...});
</code></pre></div>    </div>
  </li>
</ol>

</div>


<div class="related">
  <h2>Related posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2020/09/20/world-of-php/">
            The World of PHP Development
            <small>20 Sep 2020</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2020/09/19/multiple-jquery/">
            How to Load Multiple jQuery
            <small>19 Sep 2020</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2020/08/15/switched-to-vuepress/">
            Switched Blogging to VuePress
            <small>15 Aug 2020</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script src='/public/js/script.js'></script>
  </body>
</html>
