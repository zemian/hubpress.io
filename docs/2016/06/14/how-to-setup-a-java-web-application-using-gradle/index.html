<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      How to setup a Java web application using Gradle &middot; Zemian's Blog
    
  </title>

  
  <link rel="canonical" href="http://localhost:4000/2016/06/14/how-to-setup-a-java-web-application-using-gradle/">
  

  <link rel="stylesheet" href="http://localhost:4000/public/css/poole.css">
  <link rel="stylesheet" href="http://localhost:4000/public/css/syntax.css">
  <link rel="stylesheet" href="http://localhost:4000/public/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="http://localhost:4000/public/favicon.ico">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://localhost:4000/atom.xml">

  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-135626598-1', 'auto');
    ga('send', 'pageview');
  </script>
  
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>A weblog on software development.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="http://localhost:4000/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="http://localhost:4000/about/">About</a>
        
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    

  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2020. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Zemian's Blog</a>
            <small>Life in programming world!</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">How to setup a Java web application using Gradle</h1>
  <span class="post-date">14 Jun 2016</span>
  <p>For basic java and Gradle, it’s really simple. All you need is one line in build.gradle file and you can start compiling Java source under src/main/java folder.</p>

<p>apply plugin: ‘java’</p>

<p>But to setup a useful web application,  you would need little more. Here I have another example of Gradle 2.7 script file for building a Java web application. I also have noted few things I have discovered in the comments.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># A Java web app project

# There should be a src/main/webapp as web content directory
apply plugin: 'war'
apply plugin: 'jetty'

# Change jetty default port from 8080
httpPort = 9000

# A repository must be given to fetch dependencies below.
repositories {
    mavenCentral()
}

# Library dependencies
dependencies {
    // JDK lang support
    // Ouch! Gradle does not support 'provided' scope! Let's use compile for now.
    //provided 'org.projectlombok:lombok:1.16.6'
    compile 'org.projectlombok:lombok:1.16.6'

    // Testing
    testCompile 'junit:junit:4.12',
        'org.hamcrest:hamcrest-library:1.3'

    // Database
    runtime 'mysql:mysql-connector-java:5.1.37'   

    // Scripting
    //runtime 'org.codehaus.groovy:groovy-all:2.4.5'
    /*
    NOTE: Error if you include groovy with gradle+jetty!!!
            java.lang.ExceptionInInitializerError:
        groovy.lang.GroovyRuntimeException: Conflicting module versions. Module [groovy-all is loaded in version 2.3.10 and you are trying to load version 2.4.5
             // Verify your groovy version using the following:
        import javax.script.*
        out.println(new ScriptEngineManager().getEngineFactories())
        out.println(org.codehaus.groovy.jsr223.GroovyScriptEngineFactory.class.getProtectionDomain().getCodeSource().getLocation())
    */ 
}
</code></pre></div></div>
<p>I also have this JSP in <code class="language-plaintext highlighter-rouge">src/main/webapp/script.jsp</code> folder</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;%@ page import="javax.script.*, java.io.*" %&gt;

&lt;%
// Initialize parameters
String engineName = request.getParameter("engine");
if (engineName == null) engineName = "Groovy";
String code = request.getParameter("code");
if (code == null) code = "";
%&gt;

&lt;!-- form: Script input code --&gt;
&lt;h1&gt;Scripting&lt;/h1&gt;
&lt;form method="POST"&gt;
&lt;textarea name="code" cols="120" rows="25"&gt;&lt;%= code %&gt;&lt;/textarea&gt;
&lt;p/&gt;&lt;input type="submit" value="Submit"/&gt;
&lt;/form&gt;

&lt;pre&gt;
&lt;%
if (request.getMethod().equals("POST")) {
    // Process form and evaluate script code
    ScriptEngine se = new ScriptEngineManager().getEngineByName(engineName);
    if (se == null) {
        out.println("ERROR: " + engineName + " engine not found! Use 'engine' parameter to change it.");
    } else {
        try {
            Bindings b = se.createBindings();
            b.put("request", request);
            b.put("out", out);
            Object result = se.eval(code, b);
            
            out.println(engineName + " script result:");
            out.println("" + result);
        } catch (Exception e) {
            out.println("ERROR: " + engineName + " script failed to evaluate!");
            e.printStackTrace(new PrintWriter(out));
        }
    }
}
%&gt;

&lt;/pre&gt;
</code></pre></div></div>
<p>With this script.jsp, you can write something like this to test out your db connection.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// Groovy script:
import java.sql*
conn = DriverManager.getConnection('jdbc:mysql://localhost/test', 'dev', 'dev123')
out.println("conn=" + conn)
conn.close()

And just for fun, I have created a data class using ProjectLombok generator in src/main/java/myjava/MyData.java

package myjava;
import java.util.*;

@lombok.Data
public class MyData {
private Integer id;
private String name;
private Date createdDate;
private List&lt;MyData&gt; dataList;
private Map&lt;String, MyData&gt; dataMap;

}

I also have a unit test in src/test/java/myjava/MyDataTest.java

package myjava;

import org.junit.Test;
import static org.junit.Assert.assertThat;
import static org.hamcrest.Matchers.*;

public class MyDataTest {
@Test
public void tesGeneratedGetterSettersAndToString() {
MyData d = new MyData();
d.setId(12345);
d.setName("foo");
assertThat(d.getId(), is(12345));
assertThat(d.getName(), is("foo"));
assertThat(d.toString(), is("MyData(id=12345, name=foo, createdDate=null, dataList=null, dataMap=null)"));
}

}
</code></pre></div></div>
<p>To compile code, type command: <code class="language-plaintext highlighter-rouge">gradle compileJava</code></p>

<p>To run test, type command: gradle test(A nice feature of Gradle is that it auto generate test reports! Look for them in your build/reports folder.)</p>

<p>To run web app, type command: gradle jettyRun</p>

</div>


<div class="related">
  <h2>Related posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2020/09/20/world-of-php/">
            The World of PHP Development
            <small>20 Sep 2020</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2020/09/19/multiple-jquery/">
            How to Load Multiple jQuery
            <small>19 Sep 2020</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2020/08/15/switched-to-vuepress/">
            Switched Blogging to VuePress
            <small>15 Aug 2020</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script src='/public/js/script.js'></script>
  </body>
</html>
