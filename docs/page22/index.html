<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Zemian's Blog &middot; Life in programming world!
    
  </title>

  
  <link rel="canonical" href="http://localhost:4000/page22/">
  

  <link rel="stylesheet" href="http://localhost:4000/public/css/poole.css">
  <link rel="stylesheet" href="http://localhost:4000/public/css/syntax.css">
  <link rel="stylesheet" href="http://localhost:4000/public/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="http://localhost:4000/public/favicon.ico">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://localhost:4000/atom.xml">

  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-135626598-1', 'auto');
    ga('send', 'pageview');
  </script>
  
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>A weblog on software development.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item active" href="http://localhost:4000/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="http://localhost:4000/about/">About</a>
        
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    

  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2020. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Zemian's Blog</a>
            <small>Life in programming world!</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2013/01/11/apache-tapestry-5-makes-java-web-development-easy/">
        Apache Tapestry 5 makes Java web development easy
      </a>
    </h1>

    <span class="post-date">11 Jan 2013</span>

    <p>I went through the <a href="http://tapestry.apache.org">Apache Tapestry 5</a> tutorial today and found it surprisingly easy to use. The two most productive features I love are auto class reloading and rich built-in components! I can edit the model/controller/view in a java IDE that auto compiles upon file save, and then reload browser to see immediate changes. I think any Java web framework should have this feature in order to be count as productive. (Yes there is JRebel, but it’s commercial, and nothing more simpler than a framework supports it directly. Well to be fair JRebel is much more advance and richer in support your Java classes reloading, however for purpose of web dev, Tapestry seems to provide a sweet spot and boot productivity  tremendously.)</p>

<p>I was intrigued enough to continue reading the rest of their documentation for advance usage and architecture design. I love simple and yet productive libraries/framework design principles, and I think Tapestry fits into that category. Their documentation is rich and well organized. I browsed their forums and user communities and they seem to be active and plenty of usage in the field. I also found these <a href="http://jumpstart.doublenegative.com.au/jumpstart/">jumpstart examples</a> to be extremely helpful.</p>

<p>I am happy that I spent the time in learning this framework. I think it makes web development easy, fast and fun to work with. If you haven’t tried it before, or have not tried their latest version 5 lately, I would highly recommend you to give it a try.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2012/12/31/java-implementation-of-string-next-successor/">
        Java implementation of String#next() successor
      </a>
    </h1>

    <span class="post-date">31 Dec 2012</span>

    <p>I’ve found the <a href="http://www.ruby-doc.org/core-1.9.3/String.html#method-i-succ">Ruby’s <code class="language-plaintext highlighter-rouge">String#next()</code> or <code class="language-plaintext highlighter-rouge">#succ</code></a> very useful and productive, specially when generating data for testing. Here is what the Ruby doc says:</p>

<blockquote>
  <p>succ -&gt; new_str</p>

  <p>next -&gt; new_str</p>

  <p>Returns the successor to str. The successor is calculated by incrementing characters starting from the rightmost alphanumeric (or the rightmost character &gt; if there are no alphanumerics) in the string. Incrementing a digit always results in another digit, and incrementing a letter results in another letter &gt; of the same case. Incrementing nonalphanumerics uses the underlying character sets collating sequence.</p>

  <p>If the increment generates a carry, the character to the left of it is incremented. This process repeats until there is no carry, adding an additional &gt; character if necessary.</p>

  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"abcd".succ        #=&gt; "abce"
"THX1138".succ     #=&gt; "THX1139"
"&lt;&lt;koala&gt;&gt;".succ   #=&gt; "&lt;&lt;koalb&gt;&gt;"
"1999zzz".succ     #=&gt; "2000aaa"
"ZZZ9999".succ     #=&gt; "AAAA0000"
"***".succ         #=&gt; "**+"
</code></pre></div>  </div>

</blockquote>

<p>So when I saw Groovy actually has provided a <a href="http://groovy.codehaus.org/groovy-jdk/java/lang/String.html#next()">String extension <code class="language-plaintext highlighter-rouge">#next()</code></a> method, I was happy to try it out. But then I was quickly disappointed when the behavior is very different. The Groovy version is very simple and actually not very productive since it simply <a href="https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/runtime/StringGroovyMethods.java">loop through Character set range in incrementally</a> (including non-printable characters blindly!). The Ruby’s version, however, is much more productive since it produce visible characters. For examples:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    bash&gt; ruby -e 'puts "Z".next()'
    AA
    bash&gt; groovy -e 'println("Z".next())'
    [
</code></pre></div></div>

<p>I wish Groovy version would improve in future as it’s not very useful at the moment. Just for fun, I wrote a Java implementation version that mimics the Ruby’s behavior:</p>

<p>And here is my unit test for sanity check:</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2012/12/26/reading-https-url-from-a-self-signed-cert/">
        Reading https url from a self-signed cert
      </a>
    </h1>

    <span class="post-date">26 Dec 2012</span>

    <p>Groovy has made fetching data from URL a snap:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>println(new URL("http://www.google.com").text)
</code></pre></div></div>

<p>But have you ever try to get data from an <code class="language-plaintext highlighter-rouge">https</code> of an site that’s using a self signed certificate? A browser will prompt you a risk warning, but it let you trust it and still continue. But it’s much more hassle if we want to fetch the data programmatically. For example, try fetching <a href="https://www.pcwebshop.co.uk/">https://www.pcwebshop.co.uk</a> and you will see that it failed miserably:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    Caught: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
        at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1762)
        at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:241)
        at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:235)
        at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1206)
        at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:136)
        at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:593)
        at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:529)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:958)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1203)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1230)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1214)
        at test.run(test.groovy:2)
    Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
        at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:126)
        at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:209)
        at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:249)
        at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1185)
        ... 8 more
    Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
        ... 12 more
</code></pre></div></div>

<p>This is due to Java API won’t let you get data if your certs is not in the keystore or “trusted”. Now if you have your own testing site and did a self-signed like above, then sure you just want to trust it temporary and simply want to fetch the data. However configuring the Java API to do such simple task is a nightmare.</p>

<p>Today, I found a library that allow you to perform exactly this: <a href="https://github.com/kevinsawicki/http-request">https://github.com/kevinsawicki/http-request</a> Trying this out using Groovy is pretty sweet:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    @Grab('com.github.kevinsawicki:http-request:3.1')
    import com.github.kevinsawicki.http.*
    def req = HttpRequest.get("https://www.pcwebshop.co.uk")
    req.trustAllCerts()
    req.trustAllHosts()
    println(req.body())
</code></pre></div></div>

<p>And Voila! We read the URL context without the pesky exception. This <code class="language-plaintext highlighter-rouge">http-request</code> is awesome! Now I wish JDK let you do simple thing like this. This is extremely useful for testing.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2012/12/20/a-strange-case-of-java-generic-and-inheritage-parameter-passing/">
        A strange case of Java generic and inheritage parameter passing
      </a>
    </h1>

    <span class="post-date">20 Dec 2012</span>

    <p>I came a cross some strange Java code and I would like to share it here. Take a look few of classes I have here:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    // file: AFoo.java
    package atest.deng;
    public abstract class AFoo&lt;T&gt; {
    }
    
    // file: Foo.java
    package atest.deng;
    public class Foo extends AFoo&lt;String&gt; {
    }
    
    // file: FooProcessor.java
    package atest.deng;
    public class FooProcessor&lt;T&gt; {
        public void process(Class&lt;AFoo&lt;?&gt;&gt; cls) {
            System.out.println(cls);
        }
    }
    
    // file: FooMain.java
    package atest.deng;
    public class FooMain {
        public static void main(String[] args) {
            new FooProcessor().process(Foo.class);
        }
    }
    
    bash&gt; mvn compile
    bash&gt; [INFO] BUILD SUCCESS
</code></pre></div></div>

<p>I tried this with JDK6 + Maven and it compiles without problem. But try to remove the <code class="language-plaintext highlighter-rouge">&lt;T&gt;</code> part from <code class="language-plaintext highlighter-rouge">FooProcessor</code> and it will fail to compile!</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    // file: FooProcessor.java
    package atest.deng;
    public class FooProcessor {
        public void process(Class&lt;AFoo&lt;?&gt;&gt; cls) {
            System.out.println(cls);
        }
    }
    
    bash&gt; mvn clean compile
    bash&gt; [ERROR] java-demo\src\main\java test\deng\FooMain.java:[4,26] process(java.lang.Class&lt;atest.deng.AFoo&lt;?&gt;&gt;) in atest.deng.FooProcessor cannot be applied to (java.lang.Class&lt;atest.deng.Foo&gt;)
</code></pre></div></div>

<p>Without the <code class="language-plaintext highlighter-rouge">&lt;T&gt;</code> the code won’t compile, and yet we are not even using it in this case. How and why <code class="language-plaintext highlighter-rouge">&lt;T&gt;</code> affects the method parameters invocation?</p>

<p>Now, we can improve the <code class="language-plaintext highlighter-rouge">FooProcessor</code> in this way so that the presence of <code class="language-plaintext highlighter-rouge">&lt;T&gt;</code> doesn’t have any affect.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    package atest.deng;
    public class FooProcessor {
        public void process(Class&lt;? extends AFoo&lt;?&gt;&gt; cls) {
            System.out.println(cls);
        }
    }
</code></pre></div></div>

<p>That’s a more proper way to write the generic parameter anyway. But despite a better solution, the puzzle is that the original code compiled under the compiler, but only with the <code class="language-plaintext highlighter-rouge">&lt;T&gt;</code> presented, and yet it’s not used. Wouldn’t you consider this as a Java compiler bug?</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2012/12/18/a-simple-groovy-issue-tracker-using-file-system/">
        A simple Groovy issue tracker using file system
      </a>
    </h1>

    <span class="post-date">18 Dec 2012</span>

    <p>It will be a chaos not to track bugs and feature requests when you developing software. Having a simple issue tracker would make managing the project much more successful. Now I like simple stuff, and I think for small project, having this tracker right inside the source control (especially with DSVC like Mercurial/Git etc) repository is not only doable, but very convenient as well. You don’t have to go crazy with all the fancy features, but just enough to track issues are fine. I would like to propose this layout for you.</p>

<p>Let’s say you have a project that looks like this</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
project
 +- src/main/java/Hello.java
 +- issues/issue-001.md
 +- pom.xml
```
</code></pre></div></div>

<p>All I need is a simple directory <code class="language-plaintext highlighter-rouge">issues</code> to get going. Now I have a place to track my issue! First issue <code class="language-plaintext highlighter-rouge">issue-000.md</code> should be what your project is about. For example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    /id=issue-001
    /createdon=2012-12-16 18:07:08
    /type=bug
    /status=new
    /resolution=
    /from=Zemian
    /to=
    /found=
    /fixed=
    /subject=A simple Java Hello program

    # Updated on 2012-12-16 18:07:08

    We want to create a Maven based Hello world program. It should print "Hello World."
</code></pre></div></div>

<p>I choose <code class="language-plaintext highlighter-rouge">.md</code> as file extension for intending to write comments in Markdown format. Since it’s a text file, you do what you want. To be more structured, I have added some headers metadata for issue tracking. Let’s define some here. I would propose to use these and formatting:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     /id=issue-&lt;NUM&gt;
     /createdon=&lt;TIMESTAMP&gt;
     /type=feature|bug|question
     /status=new|reviewing|working|onhold|testing|resolved
     /resolution=fixed|rejected|duplicated
     /from=&lt;REPORTER_FROM_NAME&gt;
     /to=&lt;ASSIGNEE_TO_NAME&gt;
     /found=&lt;VERSION_FOUND&gt;
     /fixed=&lt;VERSION_FIXED&gt;
</code></pre></div></div>

<p>That should cover most of the bug and feature development issues. It’s not cool to write software without a history of changes, including these issues created. So let’s use a source control. I highly recommend you to use Mercurial <code class="language-plaintext highlighter-rouge">hg</code>. You can create and initialize a new repository like this.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    bash&gt; cd project
    bash&gt; hg init
    bash&gt; hg add
    bash&gt; hg commit -m "My hello world project"
</code></pre></div></div>

<p>Now your project is created and we have a place to track your issues. Now it’s simple text file, so use your favorite text editor and edit away. However, creating new issue with those header tags is boring. It will be nice to have a script that manage it a little. I have a Groovy script <code class="language-plaintext highlighter-rouge">issue.groovy</code> (see at the end of this article) that let you run reports and create new issues. You can add this script into your <code class="language-plaintext highlighter-rouge">project/issues</code> directory and you can instantly creating new issue and querying reports! Here is an example output on my PC:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    bash&gt; cd project
    bash&gt; groovy scripts/issue.groovy
    
    Searching for issues with /status!=resolved
    Issue: /id=issue-001 /status=new /subject=A simple Java Hello program
    1 issues found.
    
    bash&gt; groovy scripts/issue.groovy --new /type=feature /subject='Add a unit test.'
    
    project/issues/issue-002.md created.
    /id=issue-002
    /createdon=2012-12-16 19:10:00
    /type=feature
    /status=new
    /resolution=
    /from=Zemian
    /to=
    /found=
    /fixed=
    /subject=Add a unit test.
    
    bash&gt; groovy scripts/issue.groovy
    
    Searching for issues with /status!=resolved
    Issue: /id=issue-000 /status=new /subject=A simple Java Hello program
    Issue: /id=issue-002 /status=new /subject=Add a unit test.
    2 issues found.
    
    bash&gt; groovy scripts/issue.groovy --details /id=002
    
    Searching for issues with /id=002
    Issue: /id=issue-002
      /createdon=2012-12-16 19:10:00 /found= /from=Zemian /resolution= /status=new /type=feature
      /subject=Add a unit test.
    1 issues found.
    
    bash&gt; groovy scripts/issue.groovy --update /id=001 /status=resolved /resolution=fixed 'I fixed this thang.'
    Updating issue /id=issue-001
    Updating /status=resolved
    Updating /resolution=fixed
    
    Update issue-001 completed.
</code></pre></div></div>

<p>The script give you some quick and consistent way to create/update/search issues. But they are just plain text files! You can just as well fire up your favorite text editor and change any any thing you want. Save and even commit it into your source repository. All will not lost.</p>

<p>I hope this issue tracking script can get your next project started quickly. Let me know what you do you think!</p>

<p>Enjoy!</p>

<p>Zemian</p>

<p>And here is my <code class="language-plaintext highlighter-rouge">issue.groovy</code> script.</p>

<hr />

<p>Oh, and of course I eat my own *dog food. Here are few issues that I started to track the <code class="language-plaintext highlighter-rouge">issue.grooy</code> itself.</p>

<ul>
  <li>
    <p>v1.0.0 (2012/12/19)</p>
  </li>
  <li>
    <p><a href="https://bitbucket.org/saltnlight5/sandbox/src/tip/scripts/issue-001.md">issue-001</a></p>
  </li>
  <li>
    <p>v1.0.1 (2012/12/20)</p>
  </li>
  <li><a href="https://bitbucket.org/saltnlight5/sandbox/src/tip/scripts/issue-002.md">issue-002</a></li>
  <li><a href="https://bitbucket.org/saltnlight5/sandbox/src/tip/scripts/issue-003.md">issue-003</a></li>
</ul>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2012/12/14/getting-started-with-quartz-scheduler-on-mysql-database/">
        Getting started with Quartz Scheduler on MySQL database
      </a>
    </h1>

    <span class="post-date">14 Dec 2012</span>

    <p>Here are some simple steps to get you fully started with Quartz Scheduler on MySQL database using Groovy. The script below will allow you to quickly experiment different Quartz configuration settings using an external file.</p>

<p>First step is to setup the database with tables. Assuming you already have installed MySQL and have access to create database and tables.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bash&gt; mysql -u root -p

sql&gt; create database quartz2;
sql&gt; create user 'quartz2'@'localhost' identified by 'quartz2123';
sql&gt; grant all privileges on quartz2.* to 'quartz2'@'localhost';
sql&gt; exit;

bash&gt; mysql -u root -p quartz2 &lt; /path/to/quartz-dist/docs/dbTables/tables_mysql.sql
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">tables_mysql.sql</code> can be found from Quartz distribution download, or directly from their source <a href="http://svn.terracotta.org/svn/quartz/tags/quartz-2.1.6/docs/dbTables">here</a>.</p>

<p>Once the database is up, you need to write some code to start up the Quartz Scheduler. Here is a simply Groovy script <code class="language-plaintext highlighter-rouge">quartzServer.groovy</code> that will run as a tiny scheduler server.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
// Run Quartz Scheduler as a server
// Author: Author: Zemian Deng, date: 2012-12-15T00:00:00-05:00
@GrabConfig(systemClassLoader=true)
@Grab('mysql:mysql-connector-java:5.1.22')
@Grab('org.slf4j:slf4j-simple:1.7.1')
@Grab('org.quartz-scheduler:quartz:2.1.6')
import org.quartz.*
import org.quartz.impl.*
import org.quartz.jobs.*

config = args.length &gt; 0 ? args[0] : "quartz.properties"
scheduler = new StdSchedulerFactory(config).getScheduler()
scheduler.start()

// Register shutdown
addShutdownHook {
  scheduler.shutdown()
}

// Quartz has its own thread, so now put this script thread to sleep until
// user hit CTRL+C
while (!scheduler.isShutdown()) {
 Thread.sleep(Long.MAX_VALUE)
}
```
</code></pre></div></div>

<p>And now you just need a config file <code class="language-plaintext highlighter-rouge">quartz-mysql.properties</code> that looks like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    # Main Quartz configuration
    org.quartz.scheduler.skipUpdateCheck = true
    org.quartz.scheduler.instanceName = DatabaseScheduler
    org.quartz.scheduler.instanceId = NON_CLUSTERED
    org.quartz.scheduler.jobFactory.class = org.quartz.simpl.SimpleJobFactory
    org.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTX
    org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.StdJDBCDelegate
    org.quartz.jobStore.dataSource = quartzDataSource
    org.quartz.jobStore.tablePrefix = QRTZ_
    org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool
    org.quartz.threadPool.threadCount = 5
    
    # JobStore: JDBC jobStoreTX
    org.quartz.dataSource.quartzDataSource.driver = com.mysql.jdbc.Driver
    org.quartz.dataSource.quartzDataSource.URL = jdbc:mysql://localhost:3306/quartz2
    org.quartz.dataSource.quartzDataSource.user = quartz2
    org.quartz.dataSource.quartzDataSource.password = quartz2123
    org.quartz.dataSource.quartzDataSource.maxConnections = 8
</code></pre></div></div>

<p>You can run the Groovy script as usual</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
bash&gt; groovy quartzServer.groovy quartz-mysql.properties
Dec 15, 2012 6:20:26 PM com.mchange.v2.log.MLog 
INFO: MLog clients using java 1.4+ standard logging.
Dec 15, 2012 6:20:27 PM com.mchange.v2.c3p0.C3P0Registry banner
INFO: Initializing c3p0-0.9.1.1 [built 15-March-2007 01:32:31; debug? true; trace:10]
[main] INFO org.quartz.impl.StdSchedulerFactory - Using default implementation for ThreadExecutor
[main] INFO org.quartz.core.SchedulerSignalerImpl - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
[main] INFO org.quartz.core.QuartzScheduler - Quartz Scheduler v.2.1.6 created.
[main] INFO org.quartz.core.QuartzScheduler - JobFactory set to: org.quartz.simpl.SimpleJobFactory@1a40247
[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - Using thread monitor-based data access locking (synchronization).
[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - JobStoreTX initialized.
[main] INFO org.quartz.core.QuartzScheduler - Scheduler meta-data: Quartz Scheduler (v2.1.6) 'DatabaseScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 5 threads.
  Using job-store 'org.quartz.impl.jdbcjobstore.JobStoreTX' - which supports persistence. and is not clustered.

[main] INFO org.quartz.impl.StdSchedulerFactory - Quartz scheduler 'DatabaseScheduler' initialized from the specified file : 'quartz-mysql.properties' from the class resource path.
[main] INFO org.quartz.impl.StdSchedulerFactory - Quartz scheduler version: 2.1.6
Dec 15, 2012 6:20:27 PM com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource getPoolManager
INFO: Initializing c3p0 pool... com.mchange.v2.c3p0.ComboPooledDataSource [ acquireIncrement -&gt; 3, acquireRetryAttempts
-&gt; 30, acquireRetryDelay -&gt; 1000, autoCommitOnClose -&gt; false, automaticTestTable -&gt; null, breakAfterAcquireFailure -&gt; false, checkoutTimeout -&gt; 0, connectionCustomizerClassName -&gt; null, connectionTesterClassName -&gt; com.mchange.v2.c3p0.impl.DefaultConnectionTester, dataSourceName -&gt; 1hge16k8r18mveoq1iqtotg|1486306, debugUnreturnedConnectionStackTraces -&gt; fals
e, description -&gt; null, driverClass -&gt; com.mysql.jdbc.Driver, factoryClassLocation -&gt; null, forceIgnoreUnresolvedTransactions -&gt; false, identityToken -&gt; 1hge16k8r18mveoq1iqtotg|1486306, idleConnectionTestPeriod -&gt; 0, initialPoolSize -&gt; 3, jdbcUrl -&gt; jdbc:mysql://localhost:3306/quartz2, lastAcquisitionFailureDefaultUser -&gt; null, maxAdministrativeTaskTime -&gt; 0
, maxConnectionAge -&gt; 0, maxIdleTime -&gt; 0, maxIdleTimeExcessConnections -&gt; 0, maxPoolSize -&gt; 8, maxStatements -&gt; 0, maxStatementsPerConnection -&gt; 120, minPoolSize -&gt; 1, numHelperThreads -&gt; 3, numThreadsAwaitingCheckoutDefaultUser -&gt; 0, pref
erredTestQuery -&gt; null, properties -&gt; {user=******, password=******}, propertyCycle -&gt; 0, testConnectionOnCheckin -&gt; false, testConnectionOnCheckout -&gt; false, unreturnedConnectionTimeout -&gt; 0, usesTraditionalReflectiveProxies -&gt; false ]
[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - Freed 0 triggers from 'acquired' / 'blocked' state.[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - Recovering 0 jobs that were in-progress at the time of the last shut-down.
[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - Recovery complete.
[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - Removed 0 'complete' triggers.
[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - Removed 0 stale fired job entries.
[main] INFO org.quartz.core.QuartzScheduler - Scheduler DatabaseScheduler_$_NON_CLUSTERED started.


... CTRL+C
[Thread-6] INFO org.quartz.core.QuartzScheduler - Scheduler DatabaseScheduler_$_NON_CLUSTERED shutting down.
[Thread-6] INFO org.quartz.core.QuartzScheduler - Scheduler DatabaseScheduler_$_NON_CLUSTERED paused.
[Thread-6] INFO org.quartz.core.QuartzScheduler - Scheduler DatabaseScheduler_$_NON_CLUSTERED shutdown complete.
```
</code></pre></div></div>

<p>That’s a full run of above setup. Go ahead and play with different config. Read <a href="http://quartz-scheduler.org/documentation/quartz-2.1.x/configuration/">http://quartz-scheduler.org/documentation/quartz-2.1.x/configuration</a> for more details.</p>

<hr />

<p>Here I will post couple more easy config that will get you started in a commonly used config set.</p>

<p>A MySQL cluster enabled configuration. With this, you can start one or more shell terminal and run different instance of <code class="language-plaintext highlighter-rouge">quartzServer.groovy</code> with the same config. All the quartz scheduler instances should cluster themselve and distribute your jobs evenly.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
# Main Quartz configuration
org.quartz.scheduler.skipUpdateCheck = true
org.quartz.scheduler.instanceName = DatabaseClusteredScheduler
org.quartz.scheduler.instanceId = AUTO
org.quartz.scheduler.jobFactory.class = org.quartz.simpl.SimpleJobFactory
org.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTX
org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.StdJDBCDelegate
org.quartz.jobStore.dataSource = quartzDataSource
org.quartz.jobStore.tablePrefix = QRTZ_
org.quartz.jobStore.isClustered = true
org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool
org.quartz.threadPool.threadCount = 5

# JobStore: JDBC jobStoreTX
org.quartz.dataSource.quartzDataSource.driver = com.mysql.jdbc.Driver
org.quartz.dataSource.quartzDataSource.URL = jdbc:mysql://localhost:3306/quartz2
org.quartz.dataSource.quartzDataSource.user = quartz2
org.quartz.dataSource.quartzDataSource.password = quartz2123
org.quartz.dataSource.quartzDataSource.maxConnections = 8
```
</code></pre></div></div>

<p>Here is another config set for a simple in-memory scheduler.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>```
# Main Quartz configuration
org.quartz.scheduler.skipUpdateCheck = true
org.quartz.scheduler.instanceName = InMemoryScheduler
org.quartz.scheduler.jobFactory.class = org.quartz.simpl.SimpleJobFactory
org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool
org.quartz.threadPool.threadCount = 5
```
</code></pre></div></div>

<p>Now, if you need more fancy UI management of Quartz, give <a href="http://code.google.com/p/myschedule">MySchedule</a> a try.</p>

<p>Happy scheduling!</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2012/12/13/cygwin-tips-open-anything-with-cygstart/">
        Cygwin tips - open anything with cygstart
      </a>
    </h1>

    <span class="post-date">13 Dec 2012</span>

    <p>Cygwin has this cool command called <code class="language-plaintext highlighter-rouge">cygstart</code>, and I usually alias it as <code class="language-plaintext highlighter-rouge">open</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>alias open='cygstart'
</code></pre></div></div>

<p>Here are few things I use often:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># bring up Windows Explore with folder open
bash&gt; open /cygdrive/c/temp
bash&gt; open "$USERPROFILE"
 
# bring up browser on a url
bash&gt; open http://google.com
 
# bring up any windows program by file extension
bash&gt; open /cygdrive/c/my.docx
</code></pre></div></div>

<p>Because I use a Cygwin terminal shell a lot, I have many alias shortcuts to many different directories. The <code class="language-plaintext highlighter-rouge">open .</code> allows me to jump to any directory and starts the Windows Explore with that directory expanded quickly. You can see more options with <code class="language-plaintext highlighter-rouge">open --help</code>.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2012/12/12/a-command-to-remove-all-windows-mapped-drives/">
        A command to remove all Windows mapped drives
      </a>
    </h1>

    <span class="post-date">12 Dec 2012</span>

    <p>If you work in a Corp env and having a Laptop, you will likely go home
with it still running and it must has all the network drives still
mapped. And then later when you are at home and try to use your Laptop,
you will see considerable delay. The Windows Explore and many Windows
application that access File Browser dialog will try relentlessly in
reconnecting those drives without sucess. This also affect your Cygwin
shell too.</p>

<p>Here is a DOS command to remove them all.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C:&gt; net use * /delete /y
</code></pre></div></div>

<p>If you are in Cygwin bash, then you must quote the <code class="language-plaintext highlighter-rouge">'*'</code>.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2012/12/11/intellij-idea-is-pretty-awesome/">
        Intellij IDEA is pretty awesome!
      </a>
    </h1>

    <span class="post-date">11 Dec 2012</span>

    <p>Did you know IntelliJ IDEA has a free Community Edition you may <a href="http://www.jetbrains.com/idea/download/index.html">download</a>? I’ve been test driving it, and I will post few things I learned so far.</p>

<p>Here are few things that I usually change from out of the default installed settings.</p>

<ol>
  <li>File &gt; Settings &gt; Editor =&gt; Uncheck “Allow placement of caret after end of line” – This is the most annoying thing for me in IDE. It’s just not for me.</li>
  <li>File &gt; Settings &gt; Editor &gt; Appearance =&gt; Check “Show line numbers” – I tend to relate errors and navigate content better with line number displayed.</li>
  <li>File &gt; Settings &gt; Appearance &gt; Theme =&gt; Select “Darcula” – This is latest version 12.0 feature. Dark screen is pretty eye pleasing compare to WHITE.</li>
  <li>File &gt; Settings &gt; Compiler =&gt; Check “Make project automatically” – Another new 12.0 feature that would perform incremental compile.</li>
</ol>

<p>Now the IDE is ready for me to work on any Java projects. If you work with Maven, then you will be happy to know that IDEA supports it out of box. You can get an existing project started with following steps:</p>

<ol>
  <li>
    <p>File &gt; Import Project =&gt; Browse to your project pom.xml. Even if you have multi Maven modules, you only need to pick the top level pom.xml and it will generate the multi IDEA modules for you automatically. Then click “Ok” button.</p>
  </li>
  <li>In “Import project from external model” select “Maven”, and then “Next”.</li>
  <li>You can accept all default settings on this prompt, and simply go “Next”</li>
  <li>Check all maven project to import</li>
  <li>
    <p>Next screen is selecting a SDK for this project (meaning pick a JDK) to use. If this is your first time setup, then create a new one by click on the Grean plus icon, then browse to your JAVA_HOME directory and click OK. Click “Next” to go next step.</p>
  </li>
  <li>Simply click “Next” to accept default project name. Then you are at last prompt. Simply click “Finish” button and you should have your project ready to go.</li>
</ol>

<p>It might seems like a lot of steps to import a project, but IDEA is really nice. After your project has completely imported and compiled, you should able open any of your Java class (use CTRL+N) that has <code class="language-plaintext highlighter-rouge">main</code> method or any JUnit classes. Right click the content editor and select “Run …” to execute it (or CTRL+SHIFT+F10 to run any single unit test method).</p>

<p>I have tried a decent size Java projects (few thousand source files) and it handles it very gracefully. The UI such as Menu items, Control buttons and tool bars are very user friendly and intuitive to use. Also, right click on most places should give you a “Context” menu with related options. Like any IDE, it supports the CTRL+Space that auto complete code as you type. There is the ALT+ENTER would suggest hints on how to fix things when you got an error with red squiggle line. Pressing CTRL+B will jump into methods or variable declarations.</p>

<p>Another tips I have for you is the IDEA uses many icon symbols to represent many things. These give you quick visual status on files, progress and states of your Classes etc. It’s helpful to see what they mean using this <a href="http://www.jetbrains.com/idea/webhelp/symbols.html">http://www.jetbrains.com/idea/webhelp/symbols.html</a></p>

<p>So overall, I think IntelliJ IDEA is pretty good and awesome in many way.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2012/11/28/a-very-light-groovy-based-web-application-project-template/">
        A very light Groovy based web application project template
      </a>
    </h1>

    <span class="post-date">28 Nov 2012</span>

    <p>You might have heard of the project Grails is a Groovy version of Ruby on Rails like framework that let you create web application much more easier with
Dynamic scripting. Despite all that power Grails provided, it is not “light” if you look under the hood. I am not saying Grails is bad or anything. Grails is actually pretty cool to write web application with. However I found myself often want something even lighter and yet still want to prototype with Groovy. So here I will show you a <a href="https://bitbucket.org/saltnlight5/sandbox/downloads/maven-webapp-groovy.zip">maven-groovy-webapp</a> project template that I use to get start any web application development. It’s very simple, light, and yet very Groovy.</p>

<h1 id="how-to-get-started">How to get started</h1>

<p>Unzip <code class="language-plaintext highlighter-rouge">maven-webapp-groovy.zip</code> above and you should see these few files:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    bash&gt; cd maven-webapp-groovy
    bash&gt; find .
    bash&gt; ./pom.xml
    bash&gt; ./README.txt
    bash&gt; ./src
    bash&gt; ./src/main
    bash&gt; ./src/main/java
    bash&gt; ./src/main/java/deng
    bash&gt; ./src/main/java/deng/GroovyContextListener.java
    bash&gt; ./src/main/resources
    bash&gt; ./src/main/resources/log4j.properties
    bash&gt; ./src/main/webapp
    bash&gt; ./src/main/webapp/console.gt
    bash&gt; ./src/main/webapp/health.gt
    bash&gt; ./src/main/webapp/home.gt
    bash&gt; ./src/main/webapp/WEB-INF
    bash&gt; ./src/main/webapp/WEB-INF/classes
    bash&gt; ./src/main/webapp/WEB-INF/classes/.keep
    bash&gt; ./src/main/webapp/WEB-INF/groovy
    bash&gt; ./src/main/webapp/WEB-INF/groovy/console.groovy
    bash&gt; ./src/main/webapp/WEB-INF/groovy/health.groovy
    bash&gt; ./src/main/webapp/WEB-INF/groovy/home.groovy
    bash&gt; ./src/main/webapp/WEB-INF/groovy/init.groovy
    bash&gt; ./src/main/webapp/WEB-INF/groovy/destroy.groovy
    bash&gt; ./src/main/webapp/WEB-INF/web.xml
</code></pre></div></div>

<p>As you can see it’s a maven based application, and I have configured tomcat plugin, so you may run it like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bash&gt; mvn tomcat7:run
bash&gt; open http://localhost:8080/maven-webapp-groovy/home.groovy
</code></pre></div></div>

<p>And ofcourse, with maven, running package phase will let you deploy it into any real application servers when ready.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bash&gt; mvn package
bash&gt; cp target/maven-webapp-groovy.war $APP_SERVER_HOME/autodeploy
</code></pre></div></div>

<h1 id="whats-in-it">What’s in it</h1>

<p>You should checkout the main config in <code class="language-plaintext highlighter-rouge">web.xml</code> file, and you’ll see that there couple built-in Groovy servlets and a custom listener.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    &lt;?xml version="1.0"?&gt;
    &lt;web-app xmlns="http://java.sun.com/xml/ns/javaee"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
            version="2.5"&gt;
    
        &lt;description&gt;Groovy Web Application&lt;/description&gt;
        &lt;welcome-file-list&gt;
            &lt;welcome-file&gt;home.groovy&lt;/welcome-file&gt;
        &lt;/welcome-file-list&gt;
    
        &lt;servlet&gt;
            &lt;servlet-name&gt;GroovyServlet&lt;/servlet-name&gt;
            &lt;servlet-class&gt;groovy.servlet.GroovyServlet&lt;/servlet-class&gt;
        &lt;/servlet&gt;
        &lt;servlet-mapping&gt;
            &lt;servlet-name&gt;GroovyServlet&lt;/servlet-name&gt;
            &lt;url-pattern&gt;*.groovy&lt;/url-pattern&gt;
        &lt;/servlet-mapping&gt;
    
        &lt;servlet&gt;
            &lt;servlet-name&gt;TemplateServlet&lt;/servlet-name&gt;
            &lt;servlet-class&gt;groovy.servlet.TemplateServlet&lt;/servlet-class&gt;
        &lt;/servlet&gt;
        &lt;servlet-mapping&gt;
            &lt;servlet-name&gt;TemplateServlet&lt;/servlet-name&gt;
            &lt;url-pattern&gt;*.gt&lt;/url-pattern&gt;
        &lt;/servlet-mapping&gt;
    
        &lt;listener&gt;
            &lt;listener-class&gt;deng.GroovyContextListener&lt;/listener-class&gt;
        &lt;/listener&gt;
        &lt;context-param&gt;  
           &lt;param-name&gt;initScripts&lt;/param-name&gt;
           &lt;param-value&gt;/WEB-INF/groovy/init.groovy&lt;/param-value&gt;
        &lt;/context-param&gt;
        &lt;context-param&gt;    
           &lt;param-name&gt;destroyScripts&lt;/param-name&gt;
           &lt;param-value&gt;/WEB-INF/groovy/destroy.groovy&lt;/param-value&gt;
        &lt;/context-param&gt;
    
    &lt;/web-app&gt;
</code></pre></div></div>

<p>I’ve chosen to use <code class="language-plaintext highlighter-rouge">GroovyServlet</code> as a controller (it comes with Groovy!), and this let you use any scripts inside <code class="language-plaintext highlighter-rouge">/WEB-INF/groovy</code> directory. That’s it, no further setup. That’s about the only requirement you need to get a Groovy webapp started! See <code class="language-plaintext highlighter-rouge">console.groovy</code> as example and how it works. It’s a groovy version of <a href="http://saltnlight5.blogspot.com/2012/07/script-console-tool-for-any-war.html">this JVM console</a></p>

<p>Now you can use Groovy to process any logic and even generate the HTML output if you like, but I find it even more easier to use <code class="language-plaintext highlighter-rouge">TemplateServlet</code>. This allow Groovy template files to be serve as view. It’s very much like JSP, but it uses Groovy instead! And we know Groovy syntax are much shorter to write! See <code class="language-plaintext highlighter-rouge">console.gt</code> as exmaple and how it works.</p>

<p>The <code class="language-plaintext highlighter-rouge">GroovyContextListener</code> is something I wrote, and it’s optional. This allow you to run any scripts during the webapp startup or shutdown states. I’ve created an empty <code class="language-plaintext highlighter-rouge">init.groovy</code> and <code class="language-plaintext highlighter-rouge">destroy.groovy</code> placeholder. So now you have all the hooks you need to prototype just about any web application you need.</p>

<h1 id="simplicity-wins">Simplicity wins</h1>

<p>This setup is just plain Java Servlet with Groovy loaded. I often think the more simple you get, then less bug and faster you code. No heavy frameworks, no extra learning curve, (other than basic Servlet API and Groovy/Java skills ofcourse), and off you go.</p>

<p>Go have fun with this Groovy webapp template! And let me know if you have some cool prototypes to show off after playing with this. :)</p>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="http://localhost:4000/page23">Older</a>
  
  
    
      <a class="pagination-item newer" href="http://localhost:4000/page21">Newer</a>
    
  
</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script src='/public/js/script.js'></script>
  </body>
</html>
