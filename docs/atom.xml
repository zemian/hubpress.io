<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

 <title>Zemian's Blog</title>
 <link href="http://localhost:4000/atom.xml" rel="self"/>
 <link href="http://localhost:4000/"/>
 <updated>2020-09-22T22:10:16-04:00</updated>
 <id>http://localhost:4000</id>
 <author>
   <name>Zemian Deng</name>
   <email></email>
 </author>

 
 <entry>
   <title>The World of PHP Development</title>
   <link href="http://localhost:4000/2020/09/20/world-of-php/"/>
   <updated>2020-09-20T01:00:00-04:00</updated>
   <id>http://localhost:4000/2020/09/20/world-of-php</id>
   <content type="html">&lt;p&gt;I have gotten into PHP lately in order to help a friend who runs a Joomla site with a custom component. Thinking to myself now that I have some &lt;a href=&quot;/2020/03/22/front-end&quot;&gt;Front End Experience&lt;/a&gt;, I shouldn’t have trouble doing this. But I have never seriuosly got into PHP in the past though, and now I need to learn enough to debug and fix few bugs in the Joomla env. I have gathered and learned quite a few things and like to write it down.&lt;/p&gt;

&lt;h2 id=&quot;learning-php&quot;&gt;Learning PHP&lt;/h2&gt;

&lt;p&gt;I started &lt;a href=&quot;https://github.com/zemian/learn-php&quot;&gt;Learn PHP&lt;/a&gt; repository to familiar with PHP first. I want to setup PHP locally in my machine so I can learn some syntax and programming construct. I was suprised their documentation is pretty good. I even watched a old video on &lt;a href=&quot;https://www.youtube.com/watch?v=rKXFgWP-2xQ&quot;&gt;PHP in 2018 by the Creator of PHP&lt;/a&gt; by Rasmus Lerdorf. It was very informative and encouraging to see PHP is still thriving and doing good.&lt;/p&gt;

&lt;p&gt;PHP is not much use without a database and a web server, so I learned how to setup and connect PHP to those two. It seems PHP loves MySQL, and getting that running is pretty easy. As far as web server, there are few major ones to choose: Apache Httpd, Nginx or Lighttpd. The Lighttpd is the easiest to setup. I like it how I can just use one config file and bring up the server in foreground process, and the DocumentRoot can be set to your CWD. No need to setup any background PHP daemon process (like Nginx requires one). Apache Httpd can also start without a PHP daemon but the setup is complicated. Then later I learned that PHP itself comes with a web server for development! Just run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;php -S localhost:3000&lt;/code&gt; and it serves your current working directory. No setup needed! Sweet!&lt;/p&gt;

&lt;p&gt;NOTE: For production, it’s recommended to use either Apache Httpd or Nginx.&lt;/p&gt;

&lt;p&gt;Later, I also found there are different versions of PHP that I would need to fix the site, and settting up multiple versions of PHP in a single web server is pretty complicated. I gathered a lot of notes on each of these subject in my repository, so check it out.&lt;/p&gt;

&lt;h2 id=&quot;learning-joomla&quot;&gt;Learning Joomla&lt;/h2&gt;

&lt;p&gt;My goal is to help my friend’s site, so next I started &lt;a href=&quot;https://github.com/zemian/learn-joomla&quot;&gt;Learn Joomla&lt;/a&gt; project. My friend site is actually quite old (Joomla 3.5.1 with PHP 5.6 and MySQL 5.7). Because of this and the PHP was compiled with some special extension in server, I actually had hard time setting it up in my Mac for local development. I ended up had to compile my own PHP from source to get a setup working! It was a painful exercise since compiling PHP 5.6 on latest MacOS has many hiccups.&lt;/p&gt;

&lt;p&gt;Once the environment is up, installing Joomla itself is not too bad. I got it up running in short time. Joomla documentation site is only so so though. I think this CMS design is overly complex. Their concept of Menus, Articles and Extensions are confusing, feel bulky and a lot to learn. A simple MVC based component extension will take over 10+ files to write! I just want to learn enough to use it to support a site, not experts, so this repository have gotten me through what I need to know about Joomla.&lt;/p&gt;

&lt;p&gt;One interesting I learned about Joomla is that its “System Debug” feature is pretty good. When enabled, it shows a “Debug Console” footer in your site that shows session, request, SQL queries and application debug messages. Great tool to debug the application. (If your site or component uses their full MVC model that is.)&lt;/p&gt;

&lt;h2 id=&quot;fixing-a-php-application&quot;&gt;Fixing a PHP application&lt;/h2&gt;

&lt;p&gt;When I got into my friend’s site, I had a pretty good idea about the PHP env. So I thought I was pretty prepared. Boy, I was wrong! The site has a custom component that started out as nice self-contained extension. But through many years of abuse, it is now old with many unmaintained dependencies. It has many developers touched it over the years without any consistency. The code was badly formatted (PHP mixed with HTML in the worse way you can think of), files scattered everywhere, and worse of it all there are lots of repeated codes. Through all these, there were no version control used. So dead code eveywhere, and backup unused files literred all over the place. This is a one big mess of an app.&lt;/p&gt;

&lt;p&gt;Prowling through large, new code base is a daunting task. I’ve found the JetBrains’ PHPStorm IDE helps a little bit there. I was able to jump functions and searching in directory is a breeze. The IDE also supports PHP debugger, but unfortunately it only works with latest PHP7 well. The PHP 5.6 is harder to get it setup that in the end I gave up.&lt;/p&gt;

&lt;p&gt;Without a debugger, the next resort in debugging an app is print message as you trace through code. The PHP is notoriously easy to allow developers litter code with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;echo&lt;/code&gt; lines and then comment it out after debug. The Joomla actually has a nice &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;JLog&lt;/code&gt; logging function that let you dynamically turns on/off and to file output. But this application that I am supporting didn’t use that, and there is zero log message. I also learned that logging to file is essential when tracing a AJAX supported PHP code. Here you can’t simply &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;echo&lt;/code&gt; your debug message out, or it will break the JSON payload. So I have to write some of these debugging code to help myself to troubleshoot the application.&lt;/p&gt;

&lt;p&gt;At the end, I was able to fix few of the pressing issues due to their multiple version of jQuery loading conflicts and some bad SQL in their dynamic query builder. I have to say that nothing teaches you more than jumping into a badly coded site that’s somehow working, and yet you need to fix few naughty issues! It’s a hair pulling experience, but I learned a lot.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to Load Multiple jQuery</title>
   <link href="http://localhost:4000/2020/09/19/multiple-jquery/"/>
   <updated>2020-09-19T01:00:00-04:00</updated>
   <id>http://localhost:4000/2020/09/19/multiple-jquery</id>
   <content type="html">&lt;p&gt;Sometimes, your site might need to load mulitple versions of jQuery to support some legacy libraries. Here I will provide two ways to do that.&lt;/p&gt;

&lt;h2 id=&quot;using-plain-htmljs&quot;&gt;Using plain HTML/JS&lt;/h2&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;https://unpkg.com/jquery@3.5.1/dist/jquery.js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/script&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;jq3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;jQuery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;noConflict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/script&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;https://unpkg.com/jquery@1.12.4/dist/jquery.js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/script&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;jq1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;jQuery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;noConflict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/script&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Now we can use each jQuery with the name assigned.&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;jQuery 3 version &lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;jq3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;jquery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;jQuery 1 version &lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;jq1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;jquery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;jQuery 3 document &lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;jq3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;jQuery 1 document &lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;jq1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/script&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE: You need to call &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;noConflict()&lt;/code&gt; immediately after the script tag load of the jQuery. If you are dealing with multiple jQuery, it’s best not to use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$&lt;/code&gt; global variable to avoid confusion.&lt;/p&gt;

&lt;h2 id=&quot;using-requirejs&quot;&gt;Using RequireJS&lt;/h2&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;https://unpkg.com/requirejs@2.3.6/require.js&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/script&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;define&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;jq3&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;https://unpkg.com/jquery@3.5.1/dist/jquery&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;jQuery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;noConflict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;define&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;jq1&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;https://unpkg.com/jquery@1.12.4/dist/jquery&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;jQuery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;noConflict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

	&lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;jq3&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;jq1&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;jq3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;jq1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;jq3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;jQuery 3 version &lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;jq3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;jquery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;jQuery 1 version &lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;jq1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;jquery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

		&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;jQuery 3 document &lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;jq3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;jQuery 1 document &lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;jq1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/script&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE: Do not load multiple versions of jQuery through the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;paths&lt;/code&gt; inside &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;requirejs.config()&lt;/code&gt; method. As that will automatically bind the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jquery&lt;/code&gt; module name and you can’t change that.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Switched Blogging to VuePress</title>
   <link href="http://localhost:4000/2020/08/15/switched-to-vuepress/"/>
   <updated>2020-08-15T01:00:00-04:00</updated>
   <id>http://localhost:4000/2020/08/15/switched-to-vuepress</id>
   <content type="html">&lt;p&gt;I have switched my blog publishing source from &lt;a href=&quot;https://github.com/zemian/zemian.github.io/tree/jbake&quot;&gt;jbake&lt;/a&gt; to &lt;a href=&quot;https://github.com/zemian/zemian.github.io/tree/master&quot;&gt;vuepress&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;When I started with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jbake&lt;/code&gt;, I used &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;asccidoc&lt;/code&gt; format for post content, then I come to learn that Markdown is much easier to write for my need. I usually just need to write few lines of thoughts and code examples. Markdown suited me just fine. I also have been learning and using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;JavaScript&lt;/code&gt; development a lot lately, so I decided to use a JS based site generator. I spent some time learning &lt;a href=&quot;https://github.com/zemian/cms-eval/tree/master/learn-vuepress&quot;&gt;VuePress&lt;/a&gt; and find it very promising, so I decided to switch.&lt;/p&gt;

&lt;p&gt;To switch to it, I had to convert my &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;asciidoc&lt;/code&gt; posts into Markdown format, and then I have to take care of the frontmatter metadata keys. Another area I needed was to move the posts files into different folders for better file organization. Then I also took the chance to cleanup many bad posts formatting along the way.&lt;/p&gt;

&lt;p&gt;Recently I also have been teaching my son, Kenny, on learning &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;JavaScript&lt;/code&gt; programming, and I thought this is perfect chance to put some of his learning in to practical use. He actually helped me convert all the post files by writing some &lt;a href=&quot;https://github.com/zemian/zemian.github.io/pull/2&quot;&gt;utility scripts&lt;/a&gt;. He also got to use GitHub and Pull Request the for the first time!&lt;/p&gt;

&lt;p&gt;Thanks to Kenny, here we have a before and after blog screenshots!&lt;/p&gt;

&lt;p&gt;Before - Blog with JBake:
&lt;img src=&quot;/images/posts/2020/blog-jbake.png&quot; alt=&quot;&quot; title=&quot;Before - Blog with JBake&quot; /&gt;&lt;/p&gt;

&lt;p&gt;After - Blog with VuePress:
&lt;img src=&quot;/images/posts/2020/blog-vuepress.png&quot; alt=&quot;&quot; title=&quot;After - Blog with VuePress&quot; /&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Oracle JET 9 Released</title>
   <link href="http://localhost:4000/2020/08/09/ojet9-release/"/>
   <updated>2020-08-09T01:00:00-04:00</updated>
   <id>http://localhost:4000/2020/08/09/ojet9-release</id>
   <content type="html">&lt;p&gt;The Oracle JET 9 has been release short while ago. This release is a major release compare to version 8. The most noticable thing is their new &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;redwood&lt;/code&gt; theme is the default when you generate a new project now. The old &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;alta&lt;/code&gt; theme is still there, but you need to opt in
to get it. Their &lt;a href=&quot;https://www.oracle.com/webfolder/technetwork/jet/jetCookbook.html&quot;&gt;cookbook&lt;/a&gt; has been updated to use this “Redwood” themme. So check it out!&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.oracle.com/webfolder/technetwork/jet/index.html?_ojCoreRouter=releasenotes&quot;&gt;Release notes&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.oracle.com/en/middleware/developer-tools/jet/9/reference-api/index.html&quot;&gt;API Doc&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.oracle.com/en/middleware/developer-tools/jet/9/develop/index.html&quot;&gt;Developer Guide&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Back To GitHub</title>
   <link href="http://localhost:4000/2020/08/01/move-back-to-github/"/>
   <updated>2020-08-01T01:00:00-04:00</updated>
   <id>http://localhost:4000/2020/08/01/move-back-to-github</id>
   <content type="html">&lt;p&gt;Okay, I tried &lt;a href=&quot;https://medium.com/@zemiandeng&quot;&gt;Medium Blogging&lt;/a&gt;, but still not very satisfied. So
now I am back on GitHub. I am currently &lt;a href=&quot;https://github.com/zemian/cms-eval&quot;&gt;evaluating other CMS tools&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Exploring More on RequireJS</title>
   <link href="http://localhost:4000/2020/04/22/more-on-requirejs/"/>
   <updated>2020-04-22T01:00:00-04:00</updated>
   <id>http://localhost:4000/2020/04/22/more-on-requirejs</id>
   <content type="html">&lt;h2 id=&quot;configuring-requirejs&quot;&gt;Configuring RequireJS&lt;/h2&gt;

&lt;p&gt;You can use either &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;requirejs.config()&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;require.config()&lt;/code&gt; to setup RequireJS. I preferred the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;requirejs.config()&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;require()&lt;/code&gt; to load modules just so to give them some distinction on usage. A typical config usage is like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;requirejs.config({
    baseUrl: &quot;js/&quot;,
    paths: {
        'foo': 'path/foo',
        'bar': 'path/bar',
    }
});
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can actually run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;requirejs.config()&lt;/code&gt; multiple times! Most of the options will be appended together. But the last &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;baseUrl&lt;/code&gt; will override all.&lt;/p&gt;

&lt;h2 id=&quot;use-shim-for-library-that-has-no-amd-support&quot;&gt;Use Shim for Library that has no AMD support&lt;/h2&gt;

&lt;p&gt;If you are loading a library (eg: CKEDITOR4), then you need to work with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;shim&lt;/code&gt; because it expose a global variable named CKEDITOR. Examples:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;requirejs.config({
    paths: {
        ckeditor: 'https://cdn.jsdelivr.net/npm/ckeditor4@4.14.0/ckeditor'
    },
    shims: {
        ckeditor: {
            exports: 'CKEDITOR'
        }
    }
});
require(['ckeditor'], () =&amp;gt; {
    // Notice that CKEDITOR variable is automatically available due to our shims' export.
    CKEDITOR.replace('editor', {width: '100%', height: '85%'});
});
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;writing-modules&quot;&gt;Writing Modules&lt;/h2&gt;

&lt;p&gt;It’s recommended you don’t explicitly name your module, but simply let your filename be the module name. Example:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;//file: mymodule.js
define('mymodule', [], function() {
    return {
        uniqueId() {
            return Math.random().toString(16).substring(2);
        }
    }
});
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can create many internal functions and variable you want and they do need to be all returned (or exported). Another popular export data is simply the JS function constructor. Example:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;//file: MyService.js
define(['mylib', function(mylib) {
  function MyService () {
    // ... define your service here.
    // note that 'mylib' is loaded and availabe to use here.
  }
  return MyService;
});require(['MyService'], (MyService) =&amp;gt; {
  let service = new MyService();
  // Use service here...
});
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;loading-modules&quot;&gt;Loading Modules&lt;/h2&gt;

&lt;p&gt;You should know that when you use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;require()&lt;/code&gt; to load modules, they are all loaded asynchronously, and all the dependency are loaded accordingly in the proper order!&lt;/p&gt;

&lt;p&gt;You can configure RequireJS with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;paths&lt;/code&gt; that setup hundreds of ready to use libraries, but if you don’t invoke &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;require()&lt;/code&gt;, it will not be loaded into your browser at runtime!&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;require()&lt;/code&gt; can be use anywhere in your HTML script code. One popular way to organize the code is that you place your application entry file (usually named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main.js&lt;/code&gt;) with entry point of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;require()&lt;/code&gt; to start your application. Then you can load it in browser like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;script data-main=&quot;main&quot; src=&quot;https://unpkg.com/requirejs@2.3.6/require.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.js&lt;/code&gt; is optional when you use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;data-main&lt;/code&gt; attribute. Above can also be loaded in your old fashion way like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;script src=&quot;https://unpkg.com/requirejs@2.3.6/require.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;script src=&quot;main.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;troubleshooting-tips&quot;&gt;Troubleshooting Tips&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;The usage and syntax of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;require()&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;define()&lt;/code&gt; is the same, so ensure you use the correct one! Using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;define()&lt;/code&gt; instead of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;require()&lt;/code&gt; will obviously fail your application, but the error might not be so straight forward.&lt;/li&gt;
  &lt;li&gt;RequireJS loads modules in relative to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;baseUrl&lt;/code&gt; path value setup in your config options. Ensure the value it’s loaded properly. Especially if you are using relative path. It default value is relative to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.html&lt;/code&gt; file where you include the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;require.js&lt;/code&gt; file in script tag. Triple check this if you see error not able to find your modules.&lt;/li&gt;
  &lt;li&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;paths&lt;/code&gt; configuration option accept value of module with out &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.js&lt;/code&gt; extension! If you include it, it will fail to find your module.&lt;/li&gt;
  &lt;li&gt;If you have large modules that you use all of the time. Try reduce the number of dependency modules your user need to import by writing a wrapper module.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;When loading large dependency module list, use a consistent formatting to help. Also, ensure you match up your array of dependency module names with the function callback parameters correctly. Else you get all sort of weird errors. For example:&lt;/p&gt;

    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;require(['mymodulelib',
  'mymodulelib2',
  'mymodulelib3',
  'mymodulelib4',
  'mymodulelib5'
], function(lib, lib2, lib3) {// write your module here...});
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</content>
 </entry>
 
 <entry>
   <title>VueJS Examples With Oracle JET</title>
   <link href="http://localhost:4000/2020/04/20/vue-exmaples-implemented-in-ojet/"/>
   <updated>2020-04-20T01:00:00-04:00</updated>
   <id>http://localhost:4000/2020/04/20/vue-exmaples-implemented-in-ojet</id>
   <content type="html">&lt;p&gt;I like some of the &lt;a href=&quot;https://vuejs.org/v2/examples/&quot;&gt;examples show cased from VueJS&lt;/a&gt;. I have re-implemented some of them using Oracle JET framework instead of VueJS. This proved to be a very good learning exercise.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://github.com/zemian/oraclejet-for-vuejs-examples&quot;&gt;oraclejet-for-vuejs-examples&lt;/a&gt; for details:&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>JS Object To JSON Converter</title>
   <link href="http://localhost:4000/2020/04/19/js-object-to-json/"/>
   <updated>2020-04-19T01:00:00-04:00</updated>
   <id>http://localhost:4000/2020/04/19/js-object-to-json</id>
   <content type="html">&lt;p&gt;Wrote a &lt;a href=&quot;https://raw.githack.com/zemian/html-starter/master/tools/js-to-json.html&quot;&gt;tiny JSON converter&lt;/a&gt; that you can check it out!&lt;/p&gt;

&lt;p&gt;The source is &lt;a href=&quot;https://github.com/zemian/html-starter/blob/master/tools/js-to-json.html&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Hello VueJS</title>
   <link href="http://localhost:4000/2020/04/18/hello-vuejs/"/>
   <updated>2020-04-18T01:00:00-04:00</updated>
   <id>http://localhost:4000/2020/04/18/hello-vuejs</id>
   <content type="html">&lt;p&gt;I like &lt;a href=&quot;http://vuejs.org/&quot;&gt;VueJS&lt;/a&gt; because it’s similar to &lt;a href=&quot;hello-knockout.md&quot;&gt;KnockoutJS&lt;/a&gt; that I am familiar with. The VueJS has much more modern feel and the code is a lot more smoother compare to the KnockoutJS. One big difference is KO uses the Observable object to bind reactive properties, while in VueJS it can be treated as normal JS properties.&lt;/p&gt;

&lt;p&gt;Get started on &lt;a href=&quot;https://vuejs.org/&quot;&gt;VueJS&lt;/a&gt; with single JS script.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;div id=&quot;app&quot;&amp;gt;
    &amp;lt;span v-text=&quot;message&quot;&amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/div&amp;gt;

&amp;lt;script src=&quot;https://unpkg.com/vue@2.6.11/dist/vue.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;script&amp;gt;
    let app = new Vue({
        data: {
            message: &quot;Hello&quot;
        }
    });
    app.$mount(&quot;#app&quot;);
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you run this in browser, you should see “Hello”. Then open the Developer Console and change the model like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;app.message = &quot;Hello VueJS&quot;;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And the browser updates immediately!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Hello RequiredJS</title>
   <link href="http://localhost:4000/2020/04/18/hello-requirejs/"/>
   <updated>2020-04-18T01:00:00-04:00</updated>
   <id>http://localhost:4000/2020/04/18/hello-requirejs</id>
   <content type="html">&lt;p&gt;The &lt;a href=&quot;https://requirejs.org/&quot;&gt;RequiredJS&lt;/a&gt; is a JavaScript library that helps you separate your code into modules as namespaces, and it helps to load them as dependencies when need it. Here is a simple html demo:&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;app&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    Hi
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;https://unpkg.com/requirejs@2.3.6/require.js&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;script&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;define&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;mymodule&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;uniqueId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;substring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;mymodule&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;my&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;Generating a uniqueId=&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;my&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;uniqueId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;output&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;querySelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;#app&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;innerHTML&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;`Hello RequireJS - &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;requirejs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The RequireJS only introduces three variables you need to learn to use it effectively: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;define&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;require&lt;/code&gt;, and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;requirejs&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;You use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;define()&lt;/code&gt; function to write your own modules. Many JS libraries out there already supporting RequireJS as module, so you can just simply include them in your application! When writing your own module, you usually would store one module per single JS file. If you do that, then the name of the module would simply be the filename, without you having to explicitly named as above example. When writing the module, you may load other modules that you depend on. In our example case above, we do not need any, hence it has an empty array as 2nd parameter. Your module code should wrap inside a function as last parameter. Any object you return from module function, it is exported as module data for caller to consume or load it.&lt;/p&gt;

&lt;p&gt;You use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;require()&lt;/code&gt; function to load modules that you want to use in your application. Each module imported may be assigned to a parameter variable in the callback function parameters as in example above. Note that sometimes you might load a module without assigning variable for direct use. In this case, the loading of the module is all you care/need. Note also that the order of your module array should match to the call back function parameter list.&lt;/p&gt;

&lt;p&gt;There are many configuration options you may setup the RequireJS, and that’s when you use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;requirejs.config()&lt;/code&gt; function. For example you may configure paths to where to look for other external libraries such KnockoutJS like this:&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;requirejs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
	&lt;span class=&quot;na&quot;&gt;paths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;knockout&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;https://unpkg.com/knockout@3.5.1/build/output/knockout-latest&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;knockout&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ko&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nx&quot;&gt;ko&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;applyBindings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;Hello&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice that the path to knockout module is without the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.js&lt;/code&gt; extension!&lt;/p&gt;

&lt;p&gt;The RequireJS is great for writing larger JS application. Modules help you avoid names clash, and it helps break down code into a manageable files.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Hello BulmaCSS</title>
   <link href="http://localhost:4000/2020/04/18/hello-bulma/"/>
   <updated>2020-04-18T01:00:00-04:00</updated>
   <id>http://localhost:4000/2020/04/18/hello-bulma</id>
   <content type="html">&lt;p&gt;The &lt;a href=&quot;https://bulma.io/&quot;&gt;Bulma CSS&lt;/a&gt; library is a very nice project with work with. It’s small and has enough features to style just about any thing you want on the web. The Bulma is a pure CSS library and has no JS dependency! I like this minimalist approach to things.&lt;/p&gt;

&lt;p&gt;Here is a small hello world example that gets you stared. It gives you a nice clean reset of HTML document and you may start style your world away.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/bulma@0.8.1/css/bulma.css&quot;&amp;gt;

&amp;lt;div class=&quot;container&quot;&amp;gt;
    Hello World!
&amp;lt;/div&amp;gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is how a table looks like in Bulma:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;table class=&quot;table is-fullwidth&quot;&amp;gt;
    &amp;lt;thead&amp;gt;
    &amp;lt;tr&amp;gt;
        &amp;lt;th&amp;gt;One&amp;lt;/th&amp;gt;
        &amp;lt;th&amp;gt;Two&amp;lt;/th&amp;gt;
        &amp;lt;th&amp;gt;Three&amp;lt;/th&amp;gt;
        &amp;lt;th&amp;gt;Four&amp;lt;/th&amp;gt;
        &amp;lt;th&amp;gt;Five&amp;lt;/th&amp;gt;
    &amp;lt;/tr&amp;gt;
    &amp;lt;/thead&amp;gt;
    &amp;lt;tbody&amp;gt;
    &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;1&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;2&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;3&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;4&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;5&amp;lt;/td&amp;gt;
    &amp;lt;/tr&amp;gt;
    &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;1b&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;2b&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;3b&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;4b&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;5b&amp;lt;/td&amp;gt;
    &amp;lt;/tr&amp;gt;
    &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;1c&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;2c&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;3c&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;4c&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;5c&amp;lt;/td&amp;gt;
    &amp;lt;/tr&amp;gt;
    &amp;lt;/tbody&amp;gt;
&amp;lt;/table&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2020/bulma1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;And here is a quick form:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;div class=&quot;field&quot;&amp;gt;
    &amp;lt;label class=&quot;label&quot;&amp;gt;Name&amp;lt;/label&amp;gt;
    &amp;lt;div class=&quot;control&quot;&amp;gt;
        &amp;lt;input class=&quot;input&quot; type=&quot;text&quot; placeholder=&quot;e.g Alex Smith&quot;&amp;gt;
    &amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;&amp;lt;div class=&quot;field&quot;&amp;gt;
    &amp;lt;label class=&quot;label&quot;&amp;gt;Email&amp;lt;/label&amp;gt;
    &amp;lt;div class=&quot;control&quot;&amp;gt;
        &amp;lt;input class=&quot;input&quot; type=&quot;email&quot; placeholder=&quot;e.g. alexsmith@gmail.com&quot;&amp;gt;
    &amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2020/bulma2.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Add buttons!&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;div class=&quot;buttons&quot;&amp;gt;
  &amp;lt;button class=&quot;button is-primary&quot;&amp;gt;Primary&amp;lt;/button&amp;gt;
  &amp;lt;button class=&quot;button is-link&quot;&amp;gt;Link&amp;lt;/button&amp;gt;
&amp;lt;/div&amp;gt;

&amp;lt;div class=&quot;buttons&quot;&amp;gt;
  &amp;lt;button class=&quot;button is-info&quot;&amp;gt;Info&amp;lt;/button&amp;gt;
  &amp;lt;button class=&quot;button is-success&quot;&amp;gt;Success&amp;lt;/button&amp;gt;
  &amp;lt;button class=&quot;button is-warning&quot;&amp;gt;Warning&amp;lt;/button&amp;gt;
  &amp;lt;button class=&quot;button is-danger&quot;&amp;gt;Danger&amp;lt;/button&amp;gt;
&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2020/bulma3.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Setup Oracle JET With Public CDN</title>
   <link href="http://localhost:4000/2020/04/17/public-cdn-for-ojet/"/>
   <updated>2020-04-17T01:00:00-04:00</updated>
   <id>http://localhost:4000/2020/04/17/public-cdn-for-ojet</id>
   <content type="html">&lt;p&gt;A new Oracle &lt;a href=&quot;https://www.npmjs.com/package/@oracle/oraclejet/v/8.2.0&quot;&gt;JET 8.2.0&lt;/a&gt; just released! Good time to give you another tips on how to use the toolkit.&lt;/p&gt;

&lt;p&gt;You might have noticed that Oracle JET is published under NPM package, and hence you may get it through any CDN network that serve NPM packages directly. A popular one for developer is UNPKG.com. So here I will create a simple ClickCount application that uses external public CDN.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;div id=&quot;app&quot; class=&quot;oj-web-padding&quot;&amp;gt;
    Count: &amp;lt;oj-bind-text value=&quot;[[count]]&quot;&amp;gt;&amp;lt;/oj-bind-text&amp;gt;
    &amp;lt;oj-button on-oj-action=&quot;[[onClick]]&quot;&amp;gt;Click&amp;lt;/oj-button&amp;gt;
&amp;lt;/div&amp;gt;

&amp;lt;link href=&quot;https://unpkg.com/@oracle/oraclejet@8.2.0/dist/css/alta/oj-alta-min.css&quot; rel=&quot;stylesheet&quot;&amp;gt;
&amp;lt;script src=&quot;https://unpkg.com/requirejs@2.3.6/require.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;script&amp;gt;
    requirejs.config({
        paths: {
            'text': 'https://unpkg.com/requirejs-text@2.0.15/text',
            'css': 'https://unpkg.com/require-css@0.1.10/css',
            'jquery': 'https://unpkg.com/jquery@3.4.1/dist/jquery',
            'knockout': 'https://unpkg.com/knockout@3.5.1/build/output/knockout-latest',
            'promise': 'https://unpkg.com/es6-promise@4.2.8/dist/es6-promise.auto.min',
            'signals': 'https://www.unpkg.com/signals@1.0.0/dist/signals.min',
            'customElements': 'https://unpkg.com/@webcomponents/custom-elements@1.2.0/custom-elements.min',
            'jqueryui-amd': 'https://www.unpkg.com/jquery-ui@1.12.1/ui',
            'hammerjs': 'https://www.unpkg.com/hammerjs@2.0.8/hammer.min',
            'ojs': 'https://unpkg.com/@oracle/oraclejet@8.2.0/dist/js/libs/oj/min',
            'ojL10n': 'https://unpkg.com/@oracle/oraclejet@8.2.0/dist/js/libs/oj/ojL10n',
            'ojtranslations': 'https://unpkg.com/@oracle/oraclejet@8.2.0/dist/js/libs/oj/resources',
            'ojdnd': 'https://unpkg.com/@oracle/oraclejet@8.2.0/dist/js/libs/dnd-polyfill/dnd-polyfill-1.0.1.min',
            'touchr': 'https://unpkg.com/@oracle/oraclejet@8.2.0/dist/js/libs/touchr/touchr',
        }
    });

    require(['knockout', 'ojs/ojknockout', 'ojs/ojbutton'], (ko) =&amp;gt; {
        let app = new function () {
            this.count = ko.observable(0);
            this.onClick = () =&amp;gt; {
                this.count(this.count() + 1);
            };
        };
        ko.applyBindings(app);
    });
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Compare this to the &lt;a href=&quot;https://medium.com/@zemiandeng/hello-ojet-b750c7acf6bc&quot;&gt;Hello OJET&lt;/a&gt; I have shown in previous post, this is just a single html file. This is great for quick exploration and demo!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Hello KnockoutJS</title>
   <link href="http://localhost:4000/2020/04/07/hello-knockout/"/>
   <updated>2020-04-07T01:00:00-04:00</updated>
   <id>http://localhost:4000/2020/04/07/hello-knockout</id>
   <content type="html">&lt;p&gt;One cool thing about &lt;a href=&quot;https://knockoutjs.com/&quot;&gt;KnockoutJS&lt;/a&gt; library is that you can get started with just a single JS file. It allows you to bind a JS object model property to any HTML DOM elements, and automatically update it when property value has changed.&lt;/p&gt;

&lt;p&gt;Here is a hello KnockoutJS example app:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;div id=&quot;app&quot;&amp;gt;
    &amp;lt;span data-bind=&quot;text: message&quot;&amp;gt;&amp;lt;/span&amp;gt;
&amp;lt;/div&amp;gt;

&amp;lt;script src=&quot;https://unpkg.com/knockout@3.5.1/build/output/knockout-latest.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;script&amp;gt;
    let app = new function () {
        this.message = ko.observable(&quot;Hello&quot;);
    };
    ko.applyBindings(app, document.getElementById(&quot;app&quot;));
&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you run this in browser, you should see “Hello”. Then open the Developer Console and change the model like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;app.message(&quot;Hello KnockoutJS&quot;);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And the browser updates immediately!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Oracle JET Intro Articles on DZone</title>
   <link href="http://localhost:4000/2020/03/31/ojet-articles/"/>
   <updated>2020-03-31T01:00:00-04:00</updated>
   <id>http://localhost:4000/2020/03/31/ojet-articles</id>
   <content type="html">&lt;p&gt;I found an old series of articles that introduced Oracle JET by &lt;a href=&quot;https://blogs.oracle.com/author/chris-muir&quot;&gt;Chris Muir&lt;/a&gt; on DZone. These articles seem dated way back in 2016 (with OJET v3 ?), but the core concepts are still valid. In fact many of these introductions are now captured in the &lt;a href=&quot;https://docs.oracle.com/en/middleware/developer-tools/jet/8.1/develop/index.html&quot;&gt;Oracle JET Developer Guide&lt;/a&gt; already. But these articles are short and good read. I don’t know Chris personally, but thanks for publishing these.&lt;/p&gt;

&lt;h2 id=&quot;article-series-links&quot;&gt;Article Series Links&lt;/h2&gt;

&lt;p&gt;The complete series of articles published to date can be found here:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://dzone.com/articles/installing-oracle-jet-for-javascript-web-developme&quot;&gt;Installing Oracle JET for JavaScript Web Development&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://dzone.com/articles/installing-oracle-jet-for-hybrid-mobile-applicatio&quot;&gt;Installing Oracle JET for Hybrid-Mobile Application Development&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://dzone.com/articles/understanding-the-development-process-with-oracle&quot;&gt;Understanding the Development Process With Oracle JET for Web and Mobile&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://dzone.com/articles/working-with-requirejs-in-oracle-jet&quot;&gt;Working with RequireJS in Oracle JET&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://dzone.com/articles/investigating-knockoutjs-in-oracle-jet&quot;&gt;Investigating KnockoutJS in Oracle JET&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://dzone.com/articles/investigating-knockoutjs-in-oracle-jet&quot;&gt;Working With Oracle JET UI Web Components&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://dzone.com/articles/responsive-web-design-with-oracle-jet&quot;&gt;Responsive Web Design With Oracle JET&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://dzone.com/articles/single-page-applications-in-oracle-jet&quot;&gt;Single Page Applications in Oracle JET&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://dzone.com/articles/working-with-rest-in-oracle-jet&quot;&gt;Working With REST in Oracle JET&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Hello Oracle JET</title>
   <link href="http://localhost:4000/2020/03/25/hello-ojet/"/>
   <updated>2020-03-25T01:00:00-04:00</updated>
   <id>http://localhost:4000/2020/03/25/hello-ojet</id>
   <content type="html">&lt;p&gt;Here are some short instructions on how to create your first Oracle JET (v8.1.0) application.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;First you need to install NodeJS and then you should have npm command available in a Terminal.&lt;/li&gt;
  &lt;li&gt;Install OJET command line tool globally into NPM. Afterward, you will have the ojet command available in a Terminal.&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm install -g @oracle/ojet-cli
ojet --version
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;Generate an OJET application.&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ojet create hello-ojet --template=basic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;Now start the web server that comes with your project.&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cd hello-app
ojet serve
open http://localhost:8000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you should see a blank application ready for you to start your next project!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2020/ojet-starter.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The project source that was generated in this article is available at &lt;a href=&quot;https://github.com/zemian/hello-ojet/tree/demo-basic-template&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Moved To Medium</title>
   <link href="http://localhost:4000/2020/03/22/move-to-medium/"/>
   <updated>2020-03-22T01:00:00-04:00</updated>
   <id>http://localhost:4000/2020/03/22/move-to-medium</id>
   <content type="html">&lt;p&gt;Trying out &lt;a href=&quot;https://medium.com/@zemiandeng&quot;&gt;Medium Blogging&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>From Back End to Front End Development</title>
   <link href="http://localhost:4000/2020/03/22/front-end/"/>
   <updated>2020-03-22T01:00:00-04:00</updated>
   <id>http://localhost:4000/2020/03/22/front-end</id>
   <content type="html">&lt;p&gt;A year ago I was given an opportunity to work on the Oracle CX Knowledge Management product. In this development team, we use Oracle JET (OJET), a JavaScript toolkit for building our UI application. The product also has a mature RESTFul API service that manage the content data from the back end.&lt;/p&gt;

&lt;p&gt;In the past, I have been doing Java development for more than a decade, and have exposed to UI work when developing web applications. But my experience has always been doing UI with server side rendering technologies with Java. For example using Servlet MVC pattern and a template engine such as JSP or Freemarker. So switching to full time JavaScript (JS) UI is a shock to me and took some time to get used to.&lt;/p&gt;

&lt;p&gt;Today the JS ecosystem is vast and changed a lot since when I first learned it. It’s no longer just a little script file (eg: jQuery) in a browser to enhance HTML anymore. Large JS application has promoted the language to support splitting code in modules (or using library such as RequireJS to manage it.) And the introduction of NodeJS has brought JS out of browser and running on local system with command line build tool such as Grunt and local Web Server possible. The NPM repository allow JS developers to share code much faster, so it’s hard to just keep up what’s new everyday. Today, a typical JS project will start as a NPM based project with Webpack build tool to build separated src folder that contains modularized html and js files to generate the web output folder. The project normally can setup a local web server that power by NodeJS so that we don’t even need to setup real Apache HTTPD web server during development! My goodness, it true JS all the way!&lt;/p&gt;

&lt;p&gt;Now, Oracle also has their own JS framework and UI library called OJET that they have been using for a while now. The OJET is a UI components libraries built on top of KnockoutJS (KO). The KnockoutJS was very popular few years ago, but now it has slow down and replaced by other newer libraries such as VueJS. But despite that, KO is a very nice and easy to use library. It provides JS model objects binding to HTML dom tree elements. The model can have observables that will “react” to changes and automatically update the DOM elements (UI). This is the whole basis of what they call MVVM pattern. And the OJET application is built based on that.&lt;/p&gt;

&lt;p&gt;I will try to write up some more updates, tips and tutorials on how to use OJET and other JS related topics here. So keep in touch!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>New Quartz 2.3.1 Released</title>
   <link href="http://localhost:4000/2019/04/02/new-quartz-2-3-1-release/"/>
   <updated>2019-04-02T01:00:00-04:00</updated>
   <id>http://localhost:4000/2019/04/02/new-quartz-2-3-1-release</id>
   <content type="html">&lt;p&gt;Quartz project has little development activities for quite some time now. I finally able to put in some time and help get many bugs fixed up. After more than two years since Quartz last release (April 2017), I am happy to announce the &lt;a href=&quot;https://search.maven.org/artifact/org.quartz-scheduler/quartz/2.3.1/jar&quot;&gt;quartz-2.3.1&lt;/a&gt; is finally out!&lt;/p&gt;

&lt;p&gt;This release is a minor release that &lt;a href=&quot;https://github.com/quartz-scheduler/quartz/releases/tag/quartz-2.3.1&quot;&gt;fixed many bugs&lt;/a&gt; on the 2.3 series that uses JDK 7. We also cleaned up the &lt;a href=&quot;http://www.quartz-scheduler.org/documentation/&quot;&gt;documentation&lt;/a&gt; that generated from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;asciidoc&lt;/code&gt; and placed it along with the source repository.&lt;/p&gt;

&lt;p&gt;Our &lt;a href=&quot;https://github.com/quartz-scheduler/quartz&quot;&gt;master branch&lt;/a&gt; now target the next &lt;a href=&quot;https://github.com/quartz-scheduler/quartz/milestone/6&quot;&gt;quartz 2.4.0 milestone&lt;/a&gt;, which will support the JDK 8 build.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Using Spring Boot Cli</title>
   <link href="http://localhost:4000/2019/03/03/using-spring-boot-cli/"/>
   <updated>2019-03-03T00:00:00-05:00</updated>
   <id>http://localhost:4000/2019/03/03/using-spring-boot-cli</id>
   <content type="html">&lt;p&gt;The easiest way to get started with Spring is to setup SpringBoot with
their CLI tool. You can bootstrap a web application with a single Groovy
script!&lt;/p&gt;

&lt;p&gt;Download the CLI from
&lt;a href=&quot;https://docs.spring.io/spring-boot/docs/current/reference/html/getting-started-installing-spring-boot.html#getting-started-installing-the-cli&quot;&gt;https://docs.spring.io/spring-boot/docs/current/reference/html/getting-started-installing-spring-boot.html#getting-started-installing-the-cli&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Now unzip and setup PATH to use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;spring&lt;/code&gt; command.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;unzip spring-boot-cli-2.0.5.RELEASE-bin.zip
export PATH=`pwd`/spring-2.0.5.RELEASE/bin:$PATH
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Create a simple groovy app script&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// file: app.groovy
@RestController
class HelloApp {
    @RequestMapping(&quot;/&quot;)
    String home() {
        return &quot;Hello World!&quot;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now run it and test it with a browser:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;spring run app.groovy
open http://localhost:8080
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or you can create a full SpringBoot project with Maven build:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Or create a new project
spring init -d=web -x --package-name zemian.springbootstarter.hello hello-spring-boot
cd hello-spring-boot
./mvnw spring-boot:run
open http://localhost:8080
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can learn more from my starter project:
&lt;a href=&quot;https://github.com/zemian/spring-boot-starter&quot;&gt;https://github.com/zemian/spring-boot-starter&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Setup Quartz DB With Liquibase</title>
   <link href="http://localhost:4000/2019/02/15/setup-quartz-db-with-liquidbase/"/>
   <updated>2019-02-15T00:00:00-05:00</updated>
   <id>http://localhost:4000/2019/02/15/setup-quartz-db-with-liquidbase</id>
   <content type="html">&lt;p&gt;There is a &lt;a href=&quot;http://www.liquibase.org/&quot;&gt;Liquibase&lt;/a&gt; init file now in Quartz that you may use to setup your database. I have added instructions on how to run this &lt;a href=&quot;https://github.com/quartz-scheduler/quartz/wiki/How-to-Setup-Databases#using-liquibase-tool&quot;&gt;on Quartz WIKI here&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Getting Started with jbake</title>
   <link href="http://localhost:4000/2019/01/15/getting-started-with-jbake/"/>
   <updated>2019-01-15T00:00:00-05:00</updated>
   <id>http://localhost:4000/2019/01/15/getting-started-with-jbake</id>
   <content type="html">&lt;p&gt;I started using &lt;a href=&quot;https://jbake.org/&quot;&gt;https://jbake.org/&lt;/a&gt; for &lt;a href=&quot;https://zemian.github.io/&quot;&gt;my blog
site&lt;/a&gt; here at GitHub page. It’s a Java based
static site generator that has decent options. For Java developers, it’s
easy to learn and use. I can customize the site with Freemarker (and
other templates as well).&lt;/p&gt;

&lt;p&gt;So far I am pretty happy with this.&lt;/p&gt;

&lt;h1 id=&quot;getting-started&quot;&gt;Getting Started&lt;/h1&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mkdir hello-site
cd hello-site
jbake -i
jbake -b -s
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-b&lt;/code&gt; option is for baking (generating) the content, and the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-s&lt;/code&gt; is
to run a server for testing it. The default output of the site will be
in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;output&lt;/code&gt; folder. You can change it as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jbake -b -s . my-site-output&lt;/code&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Python string successor method</title>
   <link href="http://localhost:4000/2018/08/24/python-string-successor-method/"/>
   <updated>2018-08-24T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/08/24/python-string-successor-method</id>
   <content type="html">&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# A simple implementation of Ruby's String#next() successor method in Python
# See https://ruby-doc.org/core-2.4.1/String.html#method-i-next
def next(id_template, id_chars = &quot;0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;):
        first_ch = id_chars[0]
        last_ch = id_chars[-1]
        new_id = list(id_template)

        idx = len(new_id) - 1
        while idx &amp;gt;= 0:
                ch = new_id[idx]
                if ch == last_ch:
                        new_id[idx] = first_ch
                else:
                        next_idx = id_chars.index(ch) + 1
                        new_id[idx] = id_chars[next_idx]
                        break
                idx -= 1

        return ''.join(new_id)

# Tests
import unittest
class StringNextTest(unittest.TestCase):
        def test_next(self):
                self.assertEqual(next(&quot;0&quot;), &quot;1&quot;);
                self.assertEqual(next(&quot;9&quot;), &quot;A&quot;);
                self.assertEqual(next(&quot;A&quot;), &quot;B&quot;);
                self.assertEqual(next(&quot;Y&quot;), &quot;Z&quot;);
                self.assertEqual(next(&quot;Z&quot;), &quot;0&quot;);

                self.assertEqual(next(&quot;AAA&quot;), &quot;AAB&quot;);
                self.assertEqual(next(&quot;AAB&quot;), &quot;AAC&quot;);
                self.assertEqual(next(&quot;AAC&quot;), &quot;AAD&quot;);
                self.assertEqual(next(&quot;ZZ0&quot;), &quot;ZZ1&quot;);
                self.assertEqual(next(&quot;ZZ1&quot;), &quot;ZZ2&quot;);
                self.assertEqual(next(&quot;ZZ2&quot;), &quot;ZZ3&quot;);
                self.assertEqual(next(&quot;ZZY&quot;), &quot;ZZZ&quot;);
                self.assertEqual(next(&quot;ZZZ&quot;), &quot;000&quot;);
                self.assertEqual(next(&quot;ZZZZZZ&quot;), &quot;000000&quot;);
                self.assertEqual(next(&quot;ZZZZZZZZZ&quot;), &quot;000000000&quot;);

                self.assertEqual(next(&quot;ABC999GHI&quot;), &quot;ABC999GHJ&quot;);
                self.assertEqual(next(&quot;ABC999GZZ&quot;), &quot;ABC999H00&quot;);

        def samples(self):
                id = &quot;ZZX&quot;
                print(id)
                for i in range(10):
                        id = next(id)
                        print(id)

                id = &quot;FF9&quot;
                print(id)
                for i in range(10):
                        id = next(id, &quot;0123456789ABCDEF&quot;)
                        print(id)

if __name__ == '__main__':
        #StringNextTest().samples()
        unittest.main()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>SQLite3 Data Types and Test Table</title>
   <link href="http://localhost:4000/2018/08/21/sqlite3-data-types-and-test-table/"/>
   <updated>2018-08-21T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/08/21/sqlite3-data-types-and-test-table</id>
   <content type="html">&lt;p&gt;A quick sql table setup to test most common data types.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-- Notes for SQLite3 Database (3.24)
-- https://www.sqlite.org/docs.html

-- Data Types
-- https://www.sqlite.org/datatype3.html

-- Functions
-- https://www.sqlite.org/lang_corefunc.html

/*
SQLite does not have strong data type, but dynamic type that define by value rather than by schema/container.

SQLite only has 5 storage class that it can be used to store data (desc their doc):

NULL. The value is a NULL value.
INTEGER. The value is a signed integer, stored in 1, 2, 3, 4, 6, or 8 bytes depending on the magnitude of the value.
REAL. The value is a floating point value, stored as an 8-byte IEEE floating point number.
TEXT. The value is a text string, stored using the database encoding (UTF-8, UTF-16BE or UTF-16LE).
BLOB. The value is a blob of data, stored exactly as it was input.

SQLite can conform to standard SQL types by mapping what's called &quot;affinity&quot; type.

CHAR          Map to TEXT
VARCHAR       Map to TEXT
TEXT          Map to TEXT

INT           Map to INTEGER

REAL             Map to REAL
DOUBLE PRECISION Map to REAL

NUMERIC       Map to INTEGER, REAL, TEXT or BLOB

DATE          Map to INTEGER, REAL, TEXT or BLOB
DATETIME      Map to INTEGER, REAL, TEXT or BLOB

NOTE: Despite there is a &quot;NUMERIC&quot; affinity type, it's not a fixed-point type! SQLite
does not have native NUMERIC. It will dynamically choose a best fit storage class
instead (REAL if it can keep 15 digits accuracy). If you need true fixed point data type,
you may try to use TEXT data stored instead. Same as with DATETIME types. For example you
can store DATETIME as TEXT, and then SQLite provides many built-in functions that help you
manipulate dates instead. Note also that precision and scale such as VARCHAR(n) or
NUMERIC(p, s) has no real meaning other than DDL schema documentation only!

The SQLite INT size can auto grow into 64-bits (like sql: BIGINT) if needed. The REAL type
is 64-bits size! (unlike many other DB that use REAL for 32-bits and DOUBLE PRECISION for
64 bits).
 */

-- Test table
create table test(
  id      integer primary key,
  ts      text default (datetime('now')),
  cat     text,

  price   text,
  qty     int,

  txtdata text,
  bindata blob,

  distx   real,
  disty   real
);
insert into test(cat, price, qty) values ('test', 100000.10, 50000),
                                         ('test', 100000.20, 0),
                                         ('test', 100000.00, 1),
                                         ('test', 9977000.3333, 179),
                                         ('test', 104729.1129, 104729);
insert into test(cat, bindata, txtdata) values ('test2', x'CAFEBABE', 'CAFEBABE');
insert into test(cat, bindata) values ('test3', randomblob(16));
insert into test(cat, bindata) values ('test3', randomblob(16));
insert into test(cat, bindata) values ('test3', randomblob(16));
update test set txtdata = hex(bindata) where cat = 'test3';
insert into test(cat, distx, disty) values ('test4', random(), random());
insert into test(cat, distx, disty) values ('test4', random(), random());
insert into test(cat, distx, disty) values ('test4', random(), random());
select sum(price) from test where cat = 'test';
select * from test order by cat, ts desc;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>PostgreSQL Data Types and Test Table</title>
   <link href="http://localhost:4000/2018/08/20/postgresql-data-types-and-test-table/"/>
   <updated>2018-08-20T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/08/20/postgresql-data-types-and-test-table</id>
   <content type="html">&lt;p&gt;A quick sql table setup to test most common data types.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-- Notes for PostgreSQL Database (9.6)
-- https://www.postgresql.org/docs/9.6/static/index.html

-- Data Types
-- https://www.postgresql.org/docs/9.6/static/datatype.html

/*

CHAR          Fixed length and space padded character string (sql: CHAR)
VARCHAR       Variable length character string (sql: VARCHAR)
TEXT          Variable length character large string (sql: TEXT)

INT           Declare integer number (sql: INT 32 bits)
SMALLINT      16 bits
BIGINT        64 bits
SERIAL        Auto increment integer (INT with sequence)

REAL             Declare floating-point number 32 bits
DOUBLE PRECISION Declare floating-point number 64 bits

NUMERIC(p,s)     Declare fixed-point number (sql: NUMERIC)

DATE          Declare date
TIME          Declare time
TIMESTAMP     Declare datetime
TIMESTAMP WITH TIMEZONE or TIMESTAMPTZ
              Declare datetime as timezone aware (stored as UTC but convert to client session timezone)
INTERVAL      Declare period of time difference

BYTEA         Binary data

 */
-- test table
create table test(
  id       serial primary key,
  ts       timestamptz default current_timestamp,
  cat      varchar(10),

  price    numeric(19,4),
  qty      int,

  txtdata  text,
  bindata  bytea,

  distx    real,
  disty    double precision
);
insert into test(cat, price, qty) values ('test', 100000.10, 50000),
                                         ('test', 100000.20, 0),
                                         ('test', 100000.00, 1),
                                         ('test', 9977000.3333, 179),
                                         ('test', 104729.1129, 104729);
insert into test(cat, bindata, txtdata) values ('test2', E'\\xCAFEBABE', 'CAFEBABE');
insert into test(cat, bindata) values ('test3', decode(md5(random()::text), 'hex'));
insert into test(cat, bindata) values ('test3', decode(md5(random()::text), 'hex'));
insert into test(cat, bindata) values ('test3', decode(md5(random()::text), 'hex'));
update test set txtdata = encode(bindata, 'hex') where cat = 'test3';
insert into test(cat, distx, disty) values ('test4', random(), random());
insert into test(cat, distx, disty) values ('test4', random(), random());
insert into test(cat, distx, disty) values ('test4', random(), random());
select sum(price) from test where cat = 'test';
select * from test order by cat, ts desc;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Sybase Data Types and Test Table</title>
   <link href="http://localhost:4000/2018/08/19/sybase-data-types-and-test-table/"/>
   <updated>2018-08-19T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/08/19/sybase-data-types-and-test-table</id>
   <content type="html">&lt;p&gt;A quick sql table setup to test most common data types.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-- Notes for Sybase Database 16
-- http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc70202.1570/html/quickref/title.htm

-- Data Types
-- http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc32300.1600/doc/html/san1390612189202.html

/*

CHAR          Fixed length and space padded character string (sql: CHAR)
VARCHAR       Variable length character string (sql: VARCHAR)
UNIVARCHAR    Same as VARCHAR but with Unicode support
TEXT          Variable length character large string (sql: TEXT)

INT           Declare integer number (sql: INT 32 bits)
SMALLINT      16 bits
BIGINT        64 bits

REAL             Declare floating-point number 32 bits
DOUBLE PRECISION Declare floating-point number 64 bits

NUMERIC(p,s)     Declare fixed-point number (sql: NUMERIC)

DATE          Declare date
TIME          Declare time
DATETIME      Declare datetime with sub second precision

BINARY        Binary data
BINARY        Binary data
BINARY        Binary data

 */
-- Test table
create table test(
  id    int identity primary key not null,
  ts    datetime default getdate() not null,
  cat   varchar(10) not null,

  price    numeric(19,4) null,
  qty      int null,

  txtdata  text null,
  bindata  binary null,

  distx  real null,
  disty  double precision null
);
insert into test(cat, price, qty) values ('test', 100000.10, 50000),
                                         ('test', 100000.20, 0),
                                         ('test', 100000.00, 1),
                                         ('test', 9977000.3333, 179),
                                         ('test', 104729.1129, 104729);
insert into test(cat, bindata, txtdata) values ('test2', 0xCAFEBABE, 'CAFEBABE');
insert into test(cat, bindata) values ('test3', convert(binary, rand()));
insert into test(cat, bindata) values ('test3', convert(binary, rand()));
insert into test(cat, bindata) values ('test3', convert(binary, rand()));
insert into test(cat, distx, disty) values ('test4', rand(), rand());
insert into test(cat, distx, disty) values ('test4', rand(), rand());
insert into test(cat, distx, disty) values ('test4', rand(), rand());
select sum(price) from test where cat = 'test';
select * from test order by cat, ts desc;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Oracle DB Data Types and Test Table</title>
   <link href="http://localhost:4000/2018/08/18/oracle-db-data-types-and-test-table/"/>
   <updated>2018-08-18T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/08/18/oracle-db-data-types-and-test-table</id>
   <content type="html">&lt;p&gt;A quick sql table setup to test most common data types.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;--
-- Notes on Oracle Database 12.2
-- https://docs.oracle.com/en/database/oracle/oracle-database/12.2/administration.html

-- DataTypes
-- https://docs.oracle.com/en/database/oracle/oracle-database/12.2/sqlrf/Data-Types.html

/*
CHAR          Fixed length and space padded character string (sql: CHAR)
VARCHAR2      Variable length character string (sql: VARCHAR)
              (Oracle discourage use of VARCHAR, even though it's same as VARCHAR2 as of now.)
NVARCHAR2     Same as VARCHAR2 but with Unicode support
CLOB          Variable length character large string (sql: TEXT)

NUMBER(p)     Declare integer number (sql: INT)

BINARY_FLOAT  Declare floating-point number (sql: REAL 32 bits)
BINARY_DOUBLE Declare floating-point number (sql: DOUBLE PRECISION 64 bits)

NUMBER        Declare floating-point number (like NUMERIC with max precision and scale. Values will be stored as exact, not binary.)
NUMBER(p,s)   Declare fixed-point number (sql: NUMERIC)

DATE          Declare datetime with no sub second precision (note: it includes time!)
TIMESTAMP     Declare datetime with sub second precision
TIMESTAMP WITH TIMEZONE
              Declare datetime with sub second precision and timezone
INTERVAL YEAR TO MONTH   Declare period of time difference
INTERVAL DAY TO DECOND   Declare period of time difference

BLOB          Binary data
 */

-- Test table
create table test (
  id    number(32) generated always as identity primary key,
  ts    timestamp(6) default systimestamp not null,
  cat   varchar2(10) not null,

  price    number(19,4) null,
  qty      int null,

  txtdata  varchar2(1000) null,
  bindata  blob null,

  distx  binary_float null,
  disty  binary_double null
);
insert into test(cat, price, qty) values ('test', 100000.10, 50000),
                                         ('test', 100000.20, 0),
                                         ('test', 100000.00, 1),
                                         ('test', 9977000.3333, 179),
                                         ('test', 104729.1129, 104729);
insert into test(cat, bindata, txtdata) values ('test2', hextoraw('CAFEBABE'), 'CAFEBABE');
insert into test(cat, bindata) values ('test3', hextoraw(to_char(floor(dbms_random.value(0,256)), 'XX')));
insert into test(cat, bindata) values ('test3', hextoraw(to_char(floor(dbms_random.value(0,256)), 'XX')));
insert into test(cat, bindata) values ('test3', hextoraw(to_char(floor(dbms_random.value(0,256)), 'XX')));
update test set txtdata = rawtohex(bindata) where cat = 'test3';
insert into test(cat, distx, disty) values ('test4', dbms_random.value(0.0, 1.0), dbms_random.value(0.0, 1.0));
insert into test(cat, distx, disty) values ('test4', dbms_random.value(0.0, 1.0), dbms_random.value(0.0, 1.0));
insert into test(cat, distx, disty) values ('test4', dbms_random.value(0.0, 1.0), dbms_random.value(0.0, 1.0));
select sum(price) from test where cat = 'test';
select * from test order by cat, ts desc;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>MySQL Data Types and Test Table</title>
   <link href="http://localhost:4000/2018/08/17/mysql-data-types-and-test-table/"/>
   <updated>2018-08-17T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/08/17/mysql-data-types-and-test-table</id>
   <content type="html">&lt;p&gt;A quick sql table setup to test most common data types.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-- Notes for MySQL (8)
-- https://dev.mysql.com/doc/refman/8.0/en/

-- Data Types
-- https://dev.mysql.com/doc/refman/8.0/en/data-types.html

/*

CHAR          Fixed length and space padded character string (sql: CHAR)
VARCHAR       Variable length character string (sql: VARCHAR)
TEXT          Variable length character large string (sql: TEXT)

INT           Declare integer number (sql: INT 32 bits)
SMALLINT      16 bits
BIGINT        64 bits
SERIAL        Auto increment integer (INT with sequence)
              An alias for BIGINT UNSIGNED NOT NULL AUTO_INCREMENT UNIQUE.

REAL             Declare floating-point number 32 bits
DOUBLE PRECISION Declare floating-point number 64 bits

NUMERIC(p,s)     Declare fixed-point number (sql: NUMERIC)

DATE          Declare date
TIME          Declare time
TIMESTAMP     Declare datetime (stored as UTC but convert to client session timezone)

BLOB          Binary data

 */

-- test table
create table test(
  id       serial primary key,
  ts       timestamp default current_timestamp,
  cat      varchar(10),

  price    numeric(19,4),
  qty      int,

  txtdata  text,
  bindata  blob,

  distx    real,
  disty    double precision
);
insert into test(cat, price, qty) values ('test', 100000.10, 50000),
                                         ('test', 100000.20, 0),
                                         ('test', 100000.00, 1),
                                         ('test', 9977000.3333, 179),
                                         ('test', 104729.1129, 104729);
insert into test(cat, bindata, txtdata) values ('test2', X'CAFEBABE', 'CAFEBABE');
insert into test(cat, bindata) values ('test3', unhex(replace(uuid(), '-','')));
insert into test(cat, bindata) values ('test3', unhex(replace(uuid(), '-','')));
insert into test(cat, bindata) values ('test3', unhex(replace(uuid(), '-','')));
update test set txtdata = hex(bindata) where cat = 'test3';
insert into test(cat, distx, disty) values ('test4', rand(), rand());
insert into test(cat, distx, disty) values ('test4', rand(), rand());
insert into test(cat, distx, disty) values ('test4', rand(), rand());
select sum(price) from test where cat = 'test';
select * from test order by cat, ts desc;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>A simple Java command line options parser</title>
   <link href="http://localhost:4000/2018/08/13/a-simple-java-command-line-options-parser/"/>
   <updated>2018-08-13T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/08/13/a-simple-java-command-line-options-parser</id>
   <content type="html">&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package com.zemian.hellojava;

import java.util.*;

/**
 * A simple command line arguments and options parser in the format of &quot;--optionName=optionValue&quot; or
 * &quot;-optionName=optionValue&quot;.
 *
 * The optionName can be one ore more characters. The equals sign must be used when providing optionValue;
 * else it will be treated as program arguments instead! If you ommit the &quot;=optionValue&quot; part, then it
 * will default to &quot;=true&quot; for that optionName. The optionValue must be a single string. Any other argument
 * that are not part of options are store in a new args list.
 *
 * The constructor will immediately parse the input arguments, and it should not throw any exceptions. In case
 * user did not use correct format, by above rule, it will go into the argument list instead. We purposely made
 * this class simple, and let end user to perform any validation they need for their program.
 *
 * Usage example:
 *   Hello --help
 *   Hello --num=101 --verbose one two three
 * ----
 * public class Hello {}
 *     public static void main(String[] args) {
 *         CmdOpts opts = new CmdOpts(args);
 *         if (opts.hasOpt(&quot;help&quot;))
 *           System.out.println(&quot;You need help&quot;);
 *         int num = opts.getIntOpt(&quot;num&quot;, 0);
 *         System.out.println(&quot;Using num=&quot; + num);
 *         System.out.println(&quot;Using new args=&quot; + opts.getArgs());
 *     }
 * }
 * ----
 *
 * Created by Zemian Deng 2017.
 */
public class CmdOpts {
    private Map&amp;lt;String, Object&amp;gt; opts = new HashMap&amp;lt;&amp;gt;();
    private List&amp;lt;String&amp;gt; args = new ArrayList&amp;lt;&amp;gt;();

    public CmdOpts(String[] arguments) {
        parse(arguments);
    }

    private void parse(String[] arguments) {
        for (String arg : arguments) {
            if (arg.startsWith(&quot;--&quot;)) {
                addOpt(arg.substring(2));
            } else if (arg.startsWith(&quot;-&quot;)) {
                addOpt(arg.substring(1));
            } else {
                args.add(arg);
            }

        }
    }

    private void addOpt(String option) {
        if (option != null &amp;amp;&amp;amp; !&quot;&quot;.equals(option)) {
            String[] options = option.split(&quot;=&quot;, 2);
            String optionName = options[0];
            String optionValue = &quot;true&quot;;
            if (options.length == 2) {
                optionValue = options[1];
            }

            Object existingOpt = opts.get(optionName);
            if (existingOpt == null) {
                opts.put(optionName, optionValue);
            } else {
                // Support multi options with same key
                if (existingOpt instanceof List) {
                    // Third + items
                    ((List&amp;lt;String&amp;gt;) existingOpt).add(optionValue);
                } else {
                    // Second items
                    List&amp;lt;String&amp;gt; list = new ArrayList&amp;lt;&amp;gt;();
                    list.add((String) existingOpt);
                    list.add(optionValue);
                    opts.put(optionName, list);
                }
            }
        }
    }

    public int getOptsSize() {
        return opts.size();
    }

    public Set&amp;lt;String&amp;gt; getOptsNames() {
        return opts.keySet();
    }

    public boolean hasOpt(String name) {
        return opts.containsKey(name);
    }

    public Map&amp;lt;String, Object&amp;gt; getOpts() {
        return opts;
    }

    public void setOpts(Map&amp;lt;String, Object&amp;gt; opts) {
        this.opts = opts;
    }

    public String getOpt(String name) {
        return (String) opts.get(name);
    }

    public String getOpt(String name, String def) {
        String result = getOpt(name);
        if (result == null)
            result = def;
        return result;
    }

    public boolean getBooleanOpt(String name) {
        if (hasOpt(name)) {
            return true;
        }
        return Boolean.parseBoolean(getOpt(name));
    }

    public boolean getBooleanOpt(String name, boolean def) {
        if (hasOpt(name)) {
            return true;
        }
        String result = getOpt(name);
        if (result == null)
            return def;
        return Boolean.parseBoolean(result);
    }

    public int getIntOpt(String name) {
        return Integer.parseInt(getOpt(name));
    }

    public int getIntOpt(String name, int def) {
        String result = getOpt(name);
        if (result == null)
            return def;
        return Integer.parseInt(result);
    }

    public long getLongOpt(String name) {
        return Long.parseLong(getOpt(name));
    }

    public long getLongOpt(String name, long def) {
        String result = getOpt(name);
        if (result == null)
            return def;
        return Long.parseLong(result);
    }

    public List&amp;lt;String&amp;gt; getMultiOpts(String name) {
        List&amp;lt;String&amp;gt; list = new ArrayList&amp;lt;&amp;gt;();
        Object optVal = opts.get(name);
        if (optVal == null) {
            return list;
        } else if (optVal instanceof String) {
            list.add((String) optVal);
            return list;
        }

        list.addAll((List&amp;lt;String&amp;gt;) optVal);
        return list;
    }

    public int getArgsSize() {
        return args.size();
    }
    public List&amp;lt;String&amp;gt; getArgs() {
        return args;
    }
    public String[] getArgsArray() {
        return args.toArray(new String[args.size()]);
    }

    public String getArgOrError(int index, String errorIfMissing) {
        if (index &amp;gt;= args.size() || index &amp;lt; 0) {
            throw new IllegalArgumentException(errorIfMissing);
        }
        return args.get(index);
    }

    public String getArg(int index) {
        return args.get(index);
    }

    /** A test class to try out CmdOpts. */
    public static void main(String[] args) {
        CmdOpts opts = new CmdOpts(args);
        if (opts.hasOpt(&quot;help&quot;))
            System.out.println(&quot;You need help&quot;);
        int num = opts.getIntOpt(&quot;num&quot;, 0);
        System.out.println(&quot;Using num=&quot; + num);
        System.out.println(&quot;Using new args=&quot; + opts.getArgs());
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Examples of Postgres Functions and Triggers</title>
   <link href="http://localhost:4000/2018/08/09/examples-of-postgres-functions-and-triggers/"/>
   <updated>2018-08-09T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/08/09/examples-of-postgres-functions-and-triggers</id>
   <content type="html">&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-- Simple Function
create or replace function rand_range(a int, b int) returns int
as $$
  -- return a random range of int between a and b, both inclusive!;
  select cast(floor(random()*((b + 1)-a)+a) as int);
$$ language sql;
select rand_range(1, 10);
select rand_range(90, 95) from generate_series(1, 10);

-- Function to print message on DB server
create or replace function print_msg(msg text, lev text default 'notice') returns void
  as $$
  begin
    case
      when lev = 'debug' then
        raise debug '%', msg;
      when lev = 'info' then
        raise info '%', msg;
      else
        raise notice '%', msg;
    end case;
  end;
$$ language plpgsql;
select print_msg('hello world');

-- Log Function
drop table log;
create table log(
  id serial,
  msg text not null,
  ts timestamptz default current_timestamp not null,
  category varchar(50) default 'INFO' not null,
  user_id varchar(50) default 'system' not null,
  source_info text null
);
create or replace function add_log(
  msg text,
  category varchar(50) default 'INFO'
) returns void
as $$
begin
  insert into log(msg, category, source_info, user_id)
    values(msg, category, 'client=' || inet_client_addr(), current_user);
end;
$$ language plpgsql;

select add_log('hello2');
select public.add_log('hello3');
select * from log;

-- Triggers to log data entry or update
drop table test;
create table test(id serial, f1 real);
create or replace function log_test_update() returns trigger
as $$
begin
  perform add_log('Insert or Update on test table');
  return NEW;
end
$$ language plpgsql;
create trigger test_logging_trigger
  after insert or update on test
  for each row
  execute procedure log_test_update();
insert into test(f1) values(0.10), (0.20), (0.30);
update test set f1 = 3.5 where id = 1;
select * from test;
select * from log;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>A plain and simple Jdbc service for Java8</title>
   <link href="http://localhost:4000/2018/07/28/a-plain-and-simple-jdbc-service-for-java8/"/>
   <updated>2018-07-28T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/07/28/a-plain-and-simple-jdbc-service-for-java8</id>
   <content type="html">&lt;p&gt;With Java8, we can create simple and thin Jdbc service that’s productive
and easy to use. This service implementation is inspired by Spring’s
JdbcTemplate, but much lighter and has zero dependency.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package zemian.jdbc;

import javax.sql.DataSource;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.sql.*;
import java.util.*;
import java.util.stream.Collectors;

/**
 * This class provide an easier interface to run SQLs and retrieve data than direct Java JDBC API.
 *
 * You can instantiate this class in two ways:
 *
 * - Method1: Using a DataSource. Each operation will get a Connection object from the #dataSource.
 * - Method2: Using a direct Connection object. Use this to reuse a single connection to perform all
 *            JDBC operations.
 *
 * Both methods above will not directly close the Connection object per Jdbc instance. It's user
 * responsibility to close it after use. For pooled DataSource, it should be automatic, else you
 * might want to use the Jdbc.withJdbc() convenient method. This method will let you quickly start a single
 * new DB connection and Jdbc instance, and it will auto close connection when method is exited.
 *
 * This class provide these easy methods to work with DB data:
 * - #execute() perform update SQLs that returns number of records updated.
 * - #query() perform select SQLs that returns a list of records.
 * - #get() perform select SQLs that return a single object element.
 * - #insert() perform table insert using a Map as record.
 * - #update() perform table update using a Map as record.
 *
 * The #query() and #get() methods allow you to provide custom RSMapper to convert ResultSet instance
 * into any user object.
 *
 * @author Zemian Deng 2018-07-28
 */
public class Jdbc {
    // == Static utility methods and supporting inner classes
    public static void withJdbc(String propsResourceName, JdbcAction task) {
        Properties props = new Properties();
        URL propsUrl = Thread.currentThread().getContextClassLoader().getResource(propsResourceName);
        try (InputStream ins = propsUrl.openStream()) {
            props.load(ins);
        } catch (IOException e) {
            throw new RuntimeException(&quot;Unable to open properties from resource: &quot; + propsResourceName, e);
        }
        withJdbc(props, task);
    }

    public static void withJdbc(String url, String user, String password, JdbcAction task) {
        Properties props = new Properties();
        props.setProperty(&quot;url&quot;, url);
        props.setProperty(&quot;user&quot;, user);
        props.setProperty(&quot;password&quot;, password);
        withJdbc(props, task);
    }

    public static void withJdbc(Properties jdbcProps, JdbcAction task) {
        try (Connection conn = DriverManager.getConnection(jdbcProps.getProperty(&quot;url&quot;), jdbcProps)) {
            Jdbc jdbc = new Jdbc(conn);
            task.runJdbc(jdbc);
        } catch (Exception e) {
            if (e instanceof RuntimeException)
                throw (RuntimeException) e;
            throw new RuntimeException(&quot;Failed to process Jdbc&quot;, e);
        }
    }

    public static List&amp;lt;String&amp;gt; getFieldNames(ResultSet rs) throws SQLException {
        List&amp;lt;String&amp;gt; names = new ArrayList&amp;lt;&amp;gt;();
        ResultSetMetaData md = rs.getMetaData();
        for (int i = 1, max = md.getColumnCount(); i &amp;lt;= max; i++) {
            names.add(md.getColumnName(i));
        }
        return names;
    }

    public static void setParams(PreparedStatement st, Object[] params) throws SQLException {
        for (int i = 0; i &amp;lt; params.length; i++) {
            st.setObject(i + 1, params[i]);
        }
    }

    interface JdbcAction {
        void runJdbc(Jdbc jdbc) throws Exception;
    }

    interface ConnAction&amp;lt;T&amp;gt; {
        T runConn(Connection conn) throws Exception;
    }

    interface ConnActionNoRet {
        void runConn(Connection conn) throws Exception;
    }

    interface RSMapper&amp;lt;T&amp;gt; {
        T map(ResultSet rs, int idx) throws Exception;
    }

    public static class Record extends HashMap&amp;lt;String, Object&amp;gt; {
        public Record() {}
        public Record(ResultSet rs) throws SQLException {
            this(rs, Jdbc.getFieldNames(rs));
        }
        public Record(ResultSet rs, List&amp;lt;String&amp;gt; names) throws SQLException {
            for (String name : names) {
                Object val = rs.getObject(name);
                put(name, val);
            }
        }
        public Record(Object ... entries) {
            for (int i = 0; i &amp;lt; entries.length; i+= 2) {
                Object key = entries[i];
                Object val = entries[i + 1];
                put(key.toString(), val);
            }
        }
        public &amp;lt;T&amp;gt; T getValue(String key) {
            return (T) get(key);
        }
        public List&amp;lt;String&amp;gt; getFieldNames() {
            return new ArrayList&amp;lt;&amp;gt;(keySet());
        }
        @Override
        public String toString() {
            return &quot;Record&quot; + super.toString();
        }
    }

    // == Jdbc Service implementation
    private DataSource dataSource;
    private Connection conn;

    public Jdbc(Connection conn) {
        this.conn = conn;
    }

    public Jdbc(DataSource dataSource) {
        this.dataSource = dataSource;
    }

    public Connection getConn() throws SQLException {
        if (conn != null) {
            return conn;
        } else {
            return dataSource.getConnection();
        }
    }

    public &amp;lt;T&amp;gt; T withConn(ConnAction&amp;lt;T&amp;gt; action) {
        try {
            return action.runConn(getConn());
        } catch (Exception e) {
            if (e instanceof RuntimeException)
                throw (RuntimeException) e;
            throw new RuntimeException(&quot;Failed to process DB conn&quot;, e);
        }
    }

    public void withConnNoRet(ConnActionNoRet action) {
        withConn(conn -&amp;gt; {
            action.runConn(conn);
            return null;
        });
    }

    public &amp;lt;T&amp;gt; T get(String sql, Object ... params) {
        return get((rs, idx) -&amp;gt; (T) rs.getObject(1), sql, params);
    }

    public &amp;lt;T&amp;gt; T get(RSMapper&amp;lt;T&amp;gt; mapper, String sql, Object ... params) {
        return withConn(conn -&amp;gt; {
            try (PreparedStatement st = conn.prepareStatement(sql)) {
                setParams(st, params);
                st.executeQuery();
                try (ResultSet rs = st.getResultSet()) {
                    if (rs.next()) {
                        return mapper.map(rs, 0);
                    }
                }
            }
            throw new RuntimeException(&quot;There is no unique record from query.&quot;);
        });
    }

    public Record getRecord(String sql, Object ... params) {
        return get((rs, idx) -&amp;gt; new Record(rs), sql, params);
    }

    public List&amp;lt;Record&amp;gt; query(String sql, Object ... params) {
        final List&amp;lt;String&amp;gt; names = new ArrayList&amp;lt;&amp;gt;();
        return query((rs, idx) -&amp;gt; {
            if (idx == 0) {
                names.addAll(getFieldNames(rs));
            }
            return new Record(rs, names);
        }, sql, params);
    }

    public &amp;lt;T&amp;gt; List&amp;lt;T&amp;gt; query(RSMapper&amp;lt;T&amp;gt; mapper, String sql, Object ... params) {
        return withConn(conn -&amp;gt; {
            List&amp;lt;T&amp;gt; list = new ArrayList&amp;lt;&amp;gt;();
            try (PreparedStatement st = conn.prepareStatement(sql)) {
                setParams(st, params);
                st.executeQuery();
                try (ResultSet rs = st.getResultSet()) {
                    int idx = 0;
                    while (rs.next()) {
                        T t = mapper.map(rs, idx++);
                        list.add(t);
                    }
                }
            }
            return list;
        });
    }

    public int execute(String sql, Object ... params) {
        return withConn(conn -&amp;gt; {
            try (PreparedStatement st = conn.prepareStatement(sql)) {
                setParams(st, params);
                return st.executeUpdate();
            }
        });
    }

    public int insert(String table, Record record) {
        return insert(table, record, record.getFieldNames());
    }

    public int insert(String table, Record record, List&amp;lt;String&amp;gt; insertFields) {
        String fields = insertFields.stream().collect(Collectors.joining(&quot;, &quot;));
        String qMarks = insertFields.stream().map(e -&amp;gt; &quot;?&quot;).collect(Collectors.joining(&quot;, &quot;));
        String sql = &quot;INSERT INTO &quot; + table + &quot;(&quot; + fields + &quot;) VALUES (&quot; + qMarks + &quot;)&quot;;
        List&amp;lt;Object&amp;gt; params = insertFields.stream().map(e -&amp;gt; record.get(e)).collect(Collectors.toList());
        return withConn(conn -&amp;gt; {
            try (PreparedStatement st = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS)) {
                setParams(st, params.toArray());
                int uc = st.executeUpdate();
                // Check for auto generated keys, if present add into the record.
                // NOTE it will not override existing fields in record!
                try (ResultSet rs = st.getGeneratedKeys()) {
                    if (rs.next()) {
                        List&amp;lt;String&amp;gt; names = getFieldNames(rs);
                        for (String name : names) {
                            if (!record.containsKey(name))
                                record.put(name, rs.getObject(name));
                        }
                    }
                }
                return uc;
            }
        });
    }

    public int update(String table, Record record, String ... keyFields) {
        List&amp;lt;String&amp;gt; updateFields = record.getFieldNames();
        for (String key : keyFields)
            updateFields.remove(key);
        return update(table, record, updateFields, Arrays.asList(keyFields));
    }

    public int update(String table, Record record, List&amp;lt;String&amp;gt; updateFields, List&amp;lt;String&amp;gt; keyFields) {
        String updateFieldsNames = updateFields.stream().map(e -&amp;gt; e + &quot; = ?&quot;).collect(Collectors.joining(&quot;, &quot;));
        String keyFieldsNames = keyFields.stream().map(e -&amp;gt; e + &quot; = ?&quot;).collect(Collectors.joining(&quot;, &quot;));
        String sql = &quot;UPDATE &quot; + table + &quot; SET &quot; + updateFieldsNames + &quot; WHERE &quot; + keyFieldsNames;
        List&amp;lt;Object&amp;gt; params = updateFields.stream().map(e -&amp;gt; record.get(e)).collect(Collectors.toList());
        for (String key : keyFields)
            params.add(record.get(key));
        return execute(sql, params.toArray());
    }

    // Test Jdbc with Postgres DB
    public static void main(String[] args) {
        String url = System.getProperty(&quot;url&quot;, &quot;jdbc:postgresql://localhost:5432/postgres&quot;);
        String user = System.getProperty(&quot;user&quot;, &quot;postgres&quot;);
        String password = System.getProperty(&quot;password&quot;, &quot;&quot;);

        Jdbc.withJdbc(url, user, password, jdbc -&amp;gt; {
            jdbc.withConnNoRet(conn -&amp;gt; System.out.println(conn));
        });

        Jdbc.withJdbc(url, user, password, jdbc -&amp;gt; {
            // Execute
            jdbc.execute(&quot;create temp table test(id varchar(10) primary key, seq serial, amount numeric(19,4))&quot;);
            int uc = jdbc.execute(&quot;insert into test(id, amount) values(?, ?)&quot;, &quot;T01&quot;, 0.01);
            System.out.println(&quot;test record inserted: uc=&quot; + uc);

            Record record = jdbc.getRecord(&quot;select * from test where id = ?&quot;, &quot;T01&quot;);
            System.out.println(record);

            // Get
            Integer seq = jdbc.get(&quot;select seq from test where id = ?&quot;, &quot;T01&quot;);
            System.out.println(&quot;seq = &quot; + seq);

            java.math.BigDecimal amount = jdbc.get(&quot;select amount from test where id = ?&quot;, &quot;T01&quot;);
            System.out.println(&quot;amount = &quot; + amount);

            // Update
            record.put(&quot;amount&quot;, amount.doubleValue() + 0.20);
            System.out.println(&quot;amount to be updated: &quot; + record.getValue(&quot;amount&quot;));
            uc = jdbc.update(&quot;test&quot;, record, &quot;id&quot;);
            System.out.println(&quot;amount udpated. uc=&quot; + uc);

            amount = jdbc.get(&quot;select amount from test where id = ?&quot;, &quot;T01&quot;);
            System.out.println(&quot;after update from db: amount = &quot; + amount);

            // Insert
            record = new Record(&quot;id&quot;, &quot;T02&quot;, &quot;amount&quot;, 0.30);
            jdbc.insert(&quot;test&quot;, record);
            int newSeq = (Integer) record.get(&quot;seq&quot;);
            System.out.println(&quot;generated column seq=&quot; + newSeq);
            Record record2 = jdbc.getRecord(&quot;select * from test where id = ?&quot;, &quot;T02&quot;);
            System.out.println(record2);

            // Query
            List&amp;lt;Record&amp;gt; records = jdbc.query(&quot;select * from test order by id&quot;);
            System.out.println(records);
        });
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Adding new cacert entry into AdoptOpenJDK</title>
   <link href="http://localhost:4000/2018/07/23/adding-new-cacert-entry-into-adoptopenjdk/"/>
   <updated>2018-07-23T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/07/23/adding-new-cacert-entry-into-adoptopenjdk</id>
   <content type="html">&lt;p&gt;I downloaded latest Tomcat source and it failed to get the dependencies.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  cd src/github/tomcat
  ant download-test-compile
        [get] Error getting https://repo.maven.apache.org/maven2/junit/junit/4.12/junit-4.12.jar to C:\Users\zemian\tomcat-build-libs\download-2000731528.tmp

BUILD FAILED
C:\Users\zemian\src\github\tomcat\build.xml:2705: The following error occurred while executing this line:
C:\Users\zemian\src\github\tomcat\build.xml:3051: javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty
        at sun.security.ssl.Alerts.getSSLException(Alerts.java:208)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It turns out this error is caused by the OpenJDK 8 that I am using. The
one I got is from &lt;a href=&quot;https://adoptopenjdk.net/&quot;&gt;https://adoptopenjdk.net/&lt;/a&gt;, and the
$JAVA_HOME/jre/lib/security/cacert file has no entries for trusted CA
certs!&lt;/p&gt;

&lt;p&gt;So I found few solutions:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Find a copy of OracleJDK and copy their &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cacerts&lt;/code&gt; over.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;If you are on Linux, you can try installing cacerts using tools the
OS provided. (eg: Ubuntu can be done like here:
&lt;a href=&quot;https://stackoverflow.com/questions/6784463/error-trustanchors-parameter-must-be-non-empty&quot;&gt;https://stackoverflow.com/questions/6784463/error-trustanchors-parameter-must-be-non-empty&lt;/a&gt;)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Upgrade OpenJDK to 10&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Or the quick way, go to the site that gives you problem, export
their cert using the browser, and then import into to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cacerts&lt;/code&gt;
file.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;So for me, I went to &lt;a href=&quot;https://repo.maven.apache.org/&quot;&gt;https://repo.maven.apache.org/&lt;/a&gt; and exported
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;repomavenapacheorg.crt&lt;/code&gt;, and then I ran the following:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cd $JAVA_HOME/jre/lib/security
keytool -keystore cacerts -storepasswd changeit -importcert -file 'Downloads/repomavenapacheorg.crt' -trustcacerts
keytool -keystore cacerts -storepasswd changeit -list
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This fixed my problem.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Run Tomcat with webapp-runner.jar</title>
   <link href="http://localhost:4000/2018/06/21/run-tomcat-with-webapp-runner-jar/"/>
   <updated>2018-06-21T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/06/21/run-tomcat-with-webapp-runner-jar</id>
   <content type="html">&lt;p&gt;I have used &lt;a href=&quot;https://github.com/jsimone/webapp-runner&quot;&gt;https://github.com/jsimone/webapp-runner&lt;/a&gt; in several
projects now, and I find it really useful.&lt;/p&gt;

&lt;p&gt;You can start a Tomcat instance as simple as this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;java -jar target/webapp-runner.jar target/adocblog.war
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However if you need to run it with extra classpath entries, then you
would need to use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-cp&lt;/code&gt; instead of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-jar&lt;/code&gt; Java option. Like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;java -cp &quot;target/extra-classes:target/webapp-runner.jar&quot; webapp.runner.launch.Main target/adocblog.war
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Python argparse with multiple occurance of an option</title>
   <link href="http://localhost:4000/2018/06/06/python-argparse-with-multiple-occurance-of-an-option/"/>
   <updated>2018-06-06T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/06/06/python-argparse-with-multiple-occurance-of-an-option</id>
   <content type="html">&lt;p&gt;&lt;strong&gt;test.py.&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import argparse
parser = argparse.ArgumentParser()
parser.add_argument(&quot;prog_args&quot;, nargs='*')
parser.add_argument(&quot;-e&quot;, action='append')
args = parser.parse_args()
prog_args = args.prog_args
env = dict([e.split('=') for e in args.e])

print(f&quot;Program args: {prog_args}&quot;)
print(f&quot;Env options: {env}&quot;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Example.&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ python3 test.py one two three -ek1=1 -e k2=foo
Program args: ['one', 'two', 'three']
Env options: {'k1': '1', 'k2': 'foo'}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Installing Python on Windows Without Admin Rights</title>
   <link href="http://localhost:4000/2018/06/06/installing-python-on-windows-without-admin-rights/"/>
   <updated>2018-06-06T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/06/06/installing-python-on-windows-without-admin-rights</id>
   <content type="html">&lt;p&gt;To install Python on Windows without Admin Rights:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Download binary from &lt;a href=&quot;https://www.python.org/downloads/windows/&quot;&gt;https://www.python.org/downloads/windows/&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Run the following in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cmd.exe&lt;/code&gt; terminal.&lt;/p&gt;

    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mkdir %USERPROFILE%\apps\python-2.6.6
msiexec /a python-2.6.6.amd64.msi /qb TARGETDIR=%USERPROFILE%\apps\python-2.6.6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Starting Python 3.5 the official downloads site already has “Windows
x86-64 embeddable zip file” version you may download. This you may
install without Admin Rights already.&lt;/p&gt;

&lt;p&gt;Ref:
&lt;a href=&quot;https://stackoverflow.com/questions/2678702/install-python-2-6-without-using-installer-on-win32&quot;&gt;https://stackoverflow.com/questions/2678702/install-python-2-6-without-using-installer-on-win32&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to setup .ssh folder permissions</title>
   <link href="http://localhost:4000/2018/05/24/how-to-setup-ssh-folder-permissions/"/>
   <updated>2018-05-24T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/05/24/how-to-setup-ssh-folder-permissions</id>
   <content type="html">&lt;h1 id=&quot;how-to-setup-ssh-folder-permissions&quot;&gt;How to setup .ssh folder permissions&lt;/h1&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;chmod 700 ~/.ssh                # (drwx------)
chmod 600 ~/.ssh/authorized_key # (-rw-------)
chmod 600 ~/.ssh/id_rsa         # (-rw-------)
chmod 644 ~/.ssh/id_rsa.pub     # (-rw-r--r--)
chmod 755 ~                     # (drwxr-xr-x)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ref:
&lt;a href=&quot;https://superuser.com/questions/215504/permissions-on-private-key-in-ssh-folder&quot;&gt;https://superuser.com/questions/215504/permissions-on-private-key-in-ssh-folder&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Create multiple VMs using Vagrant</title>
   <link href="http://localhost:4000/2018/05/19/create-multiple-vms-using-vagrant/"/>
   <updated>2018-05-19T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/05/19/create-multiple-vms-using-vagrant</id>
   <content type="html">&lt;p&gt;Vagrant is a great tool to automate and setup VMs. Here is a config file
that can setup multiple VMs in your own PC to simulate a
controller(admin), db, and app servers farm env. I will setup so that
it’s ready to install Ansible in a the control server, and ensure all
other servers is accessible by a private virtual IP with default python
executable.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Install VirtualBox and Vagrant in your development PC. (These two
requires elevated admin rights!)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Now as normal user open a terminal and run the following:&lt;/p&gt;

    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ mkdir vm-serversfarm
$ vagrant init ubuntu/xenial64
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Now edit &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Vagrantfile&lt;/code&gt; with the following:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# This file is to setup Ubuntu VM servers
Vagrant.configure(&quot;2&quot;) do |config|
  vm_box = &quot;ubuntu/xenial64&quot;
  config.vm.define &quot;admin&quot; do |admin|
    admin.vm.box = vm_box
    admin.vm.hostname = 'ubuntu-xenial-admin'
    admin.vm.network &quot;private_network&quot;, ip: &quot;192.168.56.200&quot;
    admin.vm.provision &quot;shell&quot;, privileged: false,
      inline: &amp;lt;&amp;lt;-SCRIPT_DOC
        ssh-keygen -f ~vagrant/.ssh/id_rsa -t rsa -N ''
        cp -v ~vagrant/.ssh/id_rsa.pub /vagrant/admin_id_rsa.pub
      SCRIPT_DOC
    admin.vm.provision &quot;shell&quot;,
      inline: &amp;lt;&amp;lt;-SCRIPT_DOC
        apt-get update
        apt-get install -y ansible
      SCRIPT_DOC
  end

  config.vm.define &quot;db1&quot; do |db1|
    db1.vm.box = vm_box
    db1.vm.hostname = 'ubuntu-xenial-db1'
    db1.vm.network &quot;private_network&quot;, ip: &quot;192.168.56.211&quot;
    db1.vm.provision &quot;shell&quot;, inline: &quot;cat /vagrant/admin_id_rsa.pub &amp;gt;&amp;gt; ~vagrant/.ssh/authorized_keys&quot;
    db1.vm.provision &quot;shell&quot;,
      inline: &amp;lt;&amp;lt;-SCRIPT_DOC
        #apt-get update
        apt-get install -y python
        apt-get install -y postgresql
      SCRIPT_DOC
  end

  config.vm.define &quot;app1&quot; do |app1|
    app1.vm.box = vm_box
    app1.vm.hostname = 'ubuntu-xenial-app1'
    app1.vm.network &quot;private_network&quot;, ip: &quot;192.168.56.221&quot;
    app1.vm.provision &quot;shell&quot;, inline: &quot;cat /vagrant/admin_id_rsa.pub &amp;gt;&amp;gt; ~vagrant/.ssh/authorized_keys&quot;
    app1.vm.provision &quot;shell&quot;,
      inline: &amp;lt;&amp;lt;-SCRIPT_DOC
        #apt-get update
        apt-get install -y python
      SCRIPT_DOC
  end

  config.vm.define &quot;app2&quot; do |app2|
    app2.vm.box = vm_box
    app2.vm.hostname = 'ubuntu-xenial-app2'
    app2.vm.network &quot;private_network&quot;, ip: &quot;192.168.56.222&quot;
    app2.vm.provision &quot;shell&quot;, inline: &quot;cat /vagrant/admin_id_rsa.pub &amp;gt;&amp;gt; ~vagrant/.ssh/authorized_keys&quot;
    app2.vm.provision &quot;shell&quot;,
      inline: &amp;lt;&amp;lt;-SCRIPT_DOC
        #apt-get update
        apt-get install -y python
      SCRIPT_DOC
  end
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you can bring them up by running just this command:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ vagrant up
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When all is done, you may ssh into any box by their name like this&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ vagrant ssh admin
$ # Or any of other boxes: db1, app1, app2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;using-centos-vms&quot;&gt;Using CentOS VMs&lt;/h1&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# This file is to setup CentOS VM servers
Vagrant.configure(&quot;2&quot;) do |config|
  vm_box = &quot;generic/centos7&quot;

  # Server app1 is the admin server. We will also host the DB server here.
  config.vm.define &quot;app1&quot; do |app1|
    app1.vm.box = vm_box
    app1.vm.hostname = 'app1'
    app1.vm.network &quot;private_network&quot;, ip: &quot;192.168.56.201&quot;
    app1.vm.synced_folder &quot;.&quot;, &quot;/vagrant_data&quot;
    app1.vm.provision &quot;shell&quot;, inline: &amp;lt;&amp;lt;-SCRIPT_DOC
      yum install -y python-virtualenv python36 ansible postgresql
    SCRIPT_DOC
    app1.vm.provision &quot;shell&quot;, privileged: false, inline: &amp;lt;&amp;lt;-SCRIPT_DOC
      ssh-keygen -f ~vagrant/.ssh/id_rsa -t rsa -N ''
      cp -v ~vagrant/.ssh/id_rsa.pub /vagrant_data/app1_id_rsa.pub
    SCRIPT_DOC
  end

  # Server app2 is a application workhorse server
  config.vm.define &quot;app2&quot; do |app2|
    app2.vm.box = vm_box
    app2.vm.hostname = 'app2'
    app2.vm.network &quot;private_network&quot;, ip: &quot;192.168.56.202&quot;
    app2.vm.synced_folder &quot;.&quot;, &quot;/vagrant_data&quot;
    app2.vm.provision &quot;shell&quot;, inline: &amp;lt;&amp;lt;-SCRIPT_DOC
      yum install -y python36
    SCRIPT_DOC
    app2.vm.provision &quot;shell&quot;, privileged: false, inline: &amp;lt;&amp;lt;-SCRIPT_DOC
      cat /vagrant_data/app1_id_rsa.pub &amp;gt;&amp;gt; ~vagrant/.ssh/authorized_keys
      chmod 600 ~vagrant/.ssh/authorized_keys
      chmod 700 ~vagrant/.ssh
    SCRIPT_DOC
  end

  # Server app3 is a application workhorse server
  config.vm.define &quot;app3&quot; do |app3|
    app3.vm.box = vm_box
    app3.vm.hostname = 'app3'
    app3.vm.network &quot;private_network&quot;, ip: &quot;192.168.56.203&quot;
    app3.vm.synced_folder &quot;.&quot;, &quot;/vagrant_data&quot;
    app3.vm.provision &quot;shell&quot;, inline: &amp;lt;&amp;lt;-SCRIPT_DOC
      yum install -y python36
    SCRIPT_DOC
    app3.vm.provision &quot;shell&quot;, privileged: false, inline: &amp;lt;&amp;lt;-SCRIPT_DOC
      cat /vagrant_data/app1_id_rsa.pub &amp;gt;&amp;gt; ~vagrant/.ssh/authorized_keys
      chmod 600 ~vagrant/.ssh/authorized_keys
      chmod 700 ~vagrant/.ssh
    SCRIPT_DOC
  end
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Starting SublimeText on Cygwin</title>
   <link href="http://localhost:4000/2018/04/09/starting-sublimetext-on-cygwin/"/>
   <updated>2018-04-09T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/04/09/starting-sublimetext-on-cygwin</id>
   <content type="html">&lt;p&gt;I edit files a lot from command line Cygwin, and I usually use an alias
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;e&lt;/code&gt; to my favorite editor. For SublimeText, I found it more useful to
start a new windows on files I pass in like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function subl() { &quot;/C/Users/zemian/apps/Sublime-Text-Build-3143-x64/subl.exe&quot; --new-window $(cygpath -am &quot;$@&quot;) ; }
alias e=subl
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now in terminal, I can edit any files by simply running this:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$ e ~/.bashrc&lt;/code&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Java versions</title>
   <link href="http://localhost:4000/2018/03/26/java-versions/"/>
   <updated>2018-03-26T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/03/26/java-versions</id>
   <content type="html">&lt;p&gt;How to check Java version from compiled classes&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;javap -cp target/classes -verbose com.zemian.hellojava.App | grep 'major version'
major version: 49
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You may use this forumla to get the JDK version:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;class_file_major_ver&amp;gt; - 44 = JDK version&lt;/code&gt;. So this means above class
is targeted for JDK 5 (1.5).&lt;/p&gt;

&lt;p&gt;Here are more examples of different class format versions matching to
JDK versions.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;major version: 45.3 = Java 1.1
major version: 46 = Java 1.2
major version: 47 = Java 1.3
major version: 48 = Java 1.4
major version: 49 = Java 1.5
major version: 50 = Java 1.6
major version: 51 = Java 1.7
major version: 52 = Java 1.8
major version: 53 = Java 9
major version: 54 = Java 10
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ref: &lt;a href=&quot;https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html&quot;&gt;https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Switching Different JDK in Cygwin</title>
   <link href="http://localhost:4000/2018/03/24/switching-different-jdk-in-cygwin/"/>
   <updated>2018-03-24T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/03/24/switching-different-jdk-in-cygwin</id>
   <content type="html">&lt;p&gt;I love to use bash shell terminal. It’s a much more powerful terminal to
do everyday tasks. Even in Windows, I can get most of what I need using
Cygwin. Unfortunately Java executable are native to OS only, and for
Windows, it would still work under Cygwin, but all the file system paths
are still native. Java can understand the mixed-path though, and it has
made somewhat easier than the Windows native backward slash path like
typing. This means we can define &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;JAVA_HOME&lt;/code&gt; variable using mixed path
mode. In Cygwin, I define my &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.bashrc&lt;/code&gt; like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;export JAVA_HOME=C:/Users/zemian/apps/jdk-8u161
PATH=$HOME/apps/jdk-8u161/bin:$PATH
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I sometimes work with different version of JDK for various application
testing. In this case, I need a way to quicly switch JDK version in my
shell env. To make it easier, I have installed all of my JDK in a
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$HOME/apps&lt;/code&gt; directory, and created symbolic links to each JDKs like
this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cd $HOME/apps
ls -ld jdk*

drwx------+ 1 zemian staff 0 Mar 24 16:58 jdk-8u161
drwx------+ 1 zemian staff 0 Mar 24 10:57 jdk-9.0.4
drwx------+ 1 zemian staff 0 Mar 24 10:48 jdk-10

lrwxrwxrwx  1 zemian staff 9 Mar 24 16:55 jdk8 -&amp;gt; jdk-8u161
lrwxrwxrwx  1 zemian staff 9 Mar 24 11:02 jdk9 -&amp;gt; jdk-9.0.4
lrwxrwxrwx  1 zemian staff 6 Mar 24 11:00 jdk10 -&amp;gt; jdk-10
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now that each JDK has a nice consistent version number in path, then I
create a shell function like this to switch between them:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Switching Multiple JDK
switchjava() {
        JDK=&quot;jdk$1&quot;
        if [[ ! -d $APPS_DIR/$JDK ]]; then
                echo &quot;ERROR: JDK path not found: $APPS_DIR/$JDK&quot;
                return
        fi
        export JAVA_HOME=`cygpath -wm $APPS_DIR/$JDK`
        export PATH=$APPS_DIR/$JDK/bin:$PATH

        # Verifying java
        echo &quot;Switched JAVA_HOME to $JAVA_HOME&quot;
        echo &quot;Java Path:&quot;
        which java
        echo &quot;Java Version:&quot;
        java -version
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To put it in use, it looks like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ switchjava 9
Switched JAVA_HOME to C:/Users/zemian/apps/jdk-9.0.4
Java Path:
/home/zemian/apps/jdk9/bin/java
Java Version:
openjdk version &quot;9.0.4&quot;
OpenJDK Runtime Environment (build 9.0.4+11)
OpenJDK 64-Bit Server VM (build 9.0.4+11, mixed mode)

$ switchjava 8
Switched JAVA_HOME to C:/Users/zemian/apps/jdk-8u161
Java Path:
/home/zemian/apps/jdk8/bin/java
Java Version:
java version &quot;1.8.0_161&quot;
Java(TM) SE Runtime Environment (build 1.8.0_161-b12)
Java HotSpot(TM) 64-Bit Server VM (build 25.161-b12, mixed mode)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Oracle Java SE JDK vs OpenJDK</title>
   <link href="http://localhost:4000/2018/03/24/oracle-java-se-jdk-vs-openjdk/"/>
   <updated>2018-03-24T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/03/24/oracle-java-se-jdk-vs-openjdk</id>
   <content type="html">&lt;p&gt;In general:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;JRE - Java Runtime Environment. It comes with the Java (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;java&lt;/code&gt;)
executable for running Java application. This is typical for end
users who use it to run compiled Java applications (in jar file
distribution), and not doing any development. JRE is smaller to
download than JDK.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;JDK - Java Development Kit. It comes with Java compiler (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;javac&lt;/code&gt;)
and many other development tools; and it also include the JRE as
well. This is for Java development and running Java applications
together. As a developer, you usually want to get this as single
package.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Oracle sponsors and drives the official open source
&lt;a href=&quot;http://jdk.java.net/&quot;&gt;OpenJDK&lt;/a&gt; project, where new Java edition are
develope. It provides binary releases that developers may download for
various OS envs. (Note starting JDK9, you may download binary package
that simply untar/unzip into a directory without need of installer!)&lt;/p&gt;

&lt;p&gt;Oracle also provides commercial version of the &lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/downloads/index.html&quot;&gt;Java SE
JDK&lt;/a&gt;.
These JDK packages has different licenses for usage, and are built with
different installer format. Users usually require local Admin Rights to
install it.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Compare Multiple JDK Versions Startup Time</title>
   <link href="http://localhost:4000/2018/03/24/compare-multiple-jdk-versions-startup-time/"/>
   <updated>2018-03-24T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/03/24/compare-multiple-jdk-versions-startup-time</id>
   <content type="html">&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jdk-startup-time-test.py&lt;/code&gt;.&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#!/usr/bin/env python3
# Author: Zemian Deng 2018-03-24
#
# This script will test multiple JDK versions of startup time in your system
# We assume all JDK are installed in $HOME/apps directory with
# names matching in 'jdk_versions' list.
# Also we asusme you compiled `hello.java` with lowest JDK
# you have in the same directory as this script. This is
# used for testing the JVM loading time.
#
# NOTE: Running the script using Cygwin is a LOT slower than
# running it natively in cmd.exe shell! This is because
# time for Cygwin to start Java is very slow!
#

import time, subprocess, os
home_dir = os.path.expanduser('~')
app_dir = home_dir + '/apps'
jdk_versions = [
'jdk-6u29',
'jdk-7u80',
'jdk-8u161',
'jdk-9.0.4',
'jdk-10']
def test_jdk_startup(jdk):
        runs = []
        java_cmd = app_dir + '/' + jdk + '/bin/java'
        #print(f&quot;Testing {java_cmd}&quot;)
        for _ in range(10):
                t1 = time.time()
                subprocess.check_output([java_cmd, 'hello'])
                t2 = time.time()
                runs.append(t2 - t1)
        return sum(runs) / len(runs)

# Now test it
for jdk in jdk_versions:
        t = test_jdk_startup(jdk)
        print(f&quot;{jdk:20} avg start-time {t:.3}s&quot;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is a sample of output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python3 jdk-startup-time-test.py

jdk-6u29             avg start-time 0.301s
jdk-7u80             avg start-time 0.122s
jdk-8u161            avg start-time 0.178s
jdk-9.0.4            avg start-time 0.359s
jdk-10               avg start-time 0.323s
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Install Windows JDK Without Admin Rights</title>
   <link href="http://localhost:4000/2018/03/23/install-windows-jdk-without-admin-rights/"/>
   <updated>2018-03-23T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/03/23/install-windows-jdk-without-admin-rights</id>
   <content type="html">&lt;h1 id=&quot;installing-jdk-7&quot;&gt;Installing JDK 7&lt;/h1&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Download &lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/downloads/index.html&quot;&gt;Oracle Java SE JDK 7&lt;/a&gt;
In this example, we will use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jdk-7u80-windows-x64.exe&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Extract &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jdk-7u80-windows-x64.exe&lt;/code&gt; using 7-zip tool. Right click the
file then select context menu 7-zip &amp;gt; Extract to
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jdk-7u80-windows-x64&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Go to the directory &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jdk-7u80-windows-x64/.rsrc/1033/JAVA_CAB10&lt;/code&gt;&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;Step 1: Extract the file &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;111&lt;/code&gt; using 7-zip again, which will
result a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tools.zip&lt;/code&gt; file&lt;/p&gt;

        &lt;ul&gt;
          &lt;li&gt;Right click the file then select context menu 7-zip &amp;gt; Extract here&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Step 2: Extract tools.zip using 7-zip tool again&lt;/p&gt;

        &lt;ul&gt;
          &lt;li&gt;Right click the file then select context menu 7-zip &amp;gt; Extract to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tools&lt;/code&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Step 3: Open &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cmd.exe&lt;/code&gt; and cd into &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tools&lt;/code&gt; directory above, then
run the following:&lt;/p&gt;

        &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;for /r %i in (*.pack) do bin\unpack200 -r -v %i %~pi%~ni.jar
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
        &lt;p&gt;Or if you use Cygwin Bash, you can run this:&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;find . -name ‘*.pack’ -type f -exec sh -c ‘bin/unpack200 -r -v $0 ${0/.pack/.jar}’ {} \;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Step 4: Copy &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tools&lt;/code&gt; folder and rename it to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;%USERPROFILE%/apps/jdk-7u80&lt;/code&gt;&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;Optionally, if you want the JDK source code, following these
instruction:&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Step 1: Go to the directory Go to the directory    &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jdk-7u80-windows-x64/.rsrc/1033/JAVA_CAB9&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Step 2: Extract the file &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;110&lt;/code&gt;, which contains &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src.zip&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Step 3: Copy &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src.zip&lt;/code&gt; into &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;%USERPROFILE%/apps/jdk-7u80&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Refs:
&lt;a href=&quot;http://stackoverflow.com/questions/10891405/installing-jdk-without-administrator-privileges&quot;&gt;http://stackoverflow.com/questions/10891405/installing-jdk-without-administrator-privileges&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;installing-jdk-8&quot;&gt;Installing JDK 8&lt;/h1&gt;

&lt;p&gt;The JDK8 update 102 or higher has different file structure!&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Use 7-zip to unpack &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jdk-8u131-windows-x64.exe&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cd .rsrc/1033/JAVA_CAB10&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Use 7-zip to unpack &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;111&lt;/code&gt; file and extract &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tools.zip&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Use same instructions as above to unpack &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tools.zip&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Java source &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src.zip&lt;/code&gt; is within the file &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;110&lt;/code&gt; located inside &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.rsrc/1033/JAVA_CAB9&lt;/code&gt;.&lt;/p&gt;

&lt;h1 id=&quot;installing-jdk-9&quot;&gt;Installing JDK 9&lt;/h1&gt;

&lt;p&gt;Staring JDK9, the &lt;a href=&quot;http://jdk.java.net/9&quot;&gt;OpenJDK&lt;/a&gt; provides binary tar
ball (zipped) executable JDK package that can unpack in Windows in any
directory. But if you still want Oracle Java SE JDK, then you still use
above instruction to get around installing without admin rights.&lt;/p&gt;

&lt;h1 id=&quot;refs&quot;&gt;Refs&lt;/h1&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/10891405/installing-jdk-without-administrator-privileges&quot;&gt;https://stackoverflow.com/questions/10891405/installing-jdk-without-administrator-privileges&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Print Python Runtime Information</title>
   <link href="http://localhost:4000/2018/03/22/print-python-runtime-information/"/>
   <updated>2018-03-22T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/03/22/print-python-runtime-information</id>
   <content type="html">&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Print python runtime information
import os, sys
print(f&quot;CWD={os.getcwd()}&quot;)
print(f&quot;Python={sys.version}&quot;)
paths = '\n'.join(sys.path)
print(f&quot;Lib={paths}&quot;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Parsing Arguments and Options With Python Script</title>
   <link href="http://localhost:4000/2018/03/22/parsing-arguments-and-options-with-python-script/"/>
   <updated>2018-03-22T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/03/22/parsing-arguments-and-options-with-python-script</id>
   <content type="html">&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import argparse
parser = argparse.ArgumentParser()
parser.add_argument('--file')
parser.add_argument('--debug', action='store_true')
args = parser.parse_args()

if args.debug:
        print(f&quot;Options: {args}&quot;)

if args.file:
        with open(args.file) as fh:
                for line in fh:
                        print(line, end='')
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Init and Start PostgreSQL in Cygwin</title>
   <link href="http://localhost:4000/2018/03/22/init-and-start-postgresql-in-cygwin/"/>
   <updated>2018-03-22T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/03/22/init-and-start-postgresql-in-cygwin</id>
   <content type="html">&lt;h1 id=&quot;run-postgres-server&quot;&gt;Run Postgres Server&lt;/h1&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Start /usr/sbin/cygserver first if you haven't already done so
mkdir /srv/pgdata
export PGDATA=/srv/pgdata
pg_ctl init
pg_ctl start
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;test-posgres-using-client&quot;&gt;Test Posgres Using Client&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;psql postgres

postgres=# create table test_ratings(username varchar(200), rating int);
postgres=# insert into test_ratings values('tester1', 5), ('tester2', 4);
postgres=# select * from test_ratings;
 username | rating
----------+--------
 tester1  |      5
 tester2  |      4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;test-connectivity-using-python&quot;&gt;Test connectivity using Python&lt;/h2&gt;

&lt;p&gt;Run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pip install psycopg2&lt;/code&gt; if you haven’t already install the driver.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;testdb.py&lt;/code&gt;.&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import psycopg2
with psycopg2.connect('dbname=postgres') as conn:
        with conn.cursor() as cur:
                cur.execute('select * from test_ratings')
                while True:
                        row = cur.fetchmany()
                        if len(row) == 0:
                                break
                        print(row)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;postgres-windows-installation&quot;&gt;Postgres Windows Installation&lt;/h1&gt;

&lt;p&gt;The official download is provided by EnterpriseDB (EDB) You can get a
zip package from:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.enterprisedb.com/download-postgresql-binaries&quot;&gt;https://www.enterprisedb.com/download-postgresql-binaries&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To install, just unzip it.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mkdir $HOME/apps/postgresql-10.3-2
cd $HOME/apps/postgresql-10.3-2
unzip postgresql-10.3-2-windows-x64-binaries.zip
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Server can be started manually like this in cmd.exe prompt:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bin\pg_ctl -D data -o &quot;--encoding=UTF8 --auth=trust&quot; initdb
mkdir logs
bin\pg_ctl -D data -l logs\postgres.log start

bin\createdb %USERNAME%
chcp 1252
bin\psql

zemian=# select version();
                          version
------------------------------------------------------------
 PostgreSQL 10.3, compiled by Visual C++ build 1800, 64-bit
(1 row)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;By default inidb will create a “postgres” database, but user is your
Windows login name, and it will not match. It’s more convient to create
a database that match your username, and use that as default.&lt;/p&gt;

&lt;p&gt;You should be careful with “–auth=trust”, which can get you started
quickly but not very secure.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Java Logging Properties</title>
   <link href="http://localhost:4000/2018/03/16/java-logging-properties/"/>
   <updated>2018-03-16T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/03/16/java-logging-properties</id>
   <content type="html">&lt;p&gt;Example:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;java -Djava.util.logging.config.file=java-logging.properties myapp.Hello&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;java-logging.properties.&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;handlers= java.util.logging.ConsoleHandler
java.util.logging.ConsoleHandler.level = FINEST
sun.net.www.protocol.http.HttpURLConnection.level = ALL
myapp.Hello.level = ALL
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Java Http Proxy with User and Password</title>
   <link href="http://localhost:4000/2018/03/16/java-http-proxy-with-user-and-password/"/>
   <updated>2018-03-16T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/03/16/java-http-proxy-with-user-and-password</id>
   <content type="html">&lt;p&gt;File: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;scratch\_1.java&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.Authenticator;
import java.net.PasswordAuthentication;
import java.net.URL;

public class scratch_1{
    public static void main(String[] args) throws Exception {
        System.setProperty(&quot;java.util.logging.config.file&quot;, &quot;java-logging.properties&quot;);

        System.setProperty(&quot;http.proxyHost&quot;, &quot;proxy.mycompany.com&quot;);
        System.setProperty(&quot;http.proxyPort&quot;, &quot;8080&quot;);
        System.setProperty(&quot;http.nonProxyHosts&quot;, &quot;*.mycompany.com&quot;);
        System.setProperty(&quot;https.proxyHost&quot;, &quot;proxy.mycompany.com&quot;);
        System.setProperty(&quot;https.proxyPort&quot;, &quot;8080&quot;);
        System.setProperty(&quot;https.nonProxyHosts&quot;, &quot;*.mycompany.com&quot;);

        Authenticator.setDefault(
            new Authenticator() {
                @Override
                public PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication(&quot;zemian&quot;, &quot;test123&quot;.toCharArray());
                }
            }
        );

        URL url = new URL(&quot;http://some.external.site.com&quot;);
        //URL url = new URL(&quot;http://myapp.mycompany.com&quot;);
        System.out.println(&quot;== WGET &quot; + url);
        try (BufferedReader reader = new BufferedReader(new InputStreamReader(url.openStream()))) {
            String line;
            while ((line = reader.readLine()) != null) {
                System.out.println(line);
            }
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;File: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;java-logging.properties&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;handlers= java.util.logging.ConsoleHandler
java.util.logging.ConsoleHandler.level = FINEST
sun.net.www.protocol.http.HttpURLConnection.level = ALL
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How To Create Windows Context Menu Without Admin Rights</title>
   <link href="http://localhost:4000/2018/03/16/how-to-create-windows-context-menu-without-admin-rights/"/>
   <updated>2018-03-16T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/03/16/how-to-create-windows-context-menu-without-admin-rights</id>
   <content type="html">&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;@REM Base on tips here:
@REM https://stackoverflow.com/questions/48138681/how-to-add-sublime-text-to-contextual-menu-without-admin-privileges-on-windows

@reg add &quot;HKEY_CURRENT_USER\Software\Classes\*\shell\Open with Sublime Text 3&quot;         /t REG_SZ /v &quot;&quot; /d &quot;Open with Sublime Text 3&quot;   /f
@reg add &quot;HKEY_CURRENT_USER\Software\Classes\*\shell\Open with Sublime Text 3&quot;         /t REG_EXPAND_SZ /v &quot;Icon&quot; /d &quot;%st3Path%,0&quot; /f
@reg add &quot;HKEY_CURRENT_USER\Software\Classes\*\shell\Open with Sublime Text 3\command&quot; /t REG_SZ /v &quot;&quot; /d &quot;C:\Users\zemian\apps\Sublime-Text-Build-3143-x64\sublime_text.exe \&quot;%%1\&quot;&quot; /f

@REM If you want to remove above
@REM @reg delete  &quot;HKEY_CURRENT_USER\Software\Classes\*\shell\Open with Sublime Text 3\command&quot; /f &amp;gt;nul 2&amp;gt;&amp;amp;1
@REM @reg delete  &quot;HKEY_CURRENT_USER\Software\Classes\*\shell\Open with Sublime Text 3&quot; /f &amp;gt;nul 2&amp;gt;&amp;amp;1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Getting Project File Stats with Python</title>
   <link href="http://localhost:4000/2018/03/14/getting-project-file-stats-with-python/"/>
   <updated>2018-03-14T01:00:00-04:00</updated>
   <id>http://localhost:4000/2018/03/14/getting-project-file-stats-with-python</id>
   <content type="html">&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import os, sys
from collections import defaultdict
if len(sys.argv) == 1:
        path = '.'
else:
        path = sys.argv[1]
print(f&quot;Inspecting dir: {os.path.abspath(path)}&quot;)
dir_count, file_count, size_count = (0, 0, 0)
file_type_counts = defaultdict(lambda: 0)
for dirpath, dirnames, filenames in os.walk(path):
        dir_count += len(dirnames)
        file_count += len(filenames)
        for f in filenames:
                size_count += os.path.getsize(os.path.join(dirpath, f))
                base, ext = os.path.splitext(f)
                if ext == '':
                        file_type_counts[base] += 1
                else:
                        file_type_counts[ext] += 1

# Sort file_type_counts by value then print
file_size = round(size_count / (1024 * 1024))
print(f&quot;Total file count: {file_count}&quot;)
print(f&quot;Total dir size: {file_size} MB&quot;)
print(f&quot;Total dir count: {dir_count}&quot;)
print(f&quot;Top 10 file type counts:&quot;)
top_type_counts = sorted(file_type_counts, key=file_type_counts.get, reverse=True)[:10]
for file_type in top_type_counts:
        type_count = file_type_counts[file_type]
        percentage = (type_count / file_count)
        print(f&quot;  {file_type:25} {type_count:&amp;lt;10} {percentage:.1%}&quot;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Linux SublimeText title says "Unregistered" despite you have paid license</title>
   <link href="http://localhost:4000/2018/03/11/linux-sublimetext-title-says-unregistered-despite-you-have-paid-license/"/>
   <updated>2018-03-11T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/03/11/linux-sublimetext-title-says-unregistered-despite-you-have-paid-license</id>
   <content type="html">&lt;p&gt;Solution: Edit the “Name” line in
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.local/share/applications/sublime_text.desktop&lt;/code&gt; file.&lt;/p&gt;

&lt;p&gt;See
&lt;a href=&quot;https://askubuntu.com/questions/678133/sublime-text-3-says-unregistered-in-menu-title-bar&quot;&gt;https://askubuntu.com/questions/678133/sublime-text-3-says-unregistered-in-menu-title-bar&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to find Linux Standard Base release info</title>
   <link href="http://localhost:4000/2018/03/11/how-to-find-linux-standard-base-release-info/"/>
   <updated>2018-03-11T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/03/11/how-to-find-linux-standard-base-release-info</id>
   <content type="html">&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;zemian@zemian-VirtualBox:~$ lsb_release -a

No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 16.04.3 LTS
Release:        16.04
Codename:       xenial
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Reduce recent project list size in IntelliJ</title>
   <link href="http://localhost:4000/2018/03/07/reduce-recent-project-list-size-in-intellij/"/>
   <updated>2018-03-07T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/03/07/reduce-recent-project-list-size-in-intellij</id>
   <content type="html">&lt;p&gt;When opening a project from IntelliJ IDE, it will give you a list of
menu that contains your recent projects. This list however has default
of 50 items max, and sometimes I find it stretched the menu popup too
long and covered some of IDE the status line (which I need to verify the
project path to be open). It’s a pity that there is obvious normal IDE
Settings to change this, but today I found a post that shows how you can
do it this:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Go to menu: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Help-&amp;gt;Find Action-&amp;gt;Registry&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;In the diablog table, find the “ide.max.recent.projects” key entry
and change the value to your liking (eg: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;10&lt;/code&gt;)&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Ref:
&lt;a href=&quot;https://intellij-support.jetbrains.com/hc/en-us/community/posts/207089089-SOLVED-Where-do-I-set-the-maximum-number-of-recent-projects-to-be-shown-in-the-File-Open-Recent-list&quot;&gt;https://intellij-support.jetbrains.com/hc/en-us/community/posts/207089089-SOLVED-Where-do-I-set-the-maximum-number-of-recent-projects-to-be-shown-in-the-File-Open-Recent-list&lt;/a&gt;-&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Compling Apache HTTPD Web Server on MacOSX</title>
   <link href="http://localhost:4000/2018/03/07/compling-apache-httpd-web-server-on-macosx/"/>
   <updated>2018-03-07T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/03/07/compling-apache-httpd-web-server-on-macosx</id>
   <content type="html">&lt;p&gt;Before you begin, you should know that the HTTPD server is very likely
already comes with your MacOSX! For example, here is how my server looks
like:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ apachectl -t -D DUMP_INCLUDES
Included configuration files:
  (*) /private/etc/apache2/httpd.conf
    (498) /private/etc/apache2/extra/httpd-mpm.conf
    (504) /private/etc/apache2/extra/httpd-autoindex.conf
    (544) /private/etc/apache2/other/php7.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You would want to compile and buid your own HTTPD server if you like to
customize your own build or doing modules development. In that case,
read on.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#
# Requirement:
#  MacOSX Version:
#    Darwin myhost 17.4.0 Darwin Kernel Version 17.4.0: Sun Dec 17 09:19:54 PST 2017; root:xnu-4570.41.2~1/RELEASE_X86_64 x86_64
#  HTTPD version 2.4.9
#

# Install xcode that comes with C compiler
xcode-select --install

# Install package manager for macosx
# install brew from https://brew.sh

#
# NOTE: If your brew installation have probblem with error writing to /usr/local
# then try to uninstall then install brew again.
#
# Uninstall
# /usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall)&quot;
#
# Install
# /usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;
#

# Install make tools and required libraries
brew install autoconf automake libtool pcre

git clone git://git.apache.org/httpd.git
cd httpd
git checkout 2.4.9

# You also need to get the required library sources
cd srclib
git clone git://git.apache.org/apr.git
cd apr
git checkout 1.6.3
cd ../
git clone git://git.apache.org/apr-util.git
cd apr-util
git checkout 1.6.1
cd ../../

./buildconf
./configure

make
sudo make install

# When completed successful, the HTTPD server will be in /usr/local/apache2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Compling Apache HTTPD Web Server on Linux (Ubuntu)</title>
   <link href="http://localhost:4000/2018/03/07/compling-apache-httpd-web-server-on-linux-ubuntu/"/>
   <updated>2018-03-07T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/03/07/compling-apache-httpd-web-server-on-linux-ubuntu</id>
   <content type="html">&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo apt install autoconf automake libtool libtool-bin libpcre3-dev libexpat1-dev libexpat1-dev libexpat1-dev
mkdir ossdev
cd ossdev
git clone git://git.apache.org/httpd.git
git clone git://git.apache.org/apr.git httpd/srclib/apr
git clone git://git.apache.org/apr-util.git httpd/srclib/apr-util
cd httpd
git checkout 2.4.9
cd srclib/apr
git checkout 1.6.3
cd ../apr-util
git checkout 1.6.1
cd ../../
./buildconf
./configure --enable-mpms-shared --with-pmp=worker --enable-mods-shared=most
make
sudo make install
sudo /usr/local/apache2/bin/apachectl -k start
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Compling Apache HTTPD Web Server on Cygwin</title>
   <link href="http://localhost:4000/2018/03/07/compling-apache-httpd-web-server-on-cygwin/"/>
   <updated>2018-03-07T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/03/07/compling-apache-httpd-web-server-on-cygwin</id>
   <content type="html">&lt;p&gt;I have noted the instructions on how to build the HTTPD web server from
scratch in a Cygwin platoform in a Windows 7 PC.&lt;/p&gt;

&lt;p&gt;Note that compiling full HTTPD on Cygwin is very slow compare to other
system such as Linux or MacOSX! If you are looking to do full HTTPD
server development, it’s recommend to use a real Linux env instead.&lt;/p&gt;

&lt;h1 id=&quot;requirements&quot;&gt;Requirements:&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Apache HTTPD version &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;2.4.9&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CYGWIN\_NT-6.1 L328BDS002096US 2.10.0(0.325/5/3) 2018-02-02 15:16 x86\_64 Cygwin&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Install the following cygwin packages:&lt;/p&gt;

    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;        autoconf
        make
        automake
        m4
        gcc-core
        libtool
        bison
        flex
        perl
        libapr1-devel
        libaprutil1-devel
        libiconv-devel
        libpcre-devel
        libgdbm-devel
        openssl-devel
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;compiling-the-server&quot;&gt;Compiling the server&lt;/h1&gt;

&lt;p&gt;Step 1. Get the source:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone git://git.apache.org/httpd.git
cd httpd
git checkout 2.4.9

# You also need to get the required library sources
cd srclib
git clone git://git.apache.org/apr.git
cd apr
git checkout 1.6.3
cd ../
git clone git://git.apache.org/apr-util.git
cd apr-util
git checkout 1.6.1
cd ../../
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that unlike the source pre-package you download from Apache site,
the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;httpd&lt;/code&gt; source repo does not have &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;configure&lt;/code&gt; script, and you need
to generate it with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;buildconf&lt;/code&gt;. See next step for further instruction.&lt;/p&gt;

&lt;p&gt;Note that the current &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apr-util&lt;/code&gt; repository is empty in master branch!
This is because they moved the code to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apr&lt;/code&gt; starting version 2.0 dev,
but we still be using version 1.6.x, so we need to explicitly checkout
the tag or branch.&lt;/p&gt;

&lt;p&gt;Step 2. Compiling&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./buildconf
./configure --prefix=/usr/local/apache2 \
  --with-included-apr \
  --enable-mpms-shared \
  --with-mpm=worker \
  --enable-mods-shared=most
make
make install
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The option &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--prefix=/usr/local/apache2&lt;/code&gt; tells the build to install the
software into a user specific location.&lt;/p&gt;

&lt;p&gt;The option &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;enable-mpms-shared&lt;/code&gt; will make the mpm_module to be shared
library so you can switch to different threading model if you want.
Default to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;worker&lt;/code&gt; which should work nicely in Cygwin env.&lt;/p&gt;

&lt;p&gt;The option &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;enable-mods-shared&lt;/code&gt; will make most of the modules as shared
libraries. You can use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;all&lt;/code&gt; for full server.&lt;/p&gt;

&lt;p&gt;The option &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--with-included-apr&lt;/code&gt; tells the build to use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;srclib/apr&lt;/code&gt;
we have downloaded. Here you can use system installed &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apr&lt;/code&gt; if you like.
For an example:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./configure --prefix=/usr/local/apache2 \
--with-apr=/usr/bin/apr-1-config \
--with-apr-util=/usr/bin/apu-1-config \
--enable-mpms-shared \
--with-mpm=worker \
--enable-mods-shared=most
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For more details, see&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://httpd.apache.org/docs/2.4/install.html&quot;&gt;http://httpd.apache.org/docs/2.4/install.html&lt;/a&gt; or the INSTALL file
from source.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://httpd.apache.org/docs/2.4/programs/configure.html&quot;&gt;https://httpd.apache.org/docs/2.4/programs/configure.html&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Package manager for MacOSX</title>
   <link href="http://localhost:4000/2018/03/05/package-manager-for-macosx/"/>
   <updated>2018-03-05T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/03/05/package-manager-for-macosx</id>
   <content type="html">&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    #
    # Install package manager for macosx called brew from https://brew.sh
    #
    # Install
    $ /usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;

    # If your brew installation have problem with error writing to /usr/local
    # then try to uninstall then install brew again.
    #
    # Uninstall
    $ /usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall)&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Installing C compiler on MacOSX</title>
   <link href="http://localhost:4000/2018/03/05/installing-c-compiler-on-macosx/"/>
   <updated>2018-03-05T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/03/05/installing-c-compiler-on-macosx</id>
   <content type="html">&lt;p&gt;Install xcode - it contains C compiler and many other developer tools for MacOSX system&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;xcode-select --install
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How to setup Httpd Reverse Proxy To Tomcat</title>
   <link href="http://localhost:4000/2018/03/05/how-to-setup-httpd-reverse-proxy-to-tomcat/"/>
   <updated>2018-03-05T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/03/05/how-to-setup-httpd-reverse-proxy-to-tomcat</id>
   <content type="html">&lt;p&gt;Here is an example on how to configure HTTPD server with reverse proxy
into Tomcat, and adding the authenticated user as header and passing to
Tocmat server.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Example of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;httpd.conf&lt;/code&gt; file
```
    &lt;h1 id=&quot;apache-httpd-v24-minimal-configuration&quot;&gt;Apache httpd v2.4 minimal configuration&lt;/h1&gt;
    &lt;p&gt;ServerRoot “/etc/httpd”
Listen 80&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;LoadModule mpm_prefork_module modules/mod_mpm_prefork.so
LoadModule unixd_module modules/mod_unixd.so
LoadModule authz_core_module modules/mod_authz_core.so
LoadModule authz_user_module modules/mod_authz_user.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule dir_module modules/mod_dir.so&lt;/p&gt;

&lt;h1 id=&quot;other-useful-features&quot;&gt;Other useful features&lt;/h1&gt;
&lt;p&gt;LoadModule mime_module modules/mod_mime.so
LoadModule autoindex_module modules/mod_autoindex.so
LoadModule status_module modules/mod_status.so
LoadModule alias_module modules/mod_alias.so
LoadModule env_module modules/mod_env.so
LoadModule setenvif_module modules/mod_setenvif.so
LoadModule filter_module modules/mod_filter.so
LoadModule ext_filter_module modules/mod_ext_filter.so&lt;/p&gt;

&lt;p&gt;DirectoryIndex index.html
ErrorLog /var/log/httpd/error.log
LogFormat “%h %l %u %t &quot;%r&quot; %&amp;gt;s %b” common
CustomLog /var/log/httpd/access.log common&lt;/p&gt;
&lt;Directory /&gt;

&lt;p&gt;AllowOverride None
  Require all denied
&amp;lt;/Directory&amp;gt;&lt;/p&gt;

&lt;p&gt;DocumentRoot “/srv/www/htdocs”
&amp;lt;Directory “/srv/www/htdocs”&amp;gt;
  Require all granted
&amp;lt;/Directory&amp;gt;&lt;/p&gt;

&lt;h1 id=&quot;tomcat-reverse-proxy-setup&quot;&gt;Tomcat Reverse Proxy setup&lt;/h1&gt;
&lt;p&gt;LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_http_module modules/mod_proxy_http.so
LoadModule rewrite_module modules/mod_rewrite.so
LoadModule headers_module modules/mod_headers.so
LoadModule request_module modules/mod_request.so&lt;/p&gt;

&lt;p&gt;LoadModule auth_form_module modules/mod_auth_form.so
LoadModule auth_digest_module modules/mod_auth_digest.so
LoadModule authn_core_module modules/mod_authn_core.so
LoadModule authn_file_module modules/mod_authn_file.so
LoadModule session_module modules/mod_session.so
LoadModule session_cookie_module modules/mod_session_cookie.so&lt;/p&gt;

&lt;p&gt;ProxyPass “/jspwebapp” “http://localhost:8080/jspwebapp”
ProxyPassReverse “/jspwebapp” “http://localhost/jspwebapp”
ProxyPass “/jspwebapp2” “http://localhost:8080/jspwebapp2”
ProxyPassReverse “/jspwebapp2” “http://localhost/jspwebapp2”&lt;/p&gt;

&lt;h1 id=&quot;httpd-form-loginlogout-process&quot;&gt;HTTPD Form Login/logout process&lt;/h1&gt;
&lt;p&gt;&amp;lt;LocationMatch “/(jspwebapp|jspwebapp2)”&amp;gt;
        Require valid-user
        AuthName “SecuredArea”
        AuthFormProvider file
        AuthUserFile “/etc/httpd/passwd/passwords”
        AuthType form
        AuthFormLoginRequiredLocation “/login.html”&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    Session On
    SessionCookieName session path=/
    SessionMaxAge 1800
    SessionEnv On
    SessionHeader X-Replace-Session

    RewriteEngine On
    RewriteRule .* - [env=X_REMOTE_USER:%{LA-U:REMOTE_USER}]
    RequestHeader set appuser &quot;%{X_REMOTE_USER}e&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&amp;lt;/LocationMatch&amp;gt;
&amp;lt;Location “/login”&amp;gt;
        SetHandler form-login-handler
        AuthName “SecuredArea”
        AuthFormProvider file
        AuthUserFile “/etc/httpd/passwd/passwords”
        AuthType form
        AuthFormLoginRequiredLocation “/login.html”
        AuthFormLoginSuccessLocation “/secured/index.html”&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    Session On
    SessionCookieName session path=/
    SessionMaxAge 1800
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&amp;lt;/Location&amp;gt;
&amp;lt;Location “/logout”&amp;gt;
        SetHandler form-logout-handler
        AuthName “SecuredArea”
        AuthFormLogoutLocation “http://localhost/logout.html”&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    Session On
    SessionCookieName session path=/
    SessionMaxAge 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&amp;lt;/Location&amp;gt;
```&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Minimal HTTPD config file</title>
   <link href="http://localhost:4000/2018/03/04/minimal-httpd-config-file/"/>
   <updated>2018-03-04T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/03/04/minimal-httpd-config-file</id>
   <content type="html">&lt;p&gt;If you are looking for small set of httpd config file, here is one I
come up with based on original &lt;a href=&quot;https://wiki.apache.org/httpd/Minimal_Config&quot;&gt;httpd
wiki&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Apache httpd v2.4 minimal configuration
ServerName localhost
ServerRoot &quot;/usr/local/apache2&quot;
Listen 80

User daemon
Group daemon

# Core modules
LoadModule mpm_worker_module modules/mod_mpm_worker.so
LoadModule unixd_module modules/mod_unixd.so
LoadModule authz_core_module modules/mod_authz_core.so
LoadModule authz_user_module modules/mod_authz_user.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule dir_module modules/mod_dir.so

# Other useful features
LoadModule mime_module modules/mod_mime.so
LoadModule autoindex_module modules/mod_autoindex.so
LoadModule status_module modules/mod_status.so
LoadModule alias_module modules/mod_alias.so
LoadModule env_module modules/mod_env.so
LoadModule setenvif_module modules/mod_setenvif.so
LoadModule filter_module modules/mod_filter.so

DirectoryIndex index.html
ErrorLog logs/error.log
LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&amp;gt;s %b&quot; common
CustomLog logs/access.log common

DocumentRoot &quot;htdocs&quot;
&amp;lt;Directory &quot;htdocs&quot;&amp;gt;
  Options Indexes FollowSymLinks
  AllowOverride None
  Require all granted
&amp;lt;/Directory&amp;gt;

# Enable CGI support
LoadModule cgid_module modules/mod_cgid.so
ScriptAlias /cgi-bin/ &quot;cgi-bin/&quot;
&amp;lt;Directory &quot;cgi-bin&quot;&amp;gt;
    AllowOverride None
    Options None
    Require all granted
&amp;lt;/Directory&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Fetching Data From PostgreSQL Using Python psycopg2</title>
   <link href="http://localhost:4000/2018/03/04/fetching-data-from-postgresql-using-python-psycopg2/"/>
   <updated>2018-03-04T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/03/04/fetching-data-from-postgresql-using-python-psycopg2</id>
   <content type="html">&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import psycopg2
conn = psycopg2.connect('dbname=test user=test')
cur = conn.cursor()
cur.execute(&quot;select * from users order by username&quot;)
while True:
    row = cur.fetchmany()
    if len(row) == 0:
        break
    print(row)
cur.close()
conn.close()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Git clone failed with SSL certificate problem</title>
   <link href="http://localhost:4000/2018/03/03/git-clone-failed-with-ssl-certificate-problem/"/>
   <updated>2018-03-03T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/03/03/git-clone-failed-with-ssl-certificate-problem</id>
   <content type="html">&lt;p&gt;Problem:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/notepad-plus-plus/notepad-plus-plus
Cloning into 'notepad-plus-plus'...
fatal: unable to access 'https://github.com/notepad-plus-plus/notepad-plus-plus/': SSL certificate problem: unable to get local issuer certificate
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Solution:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git config --global http.sslVerify false
# then retry above command
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How to find httpd config file location</title>
   <link href="http://localhost:4000/2018/02/28/how-to-find-httpd-config-file-location/"/>
   <updated>2018-02-28T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/02/28/how-to-find-httpd-config-file-location</id>
   <content type="html">&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Zemians-MacBook-Air:~ zemian$ httpd -t -D DUMP_INCLUDES
Included configuration files:
  (*) /private/etc/apache2/httpd.conf
    (498) /private/etc/apache2/extra/httpd-mpm.conf
    (504) /private/etc/apache2/extra/httpd-autoindex.conf
    (544) /private/etc/apache2/other/php7.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How to setup httpd form authentication and user session login/logout</title>
   <link href="http://localhost:4000/2018/02/27/how-to-setup-httpd-form-authentication-and-user-session-loginlogout/"/>
   <updated>2018-02-27T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/02/27/how-to-setup-httpd-form-authentication-and-user-session-loginlogout</id>
   <content type="html">&lt;h2 id=&quot;configuration-setup-for-httpdconf&quot;&gt;Configuration setup for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;httpd.conf&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;Enable modules&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;LoadModule auth_form_module modules/mod_auth_form.so
LoadModule auth_digest_module modules/mod_auth_digest.so
LoadModule session_module modules/mod_session.so
LoadModule session_cookie_module modules/mod_session_cookie.so
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE: This configuration is only for tutorial purpose and not secured by default! Using Cookies session store is NOT secured! It’s recommend you use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mod_session_crypto&lt;/code&gt; to further secure data, or use server side session data store.&lt;/p&gt;

&lt;p&gt;Setup users&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# First user and new file
htpasswd -c /etc/httpd/passwd/passwords test
# Update/add more user
htpasswd /etc/httpd/passwd/passwords zemian
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE: You need &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;httpd-tool&lt;/code&gt; package from Cygwin to find &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;htpasswd&lt;/code&gt; command.&lt;/p&gt;

&lt;p&gt;Example of Digest login&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Digest Login
&amp;lt;Location &quot;/secured&quot;&amp;gt;
	AuthType Basic
	AuthName &quot;Restricted Files&quot;
	AuthBasicProvider file
	AuthUserFile &quot;/etc/httpd/passwd/passwords&quot;
	Require valid-user
&amp;lt;/Location&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Example of form login&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Form Login/logout process
&amp;lt;LocationMatch &quot;(/secured|/cgi-bin/secured)&quot;&amp;gt;
	Require valid-user
	AuthName &quot;SecuredArea&quot;
	AuthFormProvider file
	AuthUserFile &quot;/etc/httpd/passwd/passwords&quot;
    AuthType form
	AuthFormLoginRequiredLocation &quot;/login.html&quot;
	
	Session On
	SessionCookieName session path=/
	SessionMaxAge 30
	SessionEnv On
	SessionHeader X-Replace-Session
&amp;lt;/LocationMatch&amp;gt;
&amp;lt;Location &quot;/login&quot;&amp;gt;
	SetHandler form-login-handler
	AuthName &quot;SecuredArea&quot;
	AuthFormProvider file
	AuthUserFile &quot;/etc/httpd/passwd/passwords&quot;
    AuthType form
	AuthFormLoginRequiredLocation &quot;/login.html&quot;
    AuthFormLoginSuccessLocation &quot;/secured/index.html&quot;
		
	Session On
	SessionCookieName session path=/
&amp;lt;/Location&amp;gt;
&amp;lt;Location &quot;/logout&quot;&amp;gt;
	SetHandler form-logout-handler
	AuthName &quot;SecuredArea&quot;
	AuthFormLogoutLocation &quot;http://localhost/logout.html&quot;
	
	Session On
	SessionCookieName session path=/
	SessionMaxAge 1
&amp;lt;/Location&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Login page &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;htdocs/login.html&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;form method=&quot;POST&quot; action=&quot;/login&quot;&amp;gt;
  Username: &amp;lt;input type=&quot;text&quot; name=&quot;httpd_username&quot; value=&quot;&quot; /&amp;gt;
  Password: &amp;lt;input type=&quot;password&quot; name=&quot;httpd_password&quot; value=&quot;&quot; /&amp;gt;
  &amp;lt;input type=&quot;submit&quot; name=&quot;login&quot; value=&quot;Login&quot; /&amp;gt;
&amp;lt;/form&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Logout page &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;htdocs/logout.html&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;p&amp;gt;You have been logged out.&amp;lt;/p&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Secured page &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;htdocs/secured/index.html&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;p&amp;gt;This is secured area&amp;lt;/p&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Getting started with Apache HTTPD Web Server on Windows</title>
   <link href="http://localhost:4000/2018/02/27/getting-started-with-apache-httpd-web-server-on-windows/"/>
   <updated>2018-02-27T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/02/27/getting-started-with-apache-httpd-web-server-on-windows</id>
   <content type="html">&lt;h1 id=&quot;using-native-windows-binary-without-admin-rights&quot;&gt;Using native Windows Binary (without admin rights)&lt;/h1&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Download one of binary from
&lt;a href=&quot;https://httpd.apache.org/docs/current/platform/windows.html#down&quot;&gt;https://httpd.apache.org/docs/current/platform/windows.html#down&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Unzip a portable version (zip file) into &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;C:\Apache24&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;cd &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;C:\Apache24\bin&lt;/code&gt; and run httpd.exe&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Open browser to &lt;a href=&quot;http://localhost&quot;&gt;http://localhost&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Press &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CTRL+C&lt;/code&gt; to stop the server.&lt;/p&gt;

&lt;h2 id=&quot;where-is-the-httpdconf&quot;&gt;Where is the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;httpd.conf&lt;/code&gt;?&lt;/h2&gt;

&lt;p&gt;The web server config file is located at &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;C:\Apache24\conf\httpd.conf&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;The default document root should be at &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;C:\Apache24\htdocs&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;The default error log file is at &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;C:\Apache24\logs\error.log&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;how-to-enable-cgi-bin-scripts&quot;&gt;How to enable cgi-bin scripts&lt;/h2&gt;

&lt;p&gt;There is a default &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;perl&lt;/code&gt; test script under
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;C:\Apache24\cgi-bin\printenv.pl&lt;/code&gt;, and if you have native Windows Perl
installed, you need to modify the first line in the script. Example:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#!/C:/perl5/perl.exe&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Now test it on &lt;a href=&quot;http://localhost/cgi-bin/printenv.pl&quot;&gt;http://localhost/cgi-bin/printenv.pl&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;using-python-as-cgi-bin-test-script&quot;&gt;Using Python as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cgi-bin&lt;/code&gt; test script&lt;/h2&gt;

&lt;p&gt;Create &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;C:\Apache24\cgi-bin\printenv.py&lt;/code&gt; script:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#!C:/Python36/python.exe
import cgi
cgi.test()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test it on &lt;a href=&quot;http://localhost/cgi-bin/printenv.py&quot;&gt;http://localhost/cgi-bin/printenv.py&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;using-cygwin-for-windows&quot;&gt;Using Cygwin for Windows&lt;/h1&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Install &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;httpd&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;httpd-tool&lt;/code&gt; packages in your cygwin&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;If you have not started &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cygserver&lt;/code&gt;, run it now in the background.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apachectl -k start&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Open browser to &lt;a href=&quot;http://localhost&quot;&gt;http://localhost&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apachectl -k stop&lt;/code&gt; to stop the server.&lt;/p&gt;

&lt;h2 id=&quot;where-is-the-httpdconf-&quot;&gt;Where is the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;httpd.conf&lt;/code&gt; ?&lt;/h2&gt;

&lt;p&gt;The web server config file is located at &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/httpd/conf/httpd.conf&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;The default document root should be at &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/srv/www/htdocs&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;The default error log file is at &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/var/log/httpd/error_log&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;how-to-enable-cgi-bin-scripts-1&quot;&gt;How to enable cgi-bin scripts&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Ensure you have installed &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;perl&lt;/code&gt; package in Cygwin.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Modify &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/srv/www/cgi-bin/printenv&lt;/code&gt; file first line with
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#!/usr/bin/perl&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;chmod a+x&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Modify &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;httpd.conf&lt;/code&gt; to enable &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mod_cgi&lt;/code&gt;:
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;IfModule mpm_prefork_module&amp;gt;
            LoadModule cgi_module modules/mod_cgi.so
    &amp;lt;/IfModule&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Restart httpd server&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Now test it on &lt;a href=&quot;http://localhost/cgi-bin/printenv&quot;&gt;http://localhost/cgi-bin/printenv&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can also test the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/srv/www/cgi-bin/test-cgi&lt;/code&gt; script, but it uses
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#!/usr/bin/sh&lt;/code&gt; instead of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;perl&lt;/code&gt;!&lt;/p&gt;

&lt;p&gt;If you use default &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cgi-bin&lt;/code&gt; folder that are setup with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ScriptAlias&lt;/code&gt;,
then you do not need to add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Options +ExecCGI&lt;/code&gt; line to the conf file.&lt;/p&gt;

&lt;h2 id=&quot;using-python-as-cgi-bin-test-script-1&quot;&gt;Using Python as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cgi-bin&lt;/code&gt; test script&lt;/h2&gt;

&lt;p&gt;Create &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/srv/www/cgi-bin/printenv.py&lt;/code&gt; script:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    #!/usr/bin/python3
    import cgi
    cgi.test()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Customizing httpd conf with special request header and filter</title>
   <link href="http://localhost:4000/2018/02/26/customizing-httpd-conf-with-special-request-header-and-filter/"/>
   <updated>2018-02-26T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/02/26/customizing-httpd-conf-with-special-request-header-and-filter</id>
   <content type="html">&lt;h2 id=&quot;how-to-setup-httpd-reverse-proxy-for-tomcat&quot;&gt;How to setup httpd reverse proxy for Tomcat&lt;/h2&gt;

&lt;p&gt;Enable modules&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	# NOTE: If you are using Cygwin, these module requires cygserver to run!
	#       else you get the following error:
	#
	#[Mon Feb 26 09:26:50.308620 2018] [proxy:crit] [pid 7564] (88)Function not implemented: AH02478: #failed to create proxy mutex
	#AH00016: Configuration Failed
	#
	LoadModule proxy_module modules/mod_proxy.so
	LoadModule proxy_http_module modules/mod_proxy_http.so
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Setup reverse proxy&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	# Reverse Proxy Setup
	# NOTE: The ending slash '/' is important!
	&amp;lt;IfModule proxy_module&amp;gt;
	ProxyPass &quot;/&quot;  &quot;http://localhost:8080/&quot;
	ProxyPassReverse &quot;/&quot;  &quot;http://localhost/&quot;
	&amp;lt;/IfModule&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;how-to-add-custom-headers-to-requests&quot;&gt;How to add custom headers to requests&lt;/h2&gt;

&lt;p&gt;Enable modules&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;LoadModule headers_module modules/mod_headers.so
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add headers to all requests&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;Location &quot;/&quot;&amp;gt;
	# Add custom headers
	RequestHeader set appuser &quot;test&quot;
	# Or add custom headers based on env variables exist
	RequestHeader set appuser2 &quot;%{APPUSER}e&quot; env=APPUSER
&amp;lt;/Location&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;how-to-setup-httpd-filter&quot;&gt;How to setup Httpd Filter&lt;/h2&gt;

&lt;p&gt;Enable modules&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;LoadModule ext_filter_module modules/mod_ext_filter.so
LoadModule request_module modules/mod_request.so
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Windows Example&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	# Setup external script to run request filter
	ExtFilterDefine my-filter mode=input \
		cmd=&quot;C:/Python36/pythonw.exe C:/Apache24/cgi-bin/my-filter.py&quot;
	&amp;lt;Directory  &quot;cgi-bin&quot;&amp;gt;
		SetInputFilter my-filter
	&amp;lt;/Directory&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Cygwin Example&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	# Setup external script to run request filter
	ExtFilterDefine my-filter mode=input \
		cmd=&quot;/usr/bin/python3 /srv/www/cgi-bin/my-filter/my-filter.py&quot;
	&amp;lt;Directory  &quot;/srv/www/cgi-bin/my-filter&quot;&amp;gt;
		SetInputFilter my-filter
	&amp;lt;/Directory&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;File my-filter.py&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	#!/usr/bin/python3
	import datetime
	log = '/var/log/httpd/my-filter.log'
	with open(log, 'a') as file:
		file.write(f'{datetime.datetime.now()} hello filter\n')
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;File my-filter2.py&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	#!/usr/bin/python3
	import datetime, sys, os
	log = '/var/log/httpd/my-filter.log'
	with open(log, 'a') as file:
		file.write(f'## {datetime.datetime.now()} hello filter\n')
		file.write(f'arguments: {sys.argv}\n')
		file.write(f'STDOIUT:\n')
		for line in sys.stdin:
			file.write(f'{line}\n')
		file.write(f'os.environments:\n')
		for k,v in os.environ.items():
				file.write(f'os.env: {k} = {v}\n')
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How to turn off IntelliJ autoformat on a block of code</title>
   <link href="http://localhost:4000/2018/02/23/how-to-turn-off-intellij-autoformat-on-a-block-of-code/"/>
   <updated>2018-02-23T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/02/23/how-to-turn-off-intellij-autoformat-on-a-block-of-code</id>
   <content type="html">&lt;p&gt;When doing bug fix on old codes, you want least possible change set as
possible. The IntelliJ IDE by default will auto reformat your code upon
a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;}&lt;/code&gt; character you type. (Example: when you add a try/finally block to
an existing block of code, then it will reformat that block of code base
on IDE’s Code Style you configured.) If you have legacy code, they’re
most likely formatted differently than your IDE style, and it will make
unnessary changes. This is not what you want during bug fix. So to turn
it off, you can do this:&lt;/p&gt;

&lt;p&gt;For, IntelliJ 2017.3, go to Menu
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;File &amp;gt; Settings &amp;gt; Editor &amp;gt; General &amp;gt; Smark Keys&lt;/code&gt;, then uncheck
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Reformat block  on typing '}'&lt;/code&gt; item.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Starting postgres server on Cygwin</title>
   <link href="http://localhost:4000/2018/02/20/starting-postgres-server-on-cygwin/"/>
   <updated>2018-02-20T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/02/20/starting-postgres-server-on-cygwin</id>
   <content type="html">&lt;p&gt;To run postgres database server on Cygwin, you need first run the
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cygserver&lt;/code&gt;. If not, you will get error similar to this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;export PGDATA=/cygdrive/c/Users/zemian/my-pgdata
pg_ctl init
...
running bootstrap script ... FATAL:  could not create shared memory segment: Function not implemented
DETAIL:  Failed system call was shmget(key=1, size=56, 03600).
child process exited with exit code 1
initdb: removing contents of data directory &quot;/cygdrive/c/Users/zemian/my-pgdata&quot;
pg_ctl: database system initialization failed
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To resolve this, you first start &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cygserver&lt;/code&gt;. Even if you do not have
admin rights to install as Windows service, you can still run it per
shell session. This is needed for &lt;strong&gt;shared memory&lt;/strong&gt; need.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# For the first time, you need config
/usr/bin/cygserver-config

# Now run it
cygserver &amp;amp;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After above then you can start postgres&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pg_ctrl init
pg_ctrl start
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;postgres-windows-installation&quot;&gt;Postgres Windows Installation&lt;/h1&gt;

&lt;p&gt;The official download is provided by EnterpriseDB (EDB) You can get a
zip package from:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.enterprisedb.com/download-postgresql-binaries&quot;&gt;https://www.enterprisedb.com/download-postgresql-binaries&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To install, just unzip it.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mkdir $HOME/apps/postgresql-10.3-2
cd $HOME/apps/postgresql-10.3-2
unzip postgresql-10.3-2-windows-x64-binaries.zip
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Server can be started manually like this in cmd.exe prompt:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bin\pg_ctl -D data -o &quot;--encoding=UTF8 --auth=trust&quot; initdb
mkdir logs
bin\pg_ctl -D data -l logs\postgres.log start

bin\createdb %USERNAME%
chcp 1252
bin\psql

zemian=# select version();
                          version
------------------------------------------------------------
 PostgreSQL 10.3, compiled by Visual C++ build 1800, 64-bit
(1 row)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;By default inidb will create a “postgres” database, but user is your
Windows login name, and it will not match. It’s more convient to create
a database that match your username, and use that as default.&lt;/p&gt;

&lt;p&gt;You should be careful with “–auth=trust”, which can get you started
quickly but not very secure.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>IntelliJ highlight "out.println" in JSP as red error</title>
   <link href="http://localhost:4000/2018/02/17/intellij-highlight-out-println-in-jsp-as-red-error/"/>
   <updated>2018-02-17T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/02/17/intellij-highlight-out-println-in-jsp-as-red-error</id>
   <content type="html">&lt;p&gt;Some times you might have a Maven web application that deployes without
problem into a Tomcat server, but when open in IntelliJ IDE, you will
notice some of your JSP files have red error marks on lines such as
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;out.println(&quot;test&quot;);&lt;/code&gt;. This problem can occur if your project &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pom.xml&lt;/code&gt;
did not include &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jsp-api&lt;/code&gt; as provided dependency to your project! So
ensure it contains these in your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pom.xml&lt;/code&gt; file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;        &amp;lt;!-- Web --&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;javax.servlet.jsp&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;javax.servlet.jsp-api&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;2.3.1&amp;lt;/version&amp;gt;
            &amp;lt;scope&amp;gt;provided&amp;lt;/scope&amp;gt;
        &amp;lt;/dependency&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;javax.servlet&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;javax.servlet-api&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;3.1.0&amp;lt;/version&amp;gt;
            &amp;lt;scope&amp;gt;provided&amp;lt;/scope&amp;gt;
        &amp;lt;/dependency&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;javax.servlet&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;jstl&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;1.2&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that for Tomcat, you must include the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;JSTL&lt;/code&gt; tag library as
dependency, and it is NOT provided by server if you want to use the core
JSTL tags!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>IntelliJ displays Server's Certificate is not trusted pop-up</title>
   <link href="http://localhost:4000/2018/02/11/intellij-displays-servers-certificate-is-not-trusted-pop-up/"/>
   <updated>2018-02-11T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/02/11/intellij-displays-servers-certificate-is-not-trusted-pop-up</id>
   <content type="html">&lt;p&gt;I get this “Server’s Certificate is not trusted” pop-up window once in a
while when I am in different network. If you know your IDE is already
working fine, then you can get rid of it by go to below location.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;File | Settings | Tools | Server Certificates for Windows and Linux&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Then click on “Accept non-trusted certificates automatically”.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Walk resource tree as directory in classpath</title>
   <link href="http://localhost:4000/2018/01/27/walk-resource-tree-as-directory-in-classpath/"/>
   <updated>2018-01-27T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/01/27/walk-resource-tree-as-directory-in-classpath</id>
   <content type="html">&lt;p&gt;The two most frequent type of classpath URL we get when get it through
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ClassLoader#getResource(resourceName)&lt;/code&gt; is either &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;file&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jar&lt;/code&gt;
entries. If we want to walk a resources that are stored in a directory,
then we need to parse these differently. For &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;file&lt;/code&gt;, it’s easy to do
since we have &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;java.io.File&lt;/code&gt;. As for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jar&lt;/code&gt;, we would use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;JarFile&lt;/code&gt;. Here
is a implementation.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;public static void walkClasspathResDir(ClassLoader cl, String resDir, ConsumerEx&amp;lt;FileStream&amp;gt; fileConsumer) {
        // NOTE: JarEntry.isDirectory() used below requires input to ends with slash.
        if (!resDir.endsWith(&quot;/&quot;)) {
            resDir = resDir + &quot;/&quot;;
        }

        URL url = cl.getResource(resDir);
        if (url == null) {
            throw new AppException(&quot;Resource directory &quot; + resDir + &quot; not found in classpath.&quot;);
        } else if (&quot;file&quot;.equals(url.getProtocol())) {
            File dir = new File(url.getPath());
            if (!dir.isDirectory()) {
                throw new AppException(&quot;Resource is not a directory: &quot; + resDir);
            }
            walkFileDir(dir, fileConsumer);
        } else if (&quot;jar&quot;.equals(url.getProtocol())) {
            try {
                JarURLConnection conn = (JarURLConnection) url.openConnection();
                if (!(conn.getJarEntry().isDirectory())) {
                    throw new AppException(&quot;Resource is not a directory: &quot; + resDir);
                }
                walkJarEntryDir(conn.getJarFile(), resDir, fileConsumer);
            } catch (Exception e) {
                throw new AppException(&quot;Unable to read resource: &quot; + url, e);
            }
        } else {
            throw new AppException(&quot;Unsupported protocol &quot; + url.getProtocol() + &quot; for checking resource directory.&quot;);
        }
    }

    public static void walkFileDir(File dir, ConsumerEx&amp;lt;FileStream&amp;gt; fileConsumer) {
        try {
            Files.walkFileTree(dir.toPath(), new SimpleFileVisitor&amp;lt;Path&amp;gt;() {
                @Override
                public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) throws IOException {
                    try (FileInputStream stream = new FileInputStream(file.toFile())) {
                        try {
                            String shortPath = file.toFile().getPath().substring(dir.getPath().length());
                            // Always convert path separator to Unix
                            shortPath = FilenameUtils.separatorsToUnix(shortPath);
                            // Remove leading '/' if there is any
                            if (shortPath.startsWith(&quot;/&quot;)) {
                                shortPath = shortPath.substring(1);
                            }
                            fileConsumer.accept(new FileStream(shortPath, stream));
                        } catch (Exception e) {
                            throw new AppException(&quot;Failed to process file: &quot; + file, e);
                        }
                    }
                    return FileVisitResult.CONTINUE;
                }
            });
        } catch (IOException e) {
            throw new AppException(&quot;Failed to walk directory: &quot; + dir, e);
        }
    }

    public static void walkJarEntryDir(JarFile jarFile, String entryName, ConsumerEx&amp;lt;FileStream&amp;gt; fileConsumer) {
        try {
            Enumeration&amp;lt;JarEntry&amp;gt; entries = jarFile.entries();
            while (entries.hasMoreElements()) {
                JarEntry jarEntry = entries.nextElement();
                if (jarEntry.getName().startsWith(entryName)) {
                    if (!jarEntry.isDirectory()) {
                        try (InputStream stream = jarFile.getInputStream(jarEntry)) {
                            try {
                                String shortPath = jarEntry.getName().substring(entryName.length());
                                fileConsumer.accept(new FileStream(shortPath, stream));
                            } catch (Exception e) {
                                throw new AppException(&quot;Failed to process jar entry: &quot; + jarEntry.getName(), e);
                            }
                        }
                    }
                }
            }
        } catch (IOException e) {
            throw new AppException(&quot;Failed to walk jar directory entry: &quot; + entryName, e);
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FileStream&lt;/code&gt; is just a POJO that holds a resource path name and
the stream that points to it. One tricky part to above code is noted in
comment:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// NOTE: JarEntry.isDirectory() used below requires input to ends with slash.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now, here is how we can use it:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;        ClassLoader cl = Thread.currentThread().getContextClassLoader();
        walkClasspathResDir(cl, &quot;toolbox/templates/javaapp&quot;, (fileStream) -&amp;gt; {
            System.out.println(fileStream.getPath() + &quot; &quot; + fileStream.getStream());
        });
        System.out.println();
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Using Java8 LocalDateTime with FreeMarker</title>
   <link href="http://localhost:4000/2018/01/27/using-java8-localdatetime-with-freemarker/"/>
   <updated>2018-01-27T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/01/27/using-java8-localdatetime-with-freemarker</id>
   <content type="html">&lt;p&gt;It’s unfortunate that even latest FreeMarker 2.3.27 still does not
support &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;java.time.LocalDateTime&lt;/code&gt; as data model natively. If you want to
use this in your template, you would either have to write your own, or
use this friendly library:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;        &amp;lt;!-- Web View: FTL Template Engine --&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.freemarker&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;freemarker&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;2.3.27-incubating&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;no.api.freemarker&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;freemarker-java8&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;1.1.5&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With this, you may format the java8 date model in template like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Today date is ${todayDate.format()}

Or use custom date formatter: ${todayDate.format('yyyy-MM-dd HH:mm')}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How to fix IntelliJ OutOfMemoryError</title>
   <link href="http://localhost:4000/2018/01/19/how-to-fix-intellij-outofmemoryerror/"/>
   <updated>2018-01-19T00:00:00-05:00</updated>
   <id>http://localhost:4000/2018/01/19/how-to-fix-intellij-outofmemoryerror</id>
   <content type="html">&lt;p&gt;If you have a large project, you might get this error when trying to do
a full build&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Error:java: OutOfMemoryError: insufficient memory
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can fix this by increase memory in two places in the IDE. For
example, let says you want to increase to 2GB of memory:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Update the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;idea64.exe.vmoptions&lt;/code&gt; file with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-Xmx2048m&lt;/code&gt; to increase
Java max heap memory size for your IDE. (Require IDE restart)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Go to IDE menu: File &amp;gt; Settings … &amp;gt; Build, Execution,
Deployment &amp;gt; Compiler &amp;gt; “Build process heap size (Mbytes):”
and increase it to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;2000&lt;/code&gt;.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</content>
 </entry>
 
 <entry>
   <title>How to run nginx and setup reverse proxy to Tomcat</title>
   <link href="http://localhost:4000/2017/08/04/how-to-run-nginx-and-setup-reverse-proxy-to-tomcat/"/>
   <updated>2017-08-04T01:00:00-04:00</updated>
   <id>http://localhost:4000/2017/08/04/how-to-run-nginx-and-setup-reverse-proxy-to-tomcat</id>
   <content type="html">&lt;h1 id=&quot;basic-nginx-usage&quot;&gt;Basic &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nginx&lt;/code&gt; usage&lt;/h1&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# start
cd ~/apps/nginx-1.13.7
./nginx -c conf/nginx.conf

# stop
./nginx -c conf/nginx.conf -s stop
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;How to setup nginx reverse proxy to Tomcat
==========================================&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# nginx.conf
server {
        listen       80;
        server_name  localhost;

        location / {
                proxy_pass http://localhost:8080;
                proxy_set_header X-Forwarded-Host $host;
                proxy_set_header X-Forwarded-Server $host;
        }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Setup to setup nginx ssl and reverse proxy to Tomcat
====================================================&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ssl setup
cd ~/apps/nginx-1.13.7/conf
openssl req -x509 -nodes -newkey rsa:2048 -keyout cert.key -out cert.crt

# nginx.conf
server {
    listen       443 ssl;
    server_name  localhost;

    ssl_certificate      cert.crt;
    ssl_certificate_key  cert.key;

    ssl_session_cache    shared:SSL:1m;
    ssl_session_timeout  5m;

    ssl_ciphers  HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers  on;

    location / {
                    proxy_pass http://localhost:8080;
                    proxy_set_header X-Forwarded-Host $host;
                    proxy_set_header X-Forwarded-Server $host;
                    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Creating PostgreSQL db users to match Linux users</title>
   <link href="http://localhost:4000/2017/07/07/creating-postgresql-db-users-to-match-linux-users/"/>
   <updated>2017-07-07T01:00:00-04:00</updated>
   <id>http://localhost:4000/2017/07/07/creating-postgresql-db-users-to-match-linux-users</id>
   <content type="html">&lt;p&gt;By default the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;posgresql-server&lt;/code&gt; install will create a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postgres&lt;/code&gt; Linux
user account and the server will run under that user. And also
PostgreSQL server will default have a DB user named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postgres&lt;/code&gt; as well,
and this DB user does not have a password! There is a distinction
between Linux user vs PostgreSQL database user, and mostly you need to
work with DB user only. After the install, you may change the password
for DB &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postgres&lt;/code&gt; like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; sudo -u postgres psql

postgres=# \password postgres

# It should prompt you to enter password for `postgres` DB user.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When developing application, I like to create a dedicated DB user to
match my login account and create database there instead of using the
default &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postgres&lt;/code&gt; user. You may create a new DB user that match to your
current Linux account user (eg: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;zemian&lt;/code&gt;) like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; sudo -u postgres createdb -s -P zemian
# It should prompt you to enter password for `zemian` DB user. The `-s` option is to for superuser privileges.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now that you have a DB user &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;zemian&lt;/code&gt;, you may create a default database
for it.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; createdb --username=zemian zemian
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you may invoke &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;psql&lt;/code&gt; under &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;zemian&lt;/code&gt; Linux user session without any
parameters and it should log you in!&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; psql

zemian=# CREATE TABLE test(id serial, name VARCHAR(20), message VARCHAR(500));
NOTICE:  CREATE TABLE will create implicit sequence &quot;test_id_seq&quot; for serial column &quot;test.id&quot;
CREATE TABLE

zemian=# \d test
                                 Table &quot;public.test&quot;
 Column  |          Type          |                     Modifiers
---------+------------------------+---------------------------------------------------
 id      | integer                | not null default nextval('test_id_seq'::regclass)
 name    | character varying(20)  |
 message | character varying(500) |

zemian=# INSERT INTO test(name, message) VALUES('Hello', 'World');
INSERT 0 1
zemian=# INSERT INTO test(name, message) VALUES('Hello2', 'World2');
INSERT 0 1
zemian=# SELECT * FROM test;
 id |  name  | message
----+--------+---------
  1 | Hello  | World
  2 | Hello2 | World2
(2 rows)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Git Branch name with 'slash'</title>
   <link href="http://localhost:4000/2016/10/09/git-branch-name-with-slash/"/>
   <updated>2016-10-09T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/10/09/git-branch-name-with-slash</id>
   <content type="html">&lt;p&gt;Git allows you to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/&lt;/code&gt; slash in your branch name. It’s useful for
grouping branches. However, you need to be careful that once a slashy
branch name is created, you can’t use its name as the “base” for another
new nested slash name! For example:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# this is fine
git branch foo/bar
git branch foo/bar2

# but this fails
git branch foo/bar/cool
fatal: cannot lock ref 'refs/heads/foo/bar/cool': 'refs/heads/foo/bar' exists; cannot create 'refs/heads/foo/bar/cool'

# So to use two level of slashes, you must first start a branch with two slashes!
git branch foo2/bar/cool
git branch foo2/bar/cool2
git branch foo2/bar2/cool
git branch foo2/bar2/cool2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is a more concrete example. Let’s say you worked on an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;issue-123&lt;/code&gt;
branch, and now you are done but want to rename under a subcategory
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;closed/issue-123&lt;/code&gt;. If you were to create a bsranch &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;closed&lt;/code&gt; first, then
the rename will fail! You have to first ensure &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;closed&lt;/code&gt; branch does not
exist. In fact reate a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;closed/zkeepme&lt;/code&gt; first, then you can always move
your completed branch into that sub category!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>My Quick Git Reference</title>
   <link href="http://localhost:4000/2016/10/04/my-quick-git-reference/"/>
   <updated>2016-10-04T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/10/04/my-quick-git-reference</id>
   <content type="html">&lt;p&gt;I have started using git and here are some of my frequently used
commands.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone http://path/to/repo.git  # Retrieve a repo for work (auto checkout master branch into WorkingDir)
git init                           # Create new repository for work (auto checkout master branch into WorkingDir)
git init --bare                    # Create new repository without WorkingDir  - bare repo for server share only

git status             # Print current status of the repo
git branch -a          # List of all branches (including remote branches)
git tag                # List of all tags
git log -3                                      # Show last 3 commits
git log -30 --oneline                           # Show last 30 commits one per line
git log --decorate --graph --format='%h %an %s' # Show all log messages one per line in a graph
git log --reverse |head                         # Show first commit message
git show --stat &amp;lt;sha1&amp;gt; # Show what files changed on a commit
git diff               # Show diff all files between Index and WorkingDir
git diff readme.md     # Show diff of a file against Index
git diff master..topic # Show diff between two branches

git checkout -b topic               # Create a new topic branch and set as current branch
                                      (New branch starts from previous checkout branch)
git checkout -b topic origin/topic  # Create a new topic branch and set as current branch
                                      (New branch starts from origin/topic &quot;remote&quot; branch)
git branch --move topicA topicB     # Rename a branch
git branch -d topic                 # Delete a branch (use -D to force it)
git checkout master                 # Switch to master branch and set as current branch
git merge topic                     # Merge changes from topic branch onto current branch

git add .                        # Add files to Index
git add readme.md                # Add one file to Index
git add -A                       # Add everything to Index
git commit -m 'topic: my change' # Commit Index changes

git mv oldfile.md newfile.md     # Rename a file
git rm outdated.md               # Remove a file from Index and WorkingDir
git rm --cached outdated.md      # Remove a file from Index only (leave it in WorkingDir)

git remote add origin http://path/to/repo.git     # Setup remote repository
git remote set-url origin http://path/to/repo.git # Update remote repository
git remote -v                                     # List remote repositories

git push --set-upstream origin topic              # Push branch to remote first time
git push                                          # Push branch to remote second time
git push --all                                    # Push all the branches to remote!
git push origin :topic                            # Push and DELETE the remote branch!

git pull   # Fetch and merge the &quot;auto tracked remote&quot; branch onto current branch
git fetch  # Fetch only the &quot;auto tracked remote&quot; branch onto current branch

git checkout              # Restore WorkingDir from Index (will not override local modified files!)
git checkout -- readme.md # Restore a single WorkingDir file from Index

git reset          # Reset the HEAD and Index (same as --mixed)
git reset --soft   # Reset the HEAD only
git reset --hard   # Reset the HEAD, Index and WorkingDir!

git reflog         # Inpect any recent transactions and can be use to recover lost (unnamed) commits

git stash          # Put away all pending changes
git stash pop      # Bring back all pending changes
git stash list     # List all stashes
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How to install cx_Oracle module on Linux</title>
   <link href="http://localhost:4000/2016/07/23/how-to-install-cx-oracle-module-on-linux/"/>
   <updated>2016-07-23T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/07/23/how-to-install-cx-oracle-module-on-linux</id>
   <content type="html">&lt;p&gt;Here are my notes on installing &lt;a href=&quot;http://cx-oracle.sourceforge.net/&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cx_Oracle&lt;/code&gt; python
module&lt;/a&gt; to access Oracle Database
12c. First, you need to download these two packages from &lt;a href=&quot;http://www.oracle.com/technetwork/database/features/instant-client&quot;&gt;Oracle Instant
Client&lt;/a&gt;
site.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Instant Client Package - Basic&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Instant Client Package - SDK&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I’ve tried their &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.rpm&lt;/code&gt; packages and it did not work for me on Linux, so
I would suggest you use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.zip&lt;/code&gt; packages instead.&lt;/p&gt;

&lt;p&gt;Once you downloaded these two, unzip them into a single directory (eg:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$HOME/apps/instantclient&lt;/code&gt;). You then need to follow these instructions
to install the module itself.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cd $HOME/apps/instantclient
ln -s libclntsh.so.12.1 libclntsh.so
export ORACLE_HOME=$HOME/apps/instantclient
export LD_LIBRARY_PATH=$ORACLE_HOME:$LD_LIBRARY_PATH

pip install cx_Oracle
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here are some quick python test code to verify &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cx_Oracle&lt;/code&gt; is working.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import cx_Oracle as db
dsn='(DESCRIPTION=(ADDRESS=(HOST=myhost)(PORT=1521)(PROTOCOL=TCP))(CONNECT_DATA=(SERVER=DEDICATED)(SID=orcl)))'
conn = db.connect('zemian', 'Welcome1', dsn)
cur = conn.cursor()
cur.execute('SELECT 1+1')
print(cur.fetchone()[0])
cur.close()
conn.close()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dsn&lt;/code&gt; form above can connect directly to database without the
need to setup further entry in Oracle’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tnsnames.ora&lt;/code&gt; file.&lt;/p&gt;

&lt;h1 id=&quot;optionally-installing-sqlplus-client&quot;&gt;Optionally installing sqlplus client&lt;/h1&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sqlplus&lt;/code&gt; is a classic client you may use to connect to the Oracle
database. You may install this to perform adhoc query and verify your
data. Download the following from the same download site above.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Instant Client Package - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SQL\*Plus&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Unzip and then add the following to your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PATH&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;export $ORACLE_HOME/bin:$PATH

sqlplus mydbuser@(DESCRIPTION=(ADDRESS=(HOST=myhost)(PORT=1521)(PROTOCOL=TCP))(CONNECT_DATA=(SERVER=DEDICATED)(SID=orcl)))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For more information, see &lt;a href=&quot;https://docs.oracle.com/database/121/SQPUG/toc.htm&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sqlplus&lt;/code&gt;
doc&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Simple http server with CGI scripts enabled</title>
   <link href="http://localhost:4000/2016/07/14/simple-http-server-with-cgi-scripts-enabled/"/>
   <updated>2016-07-14T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/07/14/simple-http-server-with-cgi-scripts-enabled</id>
   <content type="html">&lt;p&gt;If you want to experiment some python code as CGI script to serve by a HTTP server,
you can get started by these steps:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Create a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cgi-bin&lt;/code&gt; directory.&lt;/li&gt;
  &lt;li&gt;Ready!&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;No, really, it’s that simple! Try these CGI scripts out.&lt;/p&gt;

&lt;h2 id=&quot;example-1-cgi-binhellopy&quot;&gt;Example 1: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cgi-bin/hello.py&lt;/code&gt;&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#!/usr/bin/env python3

localvars_table = ''
for x in dir():
  localvars_table += '%s' % x
localvars_table += ''

print(&quot;Content-type: text/html&quot;)
print(&quot;&quot;)
print(&quot;&quot;&quot;
Hello World! Your custom CGI script is working. Here are your current Python local variables.

%s

NOTE: If you want to write useful CGI script, try the Python 'cgi' module. See cgitest.py script.
&quot;&quot;&quot; % (localvars_table))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To test and run this, you simply invoke these couple commands:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; chmod a+x cgi-bin/hello.py
bash&amp;gt; python3 -m http.server --cgi
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You may now test it on your browser with &lt;a href=&quot;http://localhost:8000/cgi-bin/hello.py&quot;&gt;http://localhost:8000/cgi-bin/hello.py&lt;/a&gt;. Hit &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CTRL+C&lt;/code&gt; to stop the server.&lt;/p&gt;

&lt;p&gt;If you want to do more with fancy CGI scripts, try the Python’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cgi&lt;/code&gt; module. Here is another example.&lt;/p&gt;

&lt;h2 id=&quot;example-2-cgi-bincgitestpy&quot;&gt;Example 2: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cgi-bin/cgitest.py&lt;/code&gt;&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#!/usr/bin/env python3

import cgi
cgi.test()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Again &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;chmod&lt;/code&gt; your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cgitest.py&lt;/code&gt; script and visit &lt;a href=&quot;http://localhost:8000/cgi-bin/cgitest.py&quot;&gt;http://localhost:8000/cgi-bin/cgitest.py&lt;/a&gt;. You will see all the
HTTP related data as expected when working with a CGI script. See &lt;a href=&quot;https://docs.python.org/3/library/cgi.html&quot;&gt;https://docs.python.org/3/library/cgi.html&lt;/a&gt;
for more details.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to install posgresql-server with yum on Linux</title>
   <link href="http://localhost:4000/2016/07/08/how-to-install-posgresql-server-with-yum-on-linux/"/>
   <updated>2016-07-08T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/07/08/how-to-install-posgresql-server-with-yum-on-linux</id>
   <content type="html">&lt;p&gt;If you have a RedHat/CentOS/OracleLinux distro of Linux, then &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;yum&lt;/code&gt; should be available as your package manager. Here are the notes I have to get PostgreSQL server up running.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; yum info postgresql-server
bash&amp;gt; # Verify that's the version you want to install

bash&amp;gt; # Ready to install
bash&amp;gt; sudo su -
bash&amp;gt; yum -y install postgresql-server
bash&amp;gt; service postgresql initdb

bash&amp;gt; # Startup the server manually
bash&amp;gt; service postgresql start

bash&amp;gt; # Make server startup at system reboot
bash&amp;gt; chkconfig postgresql on

bash&amp;gt; # Verify postgres DB is working
bash&amp;gt; su - postgres -c psql
postgres=# \du
postgres=# \q

bash&amp;gt; # We are done, exit root user shell
bash&amp;gt; exit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you can’t find &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;service&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;chkconfig&lt;/code&gt; commands, then check to ensure you have have &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/sbin&lt;/code&gt; in your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$PATH&lt;/code&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to switch Linux account user without the target user's password</title>
   <link href="http://localhost:4000/2016/07/07/how-to-switch-linux-account-user-without-the-target-users-password/"/>
   <updated>2016-07-07T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/07/07/how-to-switch-linux-account-user-without-the-target-users-password</id>
   <content type="html">&lt;p&gt;Did you know if you have been granted &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sudo&lt;/code&gt; access to a remote
host with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;su&lt;/code&gt; command, then you may switch to any user without the
need to type in their password?&lt;/p&gt;

&lt;p&gt;Try this out:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;zemian@myhost bash&amp;gt; sudo su - postgres
# When prompted for password, enter your own user account password.

# Now you are in as `postgres` user!
postgres@myhost bash&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or if you want to switch to the root user directly, simply try:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; sudo su -
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is very useful when you need to switch to a user account that
was only setup just to run applications (eg: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postgres&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mysql&lt;/code&gt;,
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;oracle&lt;/code&gt;, or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;weblogic&lt;/code&gt; etc.) and not intented for real user. In this
case, you might not even know what the real password is. Above
trick should get you switch into that target user account.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Migrating Django 1.6 to 1.9</title>
   <link href="http://localhost:4000/2016/07/06/migrating-django-1-6-to-1-9/"/>
   <updated>2016-07-06T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/07/06/migrating-django-1-6-to-1-9</id>
   <content type="html">&lt;p&gt;Couple years ago, I wrote a simple Events and Signin management app
using django 1.6. It was fun to write and it worked really well. Just
recently I have to write another quick simple CRM webapp and I decided
to use Django again, but they current release is 1.9 now and I quickly
found few differences.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;INSTALLED_APPS&lt;/code&gt; now takes &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AppCofig&lt;/code&gt; instead of package name.
And there is a new &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;apps.py&lt;/code&gt; file for it.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;There is now &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;makemigration&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;migrate&lt;/code&gt; command to create
database table.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Login to remote host without password</title>
   <link href="http://localhost:4000/2016/07/06/login-to-remote-host-without-password/"/>
   <updated>2016-07-06T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/07/06/login-to-remote-host-without-password</id>
   <content type="html">&lt;p&gt;Most of remote systems are secured by SSH, and to gain remote control with terminal, you would need to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ssh&lt;/code&gt; into the server. You will be prompted to login with your password on every session. To avoid typing password everytime, you need to setup as authorized client. Here is how you can do that with ssh key.&lt;/p&gt;

&lt;p&gt;First on your own client machine, generate the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$HOME/.ssh/id_rsa.pub&lt;/code&gt; file:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; ssh-keygen
# When prompted to enter password, simply hit ENTER key to skip it!
bash&amp;gt; cat  ~/.ssh/id_rsa.pub
xxxyyyzzz zemian@myhost
# You will see a very long string instead of &quot;xxxyyyzzz&quot;.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you need to copy this public key string into your remote host. You need to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ssh&lt;/code&gt; into the remote host with your valid password first to setup. If successful, the subsequent &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ssh&lt;/code&gt; into the remote host will not prompt you for password!&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; ssh myremotehost
# Enter password to gain access
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After you are in the remote host:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;myremotehost&amp;gt; vim ~/.ssh/authorized_keys
#Paste and append the &quot;xxxyyyzzz&quot; into above file.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you don’t already have the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.ssh/authorized_keys&lt;/code&gt; file on remote host, then create it, but ensure you don’t let other users or groups to access it. Use command like this to change the permission:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; chmod g-rw,o-rw ~/.ssh/authorized_keys
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The cool thing about this is that it affects all &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ssh&lt;/code&gt; related commands, such as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;scp&lt;/code&gt; will now work without prompting you for password!&lt;/p&gt;

&lt;p&gt;Have a productive day!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Inspect Oracle Database Schema and Tables with Kotlin</title>
   <link href="http://localhost:4000/2016/07/05/inspect-oracle-database-schema-and-tables-with-kotlin/"/>
   <updated>2016-07-05T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/07/05/inspect-oracle-database-schema-and-tables-with-kotlin</id>
   <content type="html">&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// Filename: conn.kts
// Usage: kotlinc -cp /home/zedeng/Downloads/ojdbc7.jar -script conn.kts

import java.sql.*

Class.forName(&quot;oracle.jdbc.driver.OracleDriver&quot;)
val conn = DriverManager.getConnection(&quot;jdbc:oracle:thin:@myremotehost:1521:MYDB&quot;, &quot;system&quot;, &quot;mypassword123&quot;)

println(&quot;Database connection established $conn&quot;)
println(&quot;Database Default Catalog: ${conn.getCatalog()}&quot;)
println(&quot;Database Default Schema: ${conn.getSchema()}&quot;)

val m = conn.getMetaData()
println(&quot;${m.getDatabaseProductName()} ${m.getDatabaseMajorVersion()} ${m.getDatabaseMinorVersion()}&quot;)

println(&quot;List of Schemas&quot;)
var rs: ResultSet
rs = m.getSchemas()
while(rs.next()) {
    println(&quot;  ${rs.getObject(1)}&quot;)
}
rs.close()

val listSchemaName = conn.getSchema()
println(&quot;List of Tables for ${listSchemaName}&quot;)
rs = m.getTables(conn.getCatalog(), listSchemaName, null, null)
while(rs.next()) {
    val name = rs.getObject(&quot;TABLE_NAME&quot;)
    println(&quot;  $name&quot;)
}
rs.close()

println(&quot;Execute query:&quot;)
val stmt = conn.createStatement()
rs = stmt.executeQuery(&quot;SELECT 1+1 FROM DUAL&quot;)
while(rs.next()) {
    val v = rs.getObject(1)
    println(&quot;  1 + 1 from DB=$v&quot;)
}
rs.close()
stmt.close()

conn.close()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How to import SSL cert into WLS DemoTrust.jks keystore file</title>
   <link href="http://localhost:4000/2016/07/05/how-to-import-ssl-cert-into-wls-demotrust-jks-keystore-file/"/>
   <updated>2016-07-05T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/07/05/how-to-import-ssl-cert-into-wls-demotrust-jks-keystore-file</id>
   <content type="html">&lt;p&gt;In WLS, you can import your own SSL cert into its trust keystore file to invoke “https” contents. Here is how you do that with the default WLS &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DemoTrust.jks&lt;/code&gt; file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; cd $WL_HOME/server/lib
bash&amp;gt; keytool -keystore DemoTrust.jks -storepass DemoTrustKeyStorePassPhrase -list
bash&amp;gt; keytool -keystore DemoTrust.jks -storepass DemoTrustKeyStorePassPhrase -importcert -alias mycert -file mycert.pem

# Or to delete the entry
bash&amp;gt; keytool -keystore DemoTrust.jks -storepass DemoTrustKeyStorePassPhrase -delete -alias mycert
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The file &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mycert.pem&lt;/code&gt; can be obtained by any modern browser when you visit the “https” site. For example using Firefox, you can follow these steps to export the cert file:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Click on the Lock icon next to the URL in the broswer&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Click More Information button, then go to the “Security Tab”&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Click View Certificate button, then go to the Details tab&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Click Export ​ button&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;On the bottom right corner dropdown, select X.509 Cerificate with chain (PEM)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Type name of file to save (eg: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mycert.pem&lt;/code&gt;) and then click Save button&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</content>
 </entry>
 
 <entry>
   <title>Some of my old projects</title>
   <link href="http://localhost:4000/2016/06/30/some-of-my-old-projects/"/>
   <updated>2016-06-30T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/06/30/some-of-my-old-projects</id>
   <content type="html">&lt;p&gt;Here are some of interesting side projects I have worked on in the past&lt;/p&gt;

&lt;h1 id=&quot;django-developer-at-shift-ministry&quot;&gt;Django Developer at SHIFT Ministry&lt;/h1&gt;

&lt;p&gt;Orlando, FL Feb 2013 to Present&lt;/p&gt;

&lt;p&gt;Eventful web application&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Technologies used: Python 2.7, Django 1.6, Bootstrap, JQuery,
SublimeText, MySQL, Mercurial(hg).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Simple CRM web application&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Technologies used: Python 3.5, Django 1.9, PyCharm, PostgreSQL,
Mercurial(hg).&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;quartz-scheduler&quot;&gt;Quartz Scheduler&lt;/h1&gt;

&lt;p&gt;&lt;a href=&quot;http://quartz-scheduler.org&quot;&gt;http://quartz-scheduler.org&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I am a committer for Quartz Scheduler project, and I often help users on
their forums. I have fixed many bug issues and implemented new features
during the quartz 2.1 release. You may find my commits with svn username
id &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;light5&lt;/code&gt; in their repository, or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;zemian&lt;/code&gt; after they moved to
github.com.&lt;/p&gt;

&lt;h1 id=&quot;myschedule&quot;&gt;MySchedule&lt;/h1&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/zemian/myschedule&quot;&gt;https://github.com/zemian/myschedule&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have written a UI front-end web application to managing quartz
schedulers. I am the owner of this project, and I have done build,
release, and written full documentation on how to use the application.
There are several thousands of downloads since the first release.&lt;/p&gt;

&lt;h1 id=&quot;timemachine-scheduler&quot;&gt;TimeMachine Scheduler&lt;/h1&gt;

&lt;p&gt;&lt;a href=&quot;https://bitbucket.org/zemian/timemachine-scheduler&quot;&gt;https://bitbucket.org/zemian/timemachine-scheduler&lt;/a&gt; (Inactive!)&lt;/p&gt;

&lt;p&gt;Ive created a Java scheduler project that is fully scalable for
enterprise use. Its a scheduler application that has easy job
configuration and flexible scheduling with plugable data storage.&lt;/p&gt;

&lt;h1 id=&quot;sweetscala-web-framework&quot;&gt;SweetScala Web Framework&lt;/h1&gt;

&lt;p&gt;&lt;a href=&quot;https://code.google.com/archive/p/sweetscala&quot;&gt;https://code.google.com/archive/p/sweetscala&lt;/a&gt; (Inactive!)&lt;/p&gt;

&lt;p&gt;Sweet is a MVC based web application framework for building dynamic web
applications. The framework is made with Scala, an Object Oriented and
Functional programming language that runs on JVM.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to install venv and pip with a python 3.4 distribution</title>
   <link href="http://localhost:4000/2016/06/27/how-to-install-venv-and-pip-with-a-python-3-4-distribution/"/>
   <updated>2016-06-27T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/06/27/how-to-install-venv-and-pip-with-a-python-3-4-distribution</id>
   <content type="html">&lt;p&gt;If you are unfortunate enough to have stuck with a Python 3.4 distribution and you want to setup a virtual env, then likely you will get the ensurepip module not found error:&lt;/p&gt;

&lt;p&gt;bash&amp;gt; python3.4 -m venv mypy
Error: Command ‘[‘/home/zedeng/py-dev/mypy/bin/python3.4’, ‘-Im’, ‘ensurepip’, ‘–upgrade’, ‘–default-pip’]’ returned non-zero exit status 1&lt;/p&gt;

&lt;p&gt;I found someone posted a nice solution [1] to this. So first remove the dir first.
bash&amp;gt; rm -r mypy&lt;/p&gt;

&lt;p&gt;Now do it again like this:
bash&amp;gt; python3.4 -m venv mypy –without-pip
bash&amp;gt; . mypy/bin/activate&lt;/p&gt;

&lt;p&gt;mypy&amp;gt; wget https://bootstrap.pypa.io/get-pip.py
mypy&amp;gt; python get-pip.py 
mypy&amp;gt; pip list&lt;/p&gt;

&lt;p&gt;Now the problem is solved. I believe this problem is gone if you upgrade to Python 3.5&lt;/p&gt;

&lt;p&gt;[1] http://www.thefourtheye.in/2014/12/Python-venv-problem-with-ensurepip-in-Ubuntu.html&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Untrack file without deleting it with a hg repository</title>
   <link href="http://localhost:4000/2016/06/26/untrack-file-without-deleting-it-with-a-hg-repository/"/>
   <updated>2016-06-26T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/06/26/untrack-file-without-deleting-it-with-a-hg-repository</id>
   <content type="html">&lt;p&gt;So I have created a maven based Java project using IntelliJ IDEA, and I added all files to my hg repository with this .hgignore file in place:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;syntax: glob
target/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Later I learned that I shouln’t track one of IDEA’s workspace file, so I want to remove from my repository tracking, but I do not want it be deleted. Here is what you should do:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; hg forget .idea/workspace.xml
bash&amp;gt; echo '.idea/workspace.xml' &amp;gt;&amp;gt; .hgignore
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Installing a local downloaded .rpm file</title>
   <link href="http://localhost:4000/2016/06/26/installing-a-local-downloaded-rpm-file/"/>
   <updated>2016-06-26T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/06/26/installing-a-local-downloaded-rpm-file</id>
   <content type="html">&lt;p&gt;To install:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; sudo yum install &amp;lt;package_name.rpm&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you have problem installing it due to gpg check failure and you know it’s a good RPM, then try with this.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; sudo yum --nogpgcheck localinstall &amp;lt;package_name.rpm&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To verify what’s in the rpm:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; rpm -qlp &amp;lt;package_name.rpm&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How to fix 'add a non-nullable field ... without a default' error</title>
   <link href="http://localhost:4000/2016/06/26/how-to-fix-add-a-non-nullable-field-without-a-default-error/"/>
   <updated>2016-06-26T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/06/26/how-to-fix-add-a-non-nullable-field-without-a-default-error</id>
   <content type="html">&lt;p&gt;Error example:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;(mypy) Zemians-Air:crmsite zemian$ ./manage.py makemigrations
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You are trying to add a non-nullable field ‘created_dt’ to customer without a default; we can’t do that (the database needs something to populate existing rows).&lt;/p&gt;

&lt;p&gt;The reason this will happen if you already have a migration file that created the table first and then you create 2nd migration file that try to add new fields. The tool is not smart enough to know you don’t have data there yet, and must require you to provide default data!&lt;/p&gt;

&lt;p&gt;Solution: if this is brand new table you are creating, manually remove the previous migration files and let it generate a complete one! Or if you already have table exists and it’s during development, you can drop your table and recreate your migration files. Else if you have production table exist, you definitely want to address this with a default value in order to migrate successfully.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Getting started with PostgreSQL database</title>
   <link href="http://localhost:4000/2016/06/26/getting-started-with-postgresql-database/"/>
   <updated>2016-06-26T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/06/26/getting-started-with-postgresql-database</id>
   <content type="html">&lt;p&gt;I have been learning and using PostgreSQL recently for a Django app, and I have to say it’s really GOOD! I have used quite a bit of MySQL and Oracle DB in my workplace, so I didn’t find good reason to learn PostgreSQL in the past. Now I finally get a chance to start another new project with Django, so I decided to give it a try, and I wasn’t disappointed. I will write up a brief getting started guide here for those impatient to get things moving.&lt;/p&gt;

&lt;p&gt;Installing. If you are running on a Mac, the easiest way to try it out is just get the http://postgresapp.com, you just start the App, and your DB is running! No config needed!&lt;/p&gt;

&lt;p&gt;After you have the database installed and running, you can either connect to the default “postgres” public database by (psql command), or create your own database. To create your own database, you run this command:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; PATH=/Applications/Postgres.app/Contents/Versions/latest/bin:$PATH
bash&amp;gt; createdb mydb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you can connect to the new database&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; psql -d mydb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Once you connected to database, you may run SQL to create/insert/select a table:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mydb-# create table test(id serial, name varchar(200));
mydb-# insert into test(name) values('Hello');
mydb-# select * from test; 

To inspect your  table columns:
mydb-# \d test;

To see all tables available:
mydb-# \dt;

To see all database available:
mydb-# \l;

To switch to another database:
mydb-# \c mydb2;

To see more help (check out \d options! it's super flexible and useful.):
mydb-# \?;

To quit the psql shell:
mydb-# \q;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To create a database user and set up password, you can do it on bash shell as well:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; echo &quot;CREATE ROLE mydbuser1 WITH CREATEDB LOGIN PASSWORD 'Welcome1'&quot; | psql

bash&amp;gt; echo &quot;GRANT ALL PRIVILEGES ON DATABASE mydb TO mydbuser1&quot; | psql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you may relogin again with the user. It should prompt you for password.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; psql -U mydbuser1 -W
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Once you connected to your database again, you may check your user privileges:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mydb-# \dp;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;These examples should be enough to get you setup a database for app development. The rest are just normal SQL access to database. The &lt;a href=&quot;https://www.postgresql.org/docs/9.5/static/index.html&quot;&gt;PostgresSQL documentation&lt;/a&gt; is an excellent reference for all that you need.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Example of MySQL stored procedure to INSERT from a SELECT cursor values</title>
   <link href="http://localhost:4000/2016/06/26/example-of-mysql-stored-procedure-to-insert-from-a-select-cursor-values/"/>
   <updated>2016-06-26T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/06/26/example-of-mysql-stored-procedure-to-insert-from-a-select-cursor-values</id>
   <content type="html">&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;DELIMITER //
DROP PROCEDURE IF EXISTS proc_hotfix1 //
CREATE PROCEDURE proc_hotfix1()
BEGIN
  DECLARE flag INT DEFAULT 0;
  DECLARE CID VARCHAR(64);
  DECLARE LOGIN VARCHAR(1000);
  DECLARE cur1 CURSOR FOR 
    SELECT CID, LOGIN FROM MYUSER WHERE LOGIN LIKE 'bad.guy%';

  OPEN cur1;
  REPEAT
    FETCH cur1 INTO CID, LOGIN;
    INSERT INTO hotfix1(id,f1) VALUES (CID, LOGIN);
  UNTIL flag
  END REPEAT;
  CLOSE cur1;
END //

DELIMITER ;
DROP TABLE IF EXISTS hotfix1;
CREATE TABLE hotfix1(
  id VARCHAR(64) KEY
  ,f1 VARCHAR(1000)
  ,f2 VARCHAR(1000)
  ,f3 VARCHAR(1000)
);
CALL proc_hotfix1();
SELECT COUNT(*) FROM hotfix1;
SELECT * FROM hotfix1;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How to install Zoom conference on Ubuntu 14.04 LTS</title>
   <link href="http://localhost:4000/2016/06/17/how-to-install-zoom-conference-on-ubuntu-14-04-lts/"/>
   <updated>2016-06-17T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/06/17/how-to-install-zoom-conference-on-ubuntu-14-04-lts</id>
   <content type="html">&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Download latest z&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;oom_2.0.52458.0531_amd64.deb&lt;/code&gt; package from https://zoom.us/download&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Run&lt;/p&gt;

    &lt;p&gt;bash&amp;gt; sudo dpkg -i zoom_2.0.52458.0531_amd64.deb&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Even though the package installed complete, you will see error messages if you have a 64-bit OS because Zoom has other dependencies that’s not met. And the above command will setup the apt-get to auto fetch the failed dependencies if you simply run the following next:&lt;/p&gt;

    &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bash&amp;gt; sudo apt-get -f install&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;That’s it! Your zoom should be ready to go! Try to start Zoom by press Super + A, then type in “Zoom”.&lt;/p&gt;

&lt;p&gt;Extra: To Verify Installation, you may run:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;`bash&amp;gt; dpkg -l |grep zoom`
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;UPDATE:&lt;/p&gt;

&lt;p&gt;The exact same steps can be used to install the Skype skype-ubuntu-precise_4.3.0.37-1_i386.deb on Ubuntu.&lt;/p&gt;

&lt;p&gt;NOTE: If you have errors running steps above, it’s very likely you have upgraded your kernel or added extra repositories into apt-get that’s causing all the package dependencies conflict. Try to revert back to original Ubuntu 14.04 install state and these steps should get you running!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to manually test a DataSource connection in WebLogic</title>
   <link href="http://localhost:4000/2016/06/16/how-to-manually-test-a-datasource-connection-in-weblogic/"/>
   <updated>2016-06-16T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/06/16/how-to-manually-test-a-datasource-connection-in-weblogic</id>
   <content type="html">&lt;p&gt;When you creating new DataSource in WLS, it allows you to test the
connectivity. However after you have created it, the test button is
kinda hidden in a non-obvious way. This is how I get to it and test an
existing DataSource that have targeted a server.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Login to Admin Console (eg: &lt;a href=&quot;http://localhost:7100/console&quot;&gt;http://localhost:7100/console&lt;/a&gt;)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;On the Domain Structure left panel, click:    
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;my\_domain\_name&amp;gt;&lt;/code&gt; (eg: DefaultDomain) &amp;gt; Services &amp;gt; Data
Sources&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;On the right, Click on the DataSource name you want to test.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Click the “Monitoring” tab &amp;gt; “Testing” tab.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Select the server the DataSource has targeted to and then press
“Test Data Source” button.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</content>
 </entry>
 
 <entry>
   <title>How to setup hg repository on a remote server</title>
   <link href="http://localhost:4000/2016/06/14/how-to-setup-hg-repository-on-a-remote-server/"/>
   <updated>2016-06-14T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/06/14/how-to-setup-hg-repository-on-a-remote-server</id>
   <content type="html">&lt;p&gt;I love using mercurial source control! It’s easy to use and it works as I expected everytime I need to do something with my source repository. Here is how you can quickly create a remote repository to push your existing project into it. (use this as backup of your project or share among your team etc)&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;SSH into your remote server and create an empty repository.
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ssh remote_hostname
bash&amp;gt; cd $HOME 
bash&amp;gt; mkdir -p hg-repos/myproject
bash&amp;gt; cd hg-repos/myproject
bash&amp;gt; hg init
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Back on your local machine and in your existing hg project, edit the .hg/hgrc file with the following:
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[paths]
default=ssh://remote_hostname/hg-repos/myproject
[ui]
remotecmd=/usr/local/bin/hg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;That’s it! You don’t even need hg server running in remote host to make this work! Now you may perofrm “hg push” command inside your local project to sync up to remote host&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;NOTE 1: This setup rely on your SSH into remote host. If you want to avoid user password promt everytime you perform “hg push”, then setup Key-Based SSH login.&lt;/p&gt;

&lt;p&gt;NOTE 2: You only need “remotecmd” part if your remote_hostname does not have a standard hg installed. Then you can specified your custom location here.&lt;/p&gt;

&lt;p&gt;NOTE 3: If you want to use abolute path for “default” path instead, then you can use double slash after the “remote_hostname”. Else the single slash is relative to your $HOME directory.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to setup a Java web application using Gradle</title>
   <link href="http://localhost:4000/2016/06/14/how-to-setup-a-java-web-application-using-gradle/"/>
   <updated>2016-06-14T01:00:00-04:00</updated>
   <id>http://localhost:4000/2016/06/14/how-to-setup-a-java-web-application-using-gradle</id>
   <content type="html">&lt;p&gt;For basic java and Gradle, it’s really simple. All you need is one line in build.gradle file and you can start compiling Java source under src/main/java folder.&lt;/p&gt;

&lt;p&gt;apply plugin: ‘java’&lt;/p&gt;

&lt;p&gt;But to setup a useful web application,  you would need little more. Here I have another example of Gradle 2.7 script file for building a Java web application. I also have noted few things I have discovered in the comments.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# A Java web app project

# There should be a src/main/webapp as web content directory
apply plugin: 'war'
apply plugin: 'jetty'

# Change jetty default port from 8080
httpPort = 9000

# A repository must be given to fetch dependencies below.
repositories {
    mavenCentral()
}

# Library dependencies
dependencies {
    // JDK lang support
    // Ouch! Gradle does not support 'provided' scope! Let's use compile for now.
    //provided 'org.projectlombok:lombok:1.16.6'
    compile 'org.projectlombok:lombok:1.16.6'

    // Testing
    testCompile 'junit:junit:4.12',
        'org.hamcrest:hamcrest-library:1.3'

    // Database
    runtime 'mysql:mysql-connector-java:5.1.37'   

    // Scripting
    //runtime 'org.codehaus.groovy:groovy-all:2.4.5'
    /*
    NOTE: Error if you include groovy with gradle+jetty!!!
            java.lang.ExceptionInInitializerError:
        groovy.lang.GroovyRuntimeException: Conflicting module versions. Module [groovy-all is loaded in version 2.3.10 and you are trying to load version 2.4.5
             // Verify your groovy version using the following:
        import javax.script.*
        out.println(new ScriptEngineManager().getEngineFactories())
        out.println(org.codehaus.groovy.jsr223.GroovyScriptEngineFactory.class.getProtectionDomain().getCodeSource().getLocation())
    */ 
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I also have this JSP in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/webapp/script.jsp&lt;/code&gt; folder&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;%@ page import=&quot;javax.script.*, java.io.*&quot; %&amp;gt;

&amp;lt;%
// Initialize parameters
String engineName = request.getParameter(&quot;engine&quot;);
if (engineName == null) engineName = &quot;Groovy&quot;;
String code = request.getParameter(&quot;code&quot;);
if (code == null) code = &quot;&quot;;
%&amp;gt;

&amp;lt;!-- form: Script input code --&amp;gt;
&amp;lt;h1&amp;gt;Scripting&amp;lt;/h1&amp;gt;
&amp;lt;form method=&quot;POST&quot;&amp;gt;
&amp;lt;textarea name=&quot;code&quot; cols=&quot;120&quot; rows=&quot;25&quot;&amp;gt;&amp;lt;%= code %&amp;gt;&amp;lt;/textarea&amp;gt;
&amp;lt;p/&amp;gt;&amp;lt;input type=&quot;submit&quot; value=&quot;Submit&quot;/&amp;gt;
&amp;lt;/form&amp;gt;

&amp;lt;pre&amp;gt;
&amp;lt;%
if (request.getMethod().equals(&quot;POST&quot;)) {
    // Process form and evaluate script code
    ScriptEngine se = new ScriptEngineManager().getEngineByName(engineName);
    if (se == null) {
        out.println(&quot;ERROR: &quot; + engineName + &quot; engine not found! Use 'engine' parameter to change it.&quot;);
    } else {
        try {
            Bindings b = se.createBindings();
            b.put(&quot;request&quot;, request);
            b.put(&quot;out&quot;, out);
            Object result = se.eval(code, b);
            
            out.println(engineName + &quot; script result:&quot;);
            out.println(&quot;&quot; + result);
        } catch (Exception e) {
            out.println(&quot;ERROR: &quot; + engineName + &quot; script failed to evaluate!&quot;);
            e.printStackTrace(new PrintWriter(out));
        }
    }
}
%&amp;gt;

&amp;lt;/pre&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;With this script.jsp, you can write something like this to test out your db connection.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// Groovy script:
import java.sql*
conn = DriverManager.getConnection('jdbc:mysql://localhost/test', 'dev', 'dev123')
out.println(&quot;conn=&quot; + conn)
conn.close()

And just for fun, I have created a data class using ProjectLombok generator in src/main/java/myjava/MyData.java

package myjava;
import java.util.*;

@lombok.Data
public class MyData {
private Integer id;
private String name;
private Date createdDate;
private List&amp;lt;MyData&amp;gt; dataList;
private Map&amp;lt;String, MyData&amp;gt; dataMap;

}

I also have a unit test in src/test/java/myjava/MyDataTest.java

package myjava;

import org.junit.Test;
import static org.junit.Assert.assertThat;
import static org.hamcrest.Matchers.*;

public class MyDataTest {
@Test
public void tesGeneratedGetterSettersAndToString() {
MyData d = new MyData();
d.setId(12345);
d.setName(&quot;foo&quot;);
assertThat(d.getId(), is(12345));
assertThat(d.getName(), is(&quot;foo&quot;));
assertThat(d.toString(), is(&quot;MyData(id=12345, name=foo, createdDate=null, dataList=null, dataMap=null)&quot;));
}

}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;To compile code, type command: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gradle compileJava&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;To run test, type command: gradle test(A nice feature of Gradle is that it auto generate test reports! Look for them in your build/reports folder.)&lt;/p&gt;

&lt;p&gt;To run web app, type command: gradle jettyRun&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Java Jdbc Test for UTF8 and Default Value for TIMESTAMP</title>
   <link href="http://localhost:4000/2015/11/02/java-jdbc-test-for-utf8-and-default-value-for-timestamp/"/>
   <updated>2015-11-02T00:00:00-05:00</updated>
   <id>http://localhost:4000/2015/11/02/java-jdbc-test-for-utf8-and-default-value-for-timestamp</id>
   <content type="html">&lt;p&gt;Just a quick MySQL test on how to use UTF8 encoding with JDBC connection string. Also a test on how to set TIMESTAMP default values.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package zemian.jdbc;

import org.junit.Test;

import java.sql.*;
import java.util.*;
import java.util.Date;

/**

 -- drop table ztest_issues;
 CREATE TABLE ztest_issues(
 id INT NOT NULL AUTO_INCREMENT PRIMARY KEY
 , title VARCHAR(64) NOT NULL
 , summary TEXT NULL
 , priority INT NOT NULL DEFAULT 5
 , cdate DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
 );

 INSERT INTO ztest_issues(title) VALUES('test');
 INSERT INTO ztest_issues(title, summary) VALUES('test2', 'Just a test');
 INSERT INTO ztest_issues(title, summary, priority) VALUES('test2', 'Just a test', 1);
 INSERT INTO ztest_issues(title, summary, priority, cdate) VALUES('test2', 'Just a test', 1, '2010-12-31 08:00:00');

 --INSERT INTO ztest_issues(title, summary) VALUES('locale test1', LOAD_FILE('C:/data/tmp/test.xml'));
 --INSERT INTO ztest_issues(title, summary) VALUES('locale test2', LOAD_FILE('C:/data/tmp/test2.xml'));
 --INSERT INTO ztest_issues(title, summary) VALUES('locale test3', LOAD_FILE('C:/data/tmp/test3.xml'));

 SELECT * FROM ztest_issues;

 NOTE:
 CURRENT_TIMESTAMP is version specific and is now allowed for DATETIME columns as of version 5.6 http://dev.mysql.com/doc/refman/5.6/en/timestamp-initialization.html

 For 5.6 &amp;lt;, use TIMESTAMP for cdate field instead.

 cdate TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
 cdate DATETIME NULL

 NOTE2:
 cdate DATETIME NOT NULL DEFAULT 0

 If you were to use default to ZERO, then you would need this properties in conn string. Else you will fail to get ZERO date value into Java.

 You need to tell the JDBC driver to convert them to NULL. This is done by passing a connection property name zeroDateTimeBehavior with the value convertToNull

 For more details see the manual: http://dev.mysql.com/doc/refman/4.1/en/connector-j-installing-upgrading.html

 */
public class ZtestIssuesJdbcTest {
//    String url = &quot;jdbc:mysql://localhost/test&quot;;
//    String url = &quot;jdbc:mysql://localhost/test?zeroDateTimeBehavior=convertToNull&quot;;
    String url = &quot;jdbc:mysql://localhost/test?useUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;connectionCollation=utf8_general_ci&amp;amp;zeroDateTimeBehavior=convertToNull&quot;;
    String username = &quot;test&quot;;
    String password = &quot;test123&quot;;

    @Test
    public void testShowTableLocale() throws Exception {
        try (Connection conn = DriverManager.getConnection(url, username, password)) {
            String sql = &quot;SHOW VARIABLES LIKE 'char%'&quot;;
            System.out.println(&quot;Sql:&quot; + sql);
            Statement sm = conn.createStatement();
            ResultSet rs = sm.executeQuery(sql);
            while (rs.next()) {
                System.out.printf(&quot;%s\t%s\n&quot;, rs.getObject(1), rs.getObject(2));
            }

            sql = &quot;SHOW CREATE TABLE ztest_issues&quot;;
            System.out.println(&quot;Sql:&quot; + sql);
            sm = conn.createStatement();
            rs = sm.executeQuery(sql);
            while (rs.next()) {
                System.out.printf(&quot;%s\t%s\n&quot;, rs.getObject(1), rs.getObject(2));
            }
        }
    }

    @Test
    public void testQuery() throws Exception {
        try (Connection conn = DriverManager.getConnection(url, username, password)) {
            String sql = &quot;SELECT id, cdate, title, summary FROM ztest_issues&quot;;
            System.out.println(&quot;Sql:&quot; + sql);
            Statement sm = conn.createStatement();
            ResultSet rs = sm.executeQuery(sql);
            while (rs.next()) {
                System.out.printf(&quot;%d\t%s\t%s\t%s\n&quot;, rs.getObject(1), rs.getObject(2), rs.getObject(3), rs.getObject(4));
            }
        }
    }

    @Test
    public void testInsert() throws Exception {
        try (Connection conn = DriverManager.getConnection(url, username, password)) {
            String sql = &quot;INSERT INTO ztest_issues(title, summary, cdate) VALUES(?, ?, ?)&quot;;
            System.out.println(&quot;Sql: &quot; + sql);
            PreparedStatement ps = conn.prepareStatement(sql);

            String testId = &quot;&quot; + System.currentTimeMillis();

            ps.setObject(1, &quot;English Locale &quot; + testId);
            ps.setObject(2, &quot;Just a test&quot;);
            ps.setObject(3, new Date());
            int result = ps.executeUpdate();
            System.out.println(&quot;Insert Result: &quot; + result);

            ps.setObject(1, &quot;Chinese Locale &quot; + testId);
            ps.setObject(2, &quot;&amp;amp;#21482;&amp;amp;#26159;&amp;amp;#19968;&amp;amp;#20491;&amp;amp;#28204;&amp;amp;#35430;&quot;);
            ps.setObject(3, new Date());
            result = ps.executeUpdate();
            System.out.println(&quot;Insert Result: &quot; + result);

            ps.setObject(1, &quot;Spanish Locale &quot; + testId);
            ps.setObject(2, &quot;Sólo una prueba&quot;);
            ps.setObject(3, new Date());
            result = ps.executeUpdate();
            System.out.println(&quot;Insert Result: &quot; + result);
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>ConEmu - a Terminal Windows or Tab Manager</title>
   <link href="http://localhost:4000/2015/11/01/conemu-a-terminal-windows-or-tab-manager/"/>
   <updated>2015-11-01T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/11/01/conemu-a-terminal-windows-or-tab-manager</id>
   <content type="html">&lt;p&gt;Just learned about ConEmu project at &lt;a href=&quot;https://conemu.github.io&quot;&gt;https://conemu.github.io&lt;/a&gt; and it’s
pretty awesome!&lt;/p&gt;

&lt;p&gt;Thanks Onur for the tips!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to view Unix man pages with browser</title>
   <link href="http://localhost:4000/2015/10/24/how-to-view-unix-man-pages-with-browser/"/>
   <updated>2015-10-24T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/10/24/how-to-view-unix-man-pages-with-browser</id>
   <content type="html">&lt;p&gt;I have come across this wonderful project called Bwana (https://www.bruji.com/bwana/) for Mac. Install it and you can view any man page on the browser. For example try typing the following address on the Safari:&lt;/p&gt;

&lt;p&gt;man:find&lt;/p&gt;

&lt;p&gt;And you will see something like this:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://1.bp.blogspot.com/-hJtb8OSJUcY/Vi0NzuU1aqI/AAAAAAAAArk/VxH6rcjZE6g/s1600/grab1.tiff&quot;&gt;&lt;img src=&quot;http://1.bp.blogspot.com/-hJtb8OSJUcY/Vi0NzuU1aqI/AAAAAAAAArk/VxH6rcjZE6g/s320/grab1.tiff&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to setup a new Trac issue tracking system</title>
   <link href="http://localhost:4000/2015/10/21/how-to-setup-a-new-trac-issue-tracking-system/"/>
   <updated>2015-10-21T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/10/21/how-to-setup-a-new-trac-issue-tracking-system</id>
   <content type="html">&lt;p&gt;Here is how I setup a local instance of Trac (a python based issue tracking web application) on my Mac.&lt;/p&gt;

&lt;p&gt;Prerequisite: MySQL 5.6 and Python 2.7 (Python3 will not work with Trac yet!)&lt;/p&gt;

&lt;p&gt;Step1: Setup a Trac database and a user&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sql&amp;gt; CREATE DATABASE trac DEFAULT CHARACTER SET utf8 COLLATE utf8_bin;
sql&amp;gt; CREATE USER 'dev'@'localhost' IDENTIFIED BY 'dev123';
sql&amp;gt; GRANT ALL ON trac.* TO 'dev'@'localhost';


Step2: Install MySQL adaptor for Python and Trac

bash&amp;gt; pip install Genshi trac mysqlclient


Step3: Setup a Track instance

bash&amp;gt; trac-admin /Users/zemian/dev/mytrac intent

bash&amp;gt; # Above will prompt you to enter a backend string. Use
bash&amp;gt; # this connection string: 

bash&amp;gt; #   mysql://dev:dev123@localhost:3306/trac

Step3: Create a Trac admin user

bash&amp;gt; htpasswd -c /Users/zemian/dev/mytrac/.htpasswd admin

Step4: Run Track

bash&amp;gt; tracd -p 8000 --basic-auth=&quot;mytrac,/Users/zemian/dev/mytrac/.htpasswd,mytrac&quot; /Users/zemian/dev/metric
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>mysqlclient gives "Library not loaded - libmysqlclient.18.dylib" error</title>
   <link href="http://localhost:4000/2015/10/16/mysqlclient-gives-library-not-loaded-libmysqlclient-18-dylib-error/"/>
   <updated>2015-10-16T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/10/16/mysqlclient-gives-library-not-loaded-libmysqlclient-18-dylib-error</id>
   <content type="html">&lt;p&gt;If you want to use python MySQLdb module (eg: if you run Trac with MySQL backend), you would need first install MySQL server on MacOSX, then install the mysqlclient python package using pip. However upon verifying it, you may encounter error like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;(mypy-test)Zemians-Air:dev zemian$ pip install mysqlclient

Collecting mysqlclient

  Using cached mysqlclient-1.3.6.tar.gz

Building wheels for collected packages: mysqlclient

  Running setup.py bdist_wheel for mysqlclient

  Stored in directory: /Users/zemian/Library/Caches/pip/wheels/9c/3b/73/8f16f45dc76999dafc2af06b0d6e1e669bc0e1594f41fcc2e8

Successfully built mysqlclient

Installing collected packages: mysqlclient

Successfully installed mysqlclient-1.3.6

(mypy-test)Zemians-Air:dev zemian$ python

Python 2.7.10 (default, Aug 22 2015, 20:33:39) 

[GCC 4.2.1 Compatible Apple LLVM 7.0.0 (clang-700.0.59.1)] on darwin

Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.

&amp;gt;&amp;gt;&amp;gt; import MySQLdb

Traceback (most recent call last):

  File &quot;&amp;lt;stdin&amp;gt;&quot;, line 1, in &amp;lt;module&amp;gt;

  File &quot;/Users/zemian/dev/mypy-test/lib/python2.7/site-packages/MySQLdb/__init__.py&quot;, line 19, in &amp;lt;module&amp;gt;

    import _mysql

ImportError: dlopen(/Users/zemian/dev/mypy-test/lib/python2.7/site-packages/_mysql.so, 2): Library not loaded: libmysqlclient.18.dylib

  Referenced from: /Users/zemian/dev/mypy-test/lib/python2.7/site-packages/_mysql.so

  Reason: image not found
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To resolve this, you need to add the following to your shell environment&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;export DYLD_LIBRARY_PATH=/usr/local/mysql/lib&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Update 2016-06-17&lt;/p&gt;

&lt;p&gt;To install mysqlclient on Ubuntu 14, you might need to first install the mysql_config first:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bash&amp;gt; sudo apt-get install libmysqlclient-dev&lt;/code&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to specify SAME target table for update in FROM clause</title>
   <link href="http://localhost:4000/2015/10/11/how-to-specify-same-target-table-for-update-in-from-clause/"/>
   <updated>2015-10-11T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/10/11/how-to-specify-same-target-table-for-update-in-from-clause</id>
   <content type="html">&lt;p&gt;Have you tried updating something simple as following?&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;update category_tmp set last_update=NOW() 
where category_id in (
  select category_id from category_tmp where name like 'A%'
);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In MySQL you will get an error like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Error Code: 1093. You can't specify target table 'category_tmp' for update in FROM clause.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So it says that you can’t use the same update TABLE name within the sub query in where condition. The trick to get around this is to use another sub query in the where clause so it won’t see the TABLE name being used! Here is a workaround:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;update category_tmp set last_update=NOW() 
where category_id in (
  select category_id from (
    select category_id from category_tmp where name like 'A%'
  ) ID_LIST
);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Noticed that in MySQL, you must name your sub query result such as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ID_LIST&lt;/code&gt;, in order for it to be re-select it again on the outer query! Otherwise it will error out with this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Error Code: 1248. Every derived table must have its own alias
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Setup Python on Mac</title>
   <link href="http://localhost:4000/2015/10/10/setup-python-on-mac/"/>
   <updated>2015-10-10T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/10/10/setup-python-on-mac</id>
   <content type="html">&lt;h2 id=&quot;setup-python-2&quot;&gt;Setup Python 2&lt;/h2&gt;

&lt;p&gt;The default MacOS should already come with latest Python 2.7. It will be pre-installed along with some pyobjc packages as well.&lt;/p&gt;

&lt;p&gt;If you like to play around with python and external packages, it’s best not to touch the original Python install from the System. Unfortunately, this Python 2.7 does not come with pip nor virtualenv packages to help setup separate environment! So it’s okay to install these two into the system first. The easiest to setup is simply download get-pip.py from https://bootstrap.pypa.io/get-pip.py, then run&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; sudo python get-pip.py

With this, you may now able install virtualenv

bash&amp;gt; sudo /usr/local/bin/pip install virtualenv

Now you can setup Python2 virtual env on a separate directory.

bash&amp;gt; python -m virtualenv mypy

bash&amp;gt; source mypy/bin/activate

(mypy) bash&amp;gt; python -c 'import sys; print sys.path'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You should able to verify the output above that you are indeed using your own setup of an isolated  Python2 env, and it even has your own pip installed list, so you won’t mess up the built-in System version of python!&lt;/p&gt;

&lt;h2 id=&quot;setup-python-3&quot;&gt;Setup Python 3&lt;/h2&gt;

&lt;p&gt;The MacOS comes with latest Python 2.7, but no Python3. You can download the latest Python3 from python.org site and install it. It will give you a new ‘python3’ command so not to conflict with your existing Python. (NOTE: It’s best not to remove or override the default Python2.7 that comes with the system!) But if you want to use ‘python’ command for Python3 for dev, then I suggest you create a new virtual environment of your own. The Python3 install should come with a ‘pyvenv’ command. For Example&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; pyvenv mypy3
bash&amp;gt; source mypy3/bin/activate
(mypy3) bash&amp;gt; python -c 'import sys; print(sys.path)'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>MacBook Air is not displaying scroll bar on Finder</title>
   <link href="http://localhost:4000/2015/10/10/macbook-air-is-not-displaying-scroll-bar-on-finder/"/>
   <updated>2015-10-10T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/10/10/macbook-air-is-not-displaying-scroll-bar-on-finder</id>
   <content type="html">&lt;p&gt;For odd reason that I don’t see scrollbar shows up on Finder in MacBook
Air when I have a long list of files. Can’t scroll down with my
trackpad, but I can do it with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Fn + Down Arrow&lt;/code&gt; key though. To fix
this, I have to go into System Preference, General and set “Show scroll
bar” to “Always”.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Checking MySQL database connection with mysql-connector-python</title>
   <link href="http://localhost:4000/2015/10/09/checking-mysql-database-connection-with-mysql-connector-python/"/>
   <updated>2015-10-09T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/10/09/checking-mysql-database-connection-with-mysql-connector-python</id>
   <content type="html">&lt;p&gt;First install the MySQL package&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt;pip install --allow-all-external mysql-connector-python
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you may test the database connection with this Python code&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;from mysql.connector import connect

conn = connect(user='dev', password='dev123', database='mysql')
cur = conn.cursor()
cur.execute('select 1+1')
for row in cur:
print(row)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Setup MySQL DataSource on WLS</title>
   <link href="http://localhost:4000/2015/10/04/setup-mysql-datasource-on-wls/"/>
   <updated>2015-10-04T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/10/04/setup-mysql-datasource-on-wls</id>
   <content type="html">&lt;p&gt;Here is a WLST script to setup MySQL DataSource in WebLogic server after you have created a domain. The script will also assign this DataSource to one or more servers you pass in at the end of arguments.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Update an existing domain to setup a DataSource and assign it to servers
# Example
#   wlst.cmd setupDataSource.py C:\data\wls11g_domains\dev MYTESTDB jdbc/MYTESTDB com.mysql.jdbc.Driver jdbc:mysql://localhost/mytestdb test test123 AdminServer

import os, sys, os.path
(domain_home, ds_name, jndi_name, driver_name, url, user, password) = sys.argv[1:8]
servers = sys.argv[8:]

domain_home = os.path.abspath(domain_home)

readDomain(domain_home)

print(&quot;Setting up WLS DataSource: %s&quot; % ds_name)
create(ds_name, 'JDBCSystemResource')
cd('/JDBCSystemResource/%s/JdbcResource/%s' %(ds_name, ds_name))
create('myJdbcDriverParams','JDBCDriverParams')
cd('JDBCDriverParams/NO_NAME_0')
set('DriverName',driver_name)
set('URL', url)
set('PasswordEncrypted', password)
set('UseXADataSourceInterface', 'false')
create('myProps','Properties')
cd('Properties/NO_NAME_0')
create('user', 'Property')
create('characterEncoding', 'Property')
create('connectionCollation', 'Property')
create('useUnicode', 'Property')
cd('Property/user')
cmo.setValue(user)
cd('../characterEncoding')
cmo.setValue('utf-8')
cd('../connectionCollation')
cmo.setValue('utf8_general_ci')
cd('../useUnicode')
cmo.setValue('true')

cd('/JDBCSystemResource/%s/JdbcResource/%s' %(ds_name, ds_name))
create('myJdbcDataSourceParams','JDBCDataSourceParams')
cd('JDBCDataSourceParams/NO_NAME_0')
set('JNDIName', java.lang.String(jndi_name))

cd('/')
for server in servers:
print(&quot;Assigning DS to server: %s&quot; % server)
assign('JDBCSystemResource', ds_name, 'Target', server)

updateDomain()
exit()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Creating new WebLogic domain using WLST script</title>
   <link href="http://localhost:4000/2015/10/02/creating-new-weblogic-domain-using-wlst-script/"/>
   <updated>2015-10-02T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/10/02/creating-new-weblogic-domain-using-wlst-script</id>
   <content type="html">&lt;p&gt;Here is how to creating new WebLogic domain using WLST script without starting up a WebLogic server instance. The default AdminServer console login username is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;weblogic&lt;/code&gt;, and the script allow you to change its password and a port number for the AdminServer instance.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Usage: wlst.cmd createDomain.py &amp;lt;domain_home&amp;gt; &amp;lt;port&amp;gt; &amp;lt;password&amp;gt;
# Example: 
#   cd D:\apps\wls1036_dev\wlserver\common\bin
#   wlst.cmd scripts\createDomain.py C:\data\wls11g_domains\dev 7001 weblogic1

import os, sys, os.path
domain_home, port_s, password = sys.argv[1:]

port = int(port_s)
domain_home = os.path.abspath(domain_home)
domain_name = os.path.basename(os.path.normpath(domain_home))
template = &quot;%s/wlserver/common/templates/domains/wls.jar&quot; % os.environ['MW_HOME']

print(&quot;Creating WLS domain: %s&quot; % domain_name)
# MW_HOME should be auto set by wlst.cmd script
readTemplate(template)

# Set domain name
set('Name', domain_name)

# Set AdminServer port 
cd('Servers/AdminServer')
set('ListenAddress','')
set('ListenPort', port)

# Set weblogic password
cd('/Security/%s/User/weblogic' % domain_name)
cmo.setPassword(password)

# Write domain
#setOption('OverwriteDomain', 'true')
writeDomain(domain_home)
closeTemplate()
exit()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Create simple WLS domain using WLST and built-in template jar</title>
   <link href="http://localhost:4000/2015/09/25/create-simple-wls-domain-using-wlst-and-built-in-template-jar/"/>
   <updated>2015-09-25T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/09/25/create-simple-wls-domain-using-wlst-and-built-in-template-jar</id>
   <content type="html">&lt;p&gt;You can easily &lt;a href=&quot;http://saltnlight5.blogspot.com/2014/01/getting-started-with-weblogic-server.html&quot;&gt;start up a WebLogic Server&lt;/a&gt; on an empty directory and it will create a domain. Here is another way to create WLS domain structure folder without actually starting up a WLS server.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Usage: wlst.cmd createDomain.py &amp;lt;domain_home&amp;gt; &amp;lt;port&amp;gt; &amp;lt;password&amp;gt;

# NOTE: the &amp;lt;domain_home&amp;gt; must be a absolute path.

# Example: C:\wls12130\wlserver\common\bin\wlst.cmd scripts\createDomain.py C:\data\wls12c_domains\dev 7001 weblogic1

import os, sys

domain_home = sys.argv[1]
domain_name = 'mydomain'

port = int(sys.argv[2])

password = sys.argv[3]

readTemplate(os.environ['MW_HOME'] + &quot;/wlserver/common/templates/wls/wls.jar&quot;)

cd('/Server/AdminServer')

set('Name', domain_name + '-admin')

set('ListenAddress','')

set('ListenPort', port)

cd('/Security/base_domain/User/weblogic')

cmo.setPassword(password)

cd('/')

set('Name', domain_name)

writeDomain(domain_home)

closeTemplate()

exit()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>JavaScript Jdbc Quick Test</title>
   <link href="http://localhost:4000/2015/09/09/javascript-jdbc-quick-test/"/>
   <updated>2015-09-09T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/09/09/javascript-jdbc-quick-test</id>
   <content type="html">&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;importPackage(java.sql)
url = &quot;jdbc:mysql://localhost/test&quot;;
username = &quot;test&quot;;
password = &quot;test123&quot;;

// Util for nice print of result
function printResultSet(rs) {
colCount = rs.getMetaData().getColumnCount();
while (rs.next()) {
for (i=1; i &amp;lt;= colCount; i++) {
printf(&quot;%s\t&quot;, rs.getObject(i));
}
println();
}
}

// Get a DB conn
sql = &quot;SELECT * FROM ztest_issues&quot;;
conn = DriverManager.getConnection(url, username, password);

// Example of simple query
st = conn.createStatement();
rs = st.executeQuery(sql);
while (rs.next()) {
for (i=1; i &amp;lt;= 4; i++) {
printf(&quot;%s\t&quot;, rs.getObject(i));
}
println();
}
st.close();

// Example of prepared statment with binding params
sql = &quot;SELECT * FROM ztest_issues WHERE title=?&quot;;
st = conn.prepareStatement(sql);
st.setObject(1, &quot;test&quot;);
rs = st.executeQuery();
printResultSet(rs);
st.close();

// Close DB conn
conn.close();
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Be aware of the count - 0 when using Python's re.sub() to find and replace text</title>
   <link href="http://localhost:4000/2015/08/23/be-aware-of-the-count-0-when-using-pythons-re-sub-to-find-and-replace-text/"/>
   <updated>2015-08-23T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/08/23/be-aware-of-the-count-0-when-using-pythons-re-sub-to-find-and-replace-text</id>
   <content type="html">&lt;p&gt;I have an xml file and I want to remove a whole section of element without actually parsing the XML file. I wrote an Python script to do just that. I first tested it out like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import re
input_text = open('my.xml').read()
result = re.findall(r'&amp;lt;library-ref&amp;gt;.*&amp;lt;/library-ref&amp;gt;', input_text, re.S)
print(result)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The result IS what I wanted, so I thought I can quickly replace it with something like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;result = re.sub(r'&amp;lt;library-ref&amp;gt;.*&amp;lt;/library-ref&amp;gt;', '', input_text, re.S)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And to my surprise this does not work. It took me a while to notice that I mis used the method according to the documentation, which has this signature:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;re.sub(pattern, repl, string, count=0, flags=0)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;At first glace, I thought that count is already default to zero and I do not need to set it, but because that is a positional parameter, you must include it! So you suppose to call it explicit like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;result = re.sub(r'&amp;lt;library-ref&amp;gt;.*&amp;lt;/library-ref&amp;gt;', '', input_text, 0, re.S)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or, if you like, you can use the “flags” parameter name explicitly without the odd looking zero.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;result = re.sub(r'&amp;lt;library-ref&amp;gt;.*&amp;lt;/library-ref&amp;gt;', '', input_text, flags=re.S)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So here is an example of flexible dynamic typing of optional parameters can bite if you are not careful.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>View and terminate Oracle Database user sessions</title>
   <link href="http://localhost:4000/2015/08/21/view-and-terminate-oracle-database-user-sessions/"/>
   <updated>2015-08-21T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/08/21/view-and-terminate-oracle-database-user-sessions</id>
   <content type="html">&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Verify sessions:
SELECT USERNAME FROM V$SESSION;

SELECT USERNAME, SID, SERIAL#, STATUS
  FROM V$SESSION
  WHERE USERNAME like 'SCOTT%';

Generate SQL to terminate sessions:
SELECT 'ALTER SYSTEM KILL SESSION ''' || SID || ',' || SERIAL# || ''';'
  FROM V$SESSION
  WHERE USERNAME like 'SCOTT%';
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How to import a Oracle database dump file</title>
   <link href="http://localhost:4000/2015/08/18/how-to-import-a-oracle-database-dump-file/"/>
   <updated>2015-08-18T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/08/18/how-to-import-a-oracle-database-dump-file</id>
   <content type="html">&lt;p&gt;Here is an example on how to import a Oracle database dump file (a binary file that’s exported from a Oracle database using the Oracle data pump utility). For this instruction example, let’s say I was given a myapp.dmp.gz file.&lt;/p&gt;

&lt;p&gt;NOTE: If you do not use the same db user/tablespace for export and import, then you need to know its names used during export to perform the remapping during import.&lt;/p&gt;

&lt;p&gt;Step 1: If you don’t have an Oracle database instance to work with, create one first. Or ask your DBA to create or allocate a instance for your import purpose.&lt;/p&gt;

&lt;p&gt;Step 2: Create a new tablespace and a DB user in an Oracle database instance. (For this example, I will call my new user &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MYAPP08182015&lt;/code&gt;, password &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Password1&lt;/code&gt;, and tablespace named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MY_TABLE_SPACE&lt;/code&gt;.)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;create tablespace MY_TABLE_SPACE datafile
  '/opt/myapp_datafiles/MY_TABLE_SPACE.dat'
  size 500m autoextend on next 500m
  extent management local
  segment space management auto;

create user MYAPP08182015 identified by Password1
  default tablespace MY_TABLE_SPACE
  temporary tablespace TEMP
  quota unlimited on MYTABLESPACE;

grant create session, grant any privilege to MYAPP08182015;
grant IMP_FULL_DATABASE to MYAPP08182015;

create directory MY_DATADUMP_DIR as '/opt/myapp_datadump';
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that user must have &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;IMP_FULL_DATABASE&lt;/code&gt; privilege to be able to used by import tool. And if you don’t want to use default import data directory, then you would need to create the directory object to be used by import as shown above.&lt;/p&gt;

&lt;p&gt;Note also that your TEMP tablespace might not have enough disk space for large import. In this case, you may increase it like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;alter tablespace temp add tempfile
  '/opt/myapp_datafiles/TEMP2.dat'
  size 500m autoextend on next 500m;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Step 3: Now you have a new db User (Schema) and password, you may start the data import using the command line prompt. Ssh into the database server where you can find the impdp command utility.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;scp myapp.dmp.gz zemian@mydbserver:/opt/myapp_datadump
ssh zemian@mydbserver
cd /opt/myapp_datafiles
gunzip myapp.dmp.gz
/app/oracle/dbhome/bin/impdp MYAPP08182015/Password1 DIRECTORY=MY_DATADUMP_DIR REMAP_SCHEMA=MYAPP:MYAPP08182015 REMAP_TABLESPACE=USERS:MY_TABLE_SPACE LOGFILE=myapp-import.log DUMPFILE=myapp.dmp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;References:
&lt;a href=&quot;http://docs.oracle.com/cd/B19306_01/server.102/b14215/dp_overview.htm&quot;&gt;http://docs.oracle.com/cd/B19306_01/server.102/b14215/dp_overview.htm&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Selectively checkout large project from SVN repository</title>
   <link href="http://localhost:4000/2015/08/16/selectively-checkout-large-project-from-svn-repository/"/>
   <updated>2015-08-16T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/08/16/selectively-checkout-large-project-from-svn-repository</id>
   <content type="html">&lt;p&gt;Do you have a crazy large SVN repository that’s just impractical to checkout the entire trunk? Or maybe you work on a large project that you only need few modules to do 
your work only, and don’t need the 1 hour checkout time for the rest of the trunk files? Here is how 
you can do this with SVN command line.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;svn checkout --depth immediates http://myserver/svnrepo/myproject/trunk
cd trunk
svn update --depth infinity moduleA

svn update --depth infinity moduleB

svn update --depth infinity common/moduleX

svn update --depth infinity common/moduleY

svn update --depth empty lib/special
svn update --depth infinity lib/special/jars
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How to check Oracle Database tablespace</title>
   <link href="http://localhost:4000/2015/08/14/how-to-check-oracle-database-tablespace/"/>
   <updated>2015-08-14T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/08/14/how-to-check-oracle-database-tablespace</id>
   <content type="html">&lt;p&gt;When creating a new users in Oracle database (new schema), you need to verify the existing tablespace availability. This query will show you what’s there and how much space are free to use.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SELECT df.tablespace_name &quot;Tablespace&quot;,

  totalusedspace &quot;Used MB&quot;,

  (df.totalspace - tu.totalusedspace) &quot;Free MB&quot;,

  df.totalspace &quot;Total MB&quot;,

  ROUND(100 * ( (df.totalspace - tu.totalusedspace)/ df.totalspace)) &quot;% Free&quot;

FROM

  (SELECT tablespace_name,

    ROUND(SUM(bytes) / 1048576) TotalSpace

  FROM dba_data_files

  GROUP BY tablespace_name

  ) df,

  (SELECT ROUND(SUM(bytes)/(1024*1024)) totalusedspace,

    tablespace_name

  FROM dba_segments

  GROUP BY tablespace_name

  ) tu

WHERE df.tablespace_name = tu.tablespace_name;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also, this query will show where the tablespace file are located:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SELECT  FILE_NAME, BLOCKS, TABLESPACE_NAME

   FROM DBA_DATA_FILES;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here are some references on how Oracle manages user, schema and tablespace.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://community.oracle.com/message/1832920&quot;&gt;https://community.oracle.com/message/1832920&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://docs.oracle.com/cd/B28359_01/server.111/b28310/tspaces014.htm#ADMIN11412&quot;&gt;http://docs.oracle.com/cd/B28359_01/server.111/b28310/tspaces014.htm#ADMIN11412&lt;/a&gt;
&lt;a href=&quot;http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_8003.htm&quot;&gt;http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_8003.htm&lt;/a&gt;
&lt;a href=&quot;http://stackoverflow.com/questions/880230/difference-between-a-user-and-a-schema-in-oracle&quot;&gt;http://stackoverflow.com/questions/880230/difference-between-a-user-and-a-schema-in-oracle&lt;/a&gt;
&lt;a href=&quot;https://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:6162110256950&quot;&gt;https://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:6162110256950&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to run Kotlin script file</title>
   <link href="http://localhost:4000/2015/08/03/how-to-run-kotlin-script-file/"/>
   <updated>2015-08-03T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/08/03/how-to-run-kotlin-script-file</id>
   <content type="html">&lt;p&gt;The script name MUST have “.kts” extension! If not, you will get a unfriendly error message.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kotlinc -script hello.kts

Hello World
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;vs&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kotlinc -script hello.kt

EXCEPTION: java.lang.RuntimeException: Failed to evaluate script: java.lang.NullPointerException

        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileScript(KotlinToJVMBytecodeCompiler.java:290)

        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileAndExecuteScript(KotlinToJVMBytecodeCompiler.java:243)

        at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.java:186)

        at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.java:53)

        at org.jetbrains.kotlin.cli.common.CLICompiler.exec(CLICompiler.java:148)

        at org.jetbrains.kotlin.cli.common.CLICompiler.exec(CLICompiler.java:128)

        at org.jetbrains.kotlin.cli.common.CLICompiler.exec(CLICompiler.java:52)

        at org.jetbrains.kotlin.cli.common.CLICompiler.doMainNoExit(CLICompiler.java:197)

        at org.jetbrains.kotlin.cli.common.CLICompiler.doMain(CLICompiler.java:188)

        at org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.main(K2JVMCompiler.java:57)

        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)

        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

        at java.lang.reflect.Method.invoke(Method.java:606)

        at org.jetbrains.kotlin.preloading.Preloader.main(Preloader.java:83)

Caused by: java.lang.NullPointerException

        at org.jetbrains.kotlin.resolve.ScriptNameUtil.classNameForScript(ScriptNameUtil.java:33)

        at org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileScript(KotlinToJVMBytecodeCompiler.java:286)

        ... 14 more
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;See http://kotlinlang.org/docs/tutorials/command-line.html&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Python cat program</title>
   <link href="http://localhost:4000/2015/07/24/python-cat-program/"/>
   <updated>2015-07-24T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/07/24/python-cat-program</id>
   <content type="html">&lt;p&gt;You can implement the Linux cat program with few lines of Python code.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import fileinput
for line in fileinput.input():
    print(line, end='')
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then I was tinkering with this, and wanted to add an option to display the filename if multiple files were given. Here is how I use argparse module for this. Not the most efficient code and prob overkill, but it works!&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import fileinput, argparse
parser = argparse.ArgumentParser()
parser.add_argument('files', nargs='+', metavar='FILE', help='files to concatenate or print')
parser.add_argument('-n', action='store_true', help='show filename')
args = parser.parse_args()
with fileinput.input(files=args.files) as finput:
    for line in finput:
        if (args.n and finput.isfirstline()):
            print('\n=== {0} ==='.format(finput.filename()))
        print(line, end='')
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that argparse not only just parse for options, but actual argument list as well, and you have to explicitly define it, so you may reference it after the parse.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to parse Python command arguments and options</title>
   <link href="http://localhost:4000/2015/07/23/how-to-parse-python-command-arguments-and-options/"/>
   <updated>2015-07-23T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/07/23/how-to-parse-python-command-arguments-and-options</id>
   <content type="html">&lt;p&gt;https://docs.python.org/3/howto/argparse.html&lt;/p&gt;

&lt;p&gt;The python doc for &lt;a href=&quot;https://docs.python.org/3.4/library/argparse.html&quot;&gt;argparse&lt;/a&gt;module didn’t provide enough examples on the usage. I also think the module and parser itself is TOO flexible, in that the add_argument function accept too many parameters and it’s confusing to use.&lt;/p&gt;

&lt;p&gt;In most cases, you would define structure of your program’s input with two parts: Your program actual arguments and optional parameters. Then you would invoke the parser and use the result as a dict (Namespace) like object.&lt;/p&gt;

&lt;p&gt;Here are few examples that demonstrate how to use it in few common cases.&lt;/p&gt;

&lt;p&gt;Example0: Handle raw arguments&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import sys
args = sys.argv[1:]


for name in args:

  print(name)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Example1: Handle 2 arguments and a boolean option&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import argparse
parser = argparse.ArgumentParser()
parser.add_argument('hostname', default='localhost')
parser.add_argument('port', default=12345, type=int)
parser.add_argument('-d', default=False, action='store_true')
args = parser.parse_args()

if args.d:
 print(&quot;Processing host %s on port %d&quot; % (args.hostname, args.port))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Example2: Handle 1 argument with many options&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import argparse
parser = argparse.ArgumentParser()
parser.add_argument('url')
parser.add_argument('-u', '--user', help='user', default='demo')
parser.add_argument('-p', '--password', help='user password', default='demo123')
parser.add_argument('-l', '--limit', help='max limit value', default=1000, type=int)
parser.add_argument('--payload', help='text file payload', default='payload.xml')
args = parser.parse_args()

print(&quot;Processing url %s&quot; % args.url)

user, password = args.user, args.password
print(&quot;Got option user=%s&quot; % user)

with open(args.payload) as fh:
  payload = fh.read()

if args.limit &amp;gt; 100:
  print(&quot;Limit has exceed 100&quot;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Example3: Handle one or more arguments with a boolean option&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import argparse, fileinput
parser = argparse.ArgumentParser()
parser.add_argument('files', metavar='FILE', nargs='+')
parser.add_argument('-d', default=False, action='store_true')
args = parser.parse_args()

for line in fileinput.input(args.files):
  if args.d:
    print(&quot;Processing line: %s&quot; % line, end='')
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To display the default values in the helppage, do this with the parser&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;parser = argparse.ArgumentParser(formatter_class=argparse.ArgumentDefaultsHelpFormatter)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How to manage SQL statements more effectively with Java</title>
   <link href="http://localhost:4000/2015/07/22/how-to-manage-sql-statements-more-effectively-with-java/"/>
   <updated>2015-07-22T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/07/22/how-to-manage-sql-statements-more-effectively-with-java</id>
   <content type="html">&lt;p&gt;If you work with plain Java JDBC without any external libraries, you will need to manage your own SQL statements. Unfortunately Java String does not support muti-lines construct, and you have to use many “quotes” + “concatenation” and makes the SQL very hard to read and manage. This makes it hard to maintain and test (try to copy a SQL from Java code into your SQL client). It would be so nice to keep the entire SQL block of text intact without these Java noise.&lt;/p&gt;

&lt;p&gt;Here is a solution. Store your SQL queries in XML inside CDATA:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&amp;gt;
&amp;lt;sqlMap&amp;gt;
    &amp;lt;sqls&amp;gt;
        &amp;lt;entry&amp;gt;
            &amp;lt;key&amp;gt;getUser&amp;lt;/key&amp;gt;
            &amp;lt;value&amp;gt;&amp;lt;![CDATA[
SELECT *
FROM USERS
WHERE ID = ?
            ]]&amp;gt;&amp;lt;/value&amp;gt;
        &amp;lt;/entry&amp;gt;
        &amp;lt;entry&amp;gt;
            &amp;lt;key&amp;gt;getSpecialCodeByUserId&amp;lt;/key&amp;gt;
            &amp;lt;value&amp;gt;&amp;lt;![CDATA[
SELECT u.EMAIL, p.ID as PROFILEID, p.SPECIALCODE, a.MANAGERID
FROM USERS u
  LEFT JOIN PROFILE p ON p.USERID = u.ID
  LEFT JOIN ACCOUNT a ON a.PROFILEID = p.ID
WHERE u.ID = ?  ]]&amp;gt;&amp;lt;/value&amp;gt;
        &amp;lt;/entry&amp;gt;  &amp;lt;/sqls&amp;gt;
&amp;lt;/sqlMap&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you just need to read it. One way to do this is with built-in JAXB&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import javax.xml.bind.annotation.XmlRootElement;
import java.util.HashMap;
import java.util.Map;

@XmlRootElement
public class SqlMap {
    Map&amp;lt;String, String&amp;gt; sqls = new HashMap&amp;lt;&amp;gt;();

    public Map&amp;lt;String, String&amp;gt; getSqls() {
        return sqls;
    }

    public void setSqls(Map&amp;lt;String, String&amp;gt; sqls) {
        this.sqls = sqls;
    }

    public String getSql(String name) {
        return sqls.get(name);
    }

    public static SqlMap load(String name) throws Exception {
        InputStream inStream = Thread.currentThread().getContextClassLoader().getResourceAsStream(name);
        SqlMap sqlMap = JAXB.unmarshal(inStream, SqlMap.class);
        return sqlMap;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Another way is to simply use java.util.Properties#loadFromXML by following their schema DTD. Here is an example of XML:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&amp;gt;
&amp;lt;!DOCTYPE properties SYSTEM &quot;http://java.sun.com/dtd/properties.dtd&quot;&amp;gt;
&amp;lt;properties&amp;gt;
    &amp;lt;comment&amp;gt;XML Props&amp;lt;/comment&amp;gt;
    &amp;lt;!-- Foo entry --&amp;gt;
    &amp;lt;entry key=&quot;foo&quot;&amp;gt;bar&amp;lt;/entry&amp;gt;
    &amp;lt;!-- Query entry --&amp;gt;
    &amp;lt;entry key=&quot;query&quot;&amp;gt;
        &amp;lt;![CDATA[
                SELECT * FROM USERS
        ]]&amp;gt;
    &amp;lt;/entry&amp;gt;
&amp;lt;/properties&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Both of these are built-in from your JDK!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to find text entries in mulitple jar files</title>
   <link href="http://localhost:4000/2015/07/22/how-to-find-text-entries-in-mulitple-jar-files/"/>
   <updated>2015-07-22T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/07/22/how-to-find-text-entries-in-mulitple-jar-files</id>
   <content type="html">&lt;p&gt;Similar to &lt;a href=&quot;http://saltnlight5.blogspot.com/2012/07/how-to-print-text-file-content-inside.html&quot;&gt;printjar&lt;/a&gt;utility, here is a findjar util that can comes in handy to verify whether a class exists or not among a pile of jar files.&lt;/p&gt;

&lt;p&gt;JavaScript (run with jrunscript command)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pattern = arguments[arguments.length -1];
for (i=0; i &amp;lt; arguments.length - 1; i++) {
    path = arguments[i];
    jar = new java.util.jar.JarFile(path)
    entries = jar.entries();
    while(entries.hasMoreElements()) {
        jarEntry = entries.nextElement();
        if (jarEntry.toString().search(pattern) != -1) {
            println(jarEntry + &quot; : &quot; + path);
        }
    }
    jar.close();
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Jython&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import sys, glob, re
from java.util.jar import JarFile
pattern = sys.argv[-1]
for name in sys.argv[1: -2]:
    for path in glob.glob(name):
        jar = JarFile(path)
        for e in jar.entries():
            if re.search(pattern, str(e)):
                print &quot;%s %s&quot; % (str(e), path)
        jar.close()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Java version (The search argument input is at position one in this example)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import java.io.File;
import java.util.Enumeration;
import java.util.jar.JarEntry;
import java.util.jar.JarFile;

public class findjar {
    public static void main(String[] args) throws Exception {
        String searchText = args[0];
        if (searchText.contains(&quot;.&quot;))
            searchText = searchText.replaceAll(&quot;\\.&quot;, &quot;/&quot;);
        String dir = args[1];
        System.out.println(&quot;Searching &quot; + searchText + &quot; in &quot; + dir);
        search(searchText, new File(dir));
        System.out.println(&quot;Done.&quot;);
    }

    private static void search(String searchText, File dir) throws Exception {
        File[] files = dir.listFiles();
        for (File file : files) {
            if (file.isFile() &amp;amp;&amp;amp; file.getName().endsWith(&quot;.jar&quot;)) {
                JarFile jarFile = new JarFile(file);
                Enumeration&amp;lt;JarEntry&amp;gt; entries = jarFile.entries();
                while(entries.hasMoreElements()) {
                    JarEntry e = entries.nextElement();
                    String name = e.getName();
                    if (name.indexOf(searchText) &amp;gt;= 0) {
                        System.out.println(&quot;Found: &quot; + name + &quot; in &quot; + jarFile.getName());
                    }
                }
                jarFile.close();
            } else if (file.isDirectory()){
                search(searchText, file);
            }
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Python one-liner</title>
   <link href="http://localhost:4000/2015/07/19/python-one-liner/"/>
   <updated>2015-07-19T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/07/19/python-one-liner</id>
   <content type="html">&lt;p&gt;perl or ruby is still the King of one-liner. But if you still want to
use Python, you may want to try&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pip install oneliner
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://python-oneliner.readthedocs.org/en/latest/&quot;&gt;http://python-oneliner.readthedocs.org/en/latest/&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://github.com/gvalkov/python-oneliner/&quot;&gt;https://github.com/gvalkov/python-oneliner/&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Python processing each line from stdin or files</title>
   <link href="http://localhost:4000/2015/07/11/python-processing-each-line-from-stdin-or-files/"/>
   <updated>2015-07-11T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/07/11/python-processing-each-line-from-stdin-or-files</id>
   <content type="html">&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import fileinput,re
for line in fileinput.input():
line=line.rstrip()
line=line.replace('\\', '/')
a,b,*_=re.split('\s+', line)
print(b)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>python fancy cut command</title>
   <link href="http://localhost:4000/2015/07/09/python-fancy-cut-command/"/>
   <updated>2015-07-09T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/07/09/python-fancy-cut-command</id>
   <content type="html">&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# file: cut.py

#
# Python port of the following perl command (fancy cut command)
#   ls -l | tail -n +2 | perl -F'/\s+/' -ane 'print &quot;$F[-1]\n&quot;'
# but it works better with python index slicer and split by full regex delimiter.
#
# Examples:
#   ls -l | tail -n +2 | python cut.py ':'
#   ls -l | tail -n +2 | python cut.py '2:3'

import sys,fileinput,re
indexes = sys.argv[1]
files = sys.argv[2:]
for line in fileinput.input(files):
words = re.split(&quot;\s+&quot;, line.strip())
print(eval(&quot;words[&quot; + indexes + &quot;]&quot;))

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Useful subversion commands</title>
   <link href="http://localhost:4000/2015/07/02/useful-subversion-commands/"/>
   <updated>2015-07-02T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/07/02/useful-subversion-commands</id>
   <content type="html">&lt;h1 id=&quot;shell-alias-and-utilities-for-subversion&quot;&gt;shell alias and utilities for Subversion&lt;/h1&gt;

&lt;p&gt;function svnremovenew {&lt;/p&gt;
&lt;h1 id=&quot;svn-st--grep---perl--ane-print-f1n--xargs-rm--rf-&quot;&gt;svn st | grep ‘^?’ | perl -ane ‘print “$F[1]\n”’ | xargs rm -rf {}&lt;/h1&gt;
&lt;p&gt;svn st | grep ‘^?’ | perl -pe ‘s/\/\//g’ | perl -ane ‘print “$F[1]\n”’ | xargs rm -rf {}&lt;/p&gt;

&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;function svnrevertmod {
svn revert &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;svn st | grep '^M' | perl -pe 's/\\/\//g' | perl -ane 'print &quot;$F[1] &quot;'&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;alias svnrevertall=’svn revert -R .’&lt;/p&gt;

&lt;p&gt;alias svnup=’svn update –accept mine-full’&lt;/p&gt;

&lt;p&gt;alias svnupreset=’svnup &amp;amp;&amp;amp; svnrevertall &amp;amp;&amp;amp; svnremovenew’&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to replace all with pre-processing on a captured group with Java</title>
   <link href="http://localhost:4000/2015/06/12/how-to-replace-all-with-pre-processing-on-a-captured-group-with-java/"/>
   <updated>2015-06-12T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/06/12/how-to-replace-all-with-pre-processing-on-a-captured-group-with-java</id>
   <content type="html">&lt;p&gt;Need to replace all occurances of a pattern text and replace it with a captured group? Something like this in Java works nicely:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    String html = &quot;&amp;lt;a href='myurl?id=1123'&amp;gt;myurl&amp;lt;/a&amp;gt;\n&quot; +
            &quot;&amp;lt;a href='myurl2?id=2123'&amp;gt;myurl2&amp;lt;/a&amp;gt;\n&quot; +
            &quot;&amp;lt;a href='myurl3?id=3123'&amp;gt;myurl3&amp;lt;/a&amp;gt;&quot;;
    html = html.replaceAll(&quot;id=(\\w+)'?&quot;, &quot;productId=$1'&quot;);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here I swapped the query name from “id” to “productId” on all the links that matched my criteria. But what happen if I needed to pre-process the captured ID value before replacing it? Let’s say now I want to do a lookup and transform the ID value to something else?&lt;/p&gt;

&lt;p&gt;This extra requirement would lead us to dig deeper into Java RegEx package. Here is what I come up with:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import java.util.regex.*;
...
    public String replaceAndLookupIds(String html) {
        StringBuffer newHtml = new StringBuffer();
        Pattern p = Pattern.compile(&quot;id=(\\w+)'?&quot;);
        Matcher m = p.matcher(html);
        while (m.find()) {
            String id= m.group(1);
            String newId = lookup(id);
            String rep = &quot;productId=&quot; + newId + &quot;'&quot;;
            m.appendReplacement(newHtml, rep);
        }
        m.appendTail(newHtml);
        return newHtml.toString();
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Example of plain Jdbc Support Class</title>
   <link href="http://localhost:4000/2015/06/05/example-of-plain-jdbc-support-class/"/>
   <updated>2015-06-05T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/06/05/example-of-plain-jdbc-support-class</id>
   <content type="html">&lt;p&gt;Need to fetch some data from DB quickly with Java? Here is a quick example of plain JDBC JdbcSupport  Class to help you.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package zemian.jdbcexample

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import javax.sql.DataSource;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public abstract class JdbcSupport {
    private static final Logger LOGGER = LoggerFactory.getLogger(JdbcSupport.class);

    protected DataSource dataSource;

    public JdbcSupport(DataSource dataSource) throws Exception {
        this.dataSource = dataSource;
    }

    protected Row toRowMap(ResultSet rs) throws Exception {
        Row row = new Row();
        ResultSetMetaData meta = rs.getMetaData();
        int count = meta.getColumnCount();
        for (int i=1; i &amp;lt;= count; i++) {
            row.map.put(meta.getColumnName(i), rs.getObject(i));
        }
        return row;
    }

    protected List&amp;lt;Row&amp;gt; queryRowList(Connection conn, String sql, Object... params) throws Exception {
        LOGGER.debug(&quot;Query sql={}, params={}&quot;, sql, Arrays.asList(params));
        List&amp;lt;Row&amp;gt; result = new ArrayList&amp;lt;&amp;gt;();
        try(PreparedStatement st = conn.prepareStatement(sql)) {
            for (int i = 1; i &amp;lt;= params.length; i++) {
                st.setObject(i, params[i -1]);
            }
            try (ResultSet rs = st.executeQuery()) {
                while(rs.next()) {
                    result.add(toRowMap(rs));
                }
            }
        }
        return result;
    }

    protected Row queryRow(Connection conn, String sql, Object... params) throws Exception {
        List&amp;lt;Row&amp;gt; rowList = queryRowList(conn, sql, params);
        if (rowList.size() != 1) {
            throw new RuntimeException(&quot;No unique result from query.&quot;);
        }
        return rowList.get(0);
    }
    
    public static class Row {
        public Map&amp;lt;String, Object&amp;gt; map = new HashMap&amp;lt;&amp;gt;();

        public &amp;lt;T&amp;gt; T get(String name) {
            T result = (T)map.get(name);
            return result;
        }

        public &amp;lt;T&amp;gt; T get(String name, T defVal) {
            T result = (T)map.get(name);
            if (result == null)
                return defVal;
            return result;
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;To use it, one may do something like this:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;public class AccountStore extends JdbcSupport {
    public AccountStore(DataSource dataSource) {
        super(dataSource);
    }
    
    public void printAccountProfiles() {
        try(Connection conn = dataSource.getConnection()) {
            String sql = &quot;SELECT ACCOUNTID FROM USERS WHERE USERNAME=?&quot;;
            Row row = queryRow(conn, sql, &quot;zemian&quot;);
            
            String accountId = row.get(&quot;ACCOUNTID&quot;);
            String department = &quot;IT&quot;;
            sql = &quot;SELECT * FROM ACCOUNTPROFILES WHERE ID=? AND DEPARTMENT=?&quot;;
            List&amp;lt;Row&amp;gt; rowList = queryRowList(conn, sql, accountId, department);
            
            for (Row row : rowList) {
                System.out.println(&quot;Got profile: &quot; + row.map);
            }
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How to setup Intellij IDE war exploded artifact with multiple CDI dependent projects</title>
   <link href="http://localhost:4000/2015/05/29/how-to-setup-intellij-ide-war-exploded-artifact-with-multiple-cdi-dependent-projects/"/>
   <updated>2015-05-29T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/05/29/how-to-setup-intellij-ide-war-exploded-artifact-with-multiple-cdi-dependent-projects</id>
   <content type="html">&lt;p&gt;I have a large Java project with many sub modules, and they have simple top down dependencies like this:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ProjectX
+-ModuleLibA
+-ModuleLibB
+-ModuleCdiLibC
+-ModuleCdiLibC2
+-ModuleLibD
+-ModuleCdiLibE
+-ModuleCdiLibE2
+-ModuleCdiLibE3
+-ModuleLibF
+-ModuleLibG
+-ModuleWebAppX
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Each of these modules has their own third party dependency jars. When I say top down, it simply means Module from bottom have all the one above sub module and its third party dependencies as well. The project is large, and with many files, but the structure is straight forward. It does have large amount of third party jars though. At the end, the webapp would have over 100 jars packaged in WEB-INF/lib folder!&lt;/p&gt;

&lt;p&gt;When you create this project structure in IntelliJ IDE (no I do not have the luxury of using Maven in this case), all the third party dependencies are nicely exported and managed from one Module to another as I create my Project with existing source and third parties jars. I do not need to re-define any redudant jars libraries definitions between Modules. When it come to define ModuleWebAppX at the end, all I have to do is to add ModuleLibG as a project dependency, and it brings all the other “transitives” dependent jars in! This is all done by IntelliJ IDE, which is very nice!&lt;/p&gt;

&lt;p&gt;IntelliJ IDE also let you setup Artifacts from your project to prepare for package and deployment that can run inside your IDE servers. By default, any web application will have an option to create a war:exploded artifact definition, and the IDE will automatically copy and update your project build artifacts into this output folder, and it can be deploy/redeploy into any EE server as exploded mode nicely.&lt;/p&gt;

&lt;p&gt;All these work really smoothly, until there is one problem that hit hard! The way IntelliJ IDE package default war:exploded artifact is that it will copy all the .class files generated from each Modules into a single “out/artifact/ProjectX_war_exploded” output folder. This works most of the time when our Java package and classes are unique, but not so with resource files that’s not unique! My project uses several dependent CDI based modules. As you might know, each CDI module suppose to define their own, one and single location at META-INF/beans.xml to enable it and to customize CDI behavior. But becuase IntelliJ IDE flatten everything into a single output directory, I’ve lost the unique beans.xml file per each Module!&lt;/p&gt;

&lt;p&gt;This problem is hard to troubleshoot since it doesn’t produce any error at first, nor it stops the web app from running. It just not able to load certain CDI beans that you have customized in the beans.xml!!!&lt;/p&gt;

&lt;p&gt;To resolve this, I have to make the IntelliJIDE artifact dependent modules to generate it’s JAR instead of all copy into a single output. But we still want it to auto copy generated build files into the JAR archive automatically when we make a change. Lukcly IntelliJ has this feature. This is how I do it:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Open your project settings then select Artifacts on left.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Choose your war:exploded artifacts and look to your right.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Under OutputLayout tab, expand WEB-INF/lib, then right clik and “Create Archive” &amp;gt; Enter your moduleX name.jar.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Right click this newly created archive moduleX.jar name, then “Add Copy of” &amp;gt; “Module Output” and select one of your dependent module.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Repeat for each of the CDI based Modules!&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;I wish there is a easier way to do across all Modules for this, but at least this manual solution works!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to package skinny war with plain maven-war-plugin</title>
   <link href="http://localhost:4000/2015/05/22/how-to-package-skinny-war-with-plain-maven-war-plugin/"/>
   <updated>2015-05-22T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/05/22/how-to-package-skinny-war-with-plain-maven-war-plugin</id>
   <content type="html">&lt;p&gt;If you are not using maven EAR plugin, then you can also use plain maven-war-plugin to package a Skinny war package like this:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;            &amp;lt;plugin&amp;gt;
                &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;maven-war-plugin&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;2.6&amp;lt;/version&amp;gt;
                &amp;lt;configuration&amp;gt;
                    &amp;lt;!--
                    We want to package skinny war to avoid third party jars --&amp;gt;
                    &amp;lt;packagingExcludes&amp;gt;
                        WEB-INF/lib/*.jar
                    &amp;lt;/packagingExcludes&amp;gt;
                    &amp;lt;archiveClasses&amp;gt;true&amp;lt;/archiveClasses&amp;gt;
                &amp;lt;/configuration&amp;gt;
            &amp;lt;/plugin&amp;gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, if you ran into the problem I described in &lt;a href=&quot;http://saltnlight5.blogspot.com/2015/05/getting-version-string-from-maven-based.html&quot;&gt;last post&lt;/a&gt;, then you want a Skinny war, but still want to include the jar it produced from your own web project. In this case, you can try this:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;            &amp;lt;plugin&amp;gt;
                &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;maven-war-plugin&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;2.6&amp;lt;/version&amp;gt;
                &amp;lt;configuration&amp;gt;
                    &amp;lt;!--
                    We want to package skinny war to avoid third party jars, but we do want the classes from
                    this project to be included --&amp;gt;
                    &amp;lt;packagingExcludes&amp;gt;
                        %regex[WEB-INF/lib/(?!my-project-artifact-name-.*\.jar).*\.jar]
                    &amp;lt;/packagingExcludes&amp;gt;
                    &amp;lt;archiveClasses&amp;gt;true&amp;lt;/archiveClasses&amp;gt;
                &amp;lt;/configuration&amp;gt;
            &amp;lt;/plugin&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The plugin would accept a REGEX expression for exclusion as well, but getting it to work might take you a few tries! If you need more than this, try this online Java REGEX testing tool: &lt;a href=&quot;http://www.regexplanet.com/advanced/java/index.html&quot;&gt;http://www.regexplanet.com/advanced/java/index.html&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Getting version string from a Maven based web application</title>
   <link href="http://localhost:4000/2015/05/20/getting-version-string-from-a-maven-based-web-application/"/>
   <updated>2015-05-20T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/05/20/getting-version-string-from-a-maven-based-web-application</id>
   <content type="html">&lt;p&gt;When you package a maven project, it will automatically generate a pom.properties file inside that will contains the version, artifactId and groupId information. These are handy to have and to display for your web application at runtime. One can use a method like following to retrive it.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;public class Application {
     private String version;

     public String getVersion() {
        if (version == null) {
            String res = &quot;META-INF/maven/myapp/pom.properties&quot;;
            URL url = Thread.currentThread().getContextClassLoader().getResource(res);
            if (url == null) {
                version = &quot;SNAPSHOT.&quot; + Utils.timestamp();
            } else {
                Properties props = Utils.loadProperties(res);
                version = props.getProperty(&quot;version&quot;);
            }
        }
        return version;
    }

}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Sounds good? Not too fast! Turns out you have to do little more trick to have this working properly for deployment. By default the maven war plugin will package your classes files into the WEB-INF/classes, but the pom.properties are in META-INF at the same level, and not in WEB-INF/classes/META-INF! This resulted the above code not finding your resource pom.properties from classpath!&lt;/p&gt;

&lt;p&gt;To fix this, you need to add the following to your pom.xml file:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;            &amp;lt;plugin&amp;gt;
                &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;maven-war-plugin&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;2.6&amp;lt;/version&amp;gt;
                &amp;lt;configuration&amp;gt;
                    &amp;lt;archiveClasses&amp;gt;true&amp;lt;/archiveClasses&amp;gt;
                &amp;lt;/configuration&amp;gt;
            &amp;lt;/plugin&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This will tell maven to jar up your classes along with the pom.properties in a separate file, then place it in WEB-INF/lib folder instead of using the unpacked WEB-INF/classes version. This forces the pom.properties to be properly added and read by our getVersion() method.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>NetBeans projects dependencies</title>
   <link href="http://localhost:4000/2015/05/13/netbeans-projects-dependencies/"/>
   <updated>2015-05-13T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/05/13/netbeans-projects-dependencies</id>
   <content type="html">&lt;p&gt;With all the coolness of NetBeans, one of the feature I feel it’s lacking is managing project denpendencies natively in IDE. Currently the only way to get this feature is if your Java projects are Maven based. If you have Ant based projects, then you would have to manually do this with hacks, and for each projects/sub-projects! Take a look at these two links:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/13669237/netbeans-java-how-to-add-as-library-another-project-with-dependencies&quot;&gt;http://stackoverflow.com/questions/13669237/netbeans-java-how-to-add-as-library-another-project-with-dependencies&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://netbeans.org/bugzilla/show_bug.cgi?id=47507&quot;&gt;https://netbeans.org/bugzilla/show_bug.cgi?id=47507&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;With today’s EE projects, you likely going to have many sub projects, and manually handling their dependencies on each project within the IDE is not fun, and hard to maintain. Basically the time you used to setup third party libraries on a ProjectA is wasted and will not automatically exported to ProjectB if it depends on it within the IDE. NetBeans seems to only use project dependencies as way to link related projects together, and to export the main proejct jar/classes, not its third party libraries. A transitive dependencies management feature is needed. Some of user’s responses on this topic seem to simply suggest one should go with Maven. Well, as much as I like to use Maven myself, I don’t think it acceptable to tell users to convert their existing projects from Ant to Maven just to use an IDE. The IDE tool should be more transparent in this regard.&lt;/p&gt;

&lt;p&gt;It’s worth to note that both Eclipse and Intellij have this feature and it’s productive. I wish NetBeans can improve on this and provide a solution in near future.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to create multiple workspaces with NetBeans</title>
   <link href="http://localhost:4000/2015/04/23/how-to-create-multiple-workspaces-with-netbeans/"/>
   <updated>2015-04-23T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/04/23/how-to-create-multiple-workspaces-with-netbeans</id>
   <content type="html">&lt;h2 id=&quot;examples&quot;&gt;Examples&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Windows:
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; netbeans.exe --userdir C:\MyOtherUserdir --cachedir &quot;%HOME%\Locale Settings\Application Data\NetBeans\7.1\cache&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Unix:
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; ./netbeans --userdir ~/my-other-userdir
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Mac OS:
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; /Applications/NetBeans.app/Contents/MacOS/executable --userdir ~/my-other-userdir
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;Ref: &lt;a href=&quot;http://wiki.netbeans.org/FaqAlternateUserdir&quot;&gt;http://wiki.netbeans.org/FaqAlternateUserdir&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>EE JSP and Servlet 3 - Crafting Your Own MVC Pattern</title>
   <link href="http://localhost:4000/2015/03/13/ee-jsp-and-servlet-3-crafting-your-own-mvc-pattern/"/>
   <updated>2015-03-13T01:00:00-04:00</updated>
   <id>http://localhost:4000/2015/03/13/ee-jsp-and-servlet-3-crafting-your-own-mvc-pattern</id>
   <content type="html">&lt;p&gt;The combination of JSP and Servlet allows you to develope MVC pattern
web application easily. The main focus of MVC pattern is that we want to
write a Controller logic that can produce data Model, and then let the
View to display these data and generate the desired HTML output. These
are done so we may separate the concern on each layer, and makes
developing larger application easier. In EE, we can map a Servlet to a
URL and let the Servlet becomes the Contoller, and when all data model
are gathered and stored in request, session or application scope, we can
then forward to a JSP for rendering output.&lt;/p&gt;

&lt;p&gt;Now the last part is CONTROLLER, which can be verbose and a bit raw feel
if you were to write a Servlet class per each. So we can improve this
part and define a simplier interface to let developer write controller
easier. Here I will show you how a simple MVC style of code can look
like.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/saltnlight5/java-ee6-examples/tree/master/mvc-example&quot;&gt;mvc-example&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>EE CDI - Better Backend Service Management through Automatic Service Injection</title>
   <link href="http://localhost:4000/2015/02/09/ee-cdi-better-backend-service-management-through-automatic-service-injection/"/>
   <updated>2015-02-09T00:00:00-05:00</updated>
   <id>http://localhost:4000/2015/02/09/ee-cdi-better-backend-service-management-through-automatic-service-injection</id>
   <content type="html">&lt;p&gt;In one of my &lt;a href=&quot;http://saltnlight5.blogspot.com/2015/01/ee-servlet-3-how-to-setup-backend.html&quot;&gt;previous post&lt;/a&gt;, I have introduced the Application class that holds backend services, and we are exposing the services to Servlet by a singleton instance lookup pattern. This usage is very common and the Application class is been used as a global space holder in your application. Starting with EE 6, there is a new spec API introduced called CDI (context dependency injection) that can replace this kind of direct service lookup in your application. The CDI is a Java objects container (services in our case), or sometimes
 called “beans container” that automatically manged the objects life 
cycles for you; and then it can “inject” into places where you need 
them. Using CDI to manage your services can make your Servlet easier to test, and less code to maintain since you don’t have to write and maintain the Application class.&lt;/p&gt;

&lt;p&gt;Let’s see how we can turn our previous example to use CDI.&lt;/p&gt;

&lt;p&gt;First step is to remove the Application class have have, and to use injection of UserService instead. In our example, we initialize Application in WebAppStartup, so that can be remove; and we will initialize CDI instead. By the spec, all we need is to add a beans XML file in src/main/webapp/WEB-INF folder.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;beans xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/beans_1_0.xsd&quot;&amp;gt;
&amp;lt;/beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;That’s all you need to enable CDI in your EE application!&lt;/p&gt;

&lt;p&gt;Now how can we do service injection, Inside LoginServlet is where we are using UserService, and that’s where we want CDI to provide us the managed instance of UserService. So refactor UserService and remove Application usage there, but replace with a member field for UserService by injection using the @Inject annotation.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import javax.inject.Inject;
...

@WebServlet(&quot;/login&quot;)
public class LoginServlet  extends HtmlWriterServlet {
    
    @Inject
    private UserService userService;

...
    private boolean login(HttpServletRequest req) throws IOException {
        String username = req.getParameter(&quot;username&quot;);
        String password = req.getParameter(&quot;password&quot;);
        
        if (userService.validate(username, password)) {
... 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There is one more area we need to take care of to complete the refactoring. Our  UserService has a init() method that’s originally called by Application class. But now that we removed it, we need this to be called by CDI container since it now manage the UserSerivce instance lifecycle. And the CDI spec provides us a simple way to use the @PostConstruct annotation to do so.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import javax.annotation.PostConstruct;
...

public class UserService {
    ...

    @PostConstruct
    public void init() {
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;That’s all the modifications you need to switch from your custom Application singleton pattern to use CDI to manage your backend services.&lt;/p&gt;

&lt;p&gt;One question you might ask is how does CDI know when to create new instance of UserService? The answer is by the @Inject annotation. Upon startup of the CDI container, it scans your application packages to see what’s needed to be injected. It also depends when you needed this service instance to be injected. In our case, it’s inside a Servlet, so it’s not needed until the HTTP request is called for, so CDI will create the new instance under what’s called “Request” scope. The CDI will inject a instance of UserService into LoginServlet right before it’s processing the request.&lt;/p&gt;

&lt;p&gt;With CDI available, you will quickly appreciate the power and simplicity of the EE application server. There are many more CDI features you may use in your application; and I hope I have sparked your interests to explore further on your own.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>EE JSP - Generating Dynamic Content with JSTL Tag Libraries</title>
   <link href="http://localhost:4000/2015/02/06/ee-jsp-generating-dynamic-content-with-jstl-tag-libraries/"/>
   <updated>2015-02-06T00:00:00-05:00</updated>
   <id>http://localhost:4000/2015/02/06/ee-jsp-generating-dynamic-content-with-jstl-tag-libraries</id>
   <content type="html">&lt;p&gt;Besides writing your own &lt;a href=&quot;http://saltnlight5.blogspot.com/2015/02/ee-jsp-generating-dynamic-content-with.html&quot;&gt;Custom Tags in JSP&lt;/a&gt;, you will find that Java EE actually provides a set of Java Standard Tag Library (JSTL) ready for you to use. These built-in tags include repeating (for-loop) tags, if condition tags, variable declaration and output tags etc. The Libraries also come with many utility functions and international message formatting tags. Here is an example how it looks like.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&amp;gt;
&amp;lt;%@ taglib prefix=&quot;x&quot; uri=&quot;http://java.sun.com/jsp/jstl/xml&quot; %&amp;gt;
&amp;lt;%@ taglib prefix=&quot;fmt&quot; uri=&quot;http://java.sun.com/jsp/jstl/fmt&quot; %&amp;gt;
&amp;lt;%@ taglib prefix=&quot;sql&quot; uri=&quot;http://java.sun.com/jsp/jstl/sql&quot; %&amp;gt;
&amp;lt;%@ taglib prefix=&quot;fn&quot; uri=&quot;http://java.sun.com/jsp/jstl/functions&quot; %&amp;gt;
&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html&amp;gt;
    &amp;lt;body&amp;gt;
        &amp;lt;h1&amp;gt;JSTL Examples&amp;lt;/h1&amp;gt;
        &amp;lt;h2&amp;gt;List of Application Context: ${applicationScope}&amp;lt;/h2&amp;gt;
        &amp;lt;table&amp;gt;
            &amp;lt;c:forEach var=&quot;entry&quot; items=&quot;${applicationScope}&quot;&amp;gt;
            &amp;lt;tr&amp;gt;
                &amp;lt;td&amp;gt;${entry.key}&amp;lt;/td&amp;gt;
                &amp;lt;td&amp;gt;
                    &amp;lt;c:out value=&quot;${entry.value}&quot;/&amp;gt;
                &amp;lt;/td&amp;gt;
            &amp;lt;/tr&amp;gt;
            &amp;lt;/c:forEach&amp;gt;
        &amp;lt;/table&amp;gt;
        
        &amp;lt;h2&amp;gt;List of Session Context: ${sessionScope}&amp;lt;/h2&amp;gt;
        &amp;lt;table&amp;gt;
            &amp;lt;c:forEach var=&quot;entry&quot; items=&quot;${sessionScope}&quot;&amp;gt;
            &amp;lt;tr&amp;gt;
                &amp;lt;td&amp;gt;${entry.key}&amp;lt;/td&amp;gt;
                &amp;lt;td&amp;gt;
                    &amp;lt;c:out value=&quot;${entry.value}&quot;/&amp;gt;
                &amp;lt;/td&amp;gt;
            &amp;lt;/tr&amp;gt;
            &amp;lt;/c:forEach&amp;gt;
        &amp;lt;/table&amp;gt;
        
        &amp;lt;h2&amp;gt;List of Page Context: ${pageScope}&amp;lt;/h2&amp;gt;
        &amp;lt;table&amp;gt;
            &amp;lt;c:forEach var=&quot;entry&quot; items=&quot;${pageScope}&quot;&amp;gt;
            &amp;lt;tr&amp;gt;
                &amp;lt;td&amp;gt;${entry.key}&amp;lt;/td&amp;gt;
                &amp;lt;td&amp;gt;
                    &amp;lt;c:out value=&quot;${entry.value}&quot;/&amp;gt;
                &amp;lt;/td&amp;gt;
            &amp;lt;/tr&amp;gt;
            &amp;lt;/c:forEach&amp;gt;
        &amp;lt;/table&amp;gt;
        
        &amp;lt;h2&amp;gt;List of Request Context: ${requestSope}&amp;lt;/h2&amp;gt;
        &amp;lt;table&amp;gt;
            &amp;lt;c:forEach var=&quot;entry&quot; items=&quot;${requestSope}&quot;&amp;gt;
            &amp;lt;tr&amp;gt;
                &amp;lt;td&amp;gt;${entry.key}&amp;lt;/td&amp;gt;
                &amp;lt;td&amp;gt;
                    &amp;lt;c:out value=&quot;${entry.value}&quot;/&amp;gt;
                &amp;lt;/td&amp;gt;
            &amp;lt;/tr&amp;gt;
            &amp;lt;/c:forEach&amp;gt;
        &amp;lt;/table&amp;gt;
        
        &amp;lt;h2&amp;gt;List of Query Parameters: ${param}&amp;lt;/h2&amp;gt;
        &amp;lt;table&amp;gt;
            &amp;lt;c:forEach var=&quot;entry&quot; items=&quot;${param}&quot;&amp;gt;
            &amp;lt;tr&amp;gt;
                &amp;lt;td&amp;gt;${entry.key}&amp;lt;/td&amp;gt;
                &amp;lt;td&amp;gt;
                    &amp;lt;c:out value=&quot;${entry.value}&quot;/&amp;gt;
                &amp;lt;/td&amp;gt;
            &amp;lt;/tr&amp;gt;
            &amp;lt;/c:forEach&amp;gt;
        &amp;lt;/table&amp;gt;
        
        &amp;lt;h2&amp;gt;List of Header Parameters: ${header}&amp;lt;/h2&amp;gt;
        &amp;lt;table&amp;gt;
            &amp;lt;c:forEach var=&quot;entry&quot; items=&quot;${header}&quot;&amp;gt;
            &amp;lt;tr&amp;gt;
                &amp;lt;td&amp;gt;${entry.key}&amp;lt;/td&amp;gt;
                &amp;lt;td&amp;gt;
                    &amp;lt;c:out value=&quot;${entry.value}&quot;/&amp;gt;
                &amp;lt;/td&amp;gt;
            &amp;lt;/tr&amp;gt;
            &amp;lt;/c:forEach&amp;gt;
        &amp;lt;/table&amp;gt;        
        
        &amp;lt;h2&amp;gt;List of Cookies: ${cookie}&amp;lt;/h2&amp;gt;
        &amp;lt;table&amp;gt;
            &amp;lt;c:forEach var=&quot;entry&quot; items=&quot;${cookie}&quot;&amp;gt;
            &amp;lt;tr&amp;gt;
                &amp;lt;td&amp;gt;${entry.key}&amp;lt;/td&amp;gt;
                &amp;lt;td&amp;gt;
                    &amp;lt;c:out value=&quot;${entry.value}&quot;/&amp;gt;
                &amp;lt;/td&amp;gt;
            &amp;lt;/tr&amp;gt;
            &amp;lt;/c:forEach&amp;gt;
        &amp;lt;/table&amp;gt;
    &amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I used the core tag here to display map entries of few implicit variables. You may explore more on those tags declarations I have define on top of the example page from the Spec. These code are from the &lt;a href=&quot;https://github.com/saltnlight5/java-ee6-examples/tree/master/jsp-example&quot;&gt;jsp-example&lt;/a&gt; from GitHub.&lt;/p&gt;

&lt;p&gt;GLASSFISH NOTE: When deploying above example in GlassFish 3/4, you will run into a NullPointerException and causing the page resulted in error. It turns out that GF server added a internal variable named com.sun.jsp.taglibraryCache  in ServletContext (Application Scope) that throws NPE when its toString() is called! To workaround this, I created &lt;a href=&quot;https://github.com/saltnlight5/java-ee6-examples/blob/master/jsp-example/src/main/webapp/jstl-example2.jsp&quot;&gt;jstl-example2.jsp&lt;/a&gt; that wraps the ${entry.value} into a custom JSTL function so that it guarantees to return an output without throwing exception. So the lesson learned is that you should always return a String and not throw Exception when overriding toString() of a Java class. It’s just bad practice.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>EE JSP - Generating Dynamic Content with Custom Tag Libraries</title>
   <link href="http://localhost:4000/2015/02/02/ee-jsp-generating-dynamic-content-with-custom-tag-libraries/"/>
   <updated>2015-02-02T00:00:00-05:00</updated>
   <id>http://localhost:4000/2015/02/02/ee-jsp-generating-dynamic-content-with-custom-tag-libraries</id>
   <content type="html">&lt;p&gt;When developing View layer in a web application, you want to try not to duplicate content in JSP files as much as possible. The JSP spec API allows you to reduce this duplication by using tag libraries. A custom JSP tag is a user defined xml tag element that you can insert into JSP file to replace with some dynamic content.&lt;/p&gt;

&lt;p&gt;Here is an simple &lt;a href=&quot;https://github.com/saltnlight5/java-ee6-examples/blob/master/jsp-example/&quot;&gt;jsp-example&lt;/a&gt; using a custom JSP tag that insert a server time stamp value:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;%@ taglib prefix=&quot;myapp&quot; tagdir=&quot;/WEB-INF/myappTags&quot; %&amp;gt;
&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html&amp;gt;
    &amp;lt;body&amp;gt;
        &amp;lt;h1&amp;gt;Hello World!&amp;lt;/h1&amp;gt;
        &amp;lt;p&amp;gt;Page served on &amp;lt;myapp:serverTime pattern=&quot;yyyy-MM-dd HH:mm:ss&quot;/&amp;gt;&amp;lt;/p&amp;gt;
    &amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;JSP tags can also allow you to pass in parameters as attributes of the tag. In the example above &lt;myapp:serverTime&gt; tag uses a custom pattern attribute to control how the date string should be formatted.&lt;/myapp:serverTime&gt;&lt;/p&gt;

&lt;p&gt;JSP tags can also be nested with sub tags, or any HTML content elements. The nested JSP tags can provide a way for you to conditionally render the enclosed content. Using tag to render conditional content is more verbose due to XML structure, but it eliminates the use of direct Scriptlet code in JSP.&lt;/p&gt;

&lt;p&gt;There are two ways you can create custom JSP tags. The first method is to implement the tag using pure Java code and then register it with a XML taglib definition file. I will skip this method for now and show you another easier way.&lt;/p&gt;

&lt;p&gt;The second method uses “Tag Files” that are similar to JSP pages to construct a tag (remember that JSP tag is nothing more than just a placeholder for some content!). I am going to show you how the second method is done for above example. First create a serverTime.tag file under your src/main/webapp/WEB-INF/tags/myapp project folder.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;%@ attribute name=&quot;pattern&quot; required=&quot;true&quot; %&amp;gt;
&amp;lt;%@ tag import=&quot;java.util.Date, java.text.SimpleDateFormat&quot; %&amp;gt;
&amp;lt;%= new SimpleDateFormat(pattern).format(new Date()) %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The Tag File implementation depends on simple convention of file naming and location. Note that the src/main/webapp/WEB-INF/tags directory is a required path. Inside this folder,  you may create any sub folder you want to organize the tag files. In our case, it’s the myapp directory. A Tag File can be just like any JSP file you would normally create, except the tag directives are little different. You can see the JSP spec for a complete list of them. Whatever you output from the Tag File, it will be inserted and replaced the caller of the tag. Notice how I use the pattern attribute parameter to allow user change the date pattern, and it’s available in the Tag File inside the Scriptlet Java code as variable.&lt;/p&gt;

&lt;p&gt;Since you can write Tag Files just as you would with JSP, I will again caution the excessive use of Java code Scriptlet even inside Tag Files. If you must call Java code, try to wrap the code and replace by single line call, or write the Tag implementation with pure Java code; especially if you have very complex business logic involve. This would bring debugging much easier on your code and to maintain.&lt;/p&gt;

&lt;p&gt;JSP tags provide a powerful way to construct your View layer in the web application. It helps you reuse code or content, and generating a specific piece of response.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>EE JSP - The Reversed Jacket of Servlet</title>
   <link href="http://localhost:4000/2015/01/25/ee-jsp-the-reversed-jacket-of-servlet/"/>
   <updated>2015-01-25T00:00:00-05:00</updated>
   <id>http://localhost:4000/2015/01/25/ee-jsp-the-reversed-jacket-of-servlet</id>
   <content type="html">&lt;p&gt;Generating HTML from Servlet is only practical if you have small amount of pages, or needed fine control of the content you are generating, (binary PDF etc). For most application, the output is going to be HTML, and we need a better way to do this; and that’s where the JSP (Java Server Pages) comes in.&lt;/p&gt;

&lt;p&gt;With JSP, you write and focus on the HTML content in a file; then only when you needed dynamic or condition logic in between the content, you would insert the Java code, which called the Scriptlet. When the application server process the JSP page, it will automatically generate a Servlet class that write these JSP file’s content out (as you would programatically writing it using PrintWriter as shown in my previous posts). Wherever you have the Scriptlet in JSP, it will be inlined in the generated Servlet class. The generated jsp servlet classes are all managed, compiled and deployed by the application server within your application automatically. In short, the JSP is nothing more than the reverse jacket of the Servlet.&lt;/p&gt;

&lt;p&gt;Here is a simple example of JSP that print Hello World and a server timestamp.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html&amp;gt;
    &amp;lt;body&amp;gt;
        &amp;lt;p&amp;gt;Hello World!&amp;lt;/p&amp;gt;
        &amp;lt;p&amp;gt;Page served on &amp;lt;%= new java.util.Date()%&amp;gt;&amp;lt;/p&amp;gt;
    &amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Simply save this as text file named hello.jsp inside your src/main/webapp maven based folder, and it will be runnable within your NetBeans IDE. For JSP, you do not need to configure URL mapping as in Serlvet, and it’s directly accessable from your context path. For example, above should display in your browser by http://localhost:8080/hello.jsp URL.&lt;/p&gt;

&lt;p&gt;Notice the example also show how you can embed Java code. You can place a method or object inside &amp;lt;%= %&amp;gt; scriptlet, and it will use the resulted object’s toString() method output to concatenate to the HTML outside the scriptlet tag. You can also define new methods using &amp;lt;%! %&amp;gt; scriptlet tag, or execute any code that does not generate output using &amp;lt;% %&amp;gt; scriptlets. Note that you can add comments in JSP between &amp;lt;%– –%&amp;gt; scriptlet as well.&lt;/p&gt;

&lt;p&gt;JSP also allows you to insert “Page Directives” to control how the JSP container render the result. For example, you can change the result content type by insert this on top of the page&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;%@ page contentType=&quot;text/txt&quot; %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Another often used page directive is import Java package so you don’t need to prefix it on each Java statement line.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;%@ page imporet=&quot;java.util.*&quot; %&amp;gt;

     

    ...

     

    &amp;lt;p&amp;gt;Page served on &amp;lt;%= new Date()%&amp;gt;&amp;lt;/p&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There are many more directives you can use. Checkout the JSP spec doc for more details.&lt;/p&gt;

&lt;p&gt;Besides inserting your own Java code, JSP also predefined some variables you may access directly without declaring them. Here is an example that displays most of these built-in implicit variables.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html&amp;gt;
    &amp;lt;body&amp;gt;
        &amp;lt;h1&amp;gt;JSP Examples&amp;lt;/h1&amp;gt;
        &amp;lt;p&amp;gt;Implicit Variables&amp;lt;/p&amp;gt;
        &amp;lt;table&amp;gt;
            &amp;lt;tr&amp;gt;
                &amp;lt;td&amp;gt;Name&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;Instance&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;Example&amp;lt;/td&amp;gt;
            &amp;lt;/tr&amp;gt;
            &amp;lt;tr&amp;gt;
                &amp;lt;td&amp;gt;applicationScope&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;${applicationScope}&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;${applicationScope['myAppName']}&amp;lt;/td&amp;gt;
            &amp;lt;/tr&amp;gt;
            &amp;lt;tr&amp;gt;
                &amp;lt;td&amp;gt;sessionSope&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;${sessionSope}&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;${sessionSope['loginSession']}&amp;lt;/td&amp;gt;
            &amp;lt;/tr&amp;gt;
            &amp;lt;tr&amp;gt;
                &amp;lt;td&amp;gt;pageScope&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;${pageScope}&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;${pageScope['javax.servlet.jsp.jspConfig']}&amp;lt;/td&amp;gt;
            &amp;lt;/tr&amp;gt;
            &amp;lt;tr&amp;gt;
                &amp;lt;td&amp;gt;requestScope&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;${requestScope}&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;${requestScope['foo']}&amp;lt;/td&amp;gt;
            &amp;lt;/tr&amp;gt;
            &amp;lt;tr&amp;gt;
                &amp;lt;td&amp;gt;param&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;${param}&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;${param['query']}&amp;lt;/td&amp;gt;
            &amp;lt;/tr&amp;gt;
            &amp;lt;tr&amp;gt;
                &amp;lt;td&amp;gt;header&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;${header}&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;${header['user-agent']}&amp;lt;/td&amp;gt;
            &amp;lt;/tr&amp;gt;
            &amp;lt;tr&amp;gt;
                &amp;lt;td&amp;gt;cookie&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;${cookie}&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;${cookie['JSESSIONID']}&amp;lt;/td&amp;gt;
            &amp;lt;/tr&amp;gt;
            &amp;lt;tr&amp;gt;
                &amp;lt;td&amp;gt;pageContext&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;${pageContext}&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;${pageContext.request.contextPath}&amp;lt;/td&amp;gt;
            &amp;lt;/tr&amp;gt;
        &amp;lt;/table&amp;gt;
        &amp;lt;p&amp;gt;Page served on &amp;lt;%= new java.util.Date()%&amp;gt;&amp;lt;/p&amp;gt;
    &amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In above example, I accessed the implicit variables using the JSP Expression Language (EL) syntax rather than the &amp;lt;%= %&amp;gt; scriptlet. The EL is more compact and easier to read, however it only can read variable that existed in any of the request, session or application scopes. The EL uses DOT notation to access fields or even nested fields from the object variable; assuming the fields have corresponding getter methods that is. EL can also access map with “myMap[key]” format, or a list with “myList[index]” syntax. Most of these implicit variables can be access as a Map object, and they exposed mainly from the ServletHttpRequest object on the request, as you would from your own Servlet class.&lt;/p&gt;

&lt;p&gt;JSP can be seen as a template language in the web application. It helps generate the “VIEW” part of the application. It let you or the authoring in your team to focus on the HTML and look and feel of the content. It can help building larger web application much easier. Be careful about using excessive and complex logic Java code inside your JSP files though, as it will make it harder to debug and read; especially if you have a Java statement that throws an exception. The line number from the stacktrace would be harder to track and match to your Scriptlet code. Also imagine if you start to have JavaScript code inside JSP files, then it can get really messy. Better to keep these in separate files. If you must embed Java code in JSP, try to wrap it in a single line of Java invocation call. Better yet, try to process request using Servlet code, and generate all the data you need to display in JSP by insert them into the request scope space, and then forward to a JSP file for rendering. With this pattern, you can actually limit usage of scriptlet 
in JSP, and only use EL and JSP tags.&lt;/p&gt;

&lt;p&gt;You can find above code in my &lt;a href=&quot;https://github.com/saltnlight5/java-ee6-examples/tree/master/jsp-example&quot;&gt;jsp-example&lt;/a&gt; in GitHub.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>EE Servlet 3 - Developing User Login with Session and Filter</title>
   <link href="http://localhost:4000/2015/01/16/ee-servlet-3-developing-user-login-with-session-and-filter/"/>
   <updated>2015-01-16T00:00:00-05:00</updated>
   <id>http://localhost:4000/2015/01/16/ee-servlet-3-developing-user-login-with-session-and-filter</id>
   <content type="html">&lt;p&gt;I have introduced the Application class in my previous post where you can setup backend services. One example service I added is the UserService. This service will load a Java users properties file that contains username and password sets; and it’s used later to authenticate users to login into the web application. Now I will show how the login part is done using standard Servlet API along with this backend service.&lt;/p&gt;

&lt;p&gt;At a high level, what we want is to restrict some web resources (this means certain URLs provided by Servlets such as “/sysprops”, or “/user”) to only client users who are known in our users properties file. Users may identify themself with the matching password. This is typically done with a user login form, authenticate it, then insert a login token into Http Session scope space. This login token then can be used to verify whether to allow users to access the restricted resources or not. We only interested in a single authorization (no roles are defined, and any logged in user may access any protected URLs.)&lt;/p&gt;

&lt;p&gt;You have already seen an example that mapped to “/sysprops” URL in one of my previous post provided by the SysPropsServlet, which it simply generate a HTML table of System information. These are sensitive information, so we want to protect this URL. We would need to create a class that implements javax.servlet.Filter interface, and then add the “/sysprops” URL with this filter so it can pre-process the request before the actual Servlet does. This filter gives us a place to inspect the HTTP request object and abort the request if needed to, thus restricting the access.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package zemian.servlet3example.web;

import java.io.IOException;
import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.annotation.WebFilter;
import javax.servlet.http.HttpServletRequest;
import zemian.service.logging.Logger;

@WebFilter(urlPatterns={&quot;/sys-props&quot;, &quot;/user&quot;})
public class LoginRequiredFilter implements Filter {
    private static final Logger LOGGER = new Logger(LoginRequiredFilter.class);
    public static final String LOGIN_REDIRECT = &quot;LOGIN_REDIRECT&quot;;
   
    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        if (request instanceof HttpServletRequest) {
            HttpServletRequest req = (HttpServletRequest) request;
            LOGGER.trace(&quot;Checking LoginSession token for uri=%s&quot;, req.getRequestURI());
            LoginSession loginSession = LoginServlet.getOptionalLoginSession(req);
            if (loginSession == null) {
                LOGGER.debug(&quot;No LoginSession token found; forwarding request to login page.&quot;);
                // We need to save the old URI so we can auto redirect after login.
                req.setAttribute(LOGIN_REDIRECT, req.getRequestURI());
                req.getRequestDispatcher(&quot;/login&quot;).forward(request, response);
                return;
            } else {
                LOGGER.debug(&quot;Request allowed using LoginSession token=%s&quot;, loginSession.getId());
            }
        }
        chain.doFilter(request, response);
    }

    @Override
    public void destroy() {
    }

}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Notice that you can configure this filter to match more than one URL that you want to protect. You can even use wildcard pattern such as “/*” and it will protect every URLs in your application! The filter simply looks into the Http Session space for a LoginSession object that we will create later. If it’s found then it let the request through, otherwise it will redirect to a Login form page, which is served by LoginServlet class (notice the RETURN statement for early exit of the filter method without calling the filter chain!).&lt;/p&gt;

&lt;p&gt;The LoginServlet class is a form processing Servlet that will prompt user for username and password. If it succeed, then we will insert the LoginSession token object into the HttpSession space space, which is what the filter above is looking for. Here is the processing Servlet code.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package zemian.servlet3example.web;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import zemian.service.logging.Logger;
import zemian.servlet3example.service.Application;
import zemian.servlet3example.service.UserService;

@WebServlet(&quot;/login&quot;)
public class LoginServlet  extends HtmlWriterServlet {
    private static final Logger LOGGER = new Logger(LoginServlet.class);
    
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        HtmlWriter html = createHtmlWriter(req, resp); 
        String message;
        
        // Check to see if we are doing logout or not.
        LoginSession loginSession = getOptionalLoginSession(req);
        if (loginSession != null &amp;amp;&amp;amp; req.getParameter(&quot;logout&quot;) != null) {
            logout(req);
            message = &quot;Your have successfully logged out.&quot;;
        } else {    
            message = (String)req.getAttribute(&quot;message&quot;);
            if (message == null)
                message = &quot;&quot;;
        }   
        
        // Show a login form
        String redirectUri = (String)req.getAttribute(LoginRequiredFilter.LOGIN_REDIRECT);
        String redirectHtmlTag = &quot;&quot;;
        if (redirectUri != null) {
            redirectHtmlTag = &quot;&amp;lt;input type='hidden' name='redirectUri' value='&quot; + redirectUri + &quot;'/&amp;gt;&quot;;
        }
        html.header()
            .h(1, &quot;Please Login&quot;)
            .p(message)
            .println(&quot;&amp;lt;form method='post' action='login'&amp;gt;&quot;)
            .println(redirectHtmlTag)
            .println(&quot;&amp;lt;p/&amp;gt;Username: &amp;lt;input type='text' name='username'/&amp;gt;&quot;)
            .println(&quot;&amp;lt;p/&amp;gt;Password: &amp;lt;input type='password' name='password'/&amp;gt;&quot;)
            .println(&quot;&amp;lt;p/&amp;gt;&amp;lt;input type='submit' value='Submit'/&amp;gt;&quot;)
            .println(&quot;&amp;lt;/form&amp;gt;&quot;)
            .footer();
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        LOGGER.debug(&quot;Processing login form.&quot;);
        if (login(req)) {
            // Login succeed, we should auto redirect user if exists.
            String redirectUri = req.getParameter(&quot;redirectUri&quot;);
            if (redirectUri != null) {
                LOGGER.debug(&quot;Redirect after login to: %s&quot;, redirectUri);
                resp.sendRedirect(redirectUri);
                return;
            }
        }
        
        // Show the form again in case login failed or user didn't provide a redirect
        doGet(req, resp);
    }    
       
    protected LoginSession createLoginSession(HttpServletRequest req, String username) {
        LoginSession result = new LoginSession(username);
        req.getSession(true).setAttribute(LoginSession.LOGIN_SESSION_KEY, result);
        return result;
    }
    
    protected void removeLoginSession(HttpServletRequest req) {
        HttpSession session = req.getSession(false);
        if (session != null) {
            session.removeAttribute(LoginSession.LOGIN_SESSION_KEY);
        }
    }

    private boolean login(HttpServletRequest req) throws IOException {
        String username = req.getParameter(&quot;username&quot;);
        String password = req.getParameter(&quot;password&quot;);
        
        UserService userService = Application.getInstance().getUserService();
        if (userService.validate(username, password)) {
            LOGGER.info(&quot;User %s logged in successfully.&quot;, username);
            // Create Session Data here after successful authenticated.
            LoginSession loginsession = getOptionalLoginSession(req);
            if (loginsession == null) {
                createLoginSession(req, username);
                req.setAttribute(&quot;message&quot;, &quot;You have successfully logged in.&quot;);
            } else {
                req.setAttribute(&quot;message&quot;, &quot;You already have logged in.&quot;);             
            }
        } else {
            LOGGER.info(&quot;User %s failed to login.&quot;, username);
            req.setAttribute(&quot;message&quot;, &quot;Invalid login.&quot;);
        }
        return true;
    }
    
    /** Return LoginSession if found in HttpSession scope, else return NULL value. */
    public static LoginSession getOptionalLoginSession(HttpServletRequest req) {
        LoginSession result = null;
        HttpSession session = req.getSession(false);
        if (session != null)
            result = (LoginSession)session.getAttribute(LoginSession.LOGIN_SESSION_KEY);
        return result;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Inside LoginServlet class is where we use the UserService service to validate username and password. We display the login form with a GET request, and then process the login with a POST action. Once username and password are checked, we create the LoginSession object. This is just a simple POJO to represent a session token; and you can hold any user information you want. I won’t list here, but you can browse it on GitHub. Note that you should make it serializable though, because any data stored in HttpSession may be subject to be serialize/deserialize by your application server.&lt;/p&gt;

&lt;p&gt;Notice also that I have implemented the Logout functionality into the LoginServlet class
 as well. You simply pass “logout” query parameter, and it will be 
detected and remove the login token from the session. Ensure you invalid
 the HttpSession itself when you do this, just to be in clean side. I 
also exposed a static helper &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;getOptionalLoginSession&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;that is used between few of the classes to check whether user has logged in or not.&lt;/p&gt;

&lt;p&gt;These few classes are simple but yet demonstrated the use of Servlet Filter and Servlet on how to manage Session data. This programming pattern allows users to have their own browsing session and privacy through the application.&lt;/p&gt;

&lt;p&gt;If you are to run my &lt;a href=&quot;https://github.com/saltnlight5/java-ee6-examples/tree/master/servlet3-example&quot;&gt;servlet3-example&lt;/a&gt;  in a GlassFish server, you may login using any users listed in &lt;a href=&quot;https://github.com/saltnlight5/java-ee6-examples/blob/master/servlet3-example/src/main/resources/zemian/servlet3example/service/users.properties&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>EE Servlet 3 - How to Setup Backend Services in a Web Application</title>
   <link href="http://localhost:4000/2015/01/09/ee-servlet-3-how-to-setup-backend-services-in-a-web-application/"/>
   <updated>2015-01-09T00:00:00-05:00</updated>
   <id>http://localhost:4000/2015/01/09/ee-servlet-3-how-to-setup-backend-services-in-a-web-application</id>
   <content type="html">&lt;p&gt;In a web application, providing user interfacing (UI) is often only half of the job. Many applications have requirements that’s supported by backend services. Some example of backend services are scheduler process (batch processing), listen to a queue and respond when messages come in, or simple thing such as storing information for the entire application to use. These global data often needs to be shared between all Servlet (for each request processor) classes. Here I will show you how and where you should add such backend services in a Servlet based application.&lt;/p&gt;

&lt;p&gt;Before we begin though, I would like to explain how a Servlet application store data variables (after all backend services are just simply Java objects). There are 3 major areas where you can add and share data (we sometimes call these areas in different “space”, “scope” or “context”). You may also think of each of these area as a hash Map with unique keys and data values.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Application scope - This is a global, application wide storage map space that’s allocated for your instance of web application. Each web application will have its unique space. Even if you deploy the same WAR file into a a domain server, they each will get their own space. You can get a hold of this space by implementing javax.servlet.ServletContextListener interface. This interface also has two callback methods that will get invoked when your application is starting (init) or shutting down (destroy). In these method you can do your own one-time application or services setup and clean up logic. You can store any Java objects by using ServletContext#setAttribute(key, value) method. This storage is not persistent externally but only in server memory. So the more you add to it, the more memory you will need (usually you only want to hold the the references to your service objects, so typically don’t have memory issue). This is the location where you should create backend services and initialize it, then add the instances to the space so you may retrieve it later.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;You may also use the Singleton Pattern to create a Application wide context area to hold your own business services as space, but you will still need ServletContextListener if you need to initialize it in a web application environment.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Request scope - This is a single HTTP request process storage map space, exits only for a specific request, or tempory. This map space is also not persistent. You will have access to this space inside your Servlet code by handling one of the HTTP action method. You will add data by using HttpServletRequest#setAttribute(key, value) method. Usually these stored data is used to pass to a VIEW processing layer (such as JSP) to construct HTML output. You have already seen some of my preview post that uses this inside a Servlet component.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Note also that inside a Servlet method that process a request, you will also have access to the Application space method above by using HttpServletRequest#getServletContext()#getAttribute(key) method.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Session scope - This is a special space where you can track a specific user interacations to the applicatoin as a series of conversation requests, or so call a user session. Remember that a HTTP request is stateless, so you will need this space if you want to store some data to share between multiple requests, but they should be isolated for each client browser user. This is usually used when  implementing user login and resource restriction in an application. You can add to this space using the HttpServletRequest#getSession(true)#setAttribute(key, value) method in a Serlvet class. The application server will automatically return you the same session object or space everytime for that specific client user&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Handling user session can be tricky though, so you’ll have to spend time and carefully designing your application to implement the proper solution for your need. I will write a seperate post on how to use Session scope in future, but for now I can show you an exmaple of how I initialize my web Application with custom services inside. You can find this code in my &lt;a href=&quot;https://github.com/saltnlight5/java-ee6-examples/tree/master/servlet3-example&quot;&gt;servlet3-example&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package zemian.servlet3example.web;

import javax.servlet.ServletContext;
import zemian.servlet3example.service.Application;
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;
import javax.servlet.annotation.WebListener;
import zemian.service.logging.Logger;

@WebListener
public class WebAppStartup implements ServletContextListener {
    private static final Logger LOGGER = new Logger(WebAppStartup.class);

    @Override
    public void contextInitialized(ServletContextEvent event) {
        LOGGER.debug(&quot;WebApp is starting up.&quot;);
        Application app = Application.getInstance();
        app.init();
                
        // Store the app instances.        event.getServletContext().setAttribute(Application.SERVLET_CONTEXT_KEY, app);
        LOGGER.info(&quot;WebApp initialized.&quot;);        
    }

    @Override
    public void contextDestroyed(ServletContextEvent event) {
        Application app = Application.getInstance();
        app.destroy();
        LOGGER.info(&quot;WebApp destroyed.&quot;);
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;With this in place, I can easily add any custom business backend services inside the Application class, and and then have any of the Servlet code access it. Notice that I am using Servlet 3’s @WebListener annotation so there is no config is needed. You simply package along your WAR application and it will be detected by your EE application server!&lt;/p&gt;

&lt;p&gt;NOTE: Try to use Application as holder class only and not place any logic in it. With EE 6, you can easily replace this with CDI bean injection as alternate solution.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>EE Servlet 3 - Simple Form Processing</title>
   <link href="http://localhost:4000/2015/01/06/ee-servlet-3-simple-form-processing/"/>
   <updated>2015-01-06T00:00:00-05:00</updated>
   <id>http://localhost:4000/2015/01/06/ee-servlet-3-simple-form-processing</id>
   <content type="html">&lt;p&gt;Form handling in web application is like bread and butter for most Web developers. It will not be much use if we can not capture users input and process it. So I have included a simple &lt;a href=&quot;https://github.com/saltnlight5/java-ee6-examples/blob/master/servlet3-example/src/main/java/zemian/servlet3example/web/FormServlet.java&quot;&gt;FormServlet&lt;/a&gt;in my servlet3-example  that demonstrated few frequently used form inputs you might encounter. Here is how it looks like:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package zemian.servlet3example.web;

import java.io.IOException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import zemian.service.logging.Logger;

@WebServlet(&quot;/form&quot;)
public class FormServlet extends HtmlWriterServlet {
    private static final Logger LOGGER = new Logger(FormServlet.class);
    
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        HtmlWriter html = createHtmlWriter(req, resp);    
        String message = getMessage(req);
        
        html.header()
            .h(1, &quot;User Data Form&quot;)
            .p(message)
            .println(&quot;&amp;lt;form method='post' action='form'&amp;gt;&quot;)
            .println(&quot;&amp;lt;p/&amp;gt;Username: &amp;lt;input type='text' name='username'/&amp;gt;&quot;)
            .println(&quot;&amp;lt;p/&amp;gt;Password: &amp;lt;input type='password' name='password'/&amp;gt;&quot;)
            .println(&quot;&amp;lt;p/&amp;gt;Choose a country: &amp;lt;select name='country' size='1'&amp;gt;&quot;)
            .println(&quot;&amp;lt;option default='true'&amp;gt;US&amp;lt;/option&amp;gt;&quot;)
            .println(&quot;&amp;lt;option&amp;gt;China&amp;lt;/option&amp;gt;&quot;)
            .println(&quot;&amp;lt;option&amp;gt;Korea&amp;lt;/option&amp;gt;&quot;)
            .println(&quot;&amp;lt;/select&amp;gt;&quot;)
            .println(&quot;&amp;lt;p/&amp;gt;Skills set: &amp;lt;input type='checkbox' name='skills' value='Java'/&amp;gt; Java&quot;)
            .println(&quot;&amp;lt;input type='checkbox' name='skills' value='Java EE'/&amp;gt;Java EE&quot;)
            .println(&quot;&amp;lt;input type='checkbox' name='skills' value='MySQL Database'/&amp;gt; MySQL Database&quot;)
            .println(&quot;&amp;lt;p/&amp;gt;Notes: &amp;lt;textarea name='notes' cols='50' rows='3'&amp;gt;&amp;lt;/textarea&amp;gt;&quot;)
            .println(&quot;&amp;lt;p/&amp;gt;&amp;lt;input type='submit' value='Submit'/&amp;gt;&quot;)
            .println(&quot;&amp;lt;/form&amp;gt;&quot;)
            .println(html.link(&quot;Back to Home&quot;, &quot;/index&quot;))
            .footer();
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        LOGGER.info(&quot;Processing form.&quot;);
        Form form = new Form();
        form.setUsername(req.getParameter(&quot;username&quot;));
        form.setPassword(req.getParameter(&quot;password&quot;));
        form.setNotes(req.getParameter(&quot;notes&quot;));
        form.setCountry(req.getParameter(&quot;country&quot;));
        String[] skills = req.getParameterValues(&quot;skills&quot;);
        skills = (skills == null) ? new String[0] : skills;
        form.setSkills(Arrays.asList(skills));
        req.setAttribute(&quot;message&quot;, &quot;Processed: &quot; + form);
        doGet(req, resp);
    }
   
    private String getMessage(HttpServletRequest req) {
        String message = (String)req.getAttribute(&quot;message&quot;);
        if (message ==  null) {
            message = &quot;&quot;;
        }
        return message;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As usual, most forms are display with a http GET request and then process it with a POST action. Take a closer look, and pay close attention to how Servlet handle single vs multi values inputs. These exist because HTML form might allow users to choose multiple values from a single input tag/widget.&lt;/p&gt;

&lt;p&gt;One common pattern developers do in form handling is to capture the input data into a “command object”, “transfer object”, or (in my example) “form” object; so that data can be pass into another layer of your application for further processing. This is a good design becuase it decouples the Web layer dependencies from your backend tier service layers.&lt;/p&gt;

&lt;p&gt;Another frequent dealt with area in form processing is data validation. If you capture your data as form object, then you will likely have two layers of validations. One layer is when you extract it right off the http request (usually from a String input), then you would validate such as is it a required field or optional, is the String value convertable to the expected and desiable type (integer or date etc). Second layer of validation might be further down in your service layer where you already have the form object constructed with correct types, but their values might not be valid per your application requirement. Most common invalid data is due to not conforming to the database constraints and thus not able to persist it. I didn’t provide example above on validation, but you can eaisly improve the Servlet and further explore this on your own.&lt;/p&gt;

&lt;p&gt;I like to mention one more note. There are many Java web frameworks out there that focus a LOT of attention on form handling, and they ought to help you develop application easier with less duplicated code. It is done usually with a very concrete programming model and style that, in many cases, shield you away from seing the HttpServletRequest object completly. All these are good (assuming the framework is a good quality one), but keep in mind that majority of cases when there is a problem occur, it’s mostly at the framework specific layer, or even more likely your own code that use the framwork. And then you will be spending most of your debugging time learning the framework specific domain, rather than the Servlet spec layer.&lt;/p&gt;

&lt;p&gt;For my example purpose I am trying to focus on EE API alone, so I will stay away from any extra frameworks other than the standard API. If you are a beginner, I strongly encourage you to study the Servlet API and see how form is handled, this gives you a more solid understanding of how the data come about in a web application. If you look further into the Java EE stack, it actually already has a framework that’s called JSF as part of EE 6 standards. It’s design is to help construct web pages as components model; and it lets you capture form data and automatically bind to a bean object in a much more smoother and integrated fashion. JSF is worthy of its own topic for future posts.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>EE Serlvet 3 - Generating HTML output in Servlet</title>
   <link href="http://localhost:4000/2015/01/01/ee-serlvet-3-generating-html-output-in-servlet/"/>
   <updated>2015-01-01T00:00:00-05:00</updated>
   <id>http://localhost:4000/2015/01/01/ee-serlvet-3-generating-html-output-in-servlet</id>
   <content type="html">&lt;p&gt;If you just need to handle a handful of requests URI in your EE web module, then it might be easier to generate your own HTML response in your Servlet code instead of using a full blown template library. As part of my examples, I tried out a very simple Java DSL that generate html output when writing your own Serlvet. The code looks like this:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package zemian.servlet3example.web;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet(&quot;/index&quot;)
public class IndexServlet extends HtmlWriterServlet {

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        HtmlWriter html = createHtmlWriter(req, resp);
        String message = getMessage(req, html);
        
        html.header()
            .h(1, &quot;Welcome to Servlet 3 Example&quot;)
            .p(&quot;Let's explore Java Servlet 3.x Features.&quot;)
            .p(message)
            .ul(
                html.link(&quot;Index&quot;, &quot;/index&quot;),
                html.link(&quot;Hello&quot;, &quot;/hello&quot;),
                html.link(&quot;Sys Props&quot;, &quot;/sys-props&quot;)
            )
            .footer();
    } 
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I wrote a base HtmlWriterServlet class that provide a method where you can get an instance of a HtmlWriter builder. The benefit of wrapping the HTML like builder is that it’s more easier to read and helps generate correct well form tags. For example the “ul” and “table” accepts Java List or Map object, and it generates the correct html tags.&lt;/p&gt;

&lt;p&gt;Here is another example how I generate a table view of Java System Properties page with few lines of code:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package zemian.servlet3example.web;

import java.io.IOException;
import java.util.TreeMap;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet(&quot;/sys-props&quot;)
public class SysPropsServlet extends HtmlWriterServlet {

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        HtmlWriter html = createHtmlWriter(req, resp);
        TreeMap sysProps = new TreeMap(System.getProperties());
        html.header()
            .h(1, &quot;Java System Properties&quot;)
            .table(sysProps)
            .footer();
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The simple &lt;a href=&quot;https://github.com/saltnlight5/java-ee6-examples/blob/master/servlet3-example/src/main/java/zemian/servlet3example/web/HtmlWriter.java&quot;&gt;HtmlWriter&lt;/a&gt;class provide few html builder methods and it can help generate HTML links with relative context paths. You can easily further improve it to help generate more HTML code such as form tags etc.&lt;/p&gt;

&lt;p&gt;Also, note that ServletResponse object let you have full control on writing custom responses, so you are not restricted to only returing HTML. You can write binary output such as PDF or even MP3 files. You simply need to control the Response Writer and the correct corresponding content mime type and size that will return.&lt;/p&gt;

&lt;p&gt;You can get these code at &lt;a href=&quot;https://github.com/saltnlight5/java-ee6-examples/tree/master/servlet3-example&quot;&gt;servlet3-example&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>EE Servlet 3 - Getting started with web application module and a landing page</title>
   <link href="http://localhost:4000/2014/12/27/ee-servlet-3-getting-started-with-web-application-module-and-a-landing-page/"/>
   <updated>2014-12-27T00:00:00-05:00</updated>
   <id>http://localhost:4000/2014/12/27/ee-servlet-3-getting-started-with-web-application-module-and-a-landing-page</id>
   <content type="html">&lt;h2 id=&quot;getting-started-with-servlet-3&quot;&gt;Getting started with Servlet 3&lt;/h2&gt;

&lt;p&gt;Web application module in Java EE is probably the most common type of application module that a developer would encounter and work on. That’s because not only it can provide users the UI, but it also supoprt many common web application patterns: Model View Controller, Filter, Session, Context Listener, Http Request, Paramters, Query, and Form handling, Http Response writer, redirect, error etc. You can do all these with Servlet spec alone, so getting to know it well is an important part of learning in writing good web application.&lt;/p&gt;

&lt;p&gt;Servlet has been around for a long time, and many developers are already familiar with it. There are many other web frameworks such as Tapestry or Spring MVC that are built on top of Servlet. These frameworks provide separate programming models that suppose to easy development process, but nontheless the core concept is still based on the Servlet technologies (or at least tightly integrated if it were to run by any web container server). In this post, I will try to highlight how to get a web module application started, and configure a typical need: a default landing page.&lt;/p&gt;

&lt;h2 id=&quot;hello-world&quot;&gt;Hello World&lt;/h2&gt;

&lt;p&gt;Like many things in EE environment, you would write small components as Java class and then deploy them onto a server and let the server manage it’s lifecycle and execution. So as with Servlet, you would write a simple Java class that implements Servlet interface, package it and deploy, and server will do it’s magic.&lt;/p&gt;

&lt;p&gt;Before Servlet 3.0, your servlet component is configured and mapped in web.xml file, but now you can just add an annotation directly on your servlet class and the app server should be able to automatically deploy and run it. Here is an example of a classic hello world.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package zemian.servlet3example.web;

import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet(&quot;/hello&quot;)
public class HelloServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        PrintWriter writer = resp.getWriter();
        writer.println(&quot;&amp;lt;!DOCTYPE html&amp;gt;&quot;);
        writer.println(&quot;&amp;lt;html&amp;gt;&quot;);
        writer.println(&quot;&amp;lt;body&amp;gt;&quot;);
        writer.println(&quot;&amp;lt;p&amp;gt;Hello World!&amp;lt;/p&amp;gt;&quot;);
        writer.println(&quot;&amp;lt;/body&amp;gt;&quot;);
        writer.println(&quot;&amp;lt;/html&amp;gt;&quot;);
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In this Servlet, I simply extends an existing base 
HttpServlet class that should be available in all Serlvet spec. and in 
response to a http GET request, I write a Hello World message out 
as html response.&lt;/p&gt;

&lt;p&gt;You may find above code in  &lt;a href=&quot;https://github.com/saltnlight5/java-ee6-examples/tree/master/servlet3-example&quot;&gt;servlet3-example&lt;/a&gt;. Build and deploy it and then you can access it with http://localhost/servlet3-exmaple/hello. (I have many other servlet examples in the project, but you may just concentrate in this class for now.)&lt;/p&gt;

&lt;h2 id=&quot;how-to-configure-a-default-landing-page-in-servlet-3&quot;&gt;How to configure a default landing page in Servlet 3&lt;/h2&gt;

&lt;p&gt;A typical application server will likely default a landing page to “index.html” or “index.jsp” if it exists. For example, if I have written a IndexSerlvet class and mapped to “/index” instead, then you need to tell the server default to there. This will happen if users only type http://localhost/servlet3-example with context path in URL only.&lt;/p&gt;

&lt;p&gt;Despite you can can do just about most things in Java annotations with Servlet 3.0 as equivalent to the content found web.xml file, but not the welcome file though. So to do this, you would still need to create this good old web.xml. Here is an example&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot; 
         version=&quot;3.0&quot;&amp;gt;
    &amp;lt;welcome-file-list&amp;gt;
        &amp;lt;welcome-file&amp;gt;index&amp;lt;/welcome-file&amp;gt;
    &amp;lt;/welcome-file-list&amp;gt;
&amp;lt;/web-app&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Above example will default the landing page to a Servlet url mapping with “/index” path.&lt;/p&gt;

&lt;p&gt;TIPS: Do NOT to use “/” prefix when definining welcome-file element, else you will get a page not found error and likely your server won’t even print any error message in the log!&lt;/p&gt;

&lt;p&gt;Another alternate solution instead of overrite welcome-file is simply add a “index.jsp” file in root of webapp folder and do a redirect like this:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;% response.sendRedirect(request.getContextPath() + &quot;/index&quot;); %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Developing Java EE applications with Maven, NetBeans and Glassfish</title>
   <link href="http://localhost:4000/2014/12/21/developing-java-ee-applications-with-maven-netbeans-and-glassfish/"/>
   <updated>2014-12-21T00:00:00-05:00</updated>
   <id>http://localhost:4000/2014/12/21/developing-java-ee-applications-with-maven-netbeans-and-glassfish</id>
   <content type="html">&lt;p&gt;I have been working with EE 6 stack lately, and I find it quite pleasant and productive. For my own learning purpose, I intend to explore more deeper on some of the major components available on the EE stack.&lt;/p&gt;

&lt;p&gt;I have started a &lt;a href=&quot;https://github.com/saltnlight5/java-ee6-examples&quot;&gt;java-ee6-examples&lt;/a&gt; project in GitHub, and I plan to add my examples and working demo code there, along with some blog posts whenever I can. The project is seperated into sub-modules that a typical EE application would organized: a parent module, a common library jar module and one or more web modules etc. The project is buildable using &lt;a href=&quot;http://maven.apache.org/&quot;&gt;Maven 3 tool&lt;/a&gt; on command line, and you may use any major IDE that supports Maven (I will try out NetBeans for these demos).&lt;/p&gt;

&lt;p&gt;I will also be testing my examples application mainly on Glassfish Server. Glassfish Server is an open source EE application server, and 
its current 4.x release supports EE 7 already (GF 3.x is for EE 6). We should able to run
 any EE 6 applications on GF 4.x without much problems, so for my learning purpose, I will restrict my examples to use EE 6 for now (you will notice that I have to set EE 6 version as dependency in Maven pom file!)&lt;/p&gt;

&lt;p&gt;So if you are interested in these, watch this blog for future updates.&lt;/p&gt;

&lt;p&gt;To help you started with EE development, I jot down few useful links here.&lt;/p&gt;

&lt;p&gt;Downloads:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/downloads/java-archive-downloads-javase7-521261.html&quot;&gt;JDK 7&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://netbeans.org/downloads/&quot;&gt;NetBeans IDE&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://glassfish.java.net/download.html&quot;&gt;Glassfish Application Server&lt;/a&gt;&lt;/p&gt;

    &lt;p&gt;(Oracle also provides &lt;a href=&quot;http://www.oracle.com/technetwork/java/javaee/downloads/index.html&quot;&gt;convenient package download&lt;/a&gt; that includes all 3 above&lt;a href=&quot;http://www.oracle.com/technetwork/java/javaee/downloads/index.html&quot;&gt;http://www.oracle.com/technetwork/java/javaee/downloads/index.html&lt;/a&gt;!)&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;References:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.oracle.com/javaee/6/tutorial/doc/&quot;&gt;EE 6 Tutorial&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.oracle.com/technetwork/java/javaee/tech/javaee6technologies-1955512.html&quot;&gt;EE 6 Technologies&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://docs.oracle.com/javaee/6/api/&quot;&gt;EE 6 API&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://docs.oracle.com/javase/7/docs/api/&quot;&gt;JDK 7 API&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Writing your own logging service?</title>
   <link href="http://localhost:4000/2014/12/13/writing-your-own-logging-service/"/>
   <updated>2014-12-13T00:00:00-05:00</updated>
   <id>http://localhost:4000/2014/12/13/writing-your-own-logging-service</id>
   <content type="html">&lt;p&gt;Application logging is one those things like favorite Editors war: everyone has their own opinions and there are endless of implemenations and flavors out there. Now a days, you likely would want to use something already available such as Log4j or Logback. Even JDK has a built in “java.util.logging” implementation. To avoid couple to a direct logger, many projects would opt to use a facade interface, and there is already couple good ones out there already, such as SLF4J or Apache Common Logging etc.&lt;/p&gt;

&lt;p&gt;Despite all these, many project owners still want to try write their own logger service! I wondered if I were to ask and write one myself, what would it be like? So I played around and come up with this simple facade that wraps one of the logger provider (JDK logger in this case), and you can check it out &lt;a href=&quot;https://github.com/saltnlight5/java-ee6-examples/tree/master/common-service/src/main/java/zemian/service/logging&quot;&gt;here&lt;/a&gt;. With my logger, you can use it like this in your application:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; import zemian.service.logging.*;
 class MyService {
   static Log LOG = LogFactory.createLog(MyService.class);
   public void run() {
     LOG.info(Message.msg(&quot;%s service is running now.&quot;, this));
   }
 }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Or you can use the Logger wrapper to avoid many imports:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; import zemian.service.logging.Logger;
 class MyService2 {
   static Logger LOGGER = new Logger(MyService2.class);
   public void run() {
     LOGGER.info(&quot;%s service is running now.&quot;, this);
   }
 }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Some principles I followed when trying this out:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Use simple names for different level of messages: error, warn, info, debug and trace (no crazy fine, finer and finest level names.)&lt;/li&gt;
  &lt;li&gt;Seperate Log service from implementation so you can swap provider.&lt;/li&gt;
  &lt;li&gt;Uses Message logging POJO as data encapsulation. It simplifies the log service interface.&lt;/li&gt;
  &lt;li&gt;Use log parameters and lazy format binding to construct log message to speed performance.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Do not go crazy with logging service implemenation make it complex. For example I recommend NOT to mix business logic or data in your logging if possible! If you need custom error codes to be logged for example, you can write your own Exception class and encapsulate there, and then let the logging service do its job: just logging.&lt;/p&gt;

&lt;p&gt;Here are some general rules about using logger in your application that I recommend:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ERROR&lt;/code&gt; log messages when there is reallyl a error! Try not to log an “acceptable” error message in your application. Treat an ERROR as critical problem in your application, like if it’s in production, some one should be paged to take care of the problem immediately. Each message should have a full Java stacktrace! Some application might want to assign a unique Error Code to these level of messages for easier identification and troubleshoot purpose.&lt;/li&gt;
  &lt;li&gt;Use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WARN&lt;/code&gt; log messages if it’s a problem that’s ignorable during production operation, but not good idea to supress it. Likely these might point to potentially problem in your application or env. Each message should have a full Java stacktrace, if available that is!&lt;/li&gt;
  &lt;li&gt;Use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;INFO&lt;/code&gt; log messages for admin operators or application monitors peoples to see how your application is doing. High level application status or some important and meaningful business information indicators etc. Do not litter your log with developer’s messages and unessary verbose and unclear message. Each message should be written in clear sentence so operators knows it’s meaningful.&lt;/li&gt;
  &lt;li&gt;Use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DEBUG&lt;/code&gt; log messages for developers to see and troubleshoot the application. Use this for critical application junction and operation to show objects and services states etc. Try not to add repeated loop info messages here and litter your log content.&lt;/li&gt;
  &lt;li&gt;Use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TRACE&lt;/code&gt; log message for developers to troubleshoot tight for loop and high traffic messages information.&lt;/li&gt;
  &lt;li&gt;You should select a logger provider that let you configure and turn these logging levels ON or OFF (preferrable at runtime if possible as well). Each level should able to automatically suppress all levels below it. And ofcourse you want a logger provider that can handle log message output to STDOUT and/or to FILE as destination as well.&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Getting started with Glassfish Server and Setting up SLF4J logging</title>
   <link href="http://localhost:4000/2014/12/10/getting-started-with-glassfish-server-and-setting-up-slf4j-logging/"/>
   <updated>2014-12-10T00:00:00-05:00</updated>
   <id>http://localhost:4000/2014/12/10/getting-started-with-glassfish-server-and-setting-up-slf4j-logging</id>
   <content type="html">&lt;p&gt;Some notes I jot down while playing with GlassFish Server (3) for EE 6. You may get a working example here:
&lt;a href=&quot;https://github.com/saltnlight5/java-ee6-examples/tree/master/extra/glassfish-logging-example&quot;&gt;https://github.com/saltnlight5/java-ee6-examples/tree/master/extra/glassfish-logging-example&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;= Gettin started with Glassfish server

== Start server

1. cd $GF/bin
2. asadmin start-domain domain1

== Stop server

1. cd $GF/bin
2. asadmin stop-domain domain1

== Server Ports

Admin Console Application is at http://localhost:4848
 * Default setup has no user and password restriction!

Web applications is http://localhost:8080

== To create a new domain with diferent ports

1. cd $GF/bin
2. asadmin create-domain --portbase 9000 domain2

* If you accept default then again no password for admin user. After this, your
  admin console app is at http://localhost:9048 while your application is at
  http://localhost:9080

= Glassfish Server Setup

== How to setup SLF4J

1. Copy slf4j-api and slf4j-jdk jars into $GF/lib/endorsed
2. Edit $GF/domains/domain1/config/logging.properties and add your own logging package level
 mypackage.level=FINEST

== How to enable JSTL tag for all web applications

1. Copy jstl-1.2.jar into $GF/domains/domain1/lib

== How to add MySQL Driver for all applications

1. Copy mysql-connector-java-5.1.30-bin.jar into $GF/domains/domain1/lib
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How to secure a web application by the app server container</title>
   <link href="http://localhost:4000/2014/12/01/how-to-secure-a-web-application-by-the-app-server-container/"/>
   <updated>2014-12-01T00:00:00-05:00</updated>
   <id>http://localhost:4000/2014/12/01/how-to-secure-a-web-application-by-the-app-server-container</id>
   <content type="html">&lt;p&gt;There are many benefits to allow a container in managing users, groups and authentication policies. You may configure your WAR application to take advantage of this by adding the following in the WEB-INF/web.xml file&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   &amp;lt;security-constraint&amp;gt;
        &amp;lt;web-resource-collection&amp;gt;
            &amp;lt;web-resource-name&amp;gt;webuser&amp;lt;/web-resource-name&amp;gt;
            &amp;lt;url-pattern&amp;gt;/*&amp;lt;/url-pattern&amp;gt;
        &amp;lt;/web-resource-collection&amp;gt;
        &amp;lt;auth-constraint&amp;gt;
            &amp;lt;role-name&amp;gt;webuser&amp;lt;/role-name&amp;gt; 
        &amp;lt;/auth-constraint&amp;gt;
    &amp;lt;/security-constraint&amp;gt;
    &amp;lt;login-config&amp;gt;
        &amp;lt;auth-method&amp;gt;BASIC&amp;lt;/auth-method&amp;gt;
        &amp;lt;realm-name&amp;gt;default&amp;lt;/realm-name&amp;gt;
    &amp;lt;/login-config&amp;gt;
    &amp;lt;security-role&amp;gt;
        &amp;lt;role-name&amp;gt;webuser&amp;lt;/role-name&amp;gt;
    &amp;lt;/security-role&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Above will secure the entire application and allow only users with “webuser” role to access it. The name “webuser” can be any name you want.&lt;/p&gt;

&lt;p&gt;Each app server will manage users differently. In the case of WLS, it lets you create “user” and “user group”, and then you can map the defined role above to the group. To do this, add the following to the  WEB-INF/weblogic.xml file.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;weblogic-web-app 
    xmlns=&quot;http://xmlns.oracle.com/weblogic/weblogic-web-app&quot; 
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; 
    xsi:schemaLocation=&quot;http://xmlns.oracle.com/weblogic/weblogic-web-app 
        http://xmlns.oracle.com/weblogic/weblogic-web-app/1.2/weblogic-web-app.xsd&quot;&amp;gt;
    &amp;lt;security-role-assignment&amp;gt;
        &amp;lt;role-name&amp;gt;webuser&amp;lt;/role-name&amp;gt;
        &amp;lt;principal-name&amp;gt;webusergroup&amp;lt;/principal-name&amp;gt;
    &amp;lt;/security-role-assignment&amp;gt;
&amp;lt;/weblogic-web-app&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here we tell WLS that we map the “webuser” role defined in web.xml to use the “webusergroup”, a WLS user group.&lt;/p&gt;

&lt;p&gt;To create  user or user group in WLS, you may use the WLS Admin console web application. Go to the Security Realm and select the default “myrealm”, and then select User or Group tab. Go ahead and add a user with password under a new group named “webusergroup”. After this you can deploy your app, and it would prompt you for user and password whenever you try to access its URL.&lt;/p&gt;

&lt;p&gt;You can find out more security info at &lt;a href=&quot;https://docs.oracle.com/cd/E23943_01/web.1111/e13711/thin_client.htm#SCPRG171&quot;&gt;https://docs.oracle.com/cd/E23943_01/web.1111/e13711/thin_client.htm#SCPRG171&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to use SSH tunneling to get to your restricted servers</title>
   <link href="http://localhost:4000/2014/11/01/how-to-use-ssh-tunneling-to-get-to-your-restricted-servers/"/>
   <updated>2014-11-01T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/11/01/how-to-use-ssh-tunneling-to-get-to-your-restricted-servers</id>
   <content type="html">&lt;p&gt;Have you ever been told that in your network serverX can only be reached by a serverY via SSH? Now you have access to serverY from your own PC with normal SSH access as well, but just not directly to serverX.&lt;/p&gt;

&lt;p&gt;What can you do in situation like this if you need to access the restricted serverY? Well you can always ssh into serverY, then ssh again into serverX to check your work or log or whatever. But what happen if you have a database server or WebLogic Server instance running in serverX; and you want your local PC’s fancy tools to access the serverX? (Eg: Accessing the WLS admin console, or using SqlDeveloper to connect to your DB etc). In this case, that’s where ssh tunneling can help you, and here is how.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Establish a connection to your serverY that you have access to from your PC. On top of that and at the same time, you will create a tunnel to serverX (your restricted server) by letting serverY redirect all the network traffic data back to your local PC on a specific port. Sounds scary, but it can be done with single command. For example this is how I can access the WLS Admin Console app that was running on the restricted server X. On your own PC, open a terminal and run the following:&lt;/p&gt;

    &lt;p&gt;bash&amp;gt; ssh -L 12345:serverX:7001 serverY&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Above will prompt you to access serverY with your normal ssh credential that you have access to. Once logged in, you need to keep the terminal open. Now the tunnel is established and redirecting traffic from port 7001 (where the WLS admin console is running) on serverX to your own PC on port 12345 via the tunnel of server Y.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Open a browser on your own PC and type in address http://localhost:12345/console&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Now you should able to access your restricted serverX’s WLS admin console!&lt;/p&gt;

&lt;p&gt;Same can be done with a database server such as MySQL. For example, you will run  ssh -L 12346:serverX:3306 serverY and then change your SqlDeveloper JDBC connection url string to the tunnel port &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jdbc:mysql://localhost:12346/mydb&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;This is a cool technique to get around a secured environment.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to setup custom SSLSocketFactory's TrustManager per each URL connection</title>
   <link href="http://localhost:4000/2014/10/28/how-to-setup-custom-sslsocketfactorys-trustmanager-per-each-url-connection/"/>
   <updated>2014-10-28T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/10/28/how-to-setup-custom-sslsocketfactorys-trustmanager-per-each-url-connection</id>
   <content type="html">&lt;p&gt;We can see from javadoc that javax.net.ssl.HttpsURLConnection provided a static method to override with setDefaultSSLSocketFory() method. This allow you to supply a custom javax.net.ssl.TrustManager that may verify your own  CA certs handshake and validation etc. But this will override the default for all “https” URLs per your JVM!&lt;/p&gt;

&lt;p&gt;So how can we override just a single https URL? Looking at javax.net.ssl.HttpsURLConnection again we see instance method for setSSLSocketFactory(), but we can’t instantiate HttpsURLConnection object directly! It took me some digging to realized that the java.net.URL is actually an factory class for its implementation! One can get an instance like this using new URL(“https://localhost”).openConnection()&lt;/p&gt;

&lt;p&gt;To complete this article, I will provide a simple working example that demonstrate this.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package zemian;

import java.io.BufferedReader;

import java.io.InputStream;

import java.io.InputStreamReader;

import java.net.URL;

import java.net.URLConnection;

import java.security.SecureRandom;

import java.security.cert.X509Certificate;

import javax.net.ssl.HttpsURLConnection;

import javax.net.ssl.SSLContext;

import javax.net.ssl.SSLSocketFactory;

import javax.net.ssl.TrustManager;

import javax.net.ssl.X509TrustManager;

public class WGetText {

    public static void main(String[] args) throws Exception {

        String urlString = System.getProperty(&quot;url&quot;, &quot;https://google.com&quot;);

        URL url = new URL(urlString);

        URLConnection urlConnection = url.openConnection();

        HttpsURLConnection httpsUrlConnection = (HttpsURLConnection) urlConnection;

        SSLSocketFactory sslSocketFactory = createTrustAllSslSocketFactory();

        httpsUrlConnection.setSSLSocketFactory(sslSocketFactory);

        try (InputStream inputStream = httpsUrlConnection.getInputStream()) {

            BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));

            String line = null;

            while ((line = reader.readLine()) != null) {

                System.out.println(line);

            }

        }

    }

    private static SSLSocketFactory createTrustAllSslSocketFactory() throws Exception {

        TrustManager[] byPassTrustManagers = new TrustManager[] { new X509TrustManager() {

            public X509Certificate[] getAcceptedIssuers() {

                return new X509Certificate[0];

            }

            public void checkClientTrusted(X509Certificate[] chain, String authType) {

            }

            public void checkServerTrusted(X509Certificate[] chain, String authType) {

            }

        } };

        SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);

        sslContext.init(null, byPassTrustManagers, new SecureRandom());

        return sslContext.getSocketFactory();

    }

}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How Servlet and JSP create sessions</title>
   <link href="http://localhost:4000/2014/10/26/how-servlet-and-jsp-create-sessions/"/>
   <updated>2014-10-26T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/10/26/how-servlet-and-jsp-create-sessions</id>
   <content type="html">&lt;p&gt;In Servlet, you may get the Session object by “httpServletRequest.getSession(true)”. The “true” flag will create the session if it doesn’t already exist, else it gets the existing session.&lt;/p&gt;

&lt;p&gt;Now if you want to check whether you have the session exists or not (without have to create one if doesn’t exist), you need to pass in “false” and then check for “null”.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Session session = httpServletRequest.getSession(false);
if (session == null) {
  // do something without creating session object.
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Now comes the trick party. If you run above code and then dispatch the request to render a JSP page, you might quickly come to find out that the container will create a new Session object still! It turns out that by default JSP will create new Session object if you do not have one! To disable this, you need to set this explicitly on top of the JSP page:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &amp;lt;% page session=&quot;false&quot; %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Only with this you will able to actually prevent creation of unnecessary Session object if you were to use JSP for output! Something to watch out for when debugging session based application.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Poking around your REST application with a scriptable endpoint</title>
   <link href="http://localhost:4000/2014/10/17/poking-around-your-rest-application-with-a-scriptable-endpoint/"/>
   <updated>2014-10-17T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/10/17/poking-around-your-rest-application-with-a-scriptable-endpoint</id>
   <content type="html">&lt;p&gt;I love the fact that JDK comes with a ScriptEngine. It’s so flexible when you want to evaluate and troubleshoot your application that’s already deployed in an server environment. Add this REST endpoint into a Java EE app, and it will give you instant access to internal states of the app.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package myrestapp;

import java.io.StringReader;
import java.util.logging.Logger;
import javax.script.Bindings;
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;
import javax.servlet.ServletContext;
import javax.servlet.http.HttpServletRequest;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.core.Context;

/**
 * Give instant access to your internal application with dynamic scripting.
 * 
 * &amp;lt;p&amp;gt;Example script:
 * &amp;lt;pre&amp;gt;
 * &quot;sc&quot; + servletContext + &quot;, req=&quot; + request;
 * &amp;lt;/pre&amp;gt;
 * 
 * &amp;lt;p&amp;gt;Example2
 * &amp;lt;pre&amp;gt;
 * names = servletContext.getAttributeNames();
 * while(names.hasMoreElements()) {
 *   name = names.nextElement();
 *   println(name);
 * }
 * &amp;lt;/pre&amp;gt;
 * 
 * &amp;lt;p&amp;gt;Example on how to import Java packages and classes.
 * &amp;lt;pre&amp;gt;
 * importPackage(Packages.java.text);
 * df = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;);
 * dt = df.parse(&quot;01/01/2014&quot;);
 * &amp;lt;/pre&amp;gt;
 */
@Path(&quot;script&quot;)
public class ScriptResource {
    private static final Logger logger = Logger.getLogger(ScriptResource.class.getName());
    
    @Context
    private ServletContext servletContext;
        
    @POST
    public String script(@Context HttpServletRequest request, String scriptText) throws Exception {
        String engineName = &quot;JavaScript&quot;;
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName(engineName);
        logger.info(&quot;Running script text length=&quot; + scriptText.length() + &quot;, engine=&quot; + engine);
        Object result = null;
        try (StringReader reader = new StringReader(scriptText)) {
            Bindings bindings = engine.createBindings();
            bindings.put(&quot;servletContext&quot;, servletContext);
            bindings.put(&quot;request&quot;, request);
            result = engine.eval(reader, bindings);
        }
        logger.info(&quot;Result &quot; + result);
        return &quot;RESULT=&quot; + result;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Notice that I gave couple JavaScript examples in the comment area already. You will have access to two binding variables that should give you full access to many internal components of your application. And here is a &lt;a href=&quot;http://docs.oracle.com/javase/7/docs/technotes/guides/scripting/programmer_guide&quot;&gt;quick reference on scripting JDK 7&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Need an UI to test out this endpoint? How about give the “Advance Rest Client” Chrome Extension a try? (Thanks to my co-worker’s Chris Griffith for showing me this cool extension. It’s really handy tool to have!).&lt;/p&gt;

&lt;p&gt;UPDATES (12/8/2014)&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;If you are using FireFox, try the “RESTClient” add-ons.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;If you are using JDK7 Rhino JavaScript engine, here is a good ref for help: https://developer.mozilla.org/en-US/docs/Mozilla/Projects/Rhino/Scripting_Java&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;If you’re in a EE6 web application and doesn’t have REST enabled yet, then simply add a class like this to your application. It should automatically configure an endpoint that you can access as “http://localhost/rest/script”.
```
package myrestapp;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;import javax.ws.rs.ApplicationPath;
import javax.ws.rs.core.Application;&lt;/p&gt;

&lt;p&gt;/**&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;This is the main entry into REST Application that bootstrap the provider.
 */
@ApplicationPath(“rest”)
public class RestApplication extends Application {
}
```&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Book Review - Apache Camel Developer's Cookbook</title>
   <link href="http://localhost:4000/2014/09/13/book-review-apache-camel-developers-cookbook/"/>
   <updated>2014-09-13T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/09/13/book-review-apache-camel-developers-cookbook</id>
   <content type="html">&lt;p&gt;I got a chance to review the “&lt;a href=&quot;https://www.packtpub.com/application-development/apache-camel-developers-cookbook&quot;&gt;Apache CamelDeveloper’s Cookbook&lt;/a&gt;” by Cranton and Korab. Overall I think this is a
great book. System integration problems and solutions come in many forms, so
getting started by reading on some proven solution recipes is definitely a good
way to improve your skill. This book provides more than 100 examples on how to
solve integration problems with Camel framework; from simple standalone Java
application to testing, transaction, monitoring and even a chapter on web
services. Each example comes with brief explanations and further reading
references. My favorites are the side notes sprinkled throughout each recipe.
Clearly these great tips can only have came from well experienced Camel
developers who has spent time on the field.&lt;/p&gt;

&lt;p&gt;As many cookbook style, the book can only go to certain length with each example
on explanation and teaching, but readers may dig much deeper by using the
sample code provided by this book. In fact I think it’s really cool that it’s available
through GitHub as well. Check it out at &lt;a href=&quot;http://github.com/CamelCookbook/camel-cookbook-examples&quot;&gt;http://github.com/CamelCookbook/camel-cookbook-examples&lt;/a&gt;.
(although I think there is a typo in the book for this URL on the copy I have!
^_^) The sample code are complete, clean and easy to follow for each recipe
example. The source code is in Maven based project, so you will get all the
dependencies needed by just running the “install” phase. Open by any
major IDE and you will start reading and compiling immediately. Because it’s
using Maven, you can also download the Camel dependencies with Source, and you
can jump right into the framework code itself to analyze what’s behind this
cool project.&lt;/p&gt;

&lt;p&gt;Because it’s a cookbook, it does not go into too deep about Camel internal. But
through the examples, many of the core concepts of Camel has been touched; and
it serves as a great example and can be used as handy reference book. Because
it covers the Camel concept briefly, it expected you to know little bit of the
integration knowledge and background though. Things like Enterprise Integration
Patterns and transport technologies used such as File, FTP, SEDA, JMS etc. The
book also comes with many Spring based XML configuration examples, and it
expects you to know some basic knowledge of bean configuration. But the xml
configuration of Camel routes itself are very self explanatory, so readers should able to follow along easily.&lt;/p&gt;

&lt;p&gt;If you work with Camel project, or have to start an integration project, I
would recommend you to check out this book.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Django with Python 3 and MySQL database</title>
   <link href="http://localhost:4000/2014/09/04/django-with-python-3-and-mysql-database/"/>
   <updated>2014-09-04T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/09/04/django-with-python-3-and-mysql-database</id>
   <content type="html">&lt;p&gt;I read many folks are having problems using MySQL db driver with Python 3, especially when setting up a Django app. The default Django 1.6.5 is only supporting the MySQLdb driver and that only works with Python 2.&lt;/p&gt;

&lt;p&gt;I have been using mysql-connector-python package with Python 3 and it has built-in django support as well. I had ran into trouble like this &lt;a href=&quot;http://bugs.mysql.com/bug.php?id=73232&quot;&gt;http://bugs.mysql.com/bug.php?id=73232&lt;/a&gt;, but it is fixed now with the latest mysql-connector-python 1.2.3 release. The mysql-connector-python also works with Python 2.7 as well, and it’s a pure python library without native code, which makes the install much easier.&lt;/p&gt;

&lt;p&gt;When installing mysql-connector-python, ensure you allow external hosted files like this&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pip install --allow-all-external mysql-connector-python
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you are behind a firewall, use the proxy option&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pip install --proxy my_proxy_server --allow-all-external mysql-connector-python
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With these, now you can set your Django settings.py file with MySQL engine&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;DATABASES = {
    'default': {
        'ENGINE': 'mysql.connector.django',
        'NAME': 'mydb',
        'USER': 'myuser',
        'PASSWORD': 'mypassword',
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;PS: My initial testing with Django 1.7 also works pretty well with mysql-connector-python. How sweet!&lt;/p&gt;

&lt;p&gt;UPDATE 07/15/2015:&lt;/p&gt;

&lt;p&gt;The django 1.8 documentation now recommends using ‘mysqlclient’ package if you want to use Python3 with MySQL backend. It should be a drop in replacement for ‘MySQLdb’.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Deploying applications or libraries to WebLogic Server using command line</title>
   <link href="http://localhost:4000/2014/08/20/deploying-applications-or-libraries-to-weblogic-server-using-command-line/"/>
   <updated>2014-08-20T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/08/20/deploying-applications-or-libraries-to-weblogic-server-using-command-line</id>
   <content type="html">&lt;p&gt;Here is how you can automate deployment for WebLogic server using command line.&lt;/p&gt;

&lt;p&gt;First source the env settings from the server:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ source $ML_HOME/server/bin/setWLSEnv.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Deploy Library:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ java weblogic.Deployer -nostage -deploy -library \
-adminurl localhost:7001 \
-username weblogic -password my_secret \
-targets myserver \
my_shared_lib.war
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Deploy Application:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ java weblogic.Deployer -nostage -deploy \
-adminurl localhost:7001 \
-username weblogic -password my_secret \
-targets myserver \
-name myapp.war myapp.war
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For development, you likely want to use the “-nostage” meaning to deploy the app or library directly from the file system. This means any changes to that file location and a reload from WLS will take effect immediately.&lt;/p&gt;

&lt;p&gt;For undeploy the command line options are same for library or app but with matching name.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ java weblogic.Deployer -undeploy \
-adminurl localhost:7001 \
-username weblogic -password my_secret \
-targets myserver \
-name myapp_or_lib.war
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>WebLogic shared library deployment</title>
   <link href="http://localhost:4000/2014/08/19/weblogic-shared-library-deployment/"/>
   <updated>2014-08-19T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/08/19/weblogic-shared-library-deployment</id>
   <content type="html">&lt;p&gt;When deploying a large WAR file application, it would be more easier to manage if we can separate the dependency jars away from the rest of the Web content; or at least those third party jars that do not update often. In this case, we usually call the jars content a “Shared Library” and the Web content the “Skinny WAR”.&lt;/p&gt;

&lt;p&gt;With WebLogic Server, you can easily deploy such two artifacts. Just seperate and package your WAR application into two. The share library would be simply another WAR with only the WEB-INF/lib content in it, while the Skinny war will be the rest of your application without the jar depependencies. On the shared lib WAR file, ensure you have an META-INF/MANIFEST.MF that specify the name and version like the following:&lt;/p&gt;

&lt;p&gt;Implementation-Title: my_shared_lib
Implementation-Version: 1.0
Specification-Title: my_shared_lib
Specification-Version: 1.0
Extension-Name: my_shared_lib-1.0&lt;/p&gt;

&lt;p&gt;Now your Skinny WAR would need to add an WEB-INF/weblogic.xml extension file to reference the library like this:&lt;/p&gt;

&lt;weblogic-web-app&gt; 
    &lt;library-ref&gt;
        &lt;library-name&gt;my_shared_lib&lt;/library-name&gt;
        &lt;specification-version&gt;1.0&lt;/specification-version&gt;
        &lt;implementation-version&gt;1.0&lt;/implementation-version&gt;
        &lt;exact-match&gt;true&lt;/exact-match&gt;
    &lt;/library-ref&gt;
&lt;/weblogic-web-app&gt;

&lt;p&gt;With these two packaged, now turn to your WLS admin console, you will find “Deployments” menu link on left, and on right, you click “Install” button. The next screen will prompt you to choose which type of deployment to install: “Library” (Shared Lib War) or “Application” (Skinny War). Re-run this twice, each with your two seperated WAR files you just built.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2014/wls-shared-lib.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The WLS will combine the two when running your WAR application. This comes handy if you are to deploy multiple instances of your Skinny war application, but now you only need one shared lib.&lt;/p&gt;

&lt;p&gt;NOTE: Ensure you select at least one, and the same Target servers where you deploy the Library and Application. Else your application will not be deployed and run.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Getting django started on Windows 7 with python 3 and MySQL 5.6</title>
   <link href="http://localhost:4000/2014/06/18/getting-django-started-on-windows-7-with-python-3-and-mysql-5-6/"/>
   <updated>2014-06-18T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/06/18/getting-django-started-on-windows-7-with-python-3-and-mysql-5-6</id>
   <content type="html">&lt;p&gt;Django is a python web framework library and it works on both python 2 or 3. I will show you how to get python 3 setup in Cygwin environment.&lt;/p&gt;

&lt;p&gt;If you’re on a Windows OS, the best experience I have when working with Django on Windows is to use Cygwin, a Unix emulator shell that runs on Windows. The pip and django commands would automatically setup in Cygwin’s PATH after installed. The default python package on Cygwin is only 2.7 though, so you have to search for “python3” package to get the latest python version. And you can have both versions installed without problem, but the executable are named “python” and “python3” respectively.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Install Cygwin python3 package. Verify “python3 -V” is working.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Install “pip” by downloading this “get-pip.py” file from &lt;a href=&quot;http://pip.readthedocs.org/en/latest/installing.html&quot;&gt;http://pip.readthedocs.org/en/latest/installing.html&lt;/a&gt; and then run “python3 get-pip.py”. Verify “pip3 –version” is working.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;(NOTE: If you are running Windows 7, you might run into this issue: &lt;a href=&quot;https://github.com/pypa/pip/issues/1448&quot;&gt;https://github.com/pypa/pip/issues/1448&lt;/a&gt; where pip exit without a warning. In this case the workaround is install Cygwin “&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;binutils&lt;/code&gt;” and “&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libuuid-devel&quot; &lt;/code&gt;packages, and that fixed the problem for me.)&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Install “django” by running “pip3 install django”&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Finally install the MySQL driver with “pip3 install mysql-connector-python –allow-external mysql-connector-python” command.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Now to get a django project started, try these:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;django-admin.py startproject myapp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The “django-admin.py” script should automatically in your PATH. and this create a new project with initial settings. To switch default database from SQLite3 to MySQL, change the “myapp/settings.py” with the following:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;DATABASES = {
    'default': {
        'NAME': 'mydb',
        'ENGINE': 'mysql.connector.django',
        'USER': 'root',
        'PASSWORD': 'secret',
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now I assume you have MySQL 5.6+ installed on your Windows already. Change the root password to match yours or using different DB user. You can now have django app setup the initial database schema tables for this specif myapp with this commad:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cd myapp

python3 manage.py syncdb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Follow the prompt and setup your admin user. Now you can start django web app:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python3 manage.py runserver 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Open browser to http://localhost:8000/admin. Now try to login and enjoy!&lt;/p&gt;

&lt;p&gt;References:
&lt;a href=&quot;https://www.python.org/&quot;&gt;https://www.python.org&lt;/a&gt;
&lt;a href=&quot;http://cygwin.com/&quot;&gt;http://cygwin.com&lt;/a&gt;
&lt;a href=&quot;http://dev.mysql.com/&quot;&gt;http://dev.mysql.com&lt;/a&gt;
&lt;a href=&quot;https://docs.djangoproject.com/&quot;&gt;https://docs.djangoproject.com&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Getting Django setup on Windows</title>
   <link href="http://localhost:4000/2014/06/18/getting-django-setup-on-windows/"/>
   <updated>2014-06-18T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/06/18/getting-django-setup-on-windows</id>
   <content type="html">&lt;p&gt;A friend asked me how to setup an Django enviroment on Windows without the Cygwin fuzz. Here is the shortest steps I can think of:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Install Python3.4 as default path. (It should be “C:\Python34”).&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Open cmd.exe program on Windows and run the following commands:
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; set PATH=%PATH%;C:\Python34;C:\Python34\Scripts
 pip install django
 python C:\Python34\Lib\site-packages\django\bin\django-admin.py startproject mysite
 cd mysite
 python manage.py syncdb
 (Follow prompts to setup an initial db. remember the user you used here.)
 python manage.py runserver
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;You are ready to django! Open your browser http://127.0.0.1:8000 to verify.&lt;/p&gt;

    &lt;p&gt;Or login into http://127.0.0.1:8000/admin with the user you setup above.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;What’s next?&lt;/p&gt;

&lt;p&gt;Explore django with a guided tutorial here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.djangoproject.com/en/1.6/intro/tutorial01&quot;&gt;https://docs.djangoproject.com/en/1.6/intro/tutorial01&lt;/a&gt;&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>How to initialize a new MySQL installation and create new database</title>
   <link href="http://localhost:4000/2014/06/11/how-to-initialize-a-new-mysql-installation-and-create-new-database/"/>
   <updated>2014-06-11T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/06/11/how-to-initialize-a-new-mysql-installation-and-create-new-database</id>
   <content type="html">&lt;p&gt;For a freshly installed MySQL server, you would need to initialize the system tables and data directory like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cd mysql-&amp;lt;version&amp;gt; 

scripts/mysql_install_db --basedir=. --datadir=data
bin/mysqld_safe --defaults-file=my.cnf &amp;amp;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Before MySQL 5.6, this will setup a “root” with empty password that you can immediately login. For MySQL 5.7 however, it creates a random password for “root” user now. The password is generated under $HOME/.mysql_secret. You need to login and run “SET PASSWORD ## PASSWORD(‘secret’)” to change it.&lt;/p&gt;

&lt;p&gt;After above, you may login using “root” and start creating your own database and users. For example:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CREATE DATABASE mydb;
GRANT ALL PRIVILEGES ON mydb.* TO 'myuser'@'%' IDENTIFIED BY 'secret';
GRANT ALL PRIVILEGES ON mydb.* TO 'myuser'@'localhost' IDENTIFIED BY 'secret';
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;UPDATE 2015-01-26&lt;/p&gt;

&lt;p&gt;Here are more notes to replace/upgrade existing mysql server and install to init.d to auto start by OS.&lt;/p&gt;

&lt;h2 id=&quot;install-and-setup-new-mysql-into-an-exiting-linux&quot;&gt;Install and Setup new MySQL into an exiting Linux.&lt;/h2&gt;

&lt;h3 id=&quot;to-removedislable-old-existing-mysqld-initd-one-usually-defualt-installed-under-usrmysql&quot;&gt;To remove/dislable old existing mysqld init.d (one usually defualt installed under /usr/mysql)&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo /sbin/chkconfig --del mysqld
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;install-new-mysql-server-5616&quot;&gt;Install new mysql server (5.6.16)&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Ensure mysql user exists and installation files are owned by this user&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Setup and initial the new mysql server 
groupadd mysql
useradd -r -g mysql mysql 
cd /apps/mysql
sudo chown -R mysql:mysql .
sudo scripts/mysql_install_db --basedir=/apps/mysql --datadir=/apps/mysql/data --user=mysql

# Optional: Manually start the server and see if it works
# sudo bin/mysqld_safe --defaults-file=/apps/mysql/my.cnf --user=mysql
# sudo bin/mysqladmin shutdown -u root

# Install the init.d script to start server upon system reboot 
sudo ln -s support-file/mysql.server /etc/init.d/mysql.server
sudo vim support-file/mysql.server
    * Ensure these vars are set correctly in your env
basedir=/apps/mysql
datadir=/apps/mysql/data
cnffile=/apps/mysql/my.cnf
user=mysql
    * modify the mysqld_safe command line to add (ENSURE --user option comes last!)
    --defaults-file=$cnffile --user=$user
    
sudo /sbin/chkconfig --add mysql.server
sudo /sbin/service mysql.server start
    
### Change MySQL root password
        sudo bin/mysqladmin password 'new_password'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Ref:
&lt;a href=&quot;https://dev.mysql.com/doc/refman/5.6/en/binary-installation.html&quot;&gt;https://dev.mysql.com/doc/refman/5.6/en/binary-installation.html&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Using crontab to startup service</title>
   <link href="http://localhost:4000/2014/06/08/using-crontab-to-startup-service/"/>
   <updated>2014-06-08T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/06/08/using-crontab-to-startup-service</id>
   <content type="html">&lt;p&gt;Did you know that crontab service has the “@reboot” schedule that would start a script during your system startup time? This is handy if you want something to run right after your system has stared. Try this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# crontab -e
@reboot $HOME/crontab/runcmd.sh /apps/start-myapp.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The disadvantage of this vs the rc.d scripts are you do not have control on when the system shutdown(“stop”) state. So if your app doens’t need to clean up during shutdown, but only care to start when during reboot, this would be an easy option.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>A simple cron wrapper script with logging</title>
   <link href="http://localhost:4000/2014/06/04/a-simple-cron-wrapper-script-with-logging/"/>
   <updated>2014-06-04T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/06/04/a-simple-cron-wrapper-script-with-logging</id>
   <content type="html">&lt;p&gt;When working with crontab service, one thing I often need is to capture the ouput of the job. Having the job script aware of this output and logging is tedious, and often make the script harder to read. So I wrote a shell wrapper that will redirect all job script’s STDOUT into a log file. This way I can inspect it when a job has run and the job script can just focus on the task itself.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# file: runcmd.sh
# Helper/wrapper script to run any command in the crontab env. This script will ensure
# user profile script is loaded and to log any command output into log files. It also
# ensure not to print anything to STDOUT to avoid crontab system mail alert.
#
# NOTE: be sure to pass in absolute path of the command to be run so it can be found.
#
# Usage:
#   ./runcmd.sh find $HOME/crontab/test.sh            # Simple use case
#   LOG_NAME=mytest ./runcmd.sh $HOME/crontab/test.sh # Change the log name to something specific
#

# Options
DIR=`dirname $0`
CMD=&quot;$@&quot;
CMD_NAME=`basename $1`
LOG_NAME=${LOG_NAME:=$CMD_NAME}
LOG=&quot;$DIR/logs/$LOG_NAME.log`date +%s`&quot;

# Ensure logs dir exists
if [[ ! -e $DIR/logs ]]; then
        mkdir -p $DIR/logs
fi

# Run cron command
source $HOME/.bash_profile
echo &quot;`date` Started cron cmd=$CMD, logname=$LOG_NAME&quot; &amp;gt;&amp;gt; $LOG 2&amp;gt;&amp;amp;1
$CMD &amp;gt;&amp;gt; $LOG 2&amp;gt;&amp;amp;1
echo &quot;`date` Cron cmd is done.&quot; &amp;gt;&amp;gt; $LOG 2&amp;gt;&amp;amp;1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;With this wrapper, you can run any shell script and their output will be recorded. For example this job script below will clean up the logs accumulated in our logs folder.&lt;/p&gt;

&lt;p&gt;Note that the wrapper will also auto source the “.bash_profile”. Often this this is needed if your job script expect all the env variables you already have setup in your login shell scripts.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# file: remove-crontab-logs.sh
DIR=`dirname $0`/logs
echo &quot;Checking and removing logs in $DIR&quot;
find $DIR -type f -mtime +31 -print -delete
echo &quot;Done&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Now in the crontab file, you may run the job script like this:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Clean up crontab logs
@montly $HOME/crontab/runcmd.sh $HOME/crontab/remove-crontab-logs.sh

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>A simple MySQL daily backup script</title>
   <link href="http://localhost:4000/2014/06/03/a-simple-mysql-daily-backup-script/"/>
   <updated>2014-06-03T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/06/03/a-simple-mysql-daily-backup-script</id>
   <content type="html">&lt;p&gt;Using the MySQL export script I’ve showed from &lt;a href=&quot;http://saltnlight5.blogspot.com/2014/05/how-to-export-and-import-mysql-database.html&quot;&gt;last post&lt;/a&gt; (assume you saved it in a file named “$HOME/database-export.sh”), you may now perform a daily backup with your crontab service like this.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#file: mysql-backups.sh
DIR=`dirname $0`
echo &quot;Backup DB with export script.&quot;
$DIR/database-export.sh

echo &quot;Moving exported files into backup dir.&quot;
DB_BAK_DIR=$HOME/mysql-backups/`date +%a`
echo &quot;Removing old file (if exists) and saving new backup into $DB_BAK_DIR&quot;
if [[ -e $DB_BAK_DIR ]]; then
  rm -fv $DB_BAK_DIR/*
else
  mkdir -p $DB_BAK_DIR
fi
cp -v $DIR/*.sql $DB_BAK_DIR
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This script should create a daily folder under your home directory, for example like “$HOME/mysql-backups/Mon”, “Tue”, “Wed” etc. It should save up to 7 days in a week if you run this with a daily cron job.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# crontab -e
@daily $HOME/mysql-backups.sh &amp;gt; /dev/null 2&amp;gt;&amp;amp;1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is not the most robust way of backing up your DB, but it’s a simple solution if you just want something quick up and running without worry too much.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to export and import MySQL database</title>
   <link href="http://localhost:4000/2014/05/30/how-to-export-and-import-mysql-database/"/>
   <updated>2014-05-30T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/05/30/how-to-export-and-import-mysql-database</id>
   <content type="html">&lt;p&gt;You can export the MySQL database with schema table definitions and data separated. Here is a simple bash shell script that will export an database.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# file: database-export.sh
DB_NAME=mydb
DB_SCHEMA_FILE=mydb.sql
DB_DATA_FILE=mydb-data.sql
DB_USERNAME=root
DB_PASSWORD=secret

# export schema only from mysql 
echo &quot;`date` Exporting database $DB_NAME schema to $DB_SCHEMA_FILE&quot;
mysqldump --no-data --routines -u $DB_USERNAME -p$DB_PASSWORD $DB_NAME &amp;gt; $DB_SCHEMA_FILE
\
# export data only from mysql

echo &quot;`date` Exporting database $DB_NAME data to $DB_DATA_FILE&quot;
mysqldump --single-transaction --quick --no-autocommit --no-create-info --extended-insert=false -u $DB_USERNAME -p$DB_PASSWORD $DB_NAME &amp;gt; $DB_DATA_FILE

echo &quot;`date` Done.&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The schema export with “–routines” will export stored proc as well. When exporitng data you have to be little more careful. The “–single-transaction” will ensure your data is good. The “–no-autocommit” can really speed up your import later on certain OS.&lt;/p&gt;

&lt;p&gt;Now to import these files back, you can create an empty database and then run the following.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# file: database-import.sh 
# import schema and data into mysql
echo &quot;`date` Importing Schema $DB_SCHEMA_FILE into $DB_NAME&quot;
mysql -f -u $DB_USERNAME -p$DB_PASSWORD $DB_NAME &amp;lt; $DB_SCHEMA_FILE
echo &quot;`date` Importing DATA $DB_DATA_FILE into $DB_NAME&quot;
mysql -f -u $DB_USERNAME -p$DB_PASSWORD $DB_NAME &amp;lt; $DB_DATA_FILE

echo &quot;`date` Done.&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The import with “-f” option will allow you to continue even if you already have duplicated data in the tables; it will simply ignore and continue.&lt;/p&gt;

&lt;p&gt;These two combo commands will allow you to quicly backup and restore a MySQL database.&lt;/p&gt;

&lt;p&gt;Enjoy.&lt;/p&gt;

&lt;p&gt;PS: I have come to learn that “mysqldump” with procedures will insert an extra line like “DEFINER ‘user’@’hostname’”, and it may create problem if you use different users to export/import or even run the application! Unfortunately there is no exclude from the “mysqldump” tool. So you have to manually strip that off if that’s creating a problem for you.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mysqldump --no-data --routines -u $DB_USERNAME -p$DB_PASSWORD $DB_NAME | perl -pi -e 's/DEFINER=&quot;\w+&quot;@&quot;\w+&quot; //g' &amp;gt; $DB_SCHEMA_FILE
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can vote the issue here: &lt;a href=&quot;http://bugs.mysql.com/bug.php?id=24680&quot;&gt;http://bugs.mysql.com/bug.php?id=24680&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to enable MySQL query monitoring</title>
   <link href="http://localhost:4000/2014/04/16/how-to-enable-mysql-query-monitoring/"/>
   <updated>2014-04-16T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/04/16/how-to-enable-mysql-query-monitoring</id>
   <content type="html">&lt;p&gt;Do you need to monitor any SQL statements passing through your MySQL server? You would need to turn on the server logging. Edit your my.cnf file and add these:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;log-output=FILE
general-log=1
general_log_file=mysql-general.log
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You also need to restart the database server after these changes.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Be careful with Java Path.endsWith(String) usage</title>
   <link href="http://localhost:4000/2014/04/15/be-careful-with-java-path-endswithstring-usage/"/>
   <updated>2014-04-15T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/04/15/be-careful-with-java-path-endswithstring-usage</id>
   <content type="html">&lt;p&gt;If you need to compare the java.io.file.Path object, be aware that Path.endsWith(String) will ONLY match another sub-element of Path object in your original path, not the path name string portion! If you want to match the string name portion, you would need to call the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Path.toString()&lt;/code&gt; first. For example&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// Match all jar files.
Files.walk(dir).forEach(path -&amp;gt; {
if (path.toString().endsWith(&quot;.jar&quot;))
System.out.println(path);
});
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;With out the “&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;toString()&lt;/code&gt;” you will spend many fruitless hours wonder why your program didn’t work.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to disable MySQL case sensitive with table names in queries</title>
   <link href="http://localhost:4000/2014/04/13/how-to-disable-mysql-case-sensitive-with-table-names-in-queries/"/>
   <updated>2014-04-13T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/04/13/how-to-disable-mysql-case-sensitive-with-table-names-in-queries</id>
   <content type="html">&lt;p&gt;My latest install of MySQL 5.16 on Windows 7 is case sensitive with table names. I much prefer it’s case in-sensitive for faster typing and adhoc queries. To do that, I need to edit the my.cnf file (Try running “mysql –help” and it will tell you where it is.)&lt;/p&gt;

&lt;p&gt;At the end of the file, add this line:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lower_case_table_names = 1&lt;/code&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to setup remote debug with WebLogic Server and Eclipse</title>
   <link href="http://localhost:4000/2014/04/07/how-to-setup-remote-debug-with-weblogic-server-and-eclipse/"/>
   <updated>2014-04-07T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/04/07/how-to-setup-remote-debug-with-weblogic-server-and-eclipse</id>
   <content type="html">&lt;p&gt;Here is how I enable remote debugging with WebLogic Server (11g) and Eclipse IDE. (Actually the java option is for any JVM, just the instruction here is WLS specific.)&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Edit &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;my_domain&amp;gt;/bin/setDomainEnv.sh&lt;/code&gt; file and add this on top:&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;JAVA_OPTIONS=&quot;$JAVA_OPTIONS -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n&quot; 
&lt;/code&gt;
The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;suspend=n&lt;/code&gt; will start your server without wait for you to connect with IDE. Server usually started with bunch of waiting threads and you can connect with an IDE any any time. You then try to place a break point and fetch a new HTTP request etc to initiate a thread to go into the code breakponit. If you don’t want the WLS to wait before fully started, then set it to suspend=y instead.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Start/restart your WLS with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;my_domain&amp;gt;/bin/startWebLogic.sh&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Once WLS is running, you may connect to it using Eclipse IDE. Go to Menu: Run &amp;gt; Debug Configuration … &amp;gt; Remote Java Application and create a new entry. Ensure your port number is matching to what you used above.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Read more java debugging option here: &lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html#DebuggingOptions&quot;&gt;http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html#DebuggingOptions&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Now on the IDE Eclipse side, you can connect to your WLS server with the following instruction:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;In Eclipse menu, select Run &amp;gt; Debug Configuration …&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;On left side, select Remote Java Application, and then press the + button to create a new configuration.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;On the right side you can fill in the server info such as hostname and port number.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Click Debug button&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;UPDATE (10/30/14):&lt;/p&gt;

&lt;p&gt;Remember each remote debug setup is per JVM and requires a unique port. So how to set each WebLogic Managed Server with unique debug port? You can easily do this by updating your line above to this:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;DEBUG_PORT=${DEBUG_PORT:=8000}
JAVA_OPTIONS=&quot;$JAVA_OPTIONS -Xrunjdwp:transport=dt_socket,address=$DEBUG_PORT,server=y,suspend=n&quot; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Now you can start managed server like this to change the port in a Bash shell by change to your domain directory first, then run:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt;DEBUG_PORT=8001 bin/startManagedWeblogic.sh my_server_name
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Try Java8 online!</title>
   <link href="http://localhost:4000/2014/04/06/try-java8-online/"/>
   <updated>2014-04-06T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/04/06/try-java8-online</id>
   <content type="html">&lt;p&gt;This is pretty cool! href=”http://www.tryjava8.com/&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Creating your own loop structure in Java 8 lambda</title>
   <link href="http://localhost:4000/2014/04/04/creating-your-own-loop-structure-in-java-8-lambda/"/>
   <updated>2014-04-04T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/04/04/creating-your-own-loop-structure-in-java-8-lambda</id>
   <content type="html">&lt;p&gt;Java doesn’t have an easy construct of repeat something N number of times. We can make a for loop of course, but many times we don’t even care about the variable that we created in the loop. We just want repeat N times of some code and that’s it. With the lambda available in Java 8, you may attempt something like this:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;public class RepeatDemo {
    public static void main(String[] args) {
        // One liner repeat
        repeat(10, () -&amp;gt; System.out.println(&quot;HELLO&quot;));

        // Multi-liners repeat
        repeat(10, () -&amp;gt; {
            System.out.println(&quot;HELLO&quot;);
            System.out.println(&quot;WORLD&quot;);
        });
    }
    
    static void repeat(int n, Runnable r) {
        for (int i = 0; i &amp;lt; n; i++)
            r.run();
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Probably not as eye pleasing or straight forward as the good fashion for-loop, but you do get rid of the unnecessary loop variable. Only if Java 8 would go extra mile and treat the lambda argument in method  with sugar syntax, then we could have it something like the Scala/Groovy style, which makes code more smoother. For example:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    // Wouldn't this be nice to have in Java?
    repeat(10) {
        System.out.println(&quot;HELLO&quot;);
        System.out.println(&quot;WORLD&quot;);
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Hum….&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to reset WebLogic admin server password</title>
   <link href="http://localhost:4000/2014/04/02/how-to-reset-weblogic-admin-server-password/"/>
   <updated>2014-04-02T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/04/02/how-to-reset-weblogic-admin-server-password</id>
   <content type="html">&lt;p&gt;If you forgot your admin user password for WebLogic, you can reset it this way. Ensure you are in the domain directory first!&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;source $WL_HOME/server/bin/setWLSEnv.sh 

cd mydomain
mv security/DefaultAuthenticatorInit.ldift security/DefaultAuthenticatorInit.ldift.bak

java weblogic.security.utils.AdminAccount &amp;lt;admin_username&amp;gt; &amp;lt;new_password&amp;gt; security
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How to process stream and read text file in Java 8</title>
   <link href="http://localhost:4000/2014/03/31/how-to-process-stream-and-read-text-file-in-java-8/"/>
   <updated>2014-03-31T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/03/31/how-to-process-stream-and-read-text-file-in-java-8</id>
   <content type="html">&lt;p&gt;I have converted one of my old utility class using latest Java8. I use this often to print content of manifest file to check any mysterious jar file for version etc. Just run “java ztools.PrintJar /path/to/my.jar” to see output. In the new code, you will see how I use the Java 8 stream processing to filter what I need from an Enumeration list, and then get the optional result if there is any. And then the BufferedReader now comes with “lines()” method that also do streaming. It’s pretty cool to see Java 8 in actions!&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package ztools;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.Optional;
import java.util.jar.JarEntry;
import java.util.jar.JarFile;

/**
 * Print text based resource file inside a jar file. (eg: META-INF/MANIFEST.MF)
 * @author Zemian Deng
 */
public class PrintJar {
    public static void main(String[] args) throws Exception {
        // Search given name in a jar
        JarFile jarFile = new JarFile(args[0]);
        final String searchName = (args.length &amp;gt;= 2) ? args[1] : &quot;META-INF/MANIFEST.MF&quot;;
        Optional&amp;lt;JarEntry&amp;gt; searchResult = jarFile
                .stream()
                .filter(e -&amp;gt; e.getName().equals(searchName))
                .findFirst();
        if (!searchResult.isPresent())
            throw new RuntimeException(searchName + &quot; not found!&quot;);
        
        // Print the JarEntry
        JarEntry entry = searchResult.get();
        try (InputStream instream = jarFile.getInputStream(entry)) {
            BufferedReader reader = new BufferedReader(new InputStreamReader(instream));
            reader.lines().forEach(line -&amp;gt; System.out.println(line));
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How to create WebLogic Persistent JDBCStore</title>
   <link href="http://localhost:4000/2014/03/26/how-to-create-weblogic-persistent-jdbcstore/"/>
   <updated>2014-03-26T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/03/26/how-to-create-weblogic-persistent-jdbcstore</id>
   <content type="html">&lt;p&gt;The WebLogic uses “Persistent Store “ to store subsystems data, such as persistent JMS messages. It defaults to use File Store, but you can customize to use database instead. To do this, you would need to create a DataSource first, and ensure to UNCHECK the “Supports Global Transactions” feature. Basically you need to create an NON-XA DataSource in order to use it in Persistent JDBCStore. Otherwise you will not able to see your datasource as option to use.&lt;/p&gt;

&lt;p&gt;Exmaple of a Non-XA DataSource:
&lt;img src=&quot;/images/posts/2014/wls-datasource.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Exmaple of JDBCStore using that Non-XA DataSource: 
&lt;img src=&quot;/images/posts/2014/wls-datasource-jdbcstore.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to use NodeManager to control WebLogic Servers</title>
   <link href="http://localhost:4000/2014/03/21/how-to-use-nodemanager-to-control-weblogic-servers/"/>
   <updated>2014-03-21T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/03/21/how-to-use-nodemanager-to-control-weblogic-servers</id>
   <content type="html">&lt;p&gt;In my &lt;a href=&quot;http://saltnlight5.blogspot.com/2014/03/how-to-start-multiple-weblogic-managed.html&quot;&gt;previous post&lt;/a&gt;, you have seen how we can start a WebLogic admin and multiple managed servers. One downside with that instruction is that those processes will start in foreground and the STDOUT are printed on terminal. If you intended to run these severs as background services, you might want to try the WebLogic node manager &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wlscontrol.sh&lt;/code&gt; tool. I will show you how you can get Node Manager started here.&lt;/p&gt;

&lt;p&gt;The easiest way is still to create the domain directory with the admin server running temporary and then create all your servers through the /console application as described in last post. Once you have these created, then you may shut down all these processes and start it with Node Manager.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;cd &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$WL_HOME/server/bin &amp;amp;&amp;amp; startNodeManager.sh &amp;amp;&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$WL_HOME/common/bin/wlscontrol.sh -d mydomain -r $HOME/domains/mydomain -c -f startWebLogic.sh -s myserver START&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$WL_HOME/common/bin/wlscontrol.sh -d mydomain -r $HOME/domains/mydomain  -c -f startManagedWebLogic.sh -s appserver1 START&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The first step above is to start and run your Node Manager. It is recommended you run this as full daemon service so even OS reboot can restart itself. But for this demo purpose, you can just run it and send to background. Using the Node Manager we can then start the admin in step 2, and then to start the managed server on step 3.&lt;/p&gt;

&lt;p&gt;The NodeManager can start not only just the WebLogic server for you, but it can also monitor them and automatically restart them if they were terminated for any reasons. If you want to shutdown the server manually, you may use this command using Node Manager as well:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$WL_HOME/common/bin/wlscontrol.sh -d mydomain -s appserver1 KILL&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;The Node Manager can also be used to start servers remotely through SSH on multiple machines. Using this tool effectively can help managing your servers across your network. You may read more details here:&lt;/p&gt;

&lt;p&gt;http://docs.oracle.com/cd/E23943_01/web.1111/e13740/toc.htm&lt;/p&gt;

&lt;p&gt;TIPS1: If there is problem when starting server, you may wnat to look into the log files. One log file is the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;domain&amp;gt;/servers/&amp;lt;server&amp;gt;/logs/&amp;lt;server&amp;gt;.out&lt;/code&gt; of the server you trying to start. Or you can look into the Node Manager log itself at &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$WL_HOME/common/nodemanager/nodemanager.log&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;TIPS2: You add startup JVM arguments to each server starting with Node Manager. You need to create a file under &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;domain&amp;gt;/servers/&amp;lt;server&amp;gt;/data&lt;/code&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/nodemanager/startup.properties&lt;/code&gt; and add this key value pair: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Arguments = -Dmyapp=/foo/bar&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;TIPS3: If you want to explore Windows version of NodeManager, you may want to start NodeManager without native library to save yourself some trouble. Try adding &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NativeVersionEnabled=false&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$WL_HOME/common/nodemanager/nodemanager.properties &lt;/code&gt;
file.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Java 8 is out!</title>
   <link href="http://localhost:4000/2014/03/19/java-8-is-out/"/>
   <updated>2014-03-19T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/03/19/java-8-is-out</id>
   <content type="html">&lt;p&gt;You can watch webcast on March 25 here: http://eventreg.oracle.com/profile/web/index.cfm?PKWebId=0x637279c68&lt;/p&gt;

&lt;p&gt;but you may download it now!&lt;/p&gt;

&lt;p&gt;http://www.oracle.com/technetwork/java/javase/downloads/index.html&lt;/p&gt;

&lt;p&gt;How exciting!&lt;/p&gt;

&lt;p&gt;A simple Java8 test&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import org.junit.Test;

public class LamdaTest {
    @Test
    public void lamdaExpression() {
//        Runnable r = new Runnable() {
//            public void run() {
//                System.out.println(&quot;test&quot;);                
//            }            
//        };
        //new Thread(r).start();

        //new Thread(() -&amp;gt; System.out.println(&quot;test&quot;)).start();

        //Runnable r = () -&amp;gt; System.out.println(&quot;test&quot;);
        Runnable r = () -&amp;gt; {
            System.out.println(&quot;test1&quot;); 
            System.out.println(&quot;test2&quot;); 
            System.out.println(&quot;test3&quot;); 
        };
        System.out.println(&quot;result=&quot; + r);
        new Thread(r).start();
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can learn more from here: http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to workaround WebLogic terminalio not found error</title>
   <link href="http://localhost:4000/2014/03/18/how-to-workaround-weblogic-terminalio-not-found-error/"/>
   <updated>2014-03-18T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/03/18/how-to-workaround-weblogic-terminalio-not-found-error</id>
   <content type="html">&lt;p&gt;In some PC environments, you may have encounter error like following when trying to create and start a WebLogic Server domain admin server&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;Mar 10, 2014 9:40:58 AM EDT&amp;gt; &amp;lt;Error&amp;gt; &amp;lt;Security&amp;gt; &amp;lt;BEA-090783&amp;gt; &amp;lt;Server is Running in Development Mode and Native Library(terminalio) to read the password securely from commandline is not found.&amp;gt;&amp;lt;Mar 10, 2014 9:40:58 AM EDT&amp;gt; &amp;lt;Notice&amp;gt; &amp;lt;WebLogicServer&amp;gt; &amp;lt;BEA-000388&amp;gt; &amp;lt;JVM called WLS shutdown hook. The server will force shutdown now&amp;gt;
&amp;lt;Mar 10, 2014 9:40:58 AM EDT&amp;gt; &amp;lt;Notice&amp;gt; &amp;lt;WebLogicServer&amp;gt; &amp;lt;BEA-000365&amp;gt; &amp;lt;Server state changed to FORCE_SHUTTING_DOWN&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;After this unfriendly message, your process will just exit and won’t start at all! One quick fix for this is to try add this sys props -Dweblogic.management.allowPasswordEcho=true This will force the password prompt to echo out on console though, but at least it will start your server. And once the domain is created, you may restart it again without prompting password.&lt;/p&gt;

&lt;p&gt;Ref: https://community.oracle.com/thread/934173&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to monitor multiple JVM's on a server with VisualVM</title>
   <link href="http://localhost:4000/2014/03/15/how-to-monitor-multiple-jvms-on-a-server-with-visualvm/"/>
   <updated>2014-03-15T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/03/15/how-to-monitor-multiple-jvms-on-a-server-with-visualvm</id>
   <content type="html">&lt;p&gt;In the &lt;a href=&quot;http://saltnlight5.blogspot.com/2014/03/how-to-start-multiple-weblogic-managed.html&quot;&gt;last article&lt;/a&gt; I have shown you how to start WebLogic Server with single admin and mulitiple managed servers. After those are started, how do you go check their health status? You can use the admin’s /console webapp. But there  is also another tool that comes with all the default Oracle/Open JDK 6+: the VisualVM. I will show you how to get that up and running to monitor multiple JVM’s.&lt;/p&gt;

&lt;p&gt;On the server where you run your JVM servers, do this:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;cd into $HOME and create a file named “jstatd.all.policy” with the following:
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; grant codebase &quot;file:${java.home}/../lib/tools.jar&quot; {
    permission java.security.AllPermission;
 };
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Run this command:&lt;/p&gt;

    &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jstatd -J-Djava.security.policy=jstatd.all.policy &amp;amp;&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Now go back to your PC and open a terminal and run the following:&lt;/p&gt;

    &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jvisualvm&amp;amp;&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Inside ViaualVM, add a Remote host of your server and you should see all the JVM that started there.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Here is an example of how it looks like:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2014/visualvm.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to start multiple WebLogic managed servers</title>
   <link href="http://localhost:4000/2014/03/11/how-to-start-multiple-weblogic-managed-servers/"/>
   <updated>2014-03-11T01:00:00-04:00</updated>
   <id>http://localhost:4000/2014/03/11/how-to-start-multiple-weblogic-managed-servers</id>
   <content type="html">&lt;p&gt;The WebLogic Server docs recommand you to create a dedicated admin server and then sepearate managed servers for application deployment. Here I will show you how to create one or more managed server in the same host as the admin server.&lt;/p&gt;

&lt;p&gt;I assume you already have WLS installed with your own domain created and running. If you haven’t done this before, you may refer to my &lt;a href=&quot;http://saltnlight5.blogspot.com/2014/01/getting-started-with-weblogic-server.html&quot;&gt;previous blog on how to create and start WLS.&lt;/a&gt; After you started your domain (that’s the default admin server), then follow these steps.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Login into your http://localhost:7001/console webapp.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;On the right menu tree, click Environment &amp;gt; Servers. You should see “&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;myserver(admin)&lt;/code&gt;” already listed.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Click “New” button, enter Server Name: appserver and set Server Listen Port: 7002&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Click “Next” and then “Finish”&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Now open a new terminal and run these commands:&lt;/p&gt;
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; cd mydomain
 bin/startManagedWeblogic.sh appserver1 localhost:7001
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;You would need to enter the username and password, same as for your /console webapp. After this managed server is up and running you may send the process in the background by pressing CTRL+Z and then run bg command. Or you may use the servers/appserver/security/boot.properties file to bypass the user/password prompt on every restart of this managed server.&lt;/p&gt;

&lt;p&gt;Now you have one managed server started along with your admin server. After this you may start deploying application onto this managed server. All the webapp deployed would now accessable by its assigned port such as http://localhost:7002/yourwebapp url. You may repeat the same for however number of managed server you like to run on the same host. Try to name your server name and port number unique.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to create MySQL DataSource in WebLogic Server</title>
   <link href="http://localhost:4000/2014/03/08/how-to-create-mysql-datasource-in-weblogic-server/"/>
   <updated>2014-03-08T00:00:00-05:00</updated>
   <id>http://localhost:4000/2014/03/08/how-to-create-mysql-datasource-in-weblogic-server</id>
   <content type="html">&lt;p&gt;One cool thing about using an application server is that it allows you to create DataSource outside of your application and it can manage it along with connections pool and transaction manager etc. With WebLogic Server, it comes with quite a few built in JDBC drivers such as Oracle Database and MySQL etc ready for your use. Here I will show you how to create a MySQL DataSource.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Login into http://localhost:7001/console&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;On the left menu click Services &amp;gt; Data Sources&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;On the right, click “New” button&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Enter Name: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mysql_ds&lt;/code&gt; ; You may optionally give it an JNDI Name: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jdbc/mysql_ds&lt;/code&gt;; And then select Database Type: MySQL&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Click “Next” button and then accept default with another two “Next” buttons.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Now enter Database Name: test; Host Name: localhost; Database User Name: root; and then the password.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Click “Next” and you may optionally test your connection here.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Click “Next” and you MUST select an sever as target!&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Click “Finish”&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Now you have a DataSource ready to be used by your application on this server. You may access this by either JNDI lookup, or JPA configuration with entity manager injection.&lt;/p&gt;

&lt;p&gt;TIPS: If you do not pick a server Target in step 8, then your applicatoin will NOT able to access this Data Source! So ensure you have done this step as it’s the easy step to miss.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Quick project sharing with hg over ssh</title>
   <link href="http://localhost:4000/2014/03/04/quick-project-sharing-with-hg-over-ssh/"/>
   <updated>2014-03-04T00:00:00-05:00</updated>
   <id>http://localhost:4000/2014/03/04/quick-project-sharing-with-hg-over-ssh</id>
   <content type="html">&lt;p&gt;Mercurial is an awesome source control system! If you got a project in your PC and would like to share with your team. An easy and practical way is to put it in a common server (eg: linux) with ssh enabled.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Copy your existing project source into your server $HOME/repo/myproject&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ssh into your server and cd into $HOME/repo/myproject&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Run # hg init &amp;amp;&amp;amp; hg commit -m ‘Init added’&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Exit your server and get your project in your PC terminal and run:&lt;/p&gt;

    &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;# hg clone ssh://user_id@myserver/repo/myproject&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;That’s it. You don’t even need a web server to host it! Just tell all your teammates to do the last step on their own PC terminal. Now eveyone can make changes to your project then commit and push or pull!&lt;/p&gt;

&lt;p&gt;TIPS: If you do not place your “repo/myproject” directory under your $HOME, then you would need the double slashes when cloning! For example:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;`# hg clone ssh://user_id@myserver//usr/local/repo/myproject`
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>WebLogic Classloader Analysis Tool</title>
   <link href="http://localhost:4000/2014/03/03/weblogic-classloader-analysis-tool/"/>
   <updated>2014-03-03T00:00:00-05:00</updated>
   <id>http://localhost:4000/2014/03/03/weblogic-classloader-analysis-tool</id>
   <content type="html">&lt;p&gt;The WebLogic Server has a built-in webapp called Classloader Analysis Tool, and you may access it through http://localhost:7001/wls-cat&lt;/p&gt;

&lt;p&gt;You need to login with same user as you configured for the /console webapp. With the CAT, you may check what classes are loaded by your application in the server. This is extremely handy if your app is loading jar that’s already loaded by the server. For example, if you include your own Apache commons-lang.jar in a webapp and deploy it, you will see that org.apache.commons.lang.time.DateUtils is not from your webapp!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/posts/2014/wls-analysis-tool.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;If you ever get an error saying DateUtils#addDay() doesn’t exist or signature not match, then likely you are using different version than the one comes with WLS. In this case, you will need to add “WEB-INF/weblogic.xml” that change classloading behavior. Like this:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;weblogic-web-app&amp;gt;
    &amp;lt;container-descriptor&amp;gt;
    &amp;lt;prefer-web-inf-classes&amp;gt;true&amp;lt;/prefer-web-inf-classes&amp;gt;
    &amp;lt;/container-descriptor&amp;gt;
&amp;lt;/weblogic-web-app&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Another cool thing you can use this webapp to check is resources packaged inside any jars.  For resource file, you must use # prefix to it. For example try look up #log4j.properties and you will see where it’s loading from.&lt;/p&gt;

&lt;p&gt;You may read more about this tool and related material here: &lt;a href=&quot;http://docs.oracle.com/cd/E24329_01/web.1211/e24368/classloading.htm&quot;&gt;http://docs.oracle.com/cd/E24329_01/web.1211/e24368/classloading.htm&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Generating a war file from a plain IntelliJ web project</title>
   <link href="http://localhost:4000/2014/02/25/generating-a-war-file-from-a-plain-intellij-web-project/"/>
   <updated>2014-02-25T00:00:00-05:00</updated>
   <id>http://localhost:4000/2014/02/25/generating-a-war-file-from-a-plain-intellij-web-project</id>
   <content type="html">&lt;p&gt;Sometimes you just want to create a quick web project in IntelliJ IDEA, and you would use their wizard and with web or Java EE module as starter project. But these projects will not have Ant nor Maven script generated for you automatically, and the IDEA Build would only compile your classes. So if you want an war file generated, try the following:&lt;/p&gt;

&lt;p&gt;1) Menu: File &amp;gt; Project Structure &amp;gt; Artifacts&lt;/p&gt;

&lt;p&gt;2) Click the green + icon and create a “Web Application: Archive”, then OK&lt;/p&gt;

&lt;p&gt;3) Menu: Build &amp;gt; Build Artifacts … &amp;gt; Web: war&lt;/p&gt;

&lt;p&gt;By default it should generate it under your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;project&amp;gt;/out/artifacts/web_war.war&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Note that IntelliJ also allows you to setup “Web Application: Exploded” artifact, which great for development that run and deploy to an application server within your IDE.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Developing Java EE applications with Maven and WebLogic 12c</title>
   <link href="http://localhost:4000/2014/02/21/developing-java-ee-applications-with-maven-and-weblogic-12c/"/>
   <updated>2014-02-21T00:00:00-05:00</updated>
   <id>http://localhost:4000/2014/02/21/developing-java-ee-applications-with-maven-and-weblogic-12c</id>
   <content type="html">&lt;p&gt;The WebLogic Server 12c has very nice support for Maven now. The doc for this is kinda hidden though, so here is a direct link &lt;a href=&quot;http://docs.oracle.com/middleware/1212/core/MAVEN&quot;&gt;http://docs.oracle.com/middleware/1212/core/MAVEN&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To summarize the doc, Oracle did not provide a public Maven repository manager hosting for their server artifacts. However they do now provide a tool for you to create and populate your own. You can setup either your local repository (if you are working mostly on your own in a single computer), or you may deploy them into your own internal Maven repository manager such as Archiva or Nexus.&lt;/p&gt;

&lt;p&gt;Here I would show how the local repository is done. First step is use a maven plugin provided by WLS to populate the repository. I am using a MacOSX for this demo and my WLS is installed in $HOME/apps/wls12120. If you are on Windows, you may install it under C:/apps/wls12120.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cd $HOME/apps/wls12120/oracle_common/plugins/maven/com/oracle/maven/oracle-maven-sync/12.1.2/

$ mvn install:install-file -DpomFile=oracle-maven-sync.12.1.2.pom -Dfile=oracle-maven-sync.12.1.2.jar

$ mvn com.oracle.maven:oracle-maven-sync:push -Doracle-maven-sync.oracleHome=$HOME/apps/wls12120 -Doracle-maven-sync.testingOnly=false
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The artifacts are placed under your local $HOME/.m2/repository/com/oracle. Now you may use Maven to build Java EE application with these WebLogic artifact as dependencies. Not only these are available, the push also populated some additional maven plugins that helps development more easy. For example, you can generate a template project using their archetype plugin.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cd $HOME

$ mvn archetype:generate \

    -DarchetypeGroupId=com.oracle.weblogic.archetype \

    -DarchetypeArtifactId=basic-webapp \

    -DarchetypeVersion=12.1.2-0-0 \

    -DgroupId=org.mycompany \

    -DartifactId=my-basic-webapp-project \

    -Dversion=1.0-SNAPSHOT
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Type ‘Y’ to confirm to finish. Notice that pom.xml it generated; it is using the “javax:javaee-web-api:6.0:provided” dependency. This is working because we setup the repository earlier. Now you may build it.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cd my-basic-webapp-project

$ mvn package
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;After this build you should have the war file under the target directory. You may manually copy and deploy this into your WebLogic server domain. Or you may continue to configure the maven pom to do this all with maven. Here is how I do it. Edit the my-basic-webapp-project/pom.xml file and replace the weblogic-maven-plugin plugin like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &amp;lt;plugin&amp;gt;

    &amp;lt;groupId&amp;gt;com.oracle.weblogic&amp;lt;/groupId&amp;gt; 

    &amp;lt;artifactId&amp;gt;weblogic-maven-plugin&amp;lt;/artifactId&amp;gt; 

    &amp;lt;version&amp;gt;12.1.2-0-0&amp;lt;/version&amp;gt; 

    &amp;lt;configuration&amp;gt; 

      &amp;lt;middlewareHome&amp;gt;${oracleMiddlewareHome}&amp;lt;/middlewareHome&amp;gt;

      &amp;lt;adminurl&amp;gt;${oracleServerUrl}&amp;lt;/adminurl&amp;gt;

      &amp;lt;user&amp;gt;${oracleUsername}&amp;lt;/user&amp;gt; 

      &amp;lt;password&amp;gt;${oraclePassword}&amp;lt;/password&amp;gt;

      &amp;lt;source&amp;gt;${project.build.directory}/${project.build.finalName}.${project.packaging}&amp;lt;/source&amp;gt;

      &amp;lt;targets&amp;gt;${oracleServerName}&amp;lt;/targets&amp;gt;

      &amp;lt;verbose&amp;gt;true&amp;lt;/verbose&amp;gt; 

      &amp;lt;name&amp;gt;${project.build.finalName}&amp;lt;/name&amp;gt;

    &amp;lt;/configuration&amp;gt;

  &amp;lt;/plugin&amp;gt;  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With this change, you may deploy the webapp into WebLogic server (well, assuming you already started your “mydomain” with “myserver” server running locally. See my previous blog for instructions)&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cd my-basic-webapp-project

$ mvn weblogic:deploy -DoracleMiddlewareHome=$HOME/apps/wls12120 -DoracleServerName=myserver -DoracleUsername=admin -DoraclePassword=admin123
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;After the “BUILD SUCCESS” message, you may visit the http://localhost:7001/basicWebapp URL.&lt;/p&gt;

&lt;p&gt;Revisit the WLS doc again and you will find that they also provide other project templates (Maven calls these archetypes) for building EJB, MDB, or WebService projects. These should help you get your EE projects started quickly.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Using Intellij IDEA 12 for WebLogic Server 12c</title>
   <link href="http://localhost:4000/2014/02/01/using-intellij-idea-12-for-weblogic-server-12c/"/>
   <updated>2014-02-01T00:00:00-05:00</updated>
   <id>http://localhost:4000/2014/02/01/using-intellij-idea-12-for-weblogic-server-12c</id>
   <content type="html">&lt;p&gt;If you want to explore the latest EE features, you would need WebLogic Server 12c. However if you still have the IDEA 12 Ultimate edition, you will quickly find that it only supports up to WebLogic 
Server 11g (10.x)! However you can still make your IDEA 12 U to work with WLS 12c, and all you need is an extra “registry.xml” file under WLS home directory (eg: C:/apps/wls12120/registry.xml). This file will allow the IDEA to pickup and recognize your latest WLS 12c installation.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;bea-product-information&amp;gt;
  &amp;lt;host home=&quot;C:\apps\wls12120&quot; name=&quot;${env.HOST}&quot;&amp;gt;
    &amp;lt;product format=&quot;1.0&quot; name=&quot;WebLogic Platform&quot;&amp;gt;
      &amp;lt;release level=&quot;12.0&quot;
        ServicePackLevel=&quot;6&quot; PatchLevel=&quot;0&quot;
        Status=&quot;installed&quot; BeaProgramGroup=&quot;BEA WebLogic Platform 12.0&quot; StartMenu=&quot;&quot;
        InstallTime=&quot;@INSTALL_TIME@&quot;
        InstallDir=&quot;C:\apps\wls12120\wlserver&quot;
        JavaHome=&quot;C:\apps\jdk7&quot; JavaVersion=&quot;1.7.0&quot; JavaVendor=&quot;@JAVA_VENDOR@&quot;&amp;gt;
        &amp;lt;component name=&quot;WebLogic Server&quot; version=&quot;12.1.2.0&quot;&amp;gt;
          &amp;lt;component name=&quot;Server&quot;/&amp;gt;
          &amp;lt;component name=&quot;Server Examples&quot;/&amp;gt;
        &amp;lt;/component&amp;gt;
     &amp;lt;/release&amp;gt;
    &amp;lt;/product&amp;gt;
 &amp;lt;/host&amp;gt;
&amp;lt;/bea-product-information&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I have learned this from reading the IntelliJ forum. Also note that the latest IDEA 13 will support WebLogic Server 12c out of the box now.&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>Getting started with Intellij IDEA and WebLogic Server</title>
   <link href="http://localhost:4000/2014/01/31/getting-started-with-intellij-idea-and-weblogic-server/"/>
   <updated>2014-01-31T00:00:00-05:00</updated>
   <id>http://localhost:4000/2014/01/31/getting-started-with-intellij-idea-and-weblogic-server</id>
   <content type="html">&lt;p&gt;Before starting, you would need the Ultimate version of IDEA to run WebLogic Server (yes, the paid version or the 30 days trial). The Community edition of IDEA will not support Application Server deployment.&lt;/p&gt;

&lt;p&gt;I also assume you have already setup WebLogic Server and a user domain as per my &lt;a href=&quot;http://saltnlight5.blogspot.com/2014/01/getting-started-with-weblogic-server.html&quot;&gt;previous blog instructions&lt;/a&gt;. So now let’s setup the IDE to boost your development.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Create a simple HelloWorld web application in IDEA.&lt;/li&gt;
  &lt;li&gt;For your HelloWorld, you can go into the Project Settings &amp;gt; Artifacts, and add “web:war exploded” entry for your application. You will add this into your app server later.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Ensure you have added the Application Server Views plugin with WebLogic Server. (It’s under Settings &amp;gt; IDE Settings &amp;gt; Application Server)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Click + and enter Name: WebLogic 12.1.2&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;WebLogic Home: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;C:\apps\wls12120&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Back to your editor, select Menu: Run &amp;gt; Edit Configuration&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Click + and add “WebLogic Server” &amp;gt; Local&lt;/li&gt;
  &lt;li&gt;Name: WLS&lt;/li&gt;
  &lt;li&gt;On Server tab, ensure DomainPath is set: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;C:\apps\wls12120\mydomain &lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;On Deployment tab, select “web:war exploded” for your HelloWorld project.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Click OK&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Now Menu: Run &amp;gt; “Run WLS”&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Your WebLogic Server should now start and running your web application inside. You may visit the browser on http://localhost:7001/web_war_exploded&lt;/p&gt;

&lt;p&gt;Some goodies with Intellij IDEA and WLS are:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Redeploy WAR only without restarting server&lt;/li&gt;
  &lt;li&gt;Deploy application in exploded mode and have IDE auto make and sync&lt;/li&gt;
  &lt;li&gt;Debug application with server running within IDE&lt;/li&gt;
  &lt;li&gt;Full control on server settings&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;NOTE: As noted in previous blog, if you do not set MW_HOME as system variable, then you must add this in IDEA’s Run Configuration. Or you edit your “mydomain/bin/startWebLogic.cmd” and “stopWebLogic.cmd” scripts directly.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Getting started with WebLogic Server</title>
   <link href="http://localhost:4000/2014/01/30/getting-started-with-weblogic-server/"/>
   <updated>2014-01-30T00:00:00-05:00</updated>
   <id>http://localhost:4000/2014/01/30/getting-started-with-weblogic-server</id>
   <content type="html">&lt;p&gt;Here are some quick tips on how to get started with WebLogic Server on Windows OS:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Download wls1212.zip from http://www.oracle.com/technetwork/middleware/weblogic/downloads/index.html&lt;/li&gt;
  &lt;li&gt;Unzip it under &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;C:\apps\wls12120&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;set MW_HOME=C:\apps\wls12120&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;set JAVA_HOME=C:\apps\jdk1.7.0_51&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cd C:\apps\wls12120&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;configure.cmd&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mkdir user_projects\domains\mydomain&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cd user_projects\domains\mydomain&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;%JAVA_HOME%\bin\java -Xmx1024m -XX:MaxPermSize=256m weblogic.Server&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;By default, the last step should create a domain with all the nessary files in your current working directory. It will also prompt you to create a config.xml (enter ‘y’ to continue) and then prompting for a username and password to manage the server. Optionally you may also setup username/password part by using additional sys props like this:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-Dweblogic.management.username=weblogic -Dweblogic.management.password=Welcome1&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Use CTRL+C to stop the server. The next time you start, you can just invoke “mydomain\bin\startWebLogic.cmd”&lt;/p&gt;

&lt;p&gt;TIPS1: If you omit &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-Xmx1024m -XX:MaxPermSize=256m&lt;/code&gt; you will likely can start the server but as soon as you activate the /console webapp, you will run into out of memory issue.&lt;/p&gt;

&lt;p&gt;TIPS2: If you have access, try to add Windows Environment variables for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MW_HOME&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;JAVA_HOME&lt;/code&gt; into your system. If not, then you can easily add it into “&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mydomain\bin\setDomainEnv.cmd&lt;/code&gt;” as well (it’s generated so you can edit all you like.) Without these two variables, you will likely get a class not found error.&lt;/p&gt;

&lt;p&gt;TIPS3: The default server name created by this initial setup is called myserver. If you like to name it something else, then add sys props such as this: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-Dweblogic.Name=admin-server &lt;/code&gt;&lt;/p&gt;

&lt;p&gt;TIPS4: To change the domain name from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mydomain&lt;/code&gt; to something else, use: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-Dweblogic.Domain=dev-domain&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;TIPS5: The default admin server listening port is 7001. To change this, use: -Dweblogic.ListenPort=7002&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Exploring Spring Controller with Spring Form Tag</title>
   <link href="http://localhost:4000/2013/10/29/exploring-spring-controller-with-spring-form-tag/"/>
   <updated>2013-10-29T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/10/29/exploring-spring-controller-with-spring-form-tag</id>
   <content type="html">&lt;p&gt;In the past &lt;a href=&quot;http://saltnlight5.blogspot.com/2013/10/exploring-spring-controller-with-jstl.html&quot;&gt;article&lt;/a&gt;, I have shown you how to process an plain HTML form with Spring controller. But a more powerful way to process form is to use Spring’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@ModelAttribute&lt;/code&gt; and its &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;spring:form&lt;/code&gt; tags. I will show you how to get that started here by modifying last article’s project setup. We will simply modify the Comment form and controller to use this feature.&lt;/p&gt;

&lt;p&gt;In the same project, modify the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/webapp/comment.jsp&lt;/code&gt; view file into this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;%@ taglib prefix=&quot;spring&quot; uri=&quot;http://www.springframework.org/tags/form&quot; %&amp;gt;
&amp;lt;spring:form modelAttribute=&quot;comment&quot;&amp;gt;
  &amp;lt;table&amp;gt;
    &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;&amp;lt;spring:textarea path=&quot;text&quot; rows=&quot;20&quot; cols=&quot;80&quot;/&amp;gt;&amp;lt;/td&amp;gt;
    &amp;lt;/tr&amp;gt;
    &amp;lt;tr&amp;gt;
        &amp;lt;td colspan=&quot;2&quot;&amp;gt;
        &amp;lt;input type=&quot;submit&quot; value=&quot;Post&quot;/&amp;gt;
        &amp;lt;/td&amp;gt;
    &amp;lt;/tr&amp;gt;
  &amp;lt;/table&amp;gt;
&amp;lt;/spring:form&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This view now use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;spring:form&lt;/code&gt; tag to render the comment form instead of plain HTML. I have only shown you one element here, but the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;spring:form&lt;/code&gt; tag library also comes with all the matching HTML form elements that helps you quickly render the form with data binded. This automatically triggers the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CommentController&lt;/code&gt; when you submit. We will need to modify that to capture the form.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package springweb.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.ModelAndView;
import springweb.data.Comment;
import springweb.data.CommentService;

import javax.servlet.http.HttpServletRequest;
import java.util.List;

@Controller
public class CommentController {

    @Autowired
    private CommentService commentService;

    @RequestMapping(value=&quot;/comments&quot;)
    public ModelAndView comments() {
        List&amp;lt;Comment&amp;gt; comments = commentService.findComments();
        ModelAndView result = new ModelAndView(&quot;/comments&quot;);
        result.addObject(&quot;comments&quot;, comments);
        return result;
    }

    @ModelAttribute(&quot;comment&quot;)
    public Comment createFormModelAttribute() {
        return Comment.create(&quot;&quot;);
    }

    @RequestMapping(value=&quot;/comment&quot;)
    public String comment() {
        return &quot;comment&quot;;
    }

    @RequestMapping(value=&quot;/comment&quot;, method = RequestMethod.POST)
    public ModelAndView postComment(HttpServletRequest req,
                                @ModelAttribute(&quot;comment&quot;) Comment comment) {
        String fromUrl = req.getRequestURI();
        String user = req.getRemoteUser();
        String userIp = req.getRemoteAddr();
        comment.setFromUserIp(userIp);
        comment.setFromUser(user);
        comment.setFromUrl(fromUrl);
        commentService.insert(comment);
        ModelAndView result = new ModelAndView(&quot;comment-posted&quot;);
        result.addObject(&quot;comment&quot;, comment);
        return result;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The difference in this controller compare to the old one is we used &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@ModelAttribute&lt;/code&gt; with an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;form&lt;/code&gt; object (or Spring calls it a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;command&lt;/code&gt; object.) We can name it, which I called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;comment&lt;/code&gt; here. It’s just a java POJO class, nothing special. But it is used to capture all the form input and then pass to Controller, which is called data binding. Notice that it will instanciate by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;createFormModelAttribute()&lt;/code&gt; method as you request the form view first. If you pre-populate the pojo with text, then it will automatically shows in the form! When user submit the controller will process in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postComment()&lt;/code&gt; method, and the form object is re-populated with new form input again for processing. This allows you to work with form in pure Object style, and in many ways, it’s shorter and cleaner compare to plain HTML form.&lt;/p&gt;

&lt;p&gt;There are much to the Spring MVC form processing. One powerful feature is it able to help you orgainze the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;form&lt;/code&gt; object validation and collect the error messages. Spring also helps localize your error message text etc. You may read more on their reference doc.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Exploring Spring Controller with JSTL view</title>
   <link href="http://localhost:4000/2013/10/16/exploring-spring-controller-with-jstl-view/"/>
   <updated>2013-10-16T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/10/16/exploring-spring-controller-with-jstl-view</id>
   <content type="html">&lt;p&gt;Let’s improve &lt;a href=&quot;http://saltnlight5.blogspot.com/2013/10/getting-started-with-spring-jdbc-in-web.html&quot;&gt;our previous Spring JDBC application&lt;/a&gt; with some more exploration on Spring MVC’s Controller development. I will show another exercise of writing a new Controller that processes a HTML form and use JSTL tags in JSP view pages.&lt;/p&gt;

&lt;p&gt;To enable JSTL in Spring MVC application, you would need to add the following to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WebAppConfig&lt;/code&gt; config class. Let’s move it outside of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WebApp.java&lt;/code&gt; and into it’s own top level class file in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/java/springweb/WebAppConfig.java&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package springweb;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;
import org.springframework.web.servlet.view.InternalResourceViewResolver;

@Configuration
@EnableWebMvc
@ComponentScan(&quot;springweb.controller&quot;)
public class WebAppConfig {
    @Bean
    public InternalResourceViewResolver viewResolver() {
        InternalResourceViewResolver result = new InternalResourceViewResolver();
        result.setPrefix(&quot;/&quot;);
        result.setSuffix(&quot;.jsp&quot;);
        return result;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Inside the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;InternalResourceViewResolver&lt;/code&gt; bean, you define where to find your JSP pages that may have JSTL tags in them. The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;prefix&lt;/code&gt; setter is a path in relative to your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/webapp&lt;/code&gt; location. This allow you to hide your JSP files completely if you want to. For example, by setting it to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&quot;/WEB-INF/jsp&quot;&lt;/code&gt; then you may move and store all JSP files into &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/webapp/WEB-INF/jsp&lt;/code&gt; which is private in the web application. The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;suffix&lt;/code&gt; is just the file extension. These two values allow you to return a view name inside the controller with just the basename of your JSP file, which can be short as “/myform” or “/index” etc.&lt;/p&gt;

&lt;p&gt;If you are to use Tomcat as your web container, you would need to add JSTL jar dependency as well, since the Tomcat server doesn’t come with standard tag library! So add this into the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pom.xml&lt;/code&gt; file now.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;javax.servlet&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;jstl&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;1.2&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While you’re at the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pom.xml&lt;/code&gt; file, you might want to add the Tomcat maven plugin so you can type less in command line when running your web application.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;project&amp;gt;
...
    &amp;lt;build&amp;gt;
        &amp;lt;plugins&amp;gt;
            &amp;lt;plugin&amp;gt;
                &amp;lt;groupId&amp;gt;org.apache.tomcat.maven&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;tomcat7-maven-plugin&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;2.1&amp;lt;/version&amp;gt;
            &amp;lt;/plugin&amp;gt;
        &amp;lt;/plugins&amp;gt;
    &amp;lt;/build&amp;gt;
...
&amp;lt;/project&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With that, you should able to run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mvn tomcat7:run&lt;/code&gt; in root of your project without plugin prefix.&lt;/p&gt;

&lt;p&gt;So what does JSTL bring to your application? Well, quite a bit actually. It lets you use some standard JSP tags that’s frequently used when writing JSP views. I will demonstrate this with a set of Controller and views to capture user comments from the application. Note that I will try to show you how to work with Spring Controller in the most basic way only. The Spring actually comes with a custom &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;form&lt;/code&gt; JSP tag that is much more powerful to use. I will reserve that as another article in another time. Today let us focus on learning more about basic Spring Controller and JSTL, and a bit more on Spring JDBC data service as well.&lt;/p&gt;

&lt;p&gt;We want to capture user comment, so let’s add a database table to store that information. Add the following DDL into your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/resources/schema.sql&lt;/code&gt; file. Again, this is for H2 database per last article project setup.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CREATE TABLE COMMENT (
  ID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  TEXT VARCHAR(10240) NOT NULL,
  FROM_USER VARCHAR(15) NULL,
  FROM_USER_IP VARCHAR(15) NULL,
  FROM_URL VARCHAR(1024) NULL,
  TAG VARCHAR(1024) NULL,
  TS DATETIME NOT NULL
);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This time, we will write a data model class to match this table. Let’s add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/java/springweb/data/Comment.java&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package springweb.data;

import java.util.Date;

public class Comment {
    Long id;
    String text;
    String fromUrl;
    String fromUser;
    String fromUserIp;
    String tag;
    Date ts;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getText() {
        return text;
    }

    public void setText(String text) {
        this.text = text;
    }

    public String getFromUrl() {
        return fromUrl;
    }

    public void setFromUrl(String fromUrl) {
        this.fromUrl = fromUrl;
    }

    public String getFromUser() {
        return fromUser;
    }

    public void setFromUser(String fromUser) {
        this.fromUser = fromUser;
    }

    public String getFromUserIp() {
        return fromUserIp;
    }

    public void setFromUserIp(String fromUserIp) {
        this.fromUserIp = fromUserIp;
    }

    public String getTag() {
        return tag;
    }

    public void setTag(String tag) {
        this.tag = tag;
    }

    public Date getTs() {
        return ts;
    }

    public void setTs(Date ts) {
        this.ts = ts;
    }

    private String getTrimedComment(int maxLen) {
        if (text == null)
            return null;
        if (text.length() &amp;lt;= maxLen)
            return text;
        return text.substring(0, maxLen);
    }

    @Override
    public String toString() {
        return &quot;Comment{&quot; +
                &quot;id=&quot; + id +
                &quot;, ts=&quot; + ts +
                &quot;, text='&quot; + getTrimedComment(12) + '\'' +
                '}';
    }

    public static Comment create(String commentText) {
        Comment result = new Comment();
        result.setText(commentText);
        result.setTs(new Date());
        return result;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Just as previous artcicle, we will write a data service to handle insert and retrieve of the data model. We add a new &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/java/springweb/data/CommentService.java&lt;/code&gt; file&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package springweb.data;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.BeanPropertyRowMapper;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.jdbc.core.simple.SimpleJdbcInsert;
import org.springframework.stereotype.Repository;

import javax.sql.DataSource;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

@Repository
public class CommentService {
    public static Log LOG = LogFactory.getLog(CommentService.class);

    private JdbcTemplate jdbcTemplate;
    private SimpleJdbcInsert insertActor;
    private RowMapper&amp;lt;Comment&amp;gt; commentBeanRowMapper = new BeanPropertyRowMapper&amp;lt;Comment&amp;gt;(Comment.class);

    @Autowired
    public void setDataSource(DataSource dataSource) {
        this.jdbcTemplate = new JdbcTemplate(dataSource);
        this.insertActor = new SimpleJdbcInsert(dataSource)
            .withTableName(&quot;COMMENT&quot;)
            .usingGeneratedKeyColumns(&quot;ID&quot;);
    }

    public void insert(Comment comment) {
        LOG.info(&quot;Inserting Comment + &quot; + comment);

        Map&amp;lt;String, Object&amp;gt; parameters = new HashMap&amp;lt;String, Object&amp;gt;(2);
        parameters.put(&quot;TEXT&quot;, comment.getText());
        parameters.put(&quot;FROM_USER&quot;, comment.getFromUser());
        parameters.put(&quot;FROM_USER_IP&quot;, comment.getFromUserIp());
        parameters.put(&quot;FROM_URL&quot;, comment.getFromUrl());
        parameters.put(&quot;TAG&quot;, comment.getTag());
        parameters.put(&quot;TS&quot;, comment.getTs());
        Number newId = insertActor.executeAndReturnKey(parameters);
        comment.setId(newId.longValue());

        LOG.info(&quot;New Comment inserted. Id=&quot; + comment.getId());
    }

    public List&amp;lt;Comment&amp;gt; findComments() {
        String sql = &quot;SELECT &quot; +
                &quot;ID as id, &quot; +
                &quot;TEXT as text, &quot; +
                &quot;TAG as tag, &quot; +
                &quot;TS as ts, &quot; +
                &quot;FROM_USER as fromUser, &quot; +
                &quot;FROM_USER_IP as fromUserIp, &quot; +
                &quot;FROM_URL as fromUrl &quot; +
                &quot;FROM COMMENT ORDER BY TS&quot;;
        List&amp;lt;Comment&amp;gt; result = jdbcTemplate.query(sql, commentBeanRowMapper);
        LOG.info(&quot;Found &quot; + result.size() + &quot; Comment records.&quot;);
        return result;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since we did not use any fancy ORM but just plain JDBC, we will have to write SQL in the data service. But thanks to Spring goodies, it makes life much easier with helpers such as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SimpleJdbcInsert&lt;/code&gt;, which handles DB insert and retrieval of auto generated key etc. And also notice that in query, we use the Spring’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;BeanPropertyRowMapper&lt;/code&gt; to automatically convert JDBC resultset into a java bean &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Comment&lt;/code&gt; object! Simple, direct and quick.&lt;/p&gt;

&lt;p&gt;Now we add the Spring controller in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/java/springweb/controller/CommentController.java&lt;/code&gt; to handle web requests.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package springweb.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.ModelAndView;
import springweb.data.Comment;
import springweb.data.CommentService;

import javax.servlet.http.HttpServletRequest;
import java.util.List;

@Controller
public class CommentController {

    @Autowired
    private CommentService commentService;

    @RequestMapping(value=&quot;/comments&quot;)
    public ModelAndView comments() {
        List&amp;lt;Comment&amp;gt; comments = commentService.findComments();
        ModelAndView result = new ModelAndView(&quot;/comments&quot;);
        result.addObject(&quot;comments&quot;, comments);
        return result;
    }

    @RequestMapping(value=&quot;/comment&quot;)
    public String comment() {
        return &quot;comment&quot;;
    }

    @RequestMapping(value=&quot;/comment&quot;, method = RequestMethod.POST)
    public ModelAndView postComment(HttpServletRequest req, @RequestParam String commentText) {
        String fromUrl = req.getRequestURI();
        String user = req.getRemoteUser();
        String userIp = req.getRemoteAddr();
        Comment comment = Comment.create(commentText);
        comment.setFromUserIp(userIp);
        comment.setFromUser(user);
        comment.setFromUrl(fromUrl);
        commentService.insert(comment);
        ModelAndView result = new ModelAndView(&quot;comment-posted&quot;);
        result.addObject(&quot;comment&quot;, comment);
        return result;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In this controller we map &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/comment&lt;/code&gt; URL to handle display of the HTML form, which returns the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;comment.jsp&lt;/code&gt; view. The method default to handle a HTTP &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GET&lt;/code&gt;. Note that we remapped same &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/comment&lt;/code&gt; URL to handle HTTP &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;POST&lt;/code&gt; on a separated &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postComment()&lt;/code&gt; method! See how clean the Spring Controller can be in this demo to handle HTTP request. Pay very close attention to the parameters declared in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;postComment()&lt;/code&gt; method. Spring automatically handles the HTTP request object and map to your method just based upon the types you declared! On some cases you need to be explicit with the help of annotation such as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@RequestParam&lt;/code&gt;, but Spring does the parsing of HTTP request and extraction for you! This saves you tons of repeated boiler plate code if we were to write a direct Servlet code.&lt;/p&gt;

&lt;p&gt;Now let’s see the view and how to use JSTL. The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/comments&lt;/code&gt; URL is mapped to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/webapp/comments.jsp&lt;/code&gt; view file, which will list all &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Comment&lt;/code&gt; model objects.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&amp;gt;
&amp;lt;c:choose&amp;gt;
&amp;lt;c:when test=&quot;${empty comments}&quot;&amp;gt;
    &amp;lt;p&amp;gt;There are no comments in system yet.&amp;lt;/p&amp;gt;
&amp;lt;/c:when&amp;gt;
&amp;lt;c:otherwise&amp;gt;
    &amp;lt;table border=&quot;1&quot;&amp;gt;
    &amp;lt;tr&amp;gt;
        &amp;lt;td&amp;gt;INDEX&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;TIME&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;FROM&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;COMMENT&amp;lt;/td&amp;gt;
    &amp;lt;/tr&amp;gt;
    &amp;lt;c:forEach items=&quot;${comments}&quot; var=&quot;comment&quot; varStatus=&quot;status&quot;&amp;gt;
    &amp;lt;tr valign=&quot;top&quot;&amp;gt;
        &amp;lt;td&amp;gt;${status.index}&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;${comment.ts}&amp;lt;/td&amp;gt;
        &amp;lt;td&amp;gt;${comment.fromUserIp}&amp;lt;/td&amp;gt;
        &amp;lt;%-- The c:out will escape html/xml characters. --%&amp;gt;
        &amp;lt;td&amp;gt;&amp;lt;pre&amp;gt;&amp;lt;c:out value=&quot;${comment.text}&quot;/&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;/td&amp;gt;
    &amp;lt;/tr&amp;gt;
    &amp;lt;/c:forEach&amp;gt;
    &amp;lt;/table&amp;gt;
&amp;lt;/c:otherwise&amp;gt;
&amp;lt;/c:choose&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Pretty standard stuff on JSTL. Next is the HTML form to post comment in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/webapp/comment.jsp&lt;/code&gt; file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;form action=&quot;comment&quot; method=&quot;POST&quot;&amp;gt;
&amp;lt;textarea name=&quot;commentText&quot; rows=&quot;20&quot; cols=&quot;80&quot;&amp;gt;&amp;lt;/textarea&amp;gt;
&amp;lt;br/&amp;gt;
&amp;lt;input type=&quot;submit&quot; value=&quot;Post&quot;/&amp;gt;
&amp;lt;/form&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When form is posted and processed successful, we simply return to a new page in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/webapp/comment-posted.jsp&lt;/code&gt; file as output.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;p&amp;gt;Your comment has been posted. Comment ID=${comment.id}&amp;lt;/p&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you’ve done these right, you should able to run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mvn tomcat7:run&lt;/code&gt; and browse &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://localhost:8080/spring-web-annotation/comment&lt;/code&gt; to see the form. Go to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/comments&lt;/code&gt; URL to verify all the comments posted.&lt;/p&gt;

&lt;p&gt;Note that despite I used Spring Controller as backend, all the views are in basic JSTL, and even the form are just basic HTML elements! I did this so you can see how flexible Spring Controller can be.&lt;/p&gt;

&lt;p&gt;I know these are lot of code to post as a blog article today, but I wanted to be complete and try to show a  working demo with tutorial notes. I choose to make it into a single post with file content instead of having you download a project somewhere else. It makes my notes and explanation easier to match onto the code.&lt;/p&gt;

&lt;p&gt;And that will conclude our tutorial for today. Please leave a note if you find this helpful.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Getting started with Spring JDBC in a web application</title>
   <link href="http://localhost:4000/2013/10/09/getting-started-with-spring-jdbc-in-a-web-application/"/>
   <updated>2013-10-09T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/10/09/getting-started-with-spring-jdbc-in-a-web-application</id>
   <content type="html">&lt;p&gt;I have shown you how to setup a &lt;a href=&quot;http://saltnlight5.blogspot.com/2013/10/getting-started-with-annotation-based.html&quot;&gt;basic Spring 3 MVC web application&lt;/a&gt; in my previous article. Reusing that project setup as template, I will show you how to enhance it to work with JDBC. With this you can store and retrieve data from database. We will add a new controller and a data service through Spring so you can see how Spring injection and annotation configuration works together.&lt;/p&gt;

&lt;p&gt;A direct JDBC based application is easy to setup in comparison to a full ORM such as Hibernate. You don’t need to worry AOP, TranactionManager, Entity mapping and full array of other configurations. On top of the JDK’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;java.jdbc&lt;/code&gt; API, the Spring comes with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;spring-jdbc&lt;/code&gt; module that can boots your productively with their well known &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;JdbcTemplate&lt;/code&gt; class. Let’s explore how this can be setup and run as web application.&lt;/p&gt;

&lt;h2 id=&quot;getting-started-and-project-setup&quot;&gt;Getting started and project setup&lt;/h2&gt;

&lt;p&gt;For demo purpose, I will use the in-memory version of H2Database as JDBC store. It’s simple to use and setup. And if you decided to use their FILE or TCP based database, you would simply have to re-set the datasource, and you may continue to explore more.&lt;/p&gt;

&lt;p&gt;We will start by adding new dependencies to your existing &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;spring-web-annotation/pom.xml&lt;/code&gt; file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &amp;lt;dependency&amp;gt;
   &amp;lt;groupId&amp;gt;com.h2database&amp;lt;/groupId&amp;gt;
   &amp;lt;artifactId&amp;gt;h2&amp;lt;/artifactId&amp;gt;
   &amp;lt;version&amp;gt;1.3.163&amp;lt;/version&amp;gt;
  &amp;lt;/dependency&amp;gt;
  &amp;lt;dependency&amp;gt;
   &amp;lt;groupId&amp;gt;org.springframework&amp;lt;/groupId&amp;gt;
   &amp;lt;artifactId&amp;gt;spring-jdbc&amp;lt;/artifactId&amp;gt;
   &amp;lt;version&amp;gt;3.2.4.RELEASE&amp;lt;/version&amp;gt;
  &amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With this, you will have access to Spring module classes for configuration. Find the previous &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/java/springweb/WebApp.java&lt;/code&gt; file in your existing project and add what’s new compare to below:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package springweb;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseBuilder;
import org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseType;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;
import org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;

import javax.sql.DataSource;

public class WebApp extends AbstractAnnotationConfigDispatcherServletInitializer {
    @Override
    protected Class&amp;lt;?&amp;gt;[] getRootConfigClasses() {
        return new Class&amp;lt;?&amp;gt;[]{ RootConfig.class };
    }

    @Override
    protected Class&amp;lt;?&amp;gt;[] getServletConfigClasses() {
        return new Class&amp;lt;?&amp;gt;[]{ WebAppConfig.class };
    }

    @Override
    protected String[] getServletMappings() {
        return new String[]{ &quot;/&quot; };
    }

    @Configuration
    @EnableWebMvc
    @ComponentScan(&quot;springweb.controller&quot;)
    public static class WebAppConfig {
    }

    @Configuration
    @ComponentScan(&quot;springweb.data&quot;)
    public static class RootConfig {
      @Bean
      public DataSource dataSource() {
        DataSource bean = new EmbeddedDatabaseBuilder()
          .setType(EmbeddedDatabaseType.H2)
          .addScript(&quot;classpath:schema.sql&quot;)
          .build();
        return bean;
      }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What’s new in here is we introduced a new &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RootConfig&lt;/code&gt; class that will be loaded inside &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;getRootConfigClasses()&lt;/code&gt; method. The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RootConfig&lt;/code&gt; is just another Spring annotation based configuration that creates a new Spring context for bean definitions. We’ve created a bean there that will run the in-memory database. The bean returned by the builder also conveniently implemented the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;javax.sql.DataSource&lt;/code&gt; interface, so we can actually inject this into any data service and start using it immediately.&lt;/p&gt;

&lt;p&gt;One more cool thing about the Spring embedded database builder is that it also runs any SQL script as part of the startup! For this demo, we will create a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PING&lt;/code&gt; table in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/resources/schema.sql&lt;/code&gt; file. This file is visible to Spring as in root of the CLASSPATH due to Maven standard source structure.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CREATE TABLE PING (
  ID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  TAG VARCHAR(1024) NOT NULL,
  TS DATETIME NOT NULL
);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That’s the datasource setup. Now notice that I did not add this datasource Spring bean definition into existing &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WebAppConfig&lt;/code&gt; class. The reason is that we want a separate Spring context to configure all service level beans, while reserving the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WebAppConfig&lt;/code&gt; for all Spring MVC related beans (such as Controller, URL mapping etc). This helps organize your bean definitions in hierarchical order of Spring contexts; with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RootConfig&lt;/code&gt; as parent and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WebAppConfig&lt;/code&gt; as child layers. This also means that all service beans in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RootConfig&lt;/code&gt; are automatically visible to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WebAppConfig&lt;/code&gt;; for the purpose of injection etc.&lt;/p&gt;

&lt;p&gt;Also notice that with separated config classes, we are able to specify two distinct packages to scan for service components; we use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;springweb.controller&lt;/code&gt; for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WebAppConfig&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;springweb.data&lt;/code&gt; for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RootConfig&lt;/code&gt;. This is important and it can save you some troubles by letting Spring auto detecting your annotation based components.&lt;/p&gt;

&lt;h2 id=&quot;creating-data-service&quot;&gt;Creating Data Service&lt;/h2&gt;

&lt;p&gt;Now it’s time we use the JDBC, so let’s write a data service class under &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/java/springweb/data/PingService.java&lt;/code&gt; file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package springweb.data;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.stereotype.Repository;

import javax.sql.DataSource;
import java.util.Date;
import java.util.List;
import java.util.Map;

@Repository
public class PingService {
    public static Log LOG = LogFactory.getLog(PingService.class);

    private JdbcTemplate jdbcTemplate;

    @Autowired
    public void setDataSource(DataSource dataSource) {
        this.jdbcTemplate = new JdbcTemplate(dataSource);
    }

    public void insert(String tag) {
        LOG.info(&quot;Inserting Ping tag: &quot; + tag);
        jdbcTemplate.update(&quot;INSERT INTO PING(TAG, TS) VALUES(?, ?)&quot;, tag, new Date());
    }

    public List&amp;lt;Map&amp;lt;String, Object&amp;gt;&amp;gt; findAllPings() {
        return jdbcTemplate.queryForList(&quot;SELECT * FROM PING ORDER BY TS&quot;);
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The service is very straight forward. I expose two methods: one for insert and one for retrieve all Ping data. Noticed that I used &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@Repository&lt;/code&gt; to indicate to Spring that this class is a component service that perform data service. Also note how we inject the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DataSource&lt;/code&gt; using a setter method, and then instantiate the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;JdbcTemplate&lt;/code&gt; as member field. From that we can take full advantage of the Spring JDBC API for query and update.&lt;/p&gt;

&lt;p&gt;A note on logging. Spring core itself uses Apache &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;common-logging&lt;/code&gt;, so I reused that API without even explicitly declare them in my &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pom.xml&lt;/code&gt;. If you want to see more details from log output, you should add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;log4j&lt;/code&gt; logger implementation to the project, and it should automatically work. I will leave that as your exercise.&lt;/p&gt;

&lt;p&gt;Next we will need to write a Controller that can bring data to web UI page. We will create this under &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/java/springweb/controller/PingController.java&lt;/code&gt; file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package springweb.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;
import springweb.data.PingService;

import java.util.List;
import java.util.Map;

@Controller
public class PingController {

    @Autowired
    private PingService pingService;

    @RequestMapping(value=&quot;/ping/{tag}&quot;, produces=&quot;text/plain&quot;)
    @ResponseBody
    public String pingTag(@PathVariable(&quot;tag&quot;) String tag) {
        pingService.insert(tag);
        return &quot;Ping tag '&quot; + tag + &quot;' has been inserted. &quot;;
    }

    @RequestMapping(value=&quot;/pings&quot;, produces=&quot;text/plain&quot;)
    @ResponseBody
    public String pings() {
        List&amp;lt;Map&amp;lt;String, Object&amp;gt;&amp;gt; result = pingService.findAllPings();
  if (result.size() == 0)
   return &quot;No record found.&quot;;

        StringBuilder sb = new StringBuilder();
        for (Map&amp;lt;String, Object&amp;gt; row : result) {
            sb.append(&quot;Ping&quot; + row).append(&quot;\n&quot;);
        }
        return sb.toString();
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In this controller, you can easily see that the Ping data is fetched and updated through our data service by injection. I’ve declared and map URL &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/ping/{tag}&lt;/code&gt; to insert Ping data into the database. Spring has this very nice shorthand syntax annotation that can extract parameter from your URL path. In this case it let user to pass a simple tag keyword to be inserted as Ping record; so we can identify the source in database.&lt;/p&gt;

&lt;p&gt;The other controller handler &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/pings&lt;/code&gt; URL is very straight forward; it simply returns all the records from PING table.&lt;/p&gt;

&lt;p&gt;For demo purpose, I choose to not use JSP as view, but to return plain text directly from the Controller. Spring let you do this by adding &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@ResponseBody&lt;/code&gt; to the handler method. Notice also we can specify the content type as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;text/plain&lt;/code&gt; as output directly using the annotation.&lt;/p&gt;

&lt;h2 id=&quot;testing&quot;&gt;Testing&lt;/h2&gt;

&lt;p&gt;To see your hard labor with above, you simply need to run the Maven tomcat plugin. The previous article has shown you an command to do that. Once you restarted it, you should able to open a browser and use these URLS for testing.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://localhost:8081/spring-web-annotation/ping/tester1&quot;&gt;http://localhost:8081/spring-web-annotation/ping/tester1&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://localhost:8081/spring-web-annotation/ping/tester2&quot;&gt;http://localhost:8081/spring-web-annotation/ping/tester2&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://localhost:8081/spring-web-annotation/ping/tester3&quot;&gt;http://localhost:8081/spring-web-annotation/ping/tester3&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://localhost:8081/spring-web-annotation/pings&quot;&gt;http://localhost:8081/spring-web-annotation/pings&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;happing-programming&quot;&gt;Happing programming&lt;/h2&gt;

&lt;p&gt;From this simple exercise, you can quickly see Spring MVC brings you many benefits; and a lot of fun in developing web application. Spring, by design principles, tends to be developers friendly, boots productivity and un-intrusively in your environment. It’s one of the reason I like to work with it a lot. I hope you enjoy this tutorial and go further explore on your own.&lt;/p&gt;

&lt;p&gt;Happy programming!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Getting started with annotation based Spring MVC web application</title>
   <link href="http://localhost:4000/2013/10/04/getting-started-with-annotation-based-spring-mvc-web-application/"/>
   <updated>2013-10-04T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/10/04/getting-started-with-annotation-based-spring-mvc-web-application</id>
   <content type="html">&lt;p&gt;Here is a minimal way to get a Spring 3 MVC project started with Maven.&lt;/p&gt;

&lt;p&gt;First create &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;spring-web-annotation/pom.xml&lt;/code&gt; file and include the Spring dependency:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;
        http://maven.apache.org/POM/4.0.0
        http://maven.apache.org/maven-v4_0_0.xsd&quot;&amp;gt;

    &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;
    &amp;lt;groupId&amp;gt;spring-web-annotation&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;spring-web-annotation&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;1.0-SNAPSHOT&amp;lt;/version&amp;gt;
    &amp;lt;packaging&amp;gt;war&amp;lt;/packaging&amp;gt;

    &amp;lt;dependencies&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;javax.servlet&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;javax.servlet-api&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;3.1.0&amp;lt;/version&amp;gt;
            &amp;lt;scope&amp;gt;provided&amp;lt;/scope&amp;gt;
        &amp;lt;/dependency&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.springframework&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;spring-webmvc&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;3.2.4.RELEASE&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
    &amp;lt;/dependencies&amp;gt;
&amp;lt;/project&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now create the Servlet 3 web initializer and the Spring annotation config for the MVC parts in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;spring-web-annotation/src/main/java/springweb/WebApp.java&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package springweb;

import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;
import org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;

public class WebApp extends AbstractAnnotationConfigDispatcherServletInitializer {
    @Override
    protected Class&amp;lt;?&amp;gt;[] getRootConfigClasses() {
        return new Class&amp;lt;?&amp;gt;[0];
    }

    @Override
    protected Class&amp;lt;?&amp;gt;[] getServletConfigClasses() {
        return new Class&amp;lt;?&amp;gt;[]{ WebAppConfig.class };
    }

    @Override
    protected String[] getServletMappings() {
        return new String[]{ &quot;/&quot; };
    }

    @Configuration
    @EnableWebMvc
    @ComponentScan(&quot;springweb.controller&quot;)
    public static class WebAppConfig {
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WebApp&lt;/code&gt; class extends Spring’s built in Servlet3 web initializer code. It allows Servlet3 container such as Tomcat7 to auto detect this web application without the need of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;web.xml&lt;/code&gt; configuration setup. Because of we do not use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;web.xml&lt;/code&gt;, we need this class to allow Spring to hook into the Servlet container to bootstrap their dispatcher servlet. Also instead of typical Spring beans xml file configuration, we now can use all annotation based using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WebAppConfig&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Noticed that I have combined the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WebAppConfig&lt;/code&gt; as inner class, but you can easily move it out as top level class in a full scale application. This is the Spring annotation version of container configuration. You can easily customize the application by adding new &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@Bean&lt;/code&gt; here.&lt;/p&gt;

&lt;p&gt;Note: Do not forget to overwrite &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;getServletMappings&lt;/code&gt; method with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&quot;/&quot;&lt;/code&gt;, or else your URL request will not direct to the Spring dispatcher for processing! A step that can easily forgotten and you might find your self chasing why Spring controllers are not working.&lt;/p&gt;

&lt;p&gt;Above are really the minmal setup you need to start a war project. Next you want to add at least one controller to have some output to verify. Create this controller file &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;spring-web-annotation/src/main/java/springweb/controller/IndexController.java&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package springweb.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class IndexController {
    @RequestMapping(value=&quot;/&quot;)
    public String index() {
        return &quot;index&quot;;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And now you would need the JSP view &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;spring-web-annotation/src/main/webapp/index.jsp&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Hello World.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now cd into &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;spring-web-annotation&lt;/code&gt; and execute &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mvn org.apache.tomcat.maven:tomcat7-maven-plugin:run&lt;/code&gt;. You should see your Spring application starting and be able to browse &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://localhost:8080/spring-web-annotation&lt;/code&gt; URL.&lt;/p&gt;

&lt;p&gt;There are lot of cool stuff you can do with Spring MVC. Checkout their awesome docs for more details.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>The Apache Camel 2.12.0 has been released!</title>
   <link href="http://localhost:4000/2013/09/10/the-apache-camel-2-12-0-has-been-released/"/>
   <updated>2013-09-10T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/09/10/the-apache-camel-2-12-0-has-been-released</id>
   <content type="html">&lt;p&gt;The Apache Camel 2.12.0 has been released! Yeh!&lt;/p&gt;

&lt;p&gt;This is a special release to me mainly because I have help fixed few   &lt;a href=&quot;https://issues.apache.org/jira/issues/?jql=project%20%3D%20CAMEL%20AND%20status%20in%20(Resolved%2C%20Closed)%20AND%20text%20~%20%22Zemian%22&quot;&gt;Jira Issues&lt;/a&gt;. :-P&lt;/p&gt;

&lt;p&gt;Among these, I have helped ported the old &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;quartz&lt;/code&gt; component into &lt;a href=&quot;http://camel.apache.org/quartz2.html&quot;&gt;quartz2&lt;/a&gt; using the new Quartz 2.0 API. As far as for Camel users concern, it should work just as old one, except it will now use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;quartz2://&lt;/code&gt; URL prefix instead. But the implementation uses Quartz2 library that’s not backward compatible with old Quartz1.8, which is very old. In addition, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;quartz2&lt;/code&gt; component now has a new option &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;deleteJob=false&lt;/code&gt; that will allow you to NOT delete the job created by Camel on shutdown, and it will also reuse existing job found with the same name in the Quartz scheduler if it exists during startup.&lt;/p&gt;

&lt;p&gt;Obviously my contribution seems tiny compare to what the &lt;a href=&quot;http://camel.apache.org/camel-2120-release.html&quot;&gt;full release&lt;/a&gt; brings you, but it’s a start in helping out the project. I am glad the Camel folks accepted these patches and found it into their release.&lt;/p&gt;

&lt;p&gt;Try out the latest Camel and see what you think.&lt;/p&gt;

&lt;p&gt;Happing programming!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Exploring Apache Camel Core - Seda Component</title>
   <link href="http://localhost:4000/2013/09/08/exploring-apache-camel-core-seda-component/"/>
   <updated>2013-09-08T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/09/08/exploring-apache-camel-core-seda-component</id>
   <content type="html">&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;seda&lt;/code&gt; component in Apache Camel is very similar to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;direct&lt;/code&gt; component that I’ve presented in previous blog, but in a asynchronous manner. To do this, it uses a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;java.util.concurrent.BlockingQueue&lt;/code&gt; as default implementation to queue up messages and disconnect from your main &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; thread and then processing the messages in a separated thread. Because of this &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;BlockingQueue&lt;/code&gt;, you need to be aware of the usage and config option.&lt;/p&gt;

&lt;p&gt;One option needs to be aware of asynchronous processing is the it default to queue size is unbound, meaning it will grow as much as your memory allowed. To cap this, set &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;size=1000&lt;/code&gt;. Let’s see an example.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package camelcoredemo;

import org.slf4j.*;
import org.apache.camel.*;
import org.apache.camel.builder.*;
import org.apache.camel.main.Main;
import java.io.*;

public class SedaDemoCamel extends Main {
    static Logger LOG = LoggerFactory.getLogger(SedaDemoCamel.class);
    public static void main(String[] args) throws Exception {
        SedaDemoCamel main = new SedaDemoCamel();
        main.enableHangupSupport();
        main.addRouteBuilder(createRouteBuilder1());
        main.addRouteBuilder(createRouteBuilder2());
        main.addRouteBuilder(createRouteBuilder3());
        main.run(args);
    }
    // The file poller route
    static RouteBuilder createRouteBuilder1() {
        return new RouteBuilder() {
            public void configure() {
                from(&quot;file://target/input?preMove=staging&amp;amp;move=.processed&quot;)
                .process(new Processor() {
                    public void process(Exchange msg) {
                        CamelContext camelContext = msg.getContext();
                        ProducerTemplate producer = camelContext.createProducerTemplate();
                        String text = msg.getIn().getBody(String.class);
                        String fileName = (String)msg.getIn().getHeader(&quot;CamelFileName&quot;);
                        boolean specialFile = fileName.endsWith(&quot;_SPECIAL.dat&quot;);
                        if (specialFile)
                            producer.sendBody(&quot;seda:specialRoute&quot;, text);
                        else
                            producer.sendBody(&quot;seda:normalRoute&quot;, text);
                    }
                });
            }
        };
    }
    // The special file processing route
    static RouteBuilder createRouteBuilder2() {
        return new RouteBuilder() {
            public void configure() {
                from(&quot;seda:specialRoute&quot;)
                .process(new Processor() {
                    public void process(Exchange msg) {
                        LOG.info(&quot;Processing special file: &quot; + msg);
                    }
                });
            }
        };
    }
    // The normal file processing route
    static RouteBuilder createRouteBuilder3() {
        return new RouteBuilder() {
            public void configure() {
                from(&quot;seda:normalRoute&quot;)
                .process(new Processor() {
                    public void process(Exchange msg) {
                        LOG.info(&quot;Processing normal file: &quot; + msg);
                    }
                });
            }
        };
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You will notice that this demo code is very similar to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;direct&lt;/code&gt; component demo, with few differences. First, we use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;seda&lt;/code&gt; endpoints. Second, in file poller, we read in the entire file content text. We do this because we are now passing to an asynchronous &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; that will runs on separate threads. The poller is configured to move the processed file into different folder right after the first &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; has ended. So we must ensure the processing &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; is not depended on the path of the File, hence we will load entire text in instead.&lt;/p&gt;

&lt;p&gt;Another interesting &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;seda&lt;/code&gt; option is you may set the number of concurrent threads to receive the messages to process them! Let’s say if your &lt;strong&gt;normal&lt;/strong&gt; files are heavy in traffic, then you can configure to use more threads on that part (default is just one thread.)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;from(&quot;seda:normalRoute?concurrentConsumers=10&quot;)
.process(new Processor() {
    public void process(Exchange msg) {
        LOG.info(&quot;Processing normal file: &quot; + msg);
    }
});
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To verify that your are running concurrently, you can easily configure your logger to display thread name. For
example with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;log4j&lt;/code&gt;, you can use this pattern:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;log4j.rootLogger=INFO, stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d %p %t [%c] - %m%n
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There are more options availabe from &lt;a href=&quot;http://camel.apache.org/seda.html&quot;&gt;Seda&lt;/a&gt; component
that you may explore.
&lt;a href=&quot;http://saltnlight5.blogspot.com/2013/08/getting-started-with-apache-camel-using.html&quot;&gt;Try it out with a Route&lt;/a&gt;
and see it for yourself.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Exploring Apache Camel Core - Direct Component</title>
   <link href="http://localhost:4000/2013/09/07/exploring-apache-camel-core-direct-component/"/>
   <updated>2013-09-07T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/09/07/exploring-apache-camel-core-direct-component</id>
   <content type="html">&lt;p&gt;The Apache Camel allows you to create multiple &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt;’s within a single &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CamelContext&lt;/code&gt; space. The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;direct&lt;/code&gt; component in Camel would allow you to bridge messages between these &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt;’s. To demonstrate this, I will create few routes and pass messages between them.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package camelcoredemo;

import org.slf4j.*;
import org.apache.camel.*;
import org.apache.camel.builder.*;
import org.apache.camel.main.Main;
import java.io.*;

public class DirectDemoCamel extends Main {
    static Logger LOG = LoggerFactory.getLogger(DirectDemoCamel.class);
    public static void main(String[] args) throws Exception {
        DirectDemoCamel main = new DirectDemoCamel();
        main.enableHangupSupport();
        main.addRouteBuilder(createRouteBuilder1());
        main.addRouteBuilder(createRouteBuilder2());
        main.addRouteBuilder(createRouteBuilder3());
        main.run(args);
    }
    // The file poller route
    static RouteBuilder createRouteBuilder1() {
        return new RouteBuilder() {
            public void configure() {
                from(&quot;file://target/input?preMove=staging&amp;amp;move=.processed&quot;)
                .process(new Processor() {
                    public void process(Exchange msg) {
                        CamelContext camelContext = msg.getContext();
                        ProducerTemplate producer = camelContext.createProducerTemplate();
                        File file = msg.getIn().getBody(File.class);
                        boolean specialFile = file.getName().endsWith(&quot;_SPECIAL.dat&quot;);
                        if (specialFile)
                            producer.send(&quot;direct:specialRoute&quot;, msg);
                        else
                            producer.send(&quot;direct:normalRoute&quot;, msg);
                    }
                });
            }
        };
    }
    // The special file processing route
    static RouteBuilder createRouteBuilder2() {
        return new RouteBuilder() {
            public void configure() {
                from(&quot;direct:specialRoute&quot;)
                .process(new Processor() {
                    public void process(Exchange msg) {
                        LOG.info(&quot;Processing special file: &quot; + msg);
                    }
                });
            }
        };
    }
    // The normal file processing route
    static RouteBuilder createRouteBuilder3() {
        return new RouteBuilder() {
            public void configure() {
                from(&quot;direct:normalRoute&quot;)
                .process(new Processor() {
                    public void process(Exchange msg) {
                        LOG.info(&quot;Processing normal file: &quot; + msg);
                    }
                });
            }
        };
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here I have created 3 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt;’s and re-used the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;file&lt;/code&gt; component I have introduced in the past. The first &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; polls a directory, and then based on the name of the file found, we send it to either to &lt;strong&gt;special&lt;/strong&gt; or &lt;strong&gt;normal&lt;/strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; for processing. Because these &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt;’s are separated, we need a bridge channel to pass the messages through, hence it’s what the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;direct&lt;/code&gt; component does. The usage is simply use any &lt;strong&gt;unique name&lt;/strong&gt; within the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CamelContext&lt;/code&gt;, and it will serve as a direct memory queue to pass messages. You may read from or send to these queues. So as you can see, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;direct&lt;/code&gt; component let you easily breakup a complex route workflow into smaller part.&lt;/p&gt;

&lt;p&gt;In above demo, I have also introduced a bit of Camel core features: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ProducerTemplate&lt;/code&gt;. Within a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CamelContext&lt;/code&gt; you may create an instance of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ProducerTemplate&lt;/code&gt; and it will allow you to send any messages to any endpoints dynamically at runtime. Usually you would probably want to store this producer object as member field instead of per each message processing. But for demo purpose, I will leave it as simple as that, and leave you as exercise to explore more on your own.&lt;/p&gt;

&lt;p&gt;There are more options availabe from &lt;a href=&quot;http://camel.apache.org/direct.html&quot;&gt;Direct&lt;/a&gt; component
that you may explore.
&lt;a href=&quot;http://saltnlight5.blogspot.com/2013/08/getting-started-with-apache-camel-using.html&quot;&gt;Try it out with a Route&lt;/a&gt;
and see it for yourself.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Exploring Apache Camel Core - File Component</title>
   <link href="http://localhost:4000/2013/09/04/exploring-apache-camel-core-file-component/"/>
   <updated>2013-09-04T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/09/04/exploring-apache-camel-core-file-component</id>
   <content type="html">&lt;p&gt;A file poller is a very useful mechanism to solve common IT problems. Camel’s built-in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;file&lt;/code&gt; component is extremely flexible, and there are many options available for configuration. Let’s cover few common usages here.&lt;/p&gt;

&lt;h2 id=&quot;polling-a-directory-for-input-files&quot;&gt;Polling a directory for input files&lt;/h2&gt;

&lt;p&gt;Here is a typical Camel &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; used to poll a directory for input files on every second.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import org.slf4j.*;
import org.apache.camel.*;
import org.apache.camel.builder.*;
import java.io.*;

public class FileRouteBuilder extends RouteBuilder {
    static Logger LOG = LoggerFactory.getLogger(FileRouteBuilder.class);
    public void configure() {
        from(&quot;file://target/input?delay=1000&quot;)
        .process(new Processor() {
            public void process(Exchange msg) {
                File file = msg.getIn().getBody(File.class);
                LOG.info(&quot;Processing file: &quot; + file);
            }
        });
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Run this with following&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mvn compile exec:java -Dexec.mainClass=org.apache.camel.main.Main -Dexec.args='-r camelcoredemo.FileRouteBuilder'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The program will begin to poll your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target/input&lt;/code&gt; folder under your current directory, and wait for incoming files. To test with input files, you would need to open another terminal, and then create some files as follow.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;echo 'Hello 1' &amp;gt; target/input/test1.txt
echo 'Hello 2' &amp;gt; target/input/test2.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You should now see the first prompt window start to picking up the files and pass to the next &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Processor&lt;/code&gt; step. In the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Processor&lt;/code&gt;, we obtain the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;File&lt;/code&gt; object from the message body. It then simply logs it’s file name. You may hit &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CTRL+C&lt;/code&gt; when you are done.&lt;/p&gt;

&lt;p&gt;There many configurable options from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;file&lt;/code&gt; componet you may use in the URL, but most of the default settings are enough to get you going as simple case above. Some of these default behavior is such that if the input folder doesn’t exists, it will create it. And when the file is done processing by the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt;, it will be moved into a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.camel&lt;/code&gt; folder. If you don’t want the file at all after processing, then set &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;delete=true&lt;/code&gt; in the URL.&lt;/p&gt;

&lt;h2 id=&quot;read-in-the-file-content-and-converting-to-different-types&quot;&gt;Read in the file content and converting to different types&lt;/h2&gt;

&lt;p&gt;By default, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;file&lt;/code&gt; component will create a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;org.apache.camel.component.file.GenericFile&lt;/code&gt; object for each file found and pass it down your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; as message body. You may retrieve all your file information through this object. Or alternatively, you may also use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Exchange&lt;/code&gt; API to auto convert the message body object to a type you expect to receive (eg: as with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;msg.getIn().getBody(File.class)&lt;/code&gt;). In above example, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;File&lt;/code&gt; is a type you expect to get from the message body, and Camel hence will try to convert it for you. The Camel uses the context’s registry space to pre-registered many &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TypeConverter&lt;/code&gt;’s that can handle most of the common data types (like Java primative etc) conversion. These &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TypeConverter&lt;/code&gt;&lt;em&gt;s&lt;/em&gt; are powerful way to make your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Processor&lt;/code&gt; more flexbile and portable.&lt;/p&gt;

&lt;p&gt;Camel will not only convert just your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;File&lt;/code&gt; object from message body, but it can also read the file content. If your files are character text based, then you can simply do this.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;        from(&quot;file://target/input?charset=UTF-8&quot;)
        .process(new Processor() {
            public void process(Exchange msg) {
                String text = msg.getIn().getBody(String.class);
                LOG.info(&quot;Processing text: &quot; + text);
            }
        });
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That’s it! Simply specify &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;String&lt;/code&gt; type, and Camel will read your file in and pass the entire file text content as body message. You may even use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;charset&lt;/code&gt; to change the encoding.&lt;/p&gt;

&lt;p&gt;If you are dealing with binary file, then simply try &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;byte[] bytes = msg.getIn().getBody(byte[].class);&lt;/code&gt; conversion instead. Pretty cool huh?&lt;/p&gt;

&lt;h2 id=&quot;polling-and-processing-large-files&quot;&gt;Polling and processing large files&lt;/h2&gt;

&lt;p&gt;When working with large files, there few options in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;file&lt;/code&gt; componet that you might want to use to ensure proper handling. For example, you might want to move the input file into a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;staging&lt;/code&gt; folder before the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; starts the processing; and when it’s done, move it to a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.completed&lt;/code&gt; folder.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;        from(&quot;file://target/input?preMove=staging&amp;amp;move=.completed&quot;)
        .process(new Processor() {
            public void process(Exchange msg) {
                File file = msg.getIn().getBody(File.class);
                LOG.info(&quot;Processing file: &quot; + file);
            }
        });
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To feed input files properly into the polling folder, it’s best if the sender generates the input files in a temporary folder first, and only when it’s ready then move it into the polling folder. This will minimize reading an incomplete file by the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; if the input file might take times to generate. Also another solution to this is to config &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;file&lt;/code&gt; endpoint to only read the polling folder when there is a signal or ready marker file exists. For example:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;        from(&quot;file://target/input?preMove=staging&amp;amp;move=.completed&amp;amp;doneFileName=ReadyFile.txt&quot;)
        .process(new Processor() {
            public void process(Exchange msg) {
                File file = msg.getIn().getBody(File.class);
                LOG.info(&quot;Processing file: &quot; + file);
            }
        });
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Above will only read the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target/input&lt;/code&gt; folder when there is a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ReadyFile.txt&lt;/code&gt; file exists. The marker file can be just an empty file, and it will be removed by Camel after polling. This solution would allow the sender to generate input files in however long time it might take.&lt;/p&gt;

&lt;p&gt;Another concern with large file processing is to avoid loading entire file content into memory for processing. To be more practical, you want to split the file into records (eg: per line) and process it one by one (or called “streaming”). Here is how you would do that using Camel.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;        from(&quot;file://target/input?preMove=staging&amp;amp;move=.completed&quot;)
        .split(body().tokenize(&quot;\n&quot;))
        .streaming()
        .process(new Processor() {
            public void process(Exchange msg) {
                String line = msg.getIn().getBody(String.class);
                LOG.info(&quot;Processing line: &quot; + line);
            }
        });
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; will allow you to process large size file without cosuming too much memory and process it line by line very efficiently.&lt;/p&gt;

&lt;h2 id=&quot;writing-messages-back-into-file&quot;&gt;Writing messages back into file&lt;/h2&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;file&lt;/code&gt; component can also be used to write messages into files. Recall that we may use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dataset&lt;/code&gt; component to generate sample messages. We will use that to feed the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; and send to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;file&lt;/code&gt; component so you can see that each message generated will be saved into a file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package camelcoredemo;

import org.slf4j.*;
import org.apache.camel.*;
import org.apache.camel.builder.*;
import org.apache.camel.main.Main;
import org.apache.camel.component.dataset.*;

public class FileDemoCamel extends Main {
    static Logger LOG = LoggerFactory.getLogger(FileDemoCamel.class);
    public static void main(String[] args) throws Exception {
        FileDemoCamel main = new FileDemoCamel();
        main.enableHangupSupport();
        main.addRouteBuilder(createRouteBuilder());
        main.bind(&quot;sampleGenerator&quot;, createDataSet());
        main.run(args);
    }
    static RouteBuilder createRouteBuilder() {
        return new RouteBuilder() {
            public void configure() {
                from(&quot;dataset://sampleGenerator&quot;)
                .to(&quot;file://target/output&quot;);
            }
        };
    }
    static DataSet createDataSet() {
        return new SimpleDataSet();
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Compile and run it&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mvn compile exec:java -Dexec.mainClass=camelcoredemo.FileDemoCamel
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Upon complete you will see that 10 files would be generated in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target/output&lt;/code&gt; folder with
file name in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ID-&amp;lt;hostname&amp;gt;-&amp;lt;unique-number&amp;gt;-&amp;lt;msg-seq-num&amp;gt;&lt;/code&gt; format.&lt;/p&gt;

&lt;p&gt;There are more options availabe from &lt;a href=&quot;http://camel.apache.org/file2.html&quot;&gt;File&lt;/a&gt; component
that you may explore.
&lt;a href=&quot;http://saltnlight5.blogspot.com/2013/08/getting-started-with-apache-camel-using.html&quot;&gt;Try it out with a Route&lt;/a&gt;
and see it for yourself.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Exploring Apache Camel Core - DataSet Component</title>
   <link href="http://localhost:4000/2013/09/03/exploring-apache-camel-core-dataset-component/"/>
   <updated>2013-09-03T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/09/03/exploring-apache-camel-core-dataset-component</id>
   <content type="html">&lt;p&gt;A good sample data generator can help you test program more throughly and help measure
the processing throughput. The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;camel-core&lt;/code&gt; comes with a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dataset&lt;/code&gt; component that can
help you do this easily. All you need is to provide a bean that implements
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;org.apache.camel.component.dataset.DataSet&lt;/code&gt; interface and bind it in
CamelContext registry. Here is an example:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package camelcoredemo;

import org.slf4j.*;
import org.apache.camel.*;
import org.apache.camel.builder.*;
import org.apache.camel.main.Main;
import org.apache.camel.component.dataset.*;

public class DataSetDemoCamel extends Main {
    static Logger LOG = LoggerFactory.getLogger(DataSetDemoCamel.class);
    public static void main(String[] args) throws Exception {
        DataSetDemoCamel main = new DataSetDemoCamel();
        main.enableHangupSupport();
        main.addRouteBuilder(createRouteBuilder());
        main.bind(&quot;sampleGenerator&quot;, createDataSet());
        main.run(args);
    }
    static RouteBuilder createRouteBuilder() {
        return new RouteBuilder() {
            public void configure() {
                from(&quot;dataset://sampleGenerator&quot;)
                .to(&quot;log://demo&quot;);
            }
        };
    }
    static DataSet createDataSet() {
        return new SimpleDataSet();
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Compile and run it.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mvn compile exec:java -Dexec.mainClass=camelcoredemo.DataSetDemoCamel
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In here we have used the built-in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;org.apache.camel.component.dataset.SimpleDataSet&lt;/code&gt;
implementation, which by default will generate 10 messages with a text body set
to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;hello&amp;gt;world!&amp;lt;/hello&amp;gt;&lt;/code&gt;. You may easily change the value, or even provide your own
implementation starting with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;org.apache.camel.component.dataset.DataSetSupport&lt;/code&gt; base
class to customize your data set.&lt;/p&gt;

&lt;h2 id=&quot;use-dataset-component-to-measure-throughput&quot;&gt;Use DataSet Component to measure throughput&lt;/h2&gt;

&lt;p&gt;One useful feature of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dataset&lt;/code&gt; component I found is using it to load test your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt;.
To do this, you have to adjust couple settings though. Let’s say if I want to load
a large text file as sample input data and feed it to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt;, and then measure its
throughout.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    static RouteBuilder createRouteBuilder() {
        return new RouteBuilder() {
            public void configure() {
                from(&quot;dataset://sampleGenerator?produceDelay=0&quot;)
                .to(&quot;log://demo?groupSize=100&quot;);
            }
        };
    }
    static DataSet createDataSet() {
        SimpleDataSet result = new SimpleDataSet();
        result.setSize(500);
        result.setDefaultBody(readFileToString(&quot;my-large-sample.txt&quot;);
        return result;
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Replace above in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Main&lt;/code&gt; class and you will notice that it will pump 500 messages
into the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt;, and it samples every 100 messages and display its throught rates. I
have to add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;produceDelay=0&lt;/code&gt; option so the generator so it will not pause between messages.
Then I have added &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;groupSize=100&lt;/code&gt; option to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;log&lt;/code&gt; component for throughput measurement.
I skipped &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;readFileToString(String)&lt;/code&gt; demo code since I assume you can easily figured that
out on your own. (Hint: checkout Apache &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;commons-io&lt;/code&gt; library.)&lt;/p&gt;

&lt;p&gt;There is another side of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dataset&lt;/code&gt; component that you may use, and that is to receive and
verify message content. You would simply use the same URL in a
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;to(url)&lt;/code&gt; line. Internally Camel would assert your message body against your original.&lt;/p&gt;

&lt;p&gt;There are more options availabe from &lt;a href=&quot;http://camel.apache.org/dataset.html&quot;&gt;DataSet&lt;/a&gt; component
that you may explore.
&lt;a href=&quot;http://saltnlight5.blogspot.com/2013/08/getting-started-with-apache-camel-using.html&quot;&gt;Try it out with a Route&lt;/a&gt;
and see it for yourself.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Exploring Apache Camel Core - Log Component</title>
   <link href="http://localhost:4000/2013/09/02/exploring-apache-camel-core-log-component/"/>
   <updated>2013-09-02T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/09/02/exploring-apache-camel-core-log-component</id>
   <content type="html">&lt;p&gt;There are many ways to log and inspect the messages as it pass through your
Camel &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt;. The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;camel-core&lt;/code&gt; comes with a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;log&lt;/code&gt; component that let
you inspect the message. So instead of write a separate
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Processor&lt;/code&gt; just to log a line as got processed, try using this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;from(&quot;timer://timer1?period=1s&quot;)
.to(&quot;log:demo&quot;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;By default, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;log&lt;/code&gt; component will record your message body content
through your logger name, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;demo&lt;/code&gt; in above case, at INFO level. Since you can give any
name, you can control the logging LEVEL anyway you like through a Camel
&lt;a href=&quot;http://saltnlight5.blogspot.com/2013/08/how-to-configure-slf4j-with-different.html&quot;&gt;SLF4J logger implementation&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;To log the message in DEBUG level, try this&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;from(&quot;timer://timer1?period=1s&quot;)
.to(&quot;log:demo?level=DEBUG&quot;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now if you use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;log4j&lt;/code&gt; as logger implementation, then ensure to add a
logger config like this.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;log4j.logger.demo = DEBUG
log4j.logger.org.apache.camel = INFO
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The Camel message may have Properties and Headers as well, so to display
these, you may add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;showAll=true&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;When you process messages that have large body text, it might be more
practical to just dislay certain number of characters. To do this, add
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;maxChars=256&lt;/code&gt; to URL.&lt;/p&gt;

&lt;h2 id=&quot;how-to-measure-camel-messages-throughput-rate&quot;&gt;How to measure Camel messages throughput rate&lt;/h2&gt;

&lt;p&gt;One of the hidden gem of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;log&lt;/code&gt; componet is its ability to log messages
throughput! You may specific group of messages to be logged, and once it
reached that count, it will print the msgs/sec rate output. To enable
this, just add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;groupSize&lt;/code&gt; option to URL.&lt;/p&gt;

&lt;p&gt;To demo this, I will create a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SampleGenerator&lt;/code&gt; bean processor
that would flood the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; with sample messages. I will use the Camel
context registry to bind the bean, and then reference it in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt;. Here
is the demo code.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package camelcoredemo;

import org.slf4j.*;
import org.apache.camel.*;
import org.apache.camel.builder.*;
import org.apache.camel.main.Main;

public class LogDemoCamel extends Main {
    static Logger LOG = LoggerFactory.getLogger(LogDemoCamel.class);
    public static void main(String[] args) throws Exception {
        LogDemoCamel main = new LogDemoCamel();
        main.enableHangupSupport();
        main.addRouteBuilder(createRouteBuilder());
        main.bind(&quot;sampleGenerator&quot;, new SampleGenerator());
        main.run(args);
    }
    static RouteBuilder createRouteBuilder() {
        return new RouteBuilder() {
            public void configure() {
                from(&quot;bean:sampleGenerator&quot;)
                .to(&quot;log://demo?groupSize=100&quot;);
            }
        };
    }
    static class SampleGenerator implements Processor{
        int count = 0;
        public void process(Exchange msg) throws Exception {
            if (count &amp;gt;= 500){
                LOG.info(&quot;Max count has reached. Do nothing.&quot;);
                Thread.sleep(Long.MAX_VALUE);
                return;
            }

            // Let's generate sample message.
            count++;
            LOG.trace(&quot;Generating sample msg #{}&quot;, count);
            msg.getOut().setBody(&quot;Sample msg&quot;);
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you should able to compile and run this demo.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mvn compile exec:java -Dexec.mainClass=camelcoredemo.LogDemoCamel
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When running this demo, you will notice the rate will be displayed on console
and how fast you can pump message to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; and to process it. This is a
very useful feature to help you measure and have a quick view on your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt;’s
capability.&lt;/p&gt;

&lt;p&gt;There are more options availabe from &lt;a href=&quot;http://camel.apache.org/log.html&quot;&gt;Log&lt;/a&gt; component
that you may explore.
&lt;a href=&quot;http://saltnlight5.blogspot.com/2013/08/getting-started-with-apache-camel-using.html&quot;&gt;Try it out with a Route&lt;/a&gt;
and see it for yourself.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Exploring Apache Camel Core - Timer Component</title>
   <link href="http://localhost:4000/2013/09/01/exploring-apache-camel-core-timer-component/"/>
   <updated>2013-09-01T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/09/01/exploring-apache-camel-core-timer-component</id>
   <content type="html">&lt;p&gt;Camel Timer is a simple and yet useful component.
It brings the JDK’s timer functionality into your camel Route with very simple config.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   from(&quot;timer://mytimer?period=1000&quot;)
    .process(new Processor() {
        public void process(Exchange msg) {
            LOG.info(&quot;Processing {}&quot;, msg);
        }
    });
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That will generate a timer event message every second. You may short hand &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1000&lt;/code&gt; with
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1s&lt;/code&gt; instead. It supports &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;m&lt;/code&gt; for minutes, or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;h&lt;/code&gt; for hours as well. Pretty handy.&lt;/p&gt;

&lt;p&gt;Another useful timer feature is that it can limit (stop) the number of timer messages after a certain
count. You simply need to add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;repeatCount&lt;/code&gt; option toward the url.&lt;/p&gt;

&lt;p&gt;Couple of properties from the event message would be useful when handling the timer
message. Here is an example how to read them.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   from(&quot;timer://mytimer?period=1s&amp;amp;repeatCount=5&quot;)
    .process(new Processor() {
        public void process(Exchange msg) {
            java.util.Date fireTime = msg.getProperty(Exchange.TIMER_FIRED_TIME, java.util.Date.class);
            int eventCount = msg.getProperty(Exchange.TIMER_COUNTER, Integer.class);
            LOG.info(&quot;We received {}th timer event that was fired on {}&quot;, eventCount, fireTime);
        }
    });
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There are more options availabe from &lt;a href=&quot;http://camel.apache.org/timer.html&quot;&gt;Timer&lt;/a&gt; component
that you may explore.
&lt;a href=&quot;http://saltnlight5.blogspot.com/2013/08/getting-started-with-apache-camel-using.html&quot;&gt;Try it out with a Route&lt;/a&gt;
and see it for yourself.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Running Maven war packaging project without pom config</title>
   <link href="http://localhost:4000/2013/08/27/running-maven-war-packaging-project-without-pom-config/"/>
   <updated>2013-08-27T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/08/27/running-maven-war-packaging-project-without-pom-config</id>
   <content type="html">&lt;p&gt;Use Jetty (latest 9.x requires JDK7)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; mvn org.eclipse.jetty:jetty-maven-plugin:run -Djetty.port=8081
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or use Jetty on JDK 6&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; mvn org.mortbay.jetty:jetty-maven-plugin:8.1.12.v20130726:run -Djetty.port=8081
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or use Tomcat&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; mvn org.apache.tomcat.maven:tomcat7-maven-plugin:run -Dmaven.tomcat.port=8081
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How to create web-app with Quartz Scheduler and logging</title>
   <link href="http://localhost:4000/2013/08/25/how-to-create-web-app-with-quartz-scheduler-and-logging/"/>
   <updated>2013-08-25T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/08/25/how-to-create-web-app-with-quartz-scheduler-and-logging</id>
   <content type="html">&lt;p&gt;I sometimes help out users in Quartz Scheduler forums. Once in a while some one would
ask how can he/she setup the Quartz inside a web application. This is actualy a fairly
simple thing to do. The library already comes with a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ServletContextListener&lt;/code&gt; that
you can use to start a Scheduler. I will show you a simple webapp example here.&lt;/p&gt;

&lt;p&gt;First create a Maven &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pom.xml&lt;/code&gt; file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=
        &quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&amp;gt;

    &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;

    &amp;lt;groupId&amp;gt;quartz-web-demo&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;quartz-web-demo&amp;lt;/artifactId&amp;gt;
    &amp;lt;packaging&amp;gt;war&amp;lt;/packaging&amp;gt;
    &amp;lt;version&amp;gt;1.0-SANPSHOT&amp;lt;/version&amp;gt;

    &amp;lt;dependencies&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.quartz-scheduler&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;quartz&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;2.2.0&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
    &amp;lt;/dependencies&amp;gt;

&amp;lt;/project&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then you need to create a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/webapp/META-INF/web.xml&lt;/code&gt; file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
 &amp;lt;web-app version=&quot;2.5&quot;
    xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=
        &quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;&amp;gt;

     &amp;lt;context-param&amp;gt;
         &amp;lt;param-name&amp;gt;quartz:config-file&amp;lt;/param-name&amp;gt;
         &amp;lt;param-value&amp;gt;quartz.properties&amp;lt;/param-value&amp;gt;
     &amp;lt;/context-param&amp;gt;
     &amp;lt;context-param&amp;gt;
         &amp;lt;param-name&amp;gt;quartz:shutdown-on-unload&amp;lt;/param-name&amp;gt;
         &amp;lt;param-value&amp;gt;true&amp;lt;/param-value&amp;gt;
     &amp;lt;/context-param&amp;gt;
     &amp;lt;context-param&amp;gt;
         &amp;lt;param-name&amp;gt;quartz:wait-on-shutdown&amp;lt;/param-name&amp;gt;
         &amp;lt;param-value&amp;gt;true&amp;lt;/param-value&amp;gt;
     &amp;lt;/context-param&amp;gt;
     &amp;lt;context-param&amp;gt;
         &amp;lt;param-name&amp;gt;quartz:start-on-load&amp;lt;/param-name&amp;gt;
         &amp;lt;param-value&amp;gt;true&amp;lt;/param-value&amp;gt;
     &amp;lt;/context-param&amp;gt;

     &amp;lt;listener&amp;gt;
         &amp;lt;listener-class&amp;gt;org.quartz.ee.servlet.QuartzInitializerListener&amp;lt;/listener-class&amp;gt;
     &amp;lt;/listener&amp;gt;

 &amp;lt;/web-app&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And lastly, you need a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/resources/quartz.properties&lt;/code&gt; config file for Scheduler.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Main Quartz configuration
org.quartz.scheduler.skipUpdateCheck = true
org.quartz.scheduler.instanceName = MyQuartzScheduler
org.quartz.scheduler.jobFactory.class = org.quartz.simpl.SimpleJobFactory
org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool
org.quartz.threadPool.threadCount = 5
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You may configure
&lt;a href=&quot;http://quartz-scheduler.org/documentation/quartz-2.2.x/configuration/&quot;&gt;many other things&lt;/a&gt; with Quartz,
but above should get you started as in In-Memory scheduler.&lt;/p&gt;

&lt;p&gt;Now you should able to compile and run it.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; mvn compile
bash&amp;gt; mvn org.apache.tomcat.maven:tomcat7-maven-plugin:2.1:run -Dmaven.tomcat.port=8081
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;how-to-configure-logging-for-quartz-scheduler&quot;&gt;How to configure logging for Quartz Scheduler&lt;/h2&gt;

&lt;p&gt;Another frequently asked question is how do they setup logging and see the DEBUG level
messages. The Quartz Schedulers uses SLF4J, so you have many
&lt;a href=&quot;http://saltnlight5.blogspot.com/2013/08/how-to-configure-slf4j-with-different.html&quot;&gt;loggers options&lt;/a&gt;
to choose. I will show you how to setup Log4j for example below.&lt;/p&gt;

&lt;p&gt;First, add this to your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pom.xml&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;slf4j-log4j12&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;1.7.5&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/resources/log4j.properties&lt;/code&gt; file to show messages onto STDOUT.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;log4j.rootLogger=INFO, stdout
log4j.logger.org.quartz=DEBUG
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Restart your web application on command line, and now you should see all the DEBUG
level logging messages coming from Quartz library.&lt;/p&gt;

&lt;p&gt;With everything running, your next question might be asking how do you access the scheduler
from your web application? Well, when the scheduler is created by the servlet context listener,
it is stored inside the web app’s ServletContext space with
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;org.quartz.impl.StdSchedulerFactory.KEY&lt;/code&gt; key. So you may retrieve it and use it in your
own Servlet like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;public class YourServlet extends HttpServlet {
    public init(ServletConfig cfg) {
        String key = &quot;org.quartz.impl.StdSchedulerFactory.KEY&quot;;
        ServletContext servletContext = cfg.getServletContext();
        StdSchedulerFactory factory = (StdSchedulerFactory) servletContext.getAttribute(key);
        Scheduler quartzScheduler = factory.getScheduler(&quot;MyQuartzScheduler&quot;);
        // TODO use quartzScheduler here.
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you are on your way to build your next scheduling application!&lt;/p&gt;

&lt;p&gt;Have fun!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>MySchedule-3.2.1.0 is out!</title>
   <link href="http://localhost:4000/2013/08/23/myschedule-3-2-1-0-is-out/"/>
   <updated>2013-08-23T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/08/23/myschedule-3-2-1-0-is-out</id>
   <content type="html">&lt;p&gt;The main work on this release is upgrade to Quartz 2.2.1&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Upgraded to Quartz 2.2.1&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Upgraded to SLF4J 1.7.5&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Quartz 2.2.1 API has some changes that break backward compatibility and this release addressed these
issues:&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;SchedulerPlugin interface now has different #initialize() signature&lt;/li&gt;
      &lt;li&gt;SchedulerListener interface has added new method #schedulerStarting()&lt;/li&gt;
      &lt;li&gt;Scheduler interface has couple new methods addJobs and schedulerJobs with Set instead of List.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Get it here: &lt;a href=&quot;https://code.google.com/p/myschedule/downloads/list&quot;&gt;https://code.google.com/p/myschedule/downloads/list&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Getting started with Apache Camel using Java</title>
   <link href="http://localhost:4000/2013/08/20/getting-started-with-apache-camel-using-java/"/>
   <updated>2013-08-20T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/08/20/getting-started-with-apache-camel-using-java</id>
   <content type="html">&lt;p&gt;Apache Camel is a very useful library that helps you process events or messages
from many different sources. You may move these messages through many different
protocols such as between VM, HTTP, FTP, JMS, or even DIRECTORY/FILE, and yet
still keep your processing code free of transport logic. This allows you to
concentrate on digesting the content of the messages instead.&lt;/p&gt;

&lt;p&gt;Here I will provide a tutorial on how you can get started with Apache Camel using
Java.&lt;/p&gt;

&lt;p&gt;Let’s start by creating a Maven project &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pom.xml&lt;/code&gt; file first.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;
        http://maven.apache.org/POM/4.0.0
        http://maven.apache.org/maven-v4_0_0.xsd&quot;&amp;gt;

    &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;
    &amp;lt;groupId&amp;gt;camel-spring-demo&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;camel-spring-demo&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;1.0-SNAPSHOT&amp;lt;/version&amp;gt;
    &amp;lt;packaging&amp;gt;jar&amp;lt;/packaging&amp;gt;

    &amp;lt;properties&amp;gt;
        &amp;lt;project.build.sourceEncoding&amp;gt;UTF-8&amp;lt;/project.build.sourceEncoding&amp;gt;
        &amp;lt;camel.version&amp;gt;2.11.1&amp;lt;/camel.version&amp;gt;
    &amp;lt;/properties&amp;gt;

    &amp;lt;dependencies&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.apache.camel&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;camel-core&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;${camel.version}&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
        &amp;lt;dependency&amp;gt;
            &amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;
            &amp;lt;artifactId&amp;gt;slf4j-simple&amp;lt;/artifactId&amp;gt;
            &amp;lt;version&amp;gt;1.7.5&amp;lt;/version&amp;gt;
        &amp;lt;/dependency&amp;gt;
    &amp;lt;/dependencies&amp;gt;

&amp;lt;/project&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We are only going to explore the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;camel-core&lt;/code&gt;, which actually contains quite of few useful
components that you may use. Also for logging purpose, I have added a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;slf4j-simple&lt;/code&gt; as
&lt;a href=&quot;http://saltnlight5.blogspot.com/2013/08/how-to-configure-slf4j-with-different.html&quot;&gt;a logger implementation&lt;/a&gt;
so we may see output on console.&lt;/p&gt;

&lt;p&gt;Next you just need a class to construct an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt;. A &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; is like a instruction
definition to Camel on how to move your messages from one point to another. We are
going to create &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/java/camelcoredemo/TimerRouteBuilder.java&lt;/code&gt; file that
will generate a timer message on every second, and then pass to a processor
that simply logs it.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package camelcoredemo;

import org.slf4j.*;
import org.apache.camel.*;
import org.apache.camel.builder.*;

public class TimerRouteBuilder extends RouteBuilder {
    static Logger LOG = LoggerFactory.getLogger(TimerRouteBuilder.class);
    public void configure() {
        from(&quot;timer://timer1?period=1000&quot;)
        .process(new Processor() {
            public void process(Exchange msg) {
                LOG.info(&quot;Processing {}&quot;, msg);
            }
        });
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That’s all you needed to get started. Now you may build and run this simple
demo.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; mvn compile
bash&amp;gt; mvn exec:java -Dexec.mainClass=org.apache.camel.main.Main -Dexec.args='-r camelcoredemo.TimerRouteBuilder'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice that we didn’t even write a Java &lt;strong&gt;main&lt;/strong&gt; class, but simply use the
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;org.apache.camel.main.Main&lt;/code&gt; option to accepts a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RouteBuilder&lt;/code&gt; class
name as parameter. Then it will load and create the route automatically.&lt;/p&gt;

&lt;h2 id=&quot;controlling-the-camelcontext&quot;&gt;Controlling the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CamelContext&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;When you start Camel, it creates a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CamelContext&lt;/code&gt; object that holds
many information on how to run it, including the definition of the
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; we created. Now if you want to have more control over this
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CamelContext&lt;/code&gt;, then you would need to write your own &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Main&lt;/code&gt; class.
I will show you a simple one here.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package camelcoredemo;

import org.slf4j.*;
import org.apache.camel.*;
import org.apache.camel.impl.*;
import org.apache.camel.builder.*;

public class TimerMain {
    static Logger LOG = LoggerFactory.getLogger(TimerMain.class);
    public static void main(String[] args) throws Exception {
        new TimerMain().run();
    }
    void run() throws Exception {
        final CamelContext camelContext = new DefaultCamelContext();
        camelContext.addRoutes(createRouteBuilder());
        camelContext.setTracing(true);
        camelContext.start();

        Runtime.getRuntime().addShutdownHook(new Thread() {
            public void run() {
                try {
                    camelContext.stop();
                } catch (Exception e) {
                    throw new RuntimeException(e);
                }
            }
        });

        waitForStop();
    }
    RouteBuilder createRouteBuilder() {
        return new TimerRouteBuilder();
    }
    void waitForStop() {
        while (true) {
            try {
                Thread.sleep(Long.MAX_VALUE);
            } catch (InterruptedException e) {
                break;
            }
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you can see, we re-used the existing &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TimerRouteBuilder&lt;/code&gt; class inside
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;createRouteBuilder()&lt;/code&gt; method. Our &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Main&lt;/code&gt; class now have full control
when to create, start and stop the
&lt;a href=&quot;http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/CamelContext.html&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CamelContext&lt;/code&gt;&lt;/a&gt;.
This context allow you to have control on how to configure Camel
globally rather than on &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; level. The javadoc link gives all the setter
methods that you can explore on what it can do.&lt;/p&gt;

&lt;p&gt;Noticed that we also need to provide few setup codes in our &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Main&lt;/code&gt; class.
First we need to handle graceful shutdown, so we added a Java shutdown hook
to invoke the context &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;stop()&lt;/code&gt;. Secondly we need to add a thread block after
context has started. The reason for this is that the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CamelContext#start()&lt;/code&gt;
method is non-blocking! If you don’t block your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Main&lt;/code&gt; thread after
start, then it will simply exit right after it, which will have not
much use. You want to run Camel as a service (like a server) until
you explicitly press &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CTRL+C&lt;/code&gt; to terminate the process.&lt;/p&gt;

&lt;h2 id=&quot;improving-the-main-class-to-start-camelcontext&quot;&gt;Improving the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Main&lt;/code&gt; class to start &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CamelContext&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;If you don’t want to deal with much of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Main&lt;/code&gt; class setup
code such as above, then you may simply extends the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;org.apache.camel.main.Main&lt;/code&gt;
class provided by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;camel-core&lt;/code&gt; intead. By piggy-back on this class, you will
only not have your Context auto setup, but you will get all the additional
command line features such as controlling how long to run the
process for, enabling tracing, loading custom route class etc.&lt;/p&gt;

&lt;p&gt;Refactoring previous example, here is how it look like.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package camelcoredemo;

import org.slf4j.*;
import org.apache.camel.builder.*;
import org.apache.camel.main.Main;

public class TimerMain2 extends Main {
    static Logger LOG = LoggerFactory.getLogger(TimerMain2.class);
    public static void main(String[] args) throws Exception {
        TimerMain2 main = new TimerMain2();
        main.enableHangupSupport();
        main.addRouteBuilder(createRouteBuilder());
        main.run(args);
    }
    static RouteBuilder createRouteBuilder() {
        return new TimerRouteBuilder();
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now our &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TimerMain2&lt;/code&gt; is much shorter, and you may try it out and it should
function the same as before.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; mvn compile
bash&amp;gt; mvn exec:java -Dexec.mainClass=camelcoredemo.TimerMain2 -Dexec.args='-t'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice that we have given &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-t&lt;/code&gt; option and it will dump &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; tracing. Use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-h&lt;/code&gt;
and you will see all the available options.&lt;/p&gt;

&lt;h2 id=&quot;adding-bean-to-the-camel-registry&quot;&gt;Adding bean to the Camel &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Registry&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;In the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TimerRouteBuilder&lt;/code&gt; example above, we have created a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Processor&lt;/code&gt; on
the fly. Now if you were to combine few different &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Processor&lt;/code&gt; together, it
would be nicer to minimize the noise. Camel allow you to do this by registering
processing beans in their registry space, and then you simply reference them in
your route as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bean&lt;/code&gt; component. Here is how I can convert above example into
beans processing.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package camelcoredemo;

import org.slf4j.*;
import org.apache.camel.*;
import org.apache.camel.builder.*;
import org.apache.camel.main.Main;

public class TimerBeansMain extends Main {
    static Logger LOG = LoggerFactory.getLogger(TimerBeansMain.class);
    public static void main(String[] args) throws Exception {
        TimerBeansMain main = new TimerBeansMain();
        main.enableHangupSupport();
        main.bind(&quot;processByBean1&quot;, new Bean1());
        main.bind(&quot;processAgainByBean2&quot;, new Bean2());
        main.addRouteBuilder(createRouteBuilder());
        main.run(args);
    }
    static RouteBuilder createRouteBuilder() {
        return new RouteBuilder() {
                public void configure() {
                    from(&quot;timer://timer1?period=1000&quot;)
                    .to(&quot;bean:processByBean1&quot;)
                    .to(&quot;bean:processAgainByBean2&quot;);
                }
            };
    }

    // Processor beans
    static class Bean1 implements Processor {
        public void process(Exchange msg) {
            LOG.info(&quot;First process {}&quot;, msg);
        }
    }
    static class Bean2 implements Processor {
        public void process(Exchange msg) {
            LOG.info(&quot;Second process {}&quot;, msg);
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you see my &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; is very slim and without noise clutter; and I have
refactored my processing code into individual classes. This promotes better
code management and testing as you write more complex &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; to address
business logic. It let you build LEGO like block of re-usable POJO beans.
Besides just processing beans, Camel use this registry space for many other
services as well. For example you may customize many other component endpoints
with additional features and or configurations. Or thing such as thread
pool strategy implementation replacement etc.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Route&lt;/code&gt; in example above is constructed using what’s called Java DSL.
The route is very readable, and yet you’ll get full IDE support to browse all the methods available to use for your route.&lt;/p&gt;

&lt;p&gt;I hope this article has helped you jump start your Camel ride. Besides the
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;timer&lt;/code&gt; component mentioned, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;camel-core&lt;/code&gt; also comes with the following
components out of it’s core jar.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://camel.apache.org/bean.html&quot;&gt;bean component&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://camel.apache.org/browse.html&quot;&gt;browse component&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://camel.apache.org/dataset.html&quot;&gt;dataset component&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://camel.apache.org/direct.html&quot;&gt;direct component&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://camel.apache.org/file.html&quot;&gt;file component&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://camel.apache.org/log.html&quot;&gt;log component&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://camel.apache.org/mock.html&quot;&gt;mock component&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://camel.apache.org/properties.html&quot;&gt;properties component&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://camel.apache.org/seda.html&quot;&gt;seda component&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://camel.apache.org/test.html&quot;&gt;test component&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://camel.apache.org/timer.html&quot;&gt;timer component&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://camel.apache.org/stub.html&quot;&gt;stub component&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://camel.apache.org/validation.html&quot;&gt;validator component&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://camel.apache.org/vm.html&quot;&gt;vm component&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://camel.apache.org/xslt.html&quot;&gt;xslt component&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Have fun!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to configure SLF4J with different logger implementations</title>
   <link href="http://localhost:4000/2013/08/18/how-to-configure-slf4j-with-different-logger-implementations/"/>
   <updated>2013-08-18T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/08/18/how-to-configure-slf4j-with-different-logger-implementations</id>
   <content type="html">&lt;p&gt;There are many good benefits in using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;slf4j&lt;/code&gt; library as your Java
application logging API layer. Here I will show few examples on how
to use and configure it with different loggers.&lt;/p&gt;

&lt;p&gt;You can think of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;slf4j&lt;/code&gt; as an Java interface, and then you would
need an implementation (ONLY ONE) at runtime to provide the actual
logging details, such as writing to STDOUT or to a file etc. Each
logging implementation (or called binding) would obviously have their
own way of configuring the log output, but your application will remain
agnostic and always use the same &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;org.slf4j.Logger&lt;/code&gt; API. Lets see how
this works in practice.&lt;/p&gt;

&lt;p&gt;## 
Using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;slf4j&lt;/code&gt; with Simple logger&lt;/p&gt;

&lt;p&gt;Create a Maven based project and this in your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pom.xml&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;slf4j-api&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;1.7.5&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you may use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Logger&lt;/code&gt; in your Java code like this.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package deng;
import org.slf4j.*;
public class Hello {
    static Logger LOGGER = LoggerFactory.getLogger(Hello.class);
    public static void main(String[] args) {
        for (int i = 0; i &amp;lt; 10; i++)
            if (i % 2 == 0)
                LOGGER.info(&quot;Hello {}&quot;, i);
            else
                LOGGER.debug(&quot;I am on index {}&quot;, i);
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above will get your program compiled, but when you run it, you will see these output.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; java deng.Hello
SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What its saying is that at runtime, you are missing the logging “implementation” (or the
logger binding), so &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;slf4j&lt;/code&gt; simply use a “NOP” implmentation, which does nothing. In order
to see the output properly, you may try use an simple implementation that does not require
any configuration at all! Just go back to your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pom.xml&lt;/code&gt; and add the following:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;slf4j-simple&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;1.7.5&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you see logging output on STDOUT with INFO level. This simple logger will default
show any INFO level message or higher. In order to see DEBUG messages, you would
need to pass in this System Property &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-Dorg.slf4j.simpleLogger.defaultLogLevel=DEBUG&lt;/code&gt;
at your Java startup.&lt;/p&gt;

&lt;p&gt;## 
Using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;slf4j&lt;/code&gt; with Log4j logger&lt;/p&gt;

&lt;p&gt;Now we can experiment and swap different logger implementations, but your application code
can remain the same. All we need is to replace &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;slf4j-simple&lt;/code&gt; with another popular logger
implementation, such as the Log4j.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;slf4j-log4j12&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;1.7.5&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Again, we must configure logging per implementation that we picked.
In this case, we need an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/resources/log4j.properties&lt;/code&gt; file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    log4j.rootLogger=DEBUG, STDOUT
    log4j.logger.deng=INFO
    log4j.appender.STDOUT=org.apache.log4j.ConsoleAppender
    log4j.appender.STDOUT.layout=org.apache.log4j.PatternLayout
    log4j.appender.STDOUT.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Re-run your program, and you should see similar output.&lt;/p&gt;

&lt;p&gt;## 
Using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;slf4j&lt;/code&gt; with JDK logger&lt;/p&gt;

&lt;p&gt;The JDK actually comes with a logger package, and you can replace &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pom.xml&lt;/code&gt;
with this logger implementation.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;slf4j-jdk14&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;1.7.5&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now the configuration for JDK logging is a bit difficult to work with. Not only need a
config file, such as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/resources/logging.properties&lt;/code&gt;, but you would also need
to add a System properties &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-Djava.util.logging.config.file=logging.properties&lt;/code&gt;
in order to have it pick it up. Here is an example to get you started:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;.level=INFO

handlers=java.util.logging.ConsoleHandler
java.util.logging.ConsoleHandler.level=FINEST
deng.level=FINEST
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;## 
Using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;slf4j&lt;/code&gt; with Logback logger&lt;/p&gt;

&lt;p&gt;The logback logger implementation is a super dupa quality implementation. If you intend
to write serious code that go into production, you may want to evaluate this option. Again
modify your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pom.xml&lt;/code&gt; to replace with this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;ch.qos.logback&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;logback-classic&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;1.0.13&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is a sample of configuration &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/resources/logback.xml&lt;/code&gt; to get things started.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;configuration&amp;gt;
  &amp;lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&amp;gt;
    &amp;lt;encoder&amp;gt;
      &amp;lt;pattern&amp;gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&amp;lt;/pattern&amp;gt;
    &amp;lt;/encoder&amp;gt;
  &amp;lt;/appender&amp;gt;

  &amp;lt;logger name=&quot;deng&quot; level=&quot;DEBUG&quot;/&amp;gt;

  &amp;lt;root level=&quot;INFO&quot;&amp;gt;
    &amp;lt;appender-ref ref=&quot;STDOUT&quot; /&amp;gt;
  &amp;lt;/root&amp;gt;
&amp;lt;/configuration&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;## 
Writing your own library with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;slf4j&lt;/code&gt; logger&lt;/p&gt;

&lt;p&gt;If you are providing an Java library for large end users consumption, its good idea to
set your project to depend on &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;slf4j-api&lt;/code&gt; only, and then let your user choose any
logger implementation at their development or runtime environment. As end users, they
may quickly select one of option above and take advatage of their own favorite logging
implementation features.&lt;/p&gt;

&lt;p&gt;## 
References&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://slf4j.org/&quot;&gt;http://slf4j.org/&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://logging.apache.org/log4j/1.2/&quot;&gt;http://logging.apache.org/log4j/1.2/&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://docs.oracle.com/javase/7/docs/technotes/guides/logging/&quot;&gt;http://docs.oracle.com/javase/7/docs/technotes/guides/logging/&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;http://logback.qos.ch/&quot;&gt;http://logback.qos.ch/&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>How to convert asciidoc text to html using Groovy</title>
   <link href="http://localhost:4000/2013/08/17/how-to-convert-asciidoc-text-to-html-using-groovy/"/>
   <updated>2013-08-17T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/08/17/how-to-convert-asciidoc-text-to-html-using-groovy</id>
   <content type="html">&lt;p&gt;Here is how you can convert &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;asciidoc&lt;/code&gt; text using Groovy script:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// filename: RunAsciidoc.groovy
@Grab('org.asciidoctor:asciidoctor-java-integration:0.1.3')
import org.asciidoctor.*
def asciidoctor = Asciidoctor.Factory.create()
def output = asciidoctor.renderFile(new File(args[0]),  [:])
println(output);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you may run it&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;groovy RunAsciidoc.groovy myarticle.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Many thanks to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;asciidoctor.org&lt;/code&gt; project!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to manage Maven third party jars</title>
   <link href="http://localhost:4000/2013/06/23/how-to-manage-maven-third-party-jars/"/>
   <updated>2013-06-23T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/06/23/how-to-manage-maven-third-party-jars</id>
   <content type="html">&lt;h2 id=&quot;how-to-manage-maven-third-party-jars&quot;&gt;How to manage Maven third party jars&lt;/h2&gt;

&lt;p&gt;When you find yourself the need to load third party jars into Maven repository,
there are few steps you normally do to test it out. You first install them
locally into &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$HOME/.m2/repository&lt;/code&gt;, and then create your project pom that
list those dependency. When things look good, then you deploy into your own
hosted repository. The following scripts will help you perform these tasks.&lt;/p&gt;

&lt;p&gt;Tip&lt;/p&gt;

&lt;p&gt;If you have lot’s of jars under a group, it’s more conveninent to create
an extra pom that list these dependency and install/deploy it into the repository
as well. And then your project would only need to include one dependency
with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;type&amp;gt;pom&amp;lt;/type&amp;gt;&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;file: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bin/mvn-install.sh&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#!/usr/bin/env bash
#
# Install local jar files into Maven repository. The artifact name would be same
# as the filename minus the extension.
# :Author: Zemian Deng
# :date: 2013T00:00:00-05:00
#
# Usage:
#   # Print as maven dependency used in pom file
#   mvn-install.sh mygroup 1.0.0 lib/*.jar
#
#   # Install jar files into local maven repo
#   RUN_TYPE=install mvn-install.sh mygroup 1.0.0 lib/*.jar
#
#   # Deploy jar files into remote maven repo
#   export REPO_URL=http://localhost/nexus/content/repositories/thirdparty
#   RUN_TYPE=deploy mvn-install.sh mygroup 1.0.0 lib/*.jar
#

# Capture command arguments and options
GROUP=$1
shift
VERSION=$1
shift
FILES=&quot;$@&quot;
if [[ &quot;$GROUP&quot; == &quot;&quot; || &quot;$VERSION&quot; == &quot;&quot; || &quot;$FILES&quot; == &quot;&quot; ]]; then
 printf &quot;ERROR: invalid arguments: GROUP VERSION FILES...\n&quot;
 exit 1
fi

RUN_TYPE=${RUN_TYPE:=&quot;print&quot;} # values: print|install|deploy
REPO_ID=${REPO_ID:=&quot;nexus-server&quot;} # Id defined in user's settings.xml for authentication
REPO_URL=${REPO_URL:=&quot;http://localhost/nexus/content/repositories/thirdparty&quot;}

# For each file, perform action based on run type.
for FILE in $FILES; do
 ARTIFACT=`basename $FILE '.jar'`
 if [[ &quot;$RUN_TYPE&quot; == &quot;deploy&quot; ]]; then
  printf &quot;Deploying file=$FILE as artifact=$ARTIFACT to repo=$REPO_URL\n&quot;
  mvn deploy:deploy-file \
   -DrepositoryId=$REPO_ID -Durl=$REPO_URL \
   -DgroupId=$GROUP -DartifactId=$ARTIFACT -Dversion=$VERSION -Dpackaging=jar \
   -Dfile=$FILE
 elif [[ &quot;$RUN_TYPE&quot; == &quot;install&quot; ]]; then
  printf &quot;Installing file=$FILE as artifact=$ARTIFACT\n&quot;
  mvn install:install-file \
   -DgroupId=$GROUP -DartifactId=$ARTIFACT -Dversion=$VERSION -Dpackaging=jar \
   -Dfile=$FILE
 elif [[ &quot;$RUN_TYPE&quot; == &quot;print&quot; ]]; then
  printf &quot;        &amp;lt;dependency&amp;gt;\n&quot;
  printf &quot;            &amp;lt;groupId&amp;gt;$GROUP&amp;lt;/groupId&amp;gt;\n&quot;
  printf &quot;            &amp;lt;artifactId&amp;gt;$ARTIFACT&amp;lt;/artifactId&amp;gt;\n&quot;
  printf &quot;            &amp;lt;version&amp;gt;$VERSION&amp;lt;/version&amp;gt;\n&quot;
  printf &quot;        &amp;lt;/dependency&amp;gt;\n&quot;
 fi
done
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Last updated 2013-06-18 19:14:37 EDT&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to zip up a release from a hg repository</title>
   <link href="http://localhost:4000/2013/06/17/how-to-zip-up-a-release-from-a-hg-repository/"/>
   <updated>2013-06-17T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/06/17/how-to-zip-up-a-release-from-a-hg-repository</id>
   <content type="html">&lt;h2 id=&quot;how-to-zip-up-a-release-from-a-hg-repository&quot;&gt;How to zip up a release from a hg repository&lt;/h2&gt;

&lt;p&gt;Did you know &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hg archive&lt;/code&gt; command can quickly zip up your project by given a revision or release
name? This is very handy to package up a distribution and share with other who is refusing to use
the same client.&lt;/p&gt;

&lt;p&gt;I wrote a simple bash script to do this with couple extras. It will create a zip file with a nice
basename so it’s easy for unzipping. It also auto generate and append the given revision or tag
name into the RELEASE.txt file, so you know what’s been released.&lt;/p&gt;

&lt;p&gt;Just add the following file into any root of your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hg&lt;/code&gt; based project’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bin&lt;/code&gt; directory and it’s
ready to use.&lt;/p&gt;

&lt;p&gt;Note&lt;/p&gt;

&lt;p&gt;This script will not tag your repository. It assumed you already have tagged. It simply
will package up a release into a nice little zip file.&lt;/p&gt;

&lt;p&gt;file: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bin/zip-release.sh&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#!/usr/bin/env bash
#
# Package a release or snapshot from Hg repository for distribution.
# :Author: Zemian Deng
# :date: 2013T00:00:00-05:00
#
# Usage example:
#   # release a specific tag
#   cd /path/to/project
#   bin/zip-release.sh 1.0.1
#
#   # release a snapshot
#   bin/zip-release.sh
#

# Command line arguments and options
# Assume this script is in bin, which one directory up.
APP_HOME=`cd $(dirname $0)/.. &amp;amp;&amp;amp; pwd`
if [[ `command -v realpath` != &quot;&quot; ]]; then
    # resolve symbolic link if possible.
    APP_HOME=`realpath $APP_HOME`
fi
HG_REVISION=`hg id -i`
REL_VERSION=$1
if [[ &quot;$REL_VERSION&quot; == &quot;&quot; ]]; then
    REL_VERSION=$HG_REVISION
fi
REL_NAME=&quot;`basename $APP_HOME`-$REL_VERSION&quot;
REL_DIR=$APP_HOME/target/$REL_NAME
REL_ZIPFILE=$REL_DIR/../$REL_NAME.zip

# Generate the zip package
printf &quot;Generating $REL_NAME in directory=`pwd`\n&quot;
mkdir -p $REL_DIR
hg archive -r $REL_VERSION $REL_ZIPFILE

# Auto append revision id to release file.
if [[ -e $APP_HOME/RELEASE.txt ]]; then
    cp $APP_HOME/RELEASE.txt $REL_DIR/RELEASE.txt
fi
printf &quot;$REL_NAME revsion=$HG_REVISION date=`date`\n&quot; &amp;gt;&amp;gt; $REL_DIR/RELEASE.txt
zip -u $REL_ZIPFILE $REL_DIR/RELEASE.txt

# Clean up the tmp rel dir.
rm -r $REL_DIR

printf &quot;$REL_ZIPFILE created.\n&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Last updated 2013-06-18 19:18:48 EDT&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to install awestruct on Cygwin</title>
   <link href="http://localhost:4000/2013/06/14/how-to-install-awestruct-on-cygwin/"/>
   <updated>2013-06-14T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/06/14/how-to-install-awestruct-on-cygwin</id>
   <content type="html">&lt;p&gt;How to install &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awestruct&lt;/code&gt; on Cygwin&lt;/p&gt;

&lt;h2 id=&quot;how-to-install-awestruct-on-cygwin&quot;&gt;How to install &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awestruct&lt;/code&gt; on Cygwin&lt;/h2&gt;

&lt;p&gt;I tried installing &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awestruct&lt;/code&gt; on Cygwin today, but it failed with following:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    gem install awestruct
    Building native extensions.  This could take a while...
    ERROR:  Error installing awestruct:
            ERROR: Failed to build gem native extension.
    
            /usr/bin/ruby.exe extconf.rb
    checking for libxml/parser.h... *** extconf.rb failed ***
    Could not create Makefile due to some reason, probably lack of
    necessary libraries and/or headers.  Check the mkmf.log file for more
    details.  You may need configuration options.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I am running Windows 7 with Cygwin 1.7.20 and ruby 1.9.3p392&lt;/p&gt;

&lt;p&gt;After looking at the log and googling around, I’ve found that the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awestruct&lt;/code&gt; depends on &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nokogiri&lt;/code&gt;, and in
turns depends on &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libxslt&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;libxslt&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;iconv&lt;/code&gt; native lib. I have the last three
already installed in Cygwin with default paths, but the problem is they are installed
under &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr&lt;/code&gt; and not &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local&lt;/code&gt;. Because of this, I have to install the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awestruct&lt;/code&gt;
with extra parameters like this:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    gem install awestruct -- --with-xml2-include=/usr/include/libxml2 \
                            --with-xml2-lib=/usr/lib \
                            --with-xslt-dir=/usr/include/libxslt \
                            --with-iconv-include=/usr/include \
                            --with-iconv-lib=/usr/lib
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Now I am awestruct!&lt;/p&gt;

&lt;p&gt;Last updated 2013-06-15 21:51:49 EDT&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Taming the JMX on WebLogic Server</title>
   <link href="http://localhost:4000/2013/06/11/taming-the-jmx-on-weblogic-server/"/>
   <updated>2013-06-11T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/06/11/taming-the-jmx-on-weblogic-server</id>
   <content type="html">&lt;p&gt;Taming the JMX on WebLogic Server&lt;/p&gt;

&lt;h1 id=&quot;taming-the-jmx-on-weblogic-server&quot;&gt;Taming the JMX on WebLogic Server&lt;/h1&gt;

&lt;p&gt;Let assume couple things first:&lt;/p&gt;

&lt;p&gt;1) I assume you have heard of Java’s JMX features and familiar what it does (expose and manage your service remotely). You ought to know that default JVM will have a Platform MBeanServer instance that you can register MBean. And you may view them using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jconsole&lt;/code&gt; command from the JDK.&lt;/p&gt;

&lt;p&gt;2) As of today, I think by far the easiest way you can expose any services in your application to a JMX MBeanServer is using Spring’s exporter. You will do something like this:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;        &amp;lt;bean class=&quot;org.springframework.jmx.export.MBeanExporter&quot;&amp;gt;
            &amp;lt;property name=&quot;assembler&quot;&amp;gt;
                  &amp;lt;bean class=&quot;org.springframework.jmx.export.assembler.InterfaceBasedMBeanInfoAssembler&quot;&amp;gt;
                    &amp;lt;property name=&quot;managedInterfaces&quot;&amp;gt;
                        &amp;lt;list&amp;gt;
                            &amp;lt;!-- Expose any java interface you like to see under JMX as MBean --&amp;gt;
                            &amp;lt;value&amp;gt;myproject.services.Service&amp;lt;/value&amp;gt;
                        &amp;lt;/list&amp;gt;
                    &amp;lt;/property&amp;gt;
                  &amp;lt;/bean&amp;gt;
            &amp;lt;/property&amp;gt;
            &amp;lt;property name=&quot;beans&quot;&amp;gt;
              &amp;lt;map&amp;gt;
                &amp;lt;entry key=&quot;myproject.services:name=MyCoolService&quot; value-ref=&quot;myCoolService&quot;/&amp;gt;
              &amp;lt;/map&amp;gt;
            &amp;lt;/property&amp;gt;
        &amp;lt;/bean&amp;gt;
        &amp;lt;!-- This service must implements the interface used above --&amp;gt;
        &amp;lt;bean id=&quot;myCoolService&quot; class=&quot;myproject.services.MyCoolService&quot;&amp;gt;
        &amp;lt;/bean&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Above should get you standalone application with JMX enabled.&lt;/p&gt;

&lt;p&gt;Now if you want to do similar on WebLogic Server, then I have few goodies and notes that might help you. Read on…&lt;/p&gt;

&lt;h2 id=&quot;weblogic-servers-wls-mbeanserver&quot;&gt;WebLogic Server’s (WLS) MBeanServer&lt;/h2&gt;

&lt;h3 id=&quot;the-jconsole-trick&quot;&gt;The JConsole trick&lt;/h3&gt;

&lt;p&gt;The WLS, like many other EE server will have it’s own MBeanServer. However, to see the MBean’s you would need to do little extra with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jconsole&lt;/code&gt;. Assume you have a default config WLS started on localhost, then you can connect to it like this.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;jconsole -J-Djava.class.path=&quot;$JAVA_HOME/lib/jconsole.jar:$MW_HOME/wlserver/server/lib/wljmxclient.jar&quot; -J-Djmx.remote.protocol.provider.pkgs=weblogic.management.remote
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then when prompted to login, enter the following:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Remote Process: service:jmx:iiop://localhost:7001/jndi/weblogic.management.mbeanservers.runtime
User: &amp;lt;same userid you used setup WLS to their console app.&amp;gt;
Password: &amp;lt;same password you used setup WLS to their console app.&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you should see all the MBeans that WLS already exposed to you as a EE server. You may add your own service there.&lt;/p&gt;

&lt;h3 id=&quot;programming-with-jmx-connection&quot;&gt;Programming with JMX connection&lt;/h3&gt;

&lt;p&gt;You may connect to the WLS MBeanServer remotely inside your standalone application. Here is a typical connection code you would need&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;            String serviceName = &quot;com.bea:Name=DomainRuntimeService,Type=weblogic.management.mbeanservers.domainruntime.DomainRuntimeServiceMBean&quot;;
            try {
                ObjectName service = new ObjectName(serviceName);
            } catch (MalformedObjectNameException e) {
                throw new RuntimeException(&quot;Not able to create JMX ObjectName: &quot; + serviceName);
            }
    
            String protocol = &quot;t3&quot;;
            String jndiroot = &quot;/jndi/&quot;;
            String mserver = &quot;weblogic.management.mbeanservers.runtime&quot;;
            try {
                JMXServiceURL serviceURL = new JMXServiceURL(protocol, &quot;localhost&quot;, 7001, jndiroot + mserver);
    
                Hashtable h = new Hashtable();
                h.put(Context.SECURITY_PRINCIPAL, username);
                h.put(Context.SECURITY_CREDENTIALS, password);
                h.put(JMXConnectorFactory.PROTOCOL_PROVIDER_PACKAGES,
                        &quot;weblogic.management.remote&quot;);
                h.put(&quot;jmx.remote.x.request.waiting.timeout&quot;, new Long(10000));
                JMXConnector connector = JMXConnectorFactory.connect(serviceURL, h);
                MBeanServerConnection remoteMBeanServer = connector.getMBeanServerConnection();
    
                // TODO: Do what you need with remoteMBeanServer here.
            } catch (Exception e) {
                throw new RuntimeException(&quot;Not able to initiate MBeanServer protocol= &quot; + protocol +
                        &quot;, jndiroot= &quot; + jndiroot + &quot;, mserver= &quot; + mserver);
            }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;That’s a mouthful of boiler code just to get a remote MBeanServer connection! Fortunately there is another easier way though. Read on…&lt;/p&gt;

&lt;h3 id=&quot;the-jndi-trick&quot;&gt;The JNDI trick&lt;/h3&gt;

&lt;p&gt;The WLS MBeanServer service is also available through JNDI lookup. Again Spring can help you with their JNDI lookup and you simply need to inject it to other services that need it. For example:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;        &amp;lt;bean id=&quot;jmxServerRuntime&quot; class=&quot;org.springframework.jndi.JndiObjectFactoryBean&quot;&amp;gt;
            &amp;lt;property name=&quot;jndiName&quot; value=&quot;java:comp/env/jmx/runtime&quot;/&amp;gt;
        &amp;lt;/bean&amp;gt;
        &amp;lt;bean id=&quot;exporter&quot; class=&quot;org.springframework.jmx.export.MBeanExporter&quot;&amp;gt;
            &amp;lt;property name=&quot;beans&quot;&amp;gt;
                &amp;lt;map&amp;gt;
                    &amp;lt;entry key=&quot;myproject.services:name=MyCoolService&quot; value-ref=&quot;myCoolService&quot;/&amp;gt;
                &amp;lt;/map&amp;gt;
            &amp;lt;/property&amp;gt;
            &amp;lt;property name=&quot;server&quot; ref=&quot;jmxServerRuntime&quot;/&amp;gt;
        &amp;lt;/bean&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Notice that we have injetcted the “server” property with one we looked up from WLS JNDI service. If you use that in your WAR application and deploy it onto a WLS instance, and whola, you got yourself exposed service onto WLS JMX!&lt;/p&gt;

&lt;p&gt;Note&lt;/p&gt;

&lt;p&gt;above will only works if your Spring xml config is part of the WAR/JAR/EAR that’s deployed in same server where JNDI lives! If you are not, you need to use this JNDI name without the “env” part instead, like “java:comp/env/jmx/runtime”.&lt;/p&gt;

&lt;p&gt;For more details on how to work with JMX and WLS, see their docs here:
&lt;a href=&quot;http://docs.oracle.com/cd/E12839_01/web.1111/e13728/accesswls.htm#i1119556&quot;&gt;http://docs.oracle.com/cd/E12839_01/web.1111/e13728/accesswls.htm#i1119556&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Last updated 2013-06-12 23:52:42 EDT&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>MySchedule 3.2.0.0 FINAL is released</title>
   <link href="http://localhost:4000/2013/06/07/myschedule-3-2-0-0-final-is-released/"/>
   <updated>2013-06-07T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/06/07/myschedule-3-2-0-0-final-is-released</id>
   <content type="html">&lt;p&gt;Hi folks,&lt;/p&gt;

&lt;p&gt;I have tagged the 3.2.0.0 release of the MySchedule project today. This is the first stable release of the version 3 branch line of the project. In this release we bring you the latest Vaadin UI experience. You may expect all the good stuff from old release, plus few new features added.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;You may now save your own Templates in scheduler configurations, scripting text or even XML for job loader.&lt;/li&gt;
  &lt;li&gt;You may interrupt a running job.&lt;/li&gt;
  &lt;li&gt;More Scheduler runtime information are displayed.&lt;/li&gt;
  &lt;li&gt;New table display of all plugins used.&lt;/li&gt;
  &lt;li&gt;Added an embedded web server for quick self running UI server.&lt;/li&gt;
  &lt;li&gt;Single convenient package download.&lt;/li&gt;
  &lt;li&gt;New release format: 3.2.x.y is used for MySchedule3 using Quartz 2.x library.&lt;/li&gt;
  &lt;li&gt;New &lt;a href=&quot;http://demo-myschedule.rhcloud.com&quot;&gt;online demo&lt;/a&gt; setup on OpenShift platform&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Get it and try it out here &lt;a href=&quot;http://code.google.com/p/myschedule&quot;&gt;http://code.google.com/p/myschedule&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Choosing Technology Stack to build a common platform</title>
   <link href="http://localhost:4000/2013/05/29/choosing-technology-stack-to-build-a-common-platform/"/>
   <updated>2013-05-29T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/05/29/choosing-technology-stack-to-build-a-common-platform</id>
   <content type="html">&lt;p&gt;There are many talks in Java community about Spring vs Java EE, and how one group would argue you should use one and not other etc. When I see this, I can’t help but to think why can’t we use them both together? In fact I think using them both effectively would create a great technology stack for building an infrastructure for large company who like to provide a common platform that may host and run many different applications and projects.&lt;/p&gt;

&lt;h1 id=&quot;why-combine-spring-and-java-ee-together&quot;&gt;Why combine Spring and Java EE together?&lt;/h1&gt;

&lt;p&gt;When writing software, we create and build libraries/framework that can be reuse and help us get things done faster. Spring is such a swiss-army knife like library that allows application to be build in an un-intrusive way and with many easier wrappers and helpers classes. This is what I call developer friendliness library.&lt;/p&gt;

&lt;p&gt;However many people don’t realize is that Spring is just a library and wrappers to many things that ease the development. Spring has a web framework layer to let you write MVC web app, but you still need a Servlet Container (server). Spring provides data layer that mostly wraps other JPA/Hibernate/JDBC that integrate well in their IoC container, but the actual ORM implementation is outside of Spring (eg: Hibernate). Spring wraps JMS or even JNDI for development, but you still need a JMS server or JNDI provider. Spring has a Transaction Manager Abstract layer, but it’s just a wrapper (for single DB, it’s the database vendor that actually provided the ACID attributes of your transaction guarantee, not Spring). If you want to atomic transaction on multiple resources (such as JMS and Database, or multiple databases) you still need a “real” Transaction Manager (JTA)!&lt;/p&gt;

&lt;p&gt;So now you see, in order to build a successful enterprise application, you need Spring on top of many vendor provided features. If you are not careful, you could be lock into many proprietary services that’s hard to integrate and deploy. This is where Java EE comes in. It’s a spec layout that vendor must provide most of those services in a standard manner. Hence any JEE compliance server would provide services with standard API that suppose to works the similar way.&lt;/p&gt;

&lt;p&gt;Now there must be balance to make. From my experience, the more standards you enforce, then less “developer friendliness” it will get. But at the same time, without standard, it’s hard to provide common infrastructure such as API, runtime server and/or even OS environment for deployment. This is the reason I would argue that combining Spring with Java EE would bring most practical and effective platform to IT.&lt;/p&gt;

&lt;h1 id=&quot;choosing-the-technology-stack&quot;&gt;Choosing the Technology Stack&lt;/h1&gt;

&lt;p&gt;Not every project is created equals and their needs are different. So providing a common technology stack that will satisfy all projects is impossible. But we can certainly try to create a common one that satisfy most of projects need. Also choosing a concrete library/stack is very opinionated, and no matter which actual implementation is selected, there are always going to be pro and cons. With this in mind, I will try to layout my own personal choices of a technology stack that I think it will provide the most flexible platform to host majority projects and applications. Specially in a big corporate environment.&lt;/p&gt;

&lt;p&gt;I will choose a Java EE application server as common platform. From this, I will choose some “developer friendliness” libraries that replace (or add on-top) few existing EE standards to gain productivity. I think EE has come a long way and getting better through each spec iteration, but I still feel it is more flexibility in using Spring as IoC container verse using CDI when wiring POJO services together. Plus the Spring comes with a very flexible MVC framework layer that’s effective and easy to development in compare to plain Servlet API. Once these are combined and available as a common platform, I think it can support many kind of applications in various IT environment.&lt;/p&gt;

&lt;p&gt;Starting Java EE 6, there are two profiles a server must provide now. So let’s start exploring the stack from these two views.&lt;/p&gt;

&lt;h1 id=&quot;jee-web-profile---lighter-web-based-driven-application&quot;&gt;JEE Web profile - Lighter web based driven application&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;Use Spring MVC (controller, form, validation, ModelAndView and IoC configurations) instead of plain Servlet API programming.&lt;/li&gt;
  &lt;li&gt;Write backend business service logic as POJO as possible and use Spring IoC to wire them. Do not abuse this. I personally think Spring IoC is more flexible and easier to use in compare to CDI.&lt;/li&gt;
  &lt;li&gt;Use JPA for data service layer instead of JDBC API programming.&lt;/li&gt;
  &lt;li&gt;Use JSON data exchange format. From experience, JSON is much more efficient and easier to work in comparison to XML.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Views options:&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Use well formed xhtml/Bootstraps/jquery/AJAX -&amp;gt; If you need just static pages and some client side interactive&lt;/li&gt;
  &lt;li&gt;Freemarker (or Thymeleaf) -&amp;gt; If you need a lot of dynamic content to generate, use an template engine! This is better than JSP alone.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Vaadin -&amp;gt; If you need desktop application behavior like on web browser side. This is easier in compare to JSF.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Servlet 3.0 now support asynchronous requests. This solve many challenging problems in web domain. Take advantage of it if needed! (Latest Spring MVC has support for this already.)&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;jee-6-full-profile---full-ee-features-application&quot;&gt;JEE 6 Full profile - Full EE features application&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;On top of everything mentioned above in Web Profile.&lt;/li&gt;
  &lt;li&gt;Use JMS for any messaging need that fall into Point-To-Point or Publish/Subscribe domain.&lt;/li&gt;
  &lt;li&gt;Use JTA when you need atomic transaction for multiple databases and/or JMS delivery.&lt;/li&gt;
  &lt;li&gt;Use standard JAX-RS (RESTful web service API) for exposing external services. Use JSON data exchange format.&lt;/li&gt;
  &lt;li&gt;Use consistent Spring IoC for services injection. It’s more flexible and easier to work with in compare to CDI.&lt;/li&gt;
  &lt;li&gt;Use POJO services and wire by Spring instead of EJB if possible. I found them more easier to test and development.&lt;/li&gt;
  &lt;li&gt;Plus whatever else EE spec somes with that it supports such as (JavaMail and JCA etc. usually Spring will have a easier wrapper for these API as well.)&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;apache-camel---light-weight-esb&quot;&gt;Apache Camel - Light Weight ESB&lt;/h1&gt;

&lt;p&gt;The Camel project is not an EE standard, however from my experience is that many common IT work can be easily done with simple Camel route/workflow. The development and style of Camel is simple to understand and easy to test. It can be run as stand alone application/service or as part of a web application. I believe it’s a great value to add on top of a common platform with above. You would use it whenever you need the following:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;For any integration pattern like work flow process (eg: bridge a file poller to a web service to a JMS queue to database etc.)&lt;/li&gt;
  &lt;li&gt;For creating business workflow process.&lt;/li&gt;
  &lt;li&gt;For any ETL workflow process.&lt;/li&gt;
  &lt;li&gt;For easy mapping of business requirement workflow to code logic process&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;which-ee-application-server-to-use&quot;&gt;Which EE application server to use&lt;/h1&gt;

&lt;p&gt;I think this is subjective as well, but we need to choose one that’s fit for business need. I personally favor JBoss because it’s open source, and yet they provide commercial backed version of their application server. Being an open source based product, it gives developers greater flexibility in learning and exploring the platform. I also see many benefits in their in house projects such as testing tools and libraries are open and benefit to developers.&lt;/p&gt;

&lt;h2 id=&quot;what-about-tomcat-server&quot;&gt;What about Tomcat server?&lt;/h2&gt;

&lt;p&gt;Tomcat is a very well known Servlet server. However it is only a Web container that support Servlet/JSP application. It does not provide JMS or JTA features that provided by a Java EE server. It’s a fact that many web application requirements can be satisfy with simple Tomcat server. However in a large IT env, you will often you need other services that provided by Java EE server. In many cases, people will simply run Tomcat webapp and bridge to other Java EE server when needed.&lt;/p&gt;

&lt;p&gt;Well, this is reason I would select a Java EE server in the first place. Specially with JEE6, it provided Web Profile that stripped down to mostly Web Container features, then should make the server faster to start-up and less extra services loaded. However, in case when application needed EE features, the platform we provide will able to support it.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Carry your sword and dagger programmers!</title>
   <link href="http://localhost:4000/2013/05/03/carry-your-sword-and-dagger-programmers/"/>
   <updated>2013-05-03T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/05/03/carry-your-sword-and-dagger-programmers</id>
   <content type="html">&lt;p&gt;A knight would for sure carry his sword proudly and ready for any
battles. But then he can not use such a heavy weapon for daily tasks
such as peeling an apple. Sometimes I think the same with ourself as
programmers. We need a stable, strong and static typed programming
language that can get us the heavy job (large project, and enterprise
system) done in more manageable way. But yet, we face many smaller daily
tasks (eg: parse a text file for a search value, or generate sample data
etc) that is better fitted to use a lighter, dynamic language because
they are faster to write; and the code need not go through heavier
process as the main project.&lt;/p&gt;

&lt;p&gt;Through out my career, I have been keeping two languages (one strong
typed and one dynamic typed) pair very up to date. I would learn it and
be proficient with it enough to write code without flipping through a
book. I started with C++ with Perl and then switched to Python. And then
later with Java and Jython, and later with Groovy. These are my
strongest languages that I used the most, especially with Java. Of
course I never stop learning other languages as well, such as Scala and
Ruby etc. I personally think Ruby is very nice and good language to
learn and use. I just not have had a chance to use it that extensively
yet. Mastering a full static language such as Java would take much
longer time, but one can learn a dynamic language fairly quickly.&lt;/p&gt;

&lt;p&gt;Any rate, if you a programmer, I strongly encourage you to learn at
least two languages, and learn it well. As I said, prefer one static and
one dynamic language. This pair of combination will boost your
productivity to next level.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to bring pseudo code to life</title>
   <link href="http://localhost:4000/2013/05/01/how-to-bring-pseudo-code-to-life/"/>
   <updated>2013-05-01T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/05/01/how-to-bring-pseudo-code-to-life</id>
   <content type="html">&lt;p&gt;When designing a piece of software, I like to start with some pseudo code first, then work my way out. I tend to try mapping out the normal workflow (one that runs without any corner cases) with high level of actions as series of steps. Then the detailed implementation of the code can be filled in at later time.&lt;/p&gt;

&lt;p&gt;Now with Java, you can easily do this with pseudo code, bring it to life, and still make it very maintainable. Try this out.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package deng.javademo;
    
    /**
     * @author Zemian Deng
     */
    public class PseudoCodeToLife {
        public static void main(String[] args) {
            CreditCardProcessor creditCardProcessor = new CreditCardProcessor()
                    .step(webServiceRequest())
                    .step(validateCardNumber())
                    .step(validateSecurityCode())
                    .step(checkAvailableCredit())
                    .step(chargeCard())
                    .step(webServiceResponse());
    
            creditCardProcessor.run();
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now that’s as high level as you can get, but it still let me fill in the implementation without losing the overall requirement flow. To implement such workflow, we need a contract that allow processor to move data from one step to another, and yet it needs to perform some action along the way. How about an interface like this.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package deng.javademo;
    
    /**
     * @author Zemian Deng
     */
    public interface StepAction {
        public void onAction(Exchange exchange);
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Next is how to wire steps together. For now we can just do it inside &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CreditCardProcessor&lt;/code&gt;, but you can easily abstract that into a re-usable base class.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package deng.javademo;
    
    import java.util.ArrayList;
    import java.util.List;
    
    /**
     * @author Zemian Deng
     */
    public class CreditCardProcessor {
        List&amp;lt;StepAction&amp;gt; steps = new ArrayList&amp;lt;StepAction&amp;gt;();
    
        public CreditCardProcessor step(StepAction stepAction) {
            steps.add(stepAction);
            return this;
        }
    
        public void run() {
            Exchange exchange = new Exchange();
            for (StepAction step : steps) {
                step.onAction(exchange);
            }
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Pretty straight forward. Here I used an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Exchange&lt;/code&gt; as message, passing between each steps to allow the workflow to exchange data. You can wrap just about any real payload and/or add a Map of header properties.&lt;/p&gt;

&lt;p&gt;Now what we are missing is just filling in each step of actions. Since we have an explicit step name when defining the workflow, we can just generate these method and fill in the actions per step required. I will add them all inside the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PseudoCodeToLife&lt;/code&gt; and reprint it here.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package deng.javademo;
    
    /**
     * @author Zemian Deng
     */
    public class PseudoCodeToLife {
        public static void main(String[] args) {
            CreditCardProcessor creditCardProcessor = new CreditCardProcessor()
                    .step(webServiceRequest())
                    .step(validateCardNumber())
                    .step(validateSecurityCode())
                    .step(checkAvailableCredit())
                    .step(chargeCard())
                    .step(webServiceResponse());
    
            creditCardProcessor.run();
        }
    
        private static StepAction webServiceRequest() {
            return new StepAction() {
                @Override
                public void onAction(Exchange exchange) {
                    System.out.println(&quot;webServiceRequest step.&quot;);
                }
            };
        }
    
        private static StepAction validateCardNumber() {
            return new StepAction() {
                @Override
                public void onAction(Exchange exchange) {
                    System.out.println(&quot;validateCardNumber step.&quot;);
                }
            };
        }
    
        private static StepAction validateSecurityCode() {
            return new StepAction() {
                @Override
                public void onAction(Exchange exchange) {
                    System.out.println(&quot;validateSecurityCode step.&quot;);
                }
            };
        }
    
        private static StepAction checkAvailableCredit() {
            return new StepAction() {
                @Override
                public void onAction(Exchange exchange) {
                    System.out.println(&quot;checkAvailableCredit step.&quot;);
                }
            };
        }
    
        private static StepAction chargeCard() {
            return new StepAction() {
                @Override
                public void onAction(Exchange exchange) {
                    System.out.println(&quot;chargeCard step.&quot;);
                }
            };
        }
    
        private static StepAction webServiceResponse() {
            return new StepAction() {
                @Override
                public void onAction(Exchange exchange) {
                    System.out.println(&quot;webServiceResponse step.&quot;);
                }
            };
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That’s all to this. What do you think? I think it’s a simple way to tackle business problems. Simple software make less bugs and easier to maintain.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>First snapshot of myschedule-3.0.0 is available</title>
   <link href="http://localhost:4000/2013/03/27/first-snapshot-of-myschedule-3-0-0-is-available/"/>
   <updated>2013-03-27T01:00:00-04:00</updated>
   <id>http://localhost:4000/2013/03/27/first-snapshot-of-myschedule-3-0-0-is-available</id>
   <content type="html">&lt;p&gt;First snapshot of &lt;a href=&quot;https://code.google.com/p/myschedule/downloads/list&quot;&gt;myschedule-3.0.0&lt;/a&gt; with brand new UI is ready to be try out!&lt;/p&gt;

&lt;p&gt;It’s been a long time since I made a release for MySchedule project, and I have been busy!&lt;/p&gt;

&lt;p&gt;Well, for starter, I have been exploring the Vaaddin library for a new UI design for the project, and it’s working really nice! I love to have full Java code for UI layout and widget controls and yet it runs on browser. It’s a perfect fit for MySchedule. As you will see from the snapshot, the UI is still pretty bare, but for me, as backend developer, and be able to have such clean UI code is super exciting. (on other hand, working with JavaScript, even with such nice library as jQuery can still feel like a hack at times. ^_^) You should checkout the latest MySchedule source to take a look yourself. All that GUI is less than handful of UI classes. Vaaddin is pretty sweet!&lt;/p&gt;

&lt;p&gt;As MySchedule jumped to 3.x version, I’ve taken the opportunity to clean up few areas in the “quartz-extra” module as well. Also to support Vaadin, the web layer needed a rework. The new code is easy to follow and ready to support more UI features in the future.&lt;/p&gt;

&lt;p&gt;I also improved on the project packaging. Now getting started with is even more easier. Get the single zip file, and try any of these simple steps:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    ## Web application usage (option 1: power up a self-contained servlet server!)
     
     bash&amp;gt; cd myschedule-3.*
     bash&amp;gt; bin/myschedule-ui.sh --httpPort=8081
    
    Now open a browser and visit http://localhost:8081
    
    ## Web application usage (option 2: use your own servelt server)
    
    Simply copy the myschedule-3.*/war/myschedule.war file into your Servlet container such as Tomcat.
    
    ## Command line usage (option 3: quickly test your quartz config)
    
     bash&amp;gt; cd myschedule-3.*
     bash&amp;gt; bin/myschedule.sh bin/quartz.properties
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that not all MySchedule-2.x features are in the 3.0 snapshot yet. For now, you would need to use the ScripConsole window to enter jobs into the scheduler. There are now new templates UI available for you to choose and start working quickly. I am still working on allowing users to save their own templates and edit them. This should give users more rich experience in using the UI manager.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Hg shortcuts for bash .profile</title>
   <link href="http://localhost:4000/2013/02/28/hg-shortcuts-for-bash-profile/"/>
   <updated>2013-02-28T00:00:00-05:00</updated>
   <id>http://localhost:4000/2013/02/28/hg-shortcuts-for-bash-profile</id>
   <content type="html">&lt;p&gt;Some shortcuts I used most often when working with Mecurial (hg) source control.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    # Hg shortcuts
    function splithgfiles() { ruby -ne 'if $_ =~ /files: / then puts $_.split else puts $_ end' ; }
    alias hgpu='hg pull -u'
    alias hgl='hg log -v -l 5 | splithgfiles'
    alias hgl1='hg log -v -l 1 | splithgfiles'
    alias hgu='hg update'
    alias hgc='hg commit -m'
    alias hgb='hg branches'
    alias hgbm='hg bookmarks'
    alias hgt='hg tags'
    alias hgs='hg status'
    alias hgsu='echo &quot;# Summary&quot; &amp;amp;&amp;amp; hg summary &amp;amp;&amp;amp; echo &quot;# Heads&quot; &amp;amp;&amp;amp; hg heads'
    alias hgr='hg revert -C'
    
    # Remove unversion files from Hg repository dir.
    function hgrmnew {
     rm -vfr `hg st | cut -d ' ' -f 2`
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;One worth special mentioning is that default “hg log -v” shows files with space separator. I find it easier to view with one file per line instead, hence I added the “splithgfiles” helper function.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Few notes about Java clone() method</title>
   <link href="http://localhost:4000/2013/02/20/few-notes-about-java-clone-method/"/>
   <updated>2013-02-20T00:00:00-05:00</updated>
   <id>http://localhost:4000/2013/02/20/few-notes-about-java-clone-method</id>
   <content type="html">&lt;p&gt;Did you know you can create new Java instance without constructor? That’s right, and this feature is brought to you by the Java clone() method. I personally don’t like to use it much because it has many pitfalls, and it feels very broken in many ways. You probably can write better “clone” by using copy constructor or a static copy factory methods.&lt;/p&gt;

&lt;p&gt;Anyrate, here is a unit test that highlights few notes I have gathered about Java clone. Look for the “Note” comments below.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package atest;
    
    import org.junit.Test;
    
    import java.util.ArrayList;
    import java.util.List;
    
    import static org.hamcrest.Matchers.hasItems;
    import static org.hamcrest.Matchers.is;
    import static org.junit.Assert.assertThat;
    
    public class CloneTest {
        @Test
        public void testFooClone() throws Exception {
            Foo a = new Foo();
            Foo b = a.clone();
    
            assertThat(a != b, is(true));
            assertThat(a.constructorCallsCount, is(1));
            assertThat(a.name, is(&quot;foo&quot;));
            assertThat(b.constructorCallsCount, is(1)); // Note1: Wow, a new instance without calling constructor!
            assertThat(b.name, is(&quot;foo&quot;));
    
            a.name = &quot;fooX&quot;;
            assertThat(a.name, is(&quot;fooX&quot;));
            assertThat(b.name, is(&quot;foo&quot;));
    
            Foo2 c = new Foo2();
            c.ids.add(&quot;a&quot;);
            Foo2 d = c.clone();
            d.ids.add(&quot;b&quot;);
    
            c.ids.clear();
            c.ids.add(&quot;A&quot;);
    
            assertThat(c != d, is(true));
            assertThat(c.constructorCallsCount, is(2));
            assertThat(c.name, is(&quot;foo&quot;));
            assertThat(d.constructorCallsCount, is(2));
            assertThat(d.name, is(&quot;foo&quot;));
    
            assertThat(c.ids, hasItems(&quot;A&quot;));
            assertThat(c.ids.size(), is(1));
            assertThat(d.ids, hasItems(&quot;a&quot;, &quot;b&quot;));
            assertThat(d.ids.size(), is(2));
        }
    
        /** A simple clone examples with simple type fields. */
        public static class Foo implements Cloneable {
            static int constructorCallsCount = 0;
            String name = &quot;foo&quot;;
            public Foo() {
                constructorCallsCount++;
            }
            public Foo clone() {
                // Note2: Catch checked exception here so client or subclass doesn't need to.
                Foo result = null;
                try {
                    result = (Foo)super.clone();
                } catch (CloneNotSupportedException e) {
                    throw new RuntimeException(&quot;Unable to clone.&quot;, e);
                }
                return result;
            }
        }
    
        /** A clone example that needs to fix field afterward super.clone(). */
        public static class Foo2 extends Foo {
            List&amp;lt;String&amp;gt; ids = new ArrayList();
            public Foo2 clone() {
                Foo2 result = (Foo2)super.clone(); // Note3: Some how, super clone will auto return the correct type!
                result.ids = new ArrayList(ids);   // Note4: need to fix non-simple field.
                return result;
            }
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Learn how to grep by context will give you better result</title>
   <link href="http://localhost:4000/2013/02/03/learn-how-to-grep-by-context-will-give-you-better-result/"/>
   <updated>2013-02-03T00:00:00-05:00</updated>
   <id>http://localhost:4000/2013/02/03/learn-how-to-grep-by-context-will-give-you-better-result</id>
   <content type="html">&lt;p&gt;I learned that &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep&lt;/code&gt; command supports few options called “context” searching. Basically it can print lines around the matching string! For example, you can use this feature to perform a quick Java threads stack analysis like this (assuming you have a java process PID=12345).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; jstack 12345 | grep --color 'State: BLOCKED' -B 1
&quot;A-Bad-Boy-Thread&quot; prio=5 tid=0x00007fcfbc895800 nid=0xcd03 waiting on condition [0x00000001657cb000]
   java.lang.Thread.State: BLOCKED (on object monitor)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;See, without the “-B 1” option, which show one line before match, you won’t know which name of the tread that’s acting up! Now isn’t that a gem!&lt;/p&gt;

&lt;p&gt;You may also use “-A 5” to see 5 more lines after the match. Or you may use the “-C 5” to see 5 lines before and after the match.&lt;/p&gt;

&lt;p&gt;PS: There is nothing wrong with a “BLOCKED” thread in Java, however if you got one that won’t go away, then it’s a good indicator that something is fishy about that thread in your application; because in a well designed app, threads should be in BLOCKED state as briefly as possible. Read the javadoc on &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;java.lang.Thread.State&lt;/code&gt; for more details.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Fast shell utilities to report Maven's unit tests results</title>
   <link href="http://localhost:4000/2013/01/28/fast-shell-utilities-to-report-mavens-unit-tests-results/"/>
   <updated>2013-01-28T00:00:00-05:00</updated>
   <id>http://localhost:4000/2013/01/28/fast-shell-utilities-to-report-mavens-unit-tests-results</id>
   <content type="html">&lt;p&gt;I would like to share couple shell utilities that I have collected. These are for fast Maven multi modules reporting from your unit tests results, without having you to run entire Maven site reports, which can take a LONG time to generate if you have a large project! They should work on Linux or Window’s Cygwin shell.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Show failed tests among all the surefire results.
function failedtests() {
    for DIR in $(find . -maxdepth 3 -type d -name &quot;surefire-reports&quot;) ; do
        ruby -ne 'puts &quot;#$FILENAME : #$&amp;amp;&quot; if $_ =~ /(Failures: [1-9][0-9]*.*|Errors: [1-9][0-9]*.*)/' $DIR/*.txt
    done
}

# Show the top tests that took the longest time to run from maven surefire reports
function slowtests() {
    FILES=''
    for DIR in $(find . -maxdepth 3 -type d -name &quot;surefire-reports&quot;) ; do
        FILES=&quot;$FILES $DIR/*.txt&quot;
    done
    head -q -n 4 $FILES \
        | ruby -ne 'gets; print $_.chomp + &quot; &quot;; gets; print gets' \
        | ruby -ane 'printf &quot;%8.03f sec: &quot;, $F[-2].to_f; puts $_' \
        | sort -r \
        | head -10
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When developing with Maven, you often want to see a summary of failed tests, and you want those surefire TXT file content to see what’s going on. The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;failedtests&lt;/code&gt; function will give you a list of all the failed tests filenames in all modules; and then you can cat each one to investigate.&lt;/p&gt;

&lt;p&gt;With &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;slowtests&lt;/code&gt; function you may quickly see the top 10 most time consuming tests from your project!&lt;/p&gt;

&lt;p&gt;Enjoy!&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;updated-20130130&quot;&gt;Updated (2013/01/30)&lt;/h2&gt;

&lt;p&gt;I found out that the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;head&lt;/code&gt; command on MacOSX doesn’t have the “-q” option and it always prints the “==&amp;gt; filename `# Replace this
head -q -n 4 $FILES \&lt;/p&gt;

&lt;h1 id=&quot;with-this&quot;&gt;With this&lt;/h1&gt;
&lt;p&gt;ruby -e ‘ARGV.each{ |n| File.open(n) {|f| 4.times{ puts f.readline}} }’ $FILES &lt;br /&gt;
`
It’s a tad longer, but it’s PORTABLE!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Apache Tapestry 5 makes Java web development easy</title>
   <link href="http://localhost:4000/2013/01/11/apache-tapestry-5-makes-java-web-development-easy/"/>
   <updated>2013-01-11T00:00:00-05:00</updated>
   <id>http://localhost:4000/2013/01/11/apache-tapestry-5-makes-java-web-development-easy</id>
   <content type="html">&lt;p&gt;I went through the &lt;a href=&quot;http://tapestry.apache.org&quot;&gt;Apache Tapestry 5&lt;/a&gt; tutorial today and found it surprisingly easy to use. The two most productive features I love are auto class reloading and rich built-in components! I can edit the model/controller/view in a java IDE that auto compiles upon file save, and then reload browser to see immediate changes. I think any Java web framework should have this feature in order to be count as productive. (Yes there is JRebel, but it’s commercial, and nothing more simpler than a framework supports it directly. Well to be fair JRebel is much more advance and richer in support your Java classes reloading, however for purpose of web dev, Tapestry seems to provide a sweet spot and boot productivity  tremendously.)&lt;/p&gt;

&lt;p&gt;I was intrigued enough to continue reading the rest of their documentation for advance usage and architecture design. I love simple and yet productive libraries/framework design principles, and I think Tapestry fits into that category. Their documentation is rich and well organized. I browsed their forums and user communities and they seem to be active and plenty of usage in the field. I also found these &lt;a href=&quot;http://jumpstart.doublenegative.com.au/jumpstart/&quot;&gt;jumpstart examples&lt;/a&gt; to be extremely helpful.&lt;/p&gt;

&lt;p&gt;I am happy that I spent the time in learning this framework. I think it makes web development easy, fast and fun to work with. If you haven’t tried it before, or have not tried their latest version 5 lately, I would highly recommend you to give it a try.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Java implementation of String#next() successor</title>
   <link href="http://localhost:4000/2012/12/31/java-implementation-of-string-next-successor/"/>
   <updated>2012-12-31T00:00:00-05:00</updated>
   <id>http://localhost:4000/2012/12/31/java-implementation-of-string-next-successor</id>
   <content type="html">&lt;p&gt;I’ve found the &lt;a href=&quot;http://www.ruby-doc.org/core-1.9.3/String.html#method-i-succ&quot;&gt;Ruby’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;String#next()&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#succ&lt;/code&gt;&lt;/a&gt; very useful and productive, specially when generating data for testing. Here is what the Ruby doc says:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;succ -&amp;gt; new_str&lt;/p&gt;

  &lt;p&gt;next -&amp;gt; new_str&lt;/p&gt;

  &lt;p&gt;Returns the successor to str. The successor is calculated by incrementing characters starting from the rightmost alphanumeric (or the rightmost character &amp;gt; if there are no alphanumerics) in the string. Incrementing a digit always results in another digit, and incrementing a letter results in another letter &amp;gt; of the same case. Incrementing nonalphanumerics uses the underlying character sets collating sequence.&lt;/p&gt;

  &lt;p&gt;If the increment generates a carry, the character to the left of it is incremented. This process repeats until there is no carry, adding an additional &amp;gt; character if necessary.&lt;/p&gt;

  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&quot;abcd&quot;.succ        #=&amp;gt; &quot;abce&quot;
&quot;THX1138&quot;.succ     #=&amp;gt; &quot;THX1139&quot;
&quot;&amp;lt;&amp;lt;koala&amp;gt;&amp;gt;&quot;.succ   #=&amp;gt; &quot;&amp;lt;&amp;lt;koalb&amp;gt;&amp;gt;&quot;
&quot;1999zzz&quot;.succ     #=&amp;gt; &quot;2000aaa&quot;
&quot;ZZZ9999&quot;.succ     #=&amp;gt; &quot;AAAA0000&quot;
&quot;***&quot;.succ         #=&amp;gt; &quot;**+&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

&lt;/blockquote&gt;

&lt;p&gt;So when I saw Groovy actually has provided a &lt;a href=&quot;http://groovy.codehaus.org/groovy-jdk/java/lang/String.html#next()&quot;&gt;String extension &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#next()&lt;/code&gt;&lt;/a&gt; method, I was happy to try it out. But then I was quickly disappointed when the behavior is very different. The Groovy version is very simple and actually not very productive since it simply &lt;a href=&quot;https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/runtime/StringGroovyMethods.java&quot;&gt;loop through Character set range in incrementally&lt;/a&gt; (including non-printable characters blindly!). The Ruby’s version, however, is much more productive since it produce visible characters. For examples:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    bash&amp;gt; ruby -e 'puts &quot;Z&quot;.next()'
    AA
    bash&amp;gt; groovy -e 'println(&quot;Z&quot;.next())'
    [
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I wish Groovy version would improve in future as it’s not very useful at the moment. Just for fun, I wrote a Java implementation version that mimics the Ruby’s behavior:&lt;/p&gt;

&lt;p&gt;And here is my unit test for sanity check:&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Reading https url from a self-signed cert</title>
   <link href="http://localhost:4000/2012/12/26/reading-https-url-from-a-self-signed-cert/"/>
   <updated>2012-12-26T00:00:00-05:00</updated>
   <id>http://localhost:4000/2012/12/26/reading-https-url-from-a-self-signed-cert</id>
   <content type="html">&lt;p&gt;Groovy has made fetching data from URL a snap:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;println(new URL(&quot;http://www.google.com&quot;).text)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But have you ever try to get data from an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https&lt;/code&gt; of an site that’s using a self signed certificate? A browser will prompt you a risk warning, but it let you trust it and still continue. But it’s much more hassle if we want to fetch the data programmatically. For example, try fetching &lt;a href=&quot;https://www.pcwebshop.co.uk/&quot;&gt;https://www.pcwebshop.co.uk&lt;/a&gt; and you will see that it failed miserably:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    Caught: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
        at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1762)
        at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:241)
        at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:235)
        at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1206)
        at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:136)
        at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:593)
        at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:529)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:958)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1203)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1230)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1214)
        at test.run(test.groovy:2)
    Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
        at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:126)
        at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:209)
        at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:249)
        at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1185)
        ... 8 more
    Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
        ... 12 more
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is due to Java API won’t let you get data if your certs is not in the keystore or “trusted”. Now if you have your own testing site and did a self-signed like above, then sure you just want to trust it temporary and simply want to fetch the data. However configuring the Java API to do such simple task is a nightmare.&lt;/p&gt;

&lt;p&gt;Today, I found a library that allow you to perform exactly this: &lt;a href=&quot;https://github.com/kevinsawicki/http-request&quot;&gt;https://github.com/kevinsawicki/http-request&lt;/a&gt; Trying this out using Groovy is pretty sweet:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    @Grab('com.github.kevinsawicki:http-request:3.1')
    import com.github.kevinsawicki.http.*
    def req = HttpRequest.get(&quot;https://www.pcwebshop.co.uk&quot;)
    req.trustAllCerts()
    req.trustAllHosts()
    println(req.body())
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And Voila! We read the URL context without the pesky exception. This &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http-request&lt;/code&gt; is awesome! Now I wish JDK let you do simple thing like this. This is extremely useful for testing.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>A strange case of Java generic and inheritage parameter passing</title>
   <link href="http://localhost:4000/2012/12/20/a-strange-case-of-java-generic-and-inheritage-parameter-passing/"/>
   <updated>2012-12-20T00:00:00-05:00</updated>
   <id>http://localhost:4000/2012/12/20/a-strange-case-of-java-generic-and-inheritage-parameter-passing</id>
   <content type="html">&lt;p&gt;I came a cross some strange Java code and I would like to share it here. Take a look few of classes I have here:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    // file: AFoo.java
    package atest.deng;
    public abstract class AFoo&amp;lt;T&amp;gt; {
    }
    
    // file: Foo.java
    package atest.deng;
    public class Foo extends AFoo&amp;lt;String&amp;gt; {
    }
    
    // file: FooProcessor.java
    package atest.deng;
    public class FooProcessor&amp;lt;T&amp;gt; {
        public void process(Class&amp;lt;AFoo&amp;lt;?&amp;gt;&amp;gt; cls) {
            System.out.println(cls);
        }
    }
    
    // file: FooMain.java
    package atest.deng;
    public class FooMain {
        public static void main(String[] args) {
            new FooProcessor().process(Foo.class);
        }
    }
    
    bash&amp;gt; mvn compile
    bash&amp;gt; [INFO] BUILD SUCCESS
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I tried this with JDK6 + Maven and it compiles without problem. But try to remove the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;T&amp;gt;&lt;/code&gt; part from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FooProcessor&lt;/code&gt; and it will fail to compile!&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    // file: FooProcessor.java
    package atest.deng;
    public class FooProcessor {
        public void process(Class&amp;lt;AFoo&amp;lt;?&amp;gt;&amp;gt; cls) {
            System.out.println(cls);
        }
    }
    
    bash&amp;gt; mvn clean compile
    bash&amp;gt; [ERROR] java-demo\src\main\java test\deng\FooMain.java:[4,26] process(java.lang.Class&amp;lt;atest.deng.AFoo&amp;lt;?&amp;gt;&amp;gt;) in atest.deng.FooProcessor cannot be applied to (java.lang.Class&amp;lt;atest.deng.Foo&amp;gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Without the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;T&amp;gt;&lt;/code&gt; the code won’t compile, and yet we are not even using it in this case. How and why &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;T&amp;gt;&lt;/code&gt; affects the method parameters invocation?&lt;/p&gt;

&lt;p&gt;Now, we can improve the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FooProcessor&lt;/code&gt; in this way so that the presence of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;T&amp;gt;&lt;/code&gt; doesn’t have any affect.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package atest.deng;
    public class FooProcessor {
        public void process(Class&amp;lt;? extends AFoo&amp;lt;?&amp;gt;&amp;gt; cls) {
            System.out.println(cls);
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That’s a more proper way to write the generic parameter anyway. But despite a better solution, the puzzle is that the original code compiled under the compiler, but only with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;T&amp;gt;&lt;/code&gt; presented, and yet it’s not used. Wouldn’t you consider this as a Java compiler bug?&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>A simple Groovy issue tracker using file system</title>
   <link href="http://localhost:4000/2012/12/18/a-simple-groovy-issue-tracker-using-file-system/"/>
   <updated>2012-12-18T00:00:00-05:00</updated>
   <id>http://localhost:4000/2012/12/18/a-simple-groovy-issue-tracker-using-file-system</id>
   <content type="html">&lt;p&gt;It will be a chaos not to track bugs and feature requests when you developing software. Having a simple issue tracker would make managing the project much more successful. Now I like simple stuff, and I think for small project, having this tracker right inside the source control (especially with DSVC like Mercurial/Git etc) repository is not only doable, but very convenient as well. You don’t have to go crazy with all the fancy features, but just enough to track issues are fine. I would like to propose this layout for you.&lt;/p&gt;

&lt;p&gt;Let’s say you have a project that looks like this&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;```
project
 +- src/main/java/Hello.java
 +- issues/issue-001.md
 +- pom.xml
```
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;All I need is a simple directory &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;issues&lt;/code&gt; to get going. Now I have a place to track my issue! First issue &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;issue-000.md&lt;/code&gt; should be what your project is about. For example:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    /id=issue-001
    /createdon=2012-12-16 18:07:08
    /type=bug
    /status=new
    /resolution=
    /from=Zemian
    /to=
    /found=
    /fixed=
    /subject=A simple Java Hello program

    # Updated on 2012-12-16 18:07:08

    We want to create a Maven based Hello world program. It should print &quot;Hello World.&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I choose &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.md&lt;/code&gt; as file extension for intending to write comments in Markdown format. Since it’s a text file, you do what you want. To be more structured, I have added some headers metadata for issue tracking. Let’s define some here. I would propose to use these and formatting:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;     /id=issue-&amp;lt;NUM&amp;gt;
     /createdon=&amp;lt;TIMESTAMP&amp;gt;
     /type=feature|bug|question
     /status=new|reviewing|working|onhold|testing|resolved
     /resolution=fixed|rejected|duplicated
     /from=&amp;lt;REPORTER_FROM_NAME&amp;gt;
     /to=&amp;lt;ASSIGNEE_TO_NAME&amp;gt;
     /found=&amp;lt;VERSION_FOUND&amp;gt;
     /fixed=&amp;lt;VERSION_FIXED&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That should cover most of the bug and feature development issues. It’s not cool to write software without a history of changes, including these issues created. So let’s use a source control. I highly recommend you to use Mercurial &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hg&lt;/code&gt;. You can create and initialize a new repository like this.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    bash&amp;gt; cd project
    bash&amp;gt; hg init
    bash&amp;gt; hg add
    bash&amp;gt; hg commit -m &quot;My hello world project&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now your project is created and we have a place to track your issues. Now it’s simple text file, so use your favorite text editor and edit away. However, creating new issue with those header tags is boring. It will be nice to have a script that manage it a little. I have a Groovy script &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;issue.groovy&lt;/code&gt; (see at the end of this article) that let you run reports and create new issues. You can add this script into your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;project/issues&lt;/code&gt; directory and you can instantly creating new issue and querying reports! Here is an example output on my PC:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    bash&amp;gt; cd project
    bash&amp;gt; groovy scripts/issue.groovy
    
    Searching for issues with /status!=resolved
    Issue: /id=issue-001 /status=new /subject=A simple Java Hello program
    1 issues found.
    
    bash&amp;gt; groovy scripts/issue.groovy --new /type=feature /subject='Add a unit test.'
    
    project/issues/issue-002.md created.
    /id=issue-002
    /createdon=2012-12-16 19:10:00
    /type=feature
    /status=new
    /resolution=
    /from=Zemian
    /to=
    /found=
    /fixed=
    /subject=Add a unit test.
    
    bash&amp;gt; groovy scripts/issue.groovy
    
    Searching for issues with /status!=resolved
    Issue: /id=issue-000 /status=new /subject=A simple Java Hello program
    Issue: /id=issue-002 /status=new /subject=Add a unit test.
    2 issues found.
    
    bash&amp;gt; groovy scripts/issue.groovy --details /id=002
    
    Searching for issues with /id=002
    Issue: /id=issue-002
      /createdon=2012-12-16 19:10:00 /found= /from=Zemian /resolution= /status=new /type=feature
      /subject=Add a unit test.
    1 issues found.
    
    bash&amp;gt; groovy scripts/issue.groovy --update /id=001 /status=resolved /resolution=fixed 'I fixed this thang.'
    Updating issue /id=issue-001
    Updating /status=resolved
    Updating /resolution=fixed
    
    Update issue-001 completed.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The script give you some quick and consistent way to create/update/search issues. But they are just plain text files! You can just as well fire up your favorite text editor and change any any thing you want. Save and even commit it into your source repository. All will not lost.&lt;/p&gt;

&lt;p&gt;I hope this issue tracking script can get your next project started quickly. Let me know what you do you think!&lt;/p&gt;

&lt;p&gt;Enjoy!&lt;/p&gt;

&lt;p&gt;Zemian&lt;/p&gt;

&lt;p&gt;And here is my &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;issue.groovy&lt;/code&gt; script.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Oh, and of course I eat my own *dog food. Here are few issues that I started to track the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;issue.grooy&lt;/code&gt; itself.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;v1.0.0 (2012/12/19)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://bitbucket.org/saltnlight5/sandbox/src/tip/scripts/issue-001.md&quot;&gt;issue-001&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;v1.0.1 (2012/12/20)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://bitbucket.org/saltnlight5/sandbox/src/tip/scripts/issue-002.md&quot;&gt;issue-002&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://bitbucket.org/saltnlight5/sandbox/src/tip/scripts/issue-003.md&quot;&gt;issue-003&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>Getting started with Quartz Scheduler on MySQL database</title>
   <link href="http://localhost:4000/2012/12/14/getting-started-with-quartz-scheduler-on-mysql-database/"/>
   <updated>2012-12-14T00:00:00-05:00</updated>
   <id>http://localhost:4000/2012/12/14/getting-started-with-quartz-scheduler-on-mysql-database</id>
   <content type="html">&lt;p&gt;Here are some simple steps to get you fully started with Quartz Scheduler on MySQL database using Groovy. The script below will allow you to quickly experiment different Quartz configuration settings using an external file.&lt;/p&gt;

&lt;p&gt;First step is to setup the database with tables. Assuming you already have installed MySQL and have access to create database and tables.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; mysql -u root -p

sql&amp;gt; create database quartz2;
sql&amp;gt; create user 'quartz2'@'localhost' identified by 'quartz2123';
sql&amp;gt; grant all privileges on quartz2.* to 'quartz2'@'localhost';
sql&amp;gt; exit;

bash&amp;gt; mysql -u root -p quartz2 &amp;lt; /path/to/quartz-dist/docs/dbTables/tables_mysql.sql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tables_mysql.sql&lt;/code&gt; can be found from Quartz distribution download, or directly from their source &lt;a href=&quot;http://svn.terracotta.org/svn/quartz/tags/quartz-2.1.6/docs/dbTables&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Once the database is up, you need to write some code to start up the Quartz Scheduler. Here is a simply Groovy script &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;quartzServer.groovy&lt;/code&gt; that will run as a tiny scheduler server.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;```
// Run Quartz Scheduler as a server
// Author: Author: Zemian Deng, date: 2012-12-15T00:00:00-05:00
@GrabConfig(systemClassLoader=true)
@Grab('mysql:mysql-connector-java:5.1.22')
@Grab('org.slf4j:slf4j-simple:1.7.1')
@Grab('org.quartz-scheduler:quartz:2.1.6')
import org.quartz.*
import org.quartz.impl.*
import org.quartz.jobs.*

config = args.length &amp;gt; 0 ? args[0] : &quot;quartz.properties&quot;
scheduler = new StdSchedulerFactory(config).getScheduler()
scheduler.start()

// Register shutdown
addShutdownHook {
  scheduler.shutdown()
}

// Quartz has its own thread, so now put this script thread to sleep until
// user hit CTRL+C
while (!scheduler.isShutdown()) {
 Thread.sleep(Long.MAX_VALUE)
}
```
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And now you just need a config file &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;quartz-mysql.properties&lt;/code&gt; that looks like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    # Main Quartz configuration
    org.quartz.scheduler.skipUpdateCheck = true
    org.quartz.scheduler.instanceName = DatabaseScheduler
    org.quartz.scheduler.instanceId = NON_CLUSTERED
    org.quartz.scheduler.jobFactory.class = org.quartz.simpl.SimpleJobFactory
    org.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTX
    org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.StdJDBCDelegate
    org.quartz.jobStore.dataSource = quartzDataSource
    org.quartz.jobStore.tablePrefix = QRTZ_
    org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool
    org.quartz.threadPool.threadCount = 5
    
    # JobStore: JDBC jobStoreTX
    org.quartz.dataSource.quartzDataSource.driver = com.mysql.jdbc.Driver
    org.quartz.dataSource.quartzDataSource.URL = jdbc:mysql://localhost:3306/quartz2
    org.quartz.dataSource.quartzDataSource.user = quartz2
    org.quartz.dataSource.quartzDataSource.password = quartz2123
    org.quartz.dataSource.quartzDataSource.maxConnections = 8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can run the Groovy script as usual&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;```
bash&amp;gt; groovy quartzServer.groovy quartz-mysql.properties
Dec 15, 2012 6:20:26 PM com.mchange.v2.log.MLog 
INFO: MLog clients using java 1.4+ standard logging.
Dec 15, 2012 6:20:27 PM com.mchange.v2.c3p0.C3P0Registry banner
INFO: Initializing c3p0-0.9.1.1 [built 15-March-2007 01:32:31; debug? true; trace:10]
[main] INFO org.quartz.impl.StdSchedulerFactory - Using default implementation for ThreadExecutor
[main] INFO org.quartz.core.SchedulerSignalerImpl - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
[main] INFO org.quartz.core.QuartzScheduler - Quartz Scheduler v.2.1.6 created.
[main] INFO org.quartz.core.QuartzScheduler - JobFactory set to: org.quartz.simpl.SimpleJobFactory@1a40247
[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - Using thread monitor-based data access locking (synchronization).
[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - JobStoreTX initialized.
[main] INFO org.quartz.core.QuartzScheduler - Scheduler meta-data: Quartz Scheduler (v2.1.6) 'DatabaseScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 5 threads.
  Using job-store 'org.quartz.impl.jdbcjobstore.JobStoreTX' - which supports persistence. and is not clustered.

[main] INFO org.quartz.impl.StdSchedulerFactory - Quartz scheduler 'DatabaseScheduler' initialized from the specified file : 'quartz-mysql.properties' from the class resource path.
[main] INFO org.quartz.impl.StdSchedulerFactory - Quartz scheduler version: 2.1.6
Dec 15, 2012 6:20:27 PM com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource getPoolManager
INFO: Initializing c3p0 pool... com.mchange.v2.c3p0.ComboPooledDataSource [ acquireIncrement -&amp;gt; 3, acquireRetryAttempts
-&amp;gt; 30, acquireRetryDelay -&amp;gt; 1000, autoCommitOnClose -&amp;gt; false, automaticTestTable -&amp;gt; null, breakAfterAcquireFailure -&amp;gt; false, checkoutTimeout -&amp;gt; 0, connectionCustomizerClassName -&amp;gt; null, connectionTesterClassName -&amp;gt; com.mchange.v2.c3p0.impl.DefaultConnectionTester, dataSourceName -&amp;gt; 1hge16k8r18mveoq1iqtotg|1486306, debugUnreturnedConnectionStackTraces -&amp;gt; fals
e, description -&amp;gt; null, driverClass -&amp;gt; com.mysql.jdbc.Driver, factoryClassLocation -&amp;gt; null, forceIgnoreUnresolvedTransactions -&amp;gt; false, identityToken -&amp;gt; 1hge16k8r18mveoq1iqtotg|1486306, idleConnectionTestPeriod -&amp;gt; 0, initialPoolSize -&amp;gt; 3, jdbcUrl -&amp;gt; jdbc:mysql://localhost:3306/quartz2, lastAcquisitionFailureDefaultUser -&amp;gt; null, maxAdministrativeTaskTime -&amp;gt; 0
, maxConnectionAge -&amp;gt; 0, maxIdleTime -&amp;gt; 0, maxIdleTimeExcessConnections -&amp;gt; 0, maxPoolSize -&amp;gt; 8, maxStatements -&amp;gt; 0, maxStatementsPerConnection -&amp;gt; 120, minPoolSize -&amp;gt; 1, numHelperThreads -&amp;gt; 3, numThreadsAwaitingCheckoutDefaultUser -&amp;gt; 0, pref
erredTestQuery -&amp;gt; null, properties -&amp;gt; {user=******, password=******}, propertyCycle -&amp;gt; 0, testConnectionOnCheckin -&amp;gt; false, testConnectionOnCheckout -&amp;gt; false, unreturnedConnectionTimeout -&amp;gt; 0, usesTraditionalReflectiveProxies -&amp;gt; false ]
[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - Freed 0 triggers from 'acquired' / 'blocked' state.[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - Recovering 0 jobs that were in-progress at the time of the last shut-down.
[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - Recovery complete.
[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - Removed 0 'complete' triggers.
[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - Removed 0 stale fired job entries.
[main] INFO org.quartz.core.QuartzScheduler - Scheduler DatabaseScheduler_$_NON_CLUSTERED started.


... CTRL+C
[Thread-6] INFO org.quartz.core.QuartzScheduler - Scheduler DatabaseScheduler_$_NON_CLUSTERED shutting down.
[Thread-6] INFO org.quartz.core.QuartzScheduler - Scheduler DatabaseScheduler_$_NON_CLUSTERED paused.
[Thread-6] INFO org.quartz.core.QuartzScheduler - Scheduler DatabaseScheduler_$_NON_CLUSTERED shutdown complete.
```
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That’s a full run of above setup. Go ahead and play with different config. Read &lt;a href=&quot;http://quartz-scheduler.org/documentation/quartz-2.1.x/configuration/&quot;&gt;http://quartz-scheduler.org/documentation/quartz-2.1.x/configuration&lt;/a&gt; for more details.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Here I will post couple more easy config that will get you started in a commonly used config set.&lt;/p&gt;

&lt;p&gt;A MySQL cluster enabled configuration. With this, you can start one or more shell terminal and run different instance of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;quartzServer.groovy&lt;/code&gt; with the same config. All the quartz scheduler instances should cluster themselve and distribute your jobs evenly.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;```
# Main Quartz configuration
org.quartz.scheduler.skipUpdateCheck = true
org.quartz.scheduler.instanceName = DatabaseClusteredScheduler
org.quartz.scheduler.instanceId = AUTO
org.quartz.scheduler.jobFactory.class = org.quartz.simpl.SimpleJobFactory
org.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTX
org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.StdJDBCDelegate
org.quartz.jobStore.dataSource = quartzDataSource
org.quartz.jobStore.tablePrefix = QRTZ_
org.quartz.jobStore.isClustered = true
org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool
org.quartz.threadPool.threadCount = 5

# JobStore: JDBC jobStoreTX
org.quartz.dataSource.quartzDataSource.driver = com.mysql.jdbc.Driver
org.quartz.dataSource.quartzDataSource.URL = jdbc:mysql://localhost:3306/quartz2
org.quartz.dataSource.quartzDataSource.user = quartz2
org.quartz.dataSource.quartzDataSource.password = quartz2123
org.quartz.dataSource.quartzDataSource.maxConnections = 8
```
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here is another config set for a simple in-memory scheduler.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;```
# Main Quartz configuration
org.quartz.scheduler.skipUpdateCheck = true
org.quartz.scheduler.instanceName = InMemoryScheduler
org.quartz.scheduler.jobFactory.class = org.quartz.simpl.SimpleJobFactory
org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool
org.quartz.threadPool.threadCount = 5
```
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now, if you need more fancy UI management of Quartz, give &lt;a href=&quot;http://code.google.com/p/myschedule&quot;&gt;MySchedule&lt;/a&gt; a try.&lt;/p&gt;

&lt;p&gt;Happy scheduling!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Cygwin tips - open anything with cygstart</title>
   <link href="http://localhost:4000/2012/12/13/cygwin-tips-open-anything-with-cygstart/"/>
   <updated>2012-12-13T00:00:00-05:00</updated>
   <id>http://localhost:4000/2012/12/13/cygwin-tips-open-anything-with-cygstart</id>
   <content type="html">&lt;p&gt;Cygwin has this cool command called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cygstart&lt;/code&gt;, and I usually alias it as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;open&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;alias open='cygstart'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here are few things I use often:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# bring up Windows Explore with folder open
bash&amp;gt; open /cygdrive/c/temp
bash&amp;gt; open &quot;$USERPROFILE&quot;
 
# bring up browser on a url
bash&amp;gt; open http://google.com
 
# bring up any windows program by file extension
bash&amp;gt; open /cygdrive/c/my.docx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Because I use a Cygwin terminal shell a lot, I have many alias shortcuts to many different directories. The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;open .&lt;/code&gt; allows me to jump to any directory and starts the Windows Explore with that directory expanded quickly. You can see more options with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;open --help&lt;/code&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>A command to remove all Windows mapped drives</title>
   <link href="http://localhost:4000/2012/12/12/a-command-to-remove-all-windows-mapped-drives/"/>
   <updated>2012-12-12T00:00:00-05:00</updated>
   <id>http://localhost:4000/2012/12/12/a-command-to-remove-all-windows-mapped-drives</id>
   <content type="html">&lt;p&gt;If you work in a Corp env and having a Laptop, you will likely go home
with it still running and it must has all the network drives still
mapped. And then later when you are at home and try to use your Laptop,
you will see considerable delay. The Windows Explore and many Windows
application that access File Browser dialog will try relentlessly in
reconnecting those drives without sucess. This also affect your Cygwin
shell too.&lt;/p&gt;

&lt;p&gt;Here is a DOS command to remove them all.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;C:&amp;gt; net use * /delete /y
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you are in Cygwin bash, then you must quote the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;'*'&lt;/code&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Intellij IDEA is pretty awesome!</title>
   <link href="http://localhost:4000/2012/12/11/intellij-idea-is-pretty-awesome/"/>
   <updated>2012-12-11T00:00:00-05:00</updated>
   <id>http://localhost:4000/2012/12/11/intellij-idea-is-pretty-awesome</id>
   <content type="html">&lt;p&gt;Did you know IntelliJ IDEA has a free Community Edition you may &lt;a href=&quot;http://www.jetbrains.com/idea/download/index.html&quot;&gt;download&lt;/a&gt;? I’ve been test driving it, and I will post few things I learned so far.&lt;/p&gt;

&lt;p&gt;Here are few things that I usually change from out of the default installed settings.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;File &amp;gt; Settings &amp;gt; Editor =&amp;gt; Uncheck “Allow placement of caret after end of line” – This is the most annoying thing for me in IDE. It’s just not for me.&lt;/li&gt;
  &lt;li&gt;File &amp;gt; Settings &amp;gt; Editor &amp;gt; Appearance =&amp;gt; Check “Show line numbers” – I tend to relate errors and navigate content better with line number displayed.&lt;/li&gt;
  &lt;li&gt;File &amp;gt; Settings &amp;gt; Appearance &amp;gt; Theme =&amp;gt; Select “Darcula” – This is latest version 12.0 feature. Dark screen is pretty eye pleasing compare to WHITE.&lt;/li&gt;
  &lt;li&gt;File &amp;gt; Settings &amp;gt; Compiler =&amp;gt; Check “Make project automatically” – Another new 12.0 feature that would perform incremental compile.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Now the IDE is ready for me to work on any Java projects. If you work with Maven, then you will be happy to know that IDEA supports it out of box. You can get an existing project started with following steps:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;File &amp;gt; Import Project =&amp;gt; Browse to your project pom.xml. Even if you have multi Maven modules, you only need to pick the top level pom.xml and it will generate the multi IDEA modules for you automatically. Then click “Ok” button.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;In “Import project from external model” select “Maven”, and then “Next”.&lt;/li&gt;
  &lt;li&gt;You can accept all default settings on this prompt, and simply go “Next”&lt;/li&gt;
  &lt;li&gt;Check all maven project to import&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Next screen is selecting a SDK for this project (meaning pick a JDK) to use. If this is your first time setup, then create a new one by click on the Grean plus icon, then browse to your JAVA_HOME directory and click OK. Click “Next” to go next step.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Simply click “Next” to accept default project name. Then you are at last prompt. Simply click “Finish” button and you should have your project ready to go.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;It might seems like a lot of steps to import a project, but IDEA is really nice. After your project has completely imported and compiled, you should able open any of your Java class (use CTRL+N) that has &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main&lt;/code&gt; method or any JUnit classes. Right click the content editor and select “Run …” to execute it (or CTRL+SHIFT+F10 to run any single unit test method).&lt;/p&gt;

&lt;p&gt;I have tried a decent size Java projects (few thousand source files) and it handles it very gracefully. The UI such as Menu items, Control buttons and tool bars are very user friendly and intuitive to use. Also, right click on most places should give you a “Context” menu with related options. Like any IDE, it supports the CTRL+Space that auto complete code as you type. There is the ALT+ENTER would suggest hints on how to fix things when you got an error with red squiggle line. Pressing CTRL+B will jump into methods or variable declarations.&lt;/p&gt;

&lt;p&gt;Another tips I have for you is the IDEA uses many icon symbols to represent many things. These give you quick visual status on files, progress and states of your Classes etc. It’s helpful to see what they mean using this &lt;a href=&quot;http://www.jetbrains.com/idea/webhelp/symbols.html&quot;&gt;http://www.jetbrains.com/idea/webhelp/symbols.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So overall, I think IntelliJ IDEA is pretty good and awesome in many way.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>A very light Groovy based web application project template</title>
   <link href="http://localhost:4000/2012/11/28/a-very-light-groovy-based-web-application-project-template/"/>
   <updated>2012-11-28T00:00:00-05:00</updated>
   <id>http://localhost:4000/2012/11/28/a-very-light-groovy-based-web-application-project-template</id>
   <content type="html">&lt;p&gt;You might have heard of the project Grails is a Groovy version of Ruby on Rails like framework that let you create web application much more easier with
Dynamic scripting. Despite all that power Grails provided, it is not “light” if you look under the hood. I am not saying Grails is bad or anything. Grails is actually pretty cool to write web application with. However I found myself often want something even lighter and yet still want to prototype with Groovy. So here I will show you a &lt;a href=&quot;https://bitbucket.org/saltnlight5/sandbox/downloads/maven-webapp-groovy.zip&quot;&gt;maven-groovy-webapp&lt;/a&gt; project template that I use to get start any web application development. It’s very simple, light, and yet very Groovy.&lt;/p&gt;

&lt;h1 id=&quot;how-to-get-started&quot;&gt;How to get started&lt;/h1&gt;

&lt;p&gt;Unzip &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;maven-webapp-groovy.zip&lt;/code&gt; above and you should see these few files:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    bash&amp;gt; cd maven-webapp-groovy
    bash&amp;gt; find .
    bash&amp;gt; ./pom.xml
    bash&amp;gt; ./README.txt
    bash&amp;gt; ./src
    bash&amp;gt; ./src/main
    bash&amp;gt; ./src/main/java
    bash&amp;gt; ./src/main/java/deng
    bash&amp;gt; ./src/main/java/deng/GroovyContextListener.java
    bash&amp;gt; ./src/main/resources
    bash&amp;gt; ./src/main/resources/log4j.properties
    bash&amp;gt; ./src/main/webapp
    bash&amp;gt; ./src/main/webapp/console.gt
    bash&amp;gt; ./src/main/webapp/health.gt
    bash&amp;gt; ./src/main/webapp/home.gt
    bash&amp;gt; ./src/main/webapp/WEB-INF
    bash&amp;gt; ./src/main/webapp/WEB-INF/classes
    bash&amp;gt; ./src/main/webapp/WEB-INF/classes/.keep
    bash&amp;gt; ./src/main/webapp/WEB-INF/groovy
    bash&amp;gt; ./src/main/webapp/WEB-INF/groovy/console.groovy
    bash&amp;gt; ./src/main/webapp/WEB-INF/groovy/health.groovy
    bash&amp;gt; ./src/main/webapp/WEB-INF/groovy/home.groovy
    bash&amp;gt; ./src/main/webapp/WEB-INF/groovy/init.groovy
    bash&amp;gt; ./src/main/webapp/WEB-INF/groovy/destroy.groovy
    bash&amp;gt; ./src/main/webapp/WEB-INF/web.xml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you can see it’s a maven based application, and I have configured tomcat plugin, so you may run it like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; mvn tomcat7:run
bash&amp;gt; open http://localhost:8080/maven-webapp-groovy/home.groovy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And ofcourse, with maven, running package phase will let you deploy it into any real application servers when ready.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; mvn package
bash&amp;gt; cp target/maven-webapp-groovy.war $APP_SERVER_HOME/autodeploy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;whats-in-it&quot;&gt;What’s in it&lt;/h1&gt;

&lt;p&gt;You should checkout the main config in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;web.xml&lt;/code&gt; file, and you’ll see that there couple built-in Groovy servlets and a custom listener.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;
    &amp;lt;web-app xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;
            xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
            xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;
            version=&quot;2.5&quot;&amp;gt;
    
        &amp;lt;description&amp;gt;Groovy Web Application&amp;lt;/description&amp;gt;
        &amp;lt;welcome-file-list&amp;gt;
            &amp;lt;welcome-file&amp;gt;home.groovy&amp;lt;/welcome-file&amp;gt;
        &amp;lt;/welcome-file-list&amp;gt;
    
        &amp;lt;servlet&amp;gt;
            &amp;lt;servlet-name&amp;gt;GroovyServlet&amp;lt;/servlet-name&amp;gt;
            &amp;lt;servlet-class&amp;gt;groovy.servlet.GroovyServlet&amp;lt;/servlet-class&amp;gt;
        &amp;lt;/servlet&amp;gt;
        &amp;lt;servlet-mapping&amp;gt;
            &amp;lt;servlet-name&amp;gt;GroovyServlet&amp;lt;/servlet-name&amp;gt;
            &amp;lt;url-pattern&amp;gt;*.groovy&amp;lt;/url-pattern&amp;gt;
        &amp;lt;/servlet-mapping&amp;gt;
    
        &amp;lt;servlet&amp;gt;
            &amp;lt;servlet-name&amp;gt;TemplateServlet&amp;lt;/servlet-name&amp;gt;
            &amp;lt;servlet-class&amp;gt;groovy.servlet.TemplateServlet&amp;lt;/servlet-class&amp;gt;
        &amp;lt;/servlet&amp;gt;
        &amp;lt;servlet-mapping&amp;gt;
            &amp;lt;servlet-name&amp;gt;TemplateServlet&amp;lt;/servlet-name&amp;gt;
            &amp;lt;url-pattern&amp;gt;*.gt&amp;lt;/url-pattern&amp;gt;
        &amp;lt;/servlet-mapping&amp;gt;
    
        &amp;lt;listener&amp;gt;
            &amp;lt;listener-class&amp;gt;deng.GroovyContextListener&amp;lt;/listener-class&amp;gt;
        &amp;lt;/listener&amp;gt;
        &amp;lt;context-param&amp;gt;  
           &amp;lt;param-name&amp;gt;initScripts&amp;lt;/param-name&amp;gt;
           &amp;lt;param-value&amp;gt;/WEB-INF/groovy/init.groovy&amp;lt;/param-value&amp;gt;
        &amp;lt;/context-param&amp;gt;
        &amp;lt;context-param&amp;gt;    
           &amp;lt;param-name&amp;gt;destroyScripts&amp;lt;/param-name&amp;gt;
           &amp;lt;param-value&amp;gt;/WEB-INF/groovy/destroy.groovy&amp;lt;/param-value&amp;gt;
        &amp;lt;/context-param&amp;gt;
    
    &amp;lt;/web-app&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I’ve chosen to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GroovyServlet&lt;/code&gt; as a controller (it comes with Groovy!), and this let you use any scripts inside &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/WEB-INF/groovy&lt;/code&gt; directory. That’s it, no further setup. That’s about the only requirement you need to get a Groovy webapp started! See &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;console.groovy&lt;/code&gt; as example and how it works. It’s a groovy version of &lt;a href=&quot;http://saltnlight5.blogspot.com/2012/07/script-console-tool-for-any-war.html&quot;&gt;this JVM console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Now you can use Groovy to process any logic and even generate the HTML output if you like, but I find it even more easier to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TemplateServlet&lt;/code&gt;. This allow Groovy template files to be serve as view. It’s very much like JSP, but it uses Groovy instead! And we know Groovy syntax are much shorter to write! See &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;console.gt&lt;/code&gt; as exmaple and how it works.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GroovyContextListener&lt;/code&gt; is something I wrote, and it’s optional. This allow you to run any scripts during the webapp startup or shutdown states. I’ve created an empty &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;init.groovy&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;destroy.groovy&lt;/code&gt; placeholder. So now you have all the hooks you need to prototype just about any web application you need.&lt;/p&gt;

&lt;h1 id=&quot;simplicity-wins&quot;&gt;Simplicity wins&lt;/h1&gt;

&lt;p&gt;This setup is just plain Java Servlet with Groovy loaded. I often think the more simple you get, then less bug and faster you code. No heavy frameworks, no extra learning curve, (other than basic Servlet API and Groovy/Java skills ofcourse), and off you go.&lt;/p&gt;

&lt;p&gt;Go have fun with this Groovy webapp template! And let me know if you have some cool prototypes to show off after playing with this. :)&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Use cygpath with -p option for your Java CLASSPATH conversion</title>
   <link href="http://localhost:4000/2012/11/15/use-cygpath-with-p-option-for-your-java-classpath-conversion/"/>
   <updated>2012-11-15T00:00:00-05:00</updated>
   <id>http://localhost:4000/2012/11/15/use-cygpath-with-p-option-for-your-java-classpath-conversion</id>
   <content type="html">&lt;p&gt;I just noticed that Cygwin’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cygpath&lt;/code&gt; command supports &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-p&lt;/code&gt; option. This is a real gem when writing Java wrapper script that needs to covert CLASSPATH values. A simple script can demonstrate the purpose.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    #!/usr/bin/env bash
    # Author: Zemian Deng, date: 2012-11-16T00:00:00-05:00
    #
    # run.sh - A simple Java wrapper script for Cygwin and Unix/Linux shell. We assume 
    # this script is located in a subdiretory inside the application home directory.
    # Example:
    #   app/bin/run.sh
    #   app/config/log4j.properties
    #   app/lib/log4j.jar
    # Usage:
    #   bash&amp;gt; run.sh app.Hello
    #
    DIR=$(cd &quot;$(dirname $0)/..&quot; &amp;amp;&amp;amp; pwd)
    CP=${CP:=&quot;$DIR/config:$DIR/lib/*&quot;}
    if [[ &quot;$OS&quot; == Windows* ]]; then
     CP=$(cygpath -mp $CP)
    fi
    java -cp &quot;$CP&quot; &quot;$@&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>What does UTF-8 with BOM mean?</title>
   <link href="http://localhost:4000/2012/11/02/what-does-utf-8-with-bom-mean/"/>
   <updated>2012-11-02T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/11/02/what-does-utf-8-with-bom-mean</id>
   <content type="html">&lt;p&gt;Believe it or not, There is no such thing as Plain Text!&lt;/p&gt;

&lt;p&gt;All files in a modern Operating Sytems (Windows, Linux, or MacOSX) are saved with an encoding scheme! They are encoded (a table mapping of what each byte means) in such way so that other programs can read it back and understand how to get information out. It happens that US/ASCII encoding is earliest and widely used that people think it’s just “Plain Tex”. But even ASCII is an encoding! It uses 7 bits in mapping all US characters in saving the bytes into file. Obviously you are free to use any kind of encoding (mapping) scheme to save any files, but if you want other programs to read it back easily, then sticking to some standard ones would help a lot. Without an agreed upon encoding, programs will not able to read files and be any useful!&lt;/p&gt;

&lt;p&gt;The most useful and practical file encoding today is “UTF-8” because it support Unicode, and it’s widely used in internet.&lt;/p&gt;

&lt;p&gt;I discovered something odd when using Eclipse and Notepadd++. In Ecilpse, if we set default encoding with UTF-8, it would use normal UTF-8 without the Byte Order Mark (BOM). But in Notepad++, it appears to support UTF-8 wihtout BOM, but it won’t recoginze it when first open. You can check this by going Menu &amp;gt; Encoding and see which one is selected. Notepad++ seems to only recognize UTF-8 wihtout BOM with ones it converted by it’s own conversion utility. Perhaps it’s a bug in notepad++.&lt;/p&gt;

&lt;p&gt;So what is BOM? The byte order mark is useless for UTF-8. They only used for UTF-16 so they know which byte order is first. But UTF-8 will allow you to save these BOM for conversion purpose… they are ineffective in encoding the doc itself. So a “normal” UTF-8, it won’t have BOM, but Windows would like to use them anyway. The Windows NOTEPAD would automatically save BOM in UTF-8!&lt;/p&gt;

&lt;p&gt;So be-aware when viewing UTF-8 without BOM encoding files in Notepad++, as it can be deceiving at first glance.&lt;/p&gt;

&lt;p&gt;Ref:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/UTF-8&quot;&gt;http://en.wikipedia.org/wiki/UTF-8&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.joelonsoftware.com/articles/Unicode.html&quot;&gt;http://www.joelonsoftware.com/articles/Unicode.html&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>A simple way to setup Java application with external configuration file</title>
   <link href="http://localhost:4000/2012/10/27/a-simple-way-to-setup-java-application-with-external-configuration-file/"/>
   <updated>2012-10-27T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/10/27/a-simple-way-to-setup-java-application-with-external-configuration-file</id>
   <content type="html">&lt;p&gt;Many Java applications would deploy and run it with some kind of external configuration files. It’s very typical that you would want a set of config files per environments such as DEV, QA and PROD. There many options in tackling this problem, especially in a Java app, but keeping it simple and easy to maintain would take some disciplines.&lt;/p&gt;

&lt;p&gt;Here I would layout a simple way you may use to depploy a typical Java application. The concept is simple and you can easily apply to a standalone, web, or even a JEE application.&lt;/p&gt;

&lt;h2 id=&quot;use-a-env-system-properties-per-environment&quot;&gt;Use a env System Properties per environment&lt;/h2&gt;

&lt;p&gt;Java allows you to invoke any program with extra System Properties added. When launching an Java application, you should set an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;env&lt;/code&gt; property. For example:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; java -Denv=prod myapp.Main
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This property would give your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Main&lt;/code&gt; application to identify which environment you are running against with. You should be reading it like this inside your code:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;String env = System.getProperty(&quot;env&quot;, &quot;dev&quot;);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This way you always would have an environment to work with. Even if user doesn’t supply one, it will default to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dev&lt;/code&gt; env.&lt;/p&gt;

&lt;p&gt;Another useful System Property to set is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;app.home&lt;/code&gt;. You want to set this value in relative to where your application is deployed, so you may reference any files (eg: data) easily. To do this, you can use a script wrapper to automatically calculate the path. See section below for an example.&lt;/p&gt;

&lt;h2 id=&quot;use-a-config-dir-prefix-in-classpath&quot;&gt;Use a config dir prefix in CLASSPATH&lt;/h2&gt;

&lt;p&gt;In stead of passing a explicit config file to your application as argument, another flexible way to load configuration file is to add an extra &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config&lt;/code&gt;
folder into your CLASSPATH. For example, you can easily create a startup wrapper script &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;myapp.sh&lt;/code&gt; like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#/usr/bin/env bash
APP_HOME=$(cd &quot;`dirname $0`/..&quot; &amp;amp;&amp;amp; pwd)
java $JAVA_OPTS -Dapp.home=$APP_HOME -cp &quot;$APP_HOME/config:$APP_HOME/lib/*&quot; myapp.Main &quot;$@&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From this, you can setup the application packaging layout this way:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    myapp
        +- bin
            +- myapp.sh
        +- config
            +- dev.properties
            +- qa.properties
            +- prod.properties
        +- data
            +- myrecords.data
        +- lib
            +- myapp-1.0.0.jar
            +- slf4j-1.7.1.jar
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You would typically invoke the application like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; JAVA_OPTS='-Denv=prod' myapp/bin/myapp.sh
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above will give you a good foundation to load a single config properties file per &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;env&lt;/code&gt;. For example, you can read your properites file like this somewhere in your code.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    // Get appHome and data dir.
    String appHome = System.getProperty(&quot;app.home&quot;);
    String dataDir = appHome + &quot;/data&quot;;
    
    // Get env value to load config parameters
    String env = System.getProperty(&quot;env&quot;, &quot;dev&quot;);
    String config = env + &quot;.properites&quot;;
    Properties configProps = new Properties();
    InputStream inStream = null;
    try {
        inStream = getClass().getClassLoader().getResourceAsStream(config);
        configProps.load(inStream);
    } finally {
        if (inStream != null)
            inStream.close();
    }
    // Now load any config parameters from configProps map.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you would have the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;configProps&lt;/code&gt; object at your disposal to read any configuration keys and values set per an environment.&lt;/p&gt;

&lt;p&gt;NOTE: If you want a more flexible Java wrapper script, see my old post on &lt;a href=&quot;http://saltnlight5.blogspot.com/2012/08/a-better-java-shell-script-wrapper.html&quot;&gt;run-java&lt;/a&gt; wrapper.&lt;/p&gt;

&lt;h2 id=&quot;do-not-abuse-classpath&quot;&gt;Do not abuse CLASSPATH&lt;/h2&gt;

&lt;p&gt;Now, just because you have setup &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config&lt;/code&gt; as part of your CLASSPATH entry, I have to caution you not to abuse it. What I mean is do not go wild on 
loading all your application resources in that folder! If you have that many resources that user MUST edit and configure, then you should re-think
about your application design! Simple interface, or configuration in this case, is always a win. Do not bother users with complexity just because 
your application can support gazillion ways of configuration combination. If you can keep it as one config file, it would make users very happy.&lt;/p&gt;

&lt;p&gt;Also, this doesn’t mean you have to put the entire world inside one of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;prod.properites&lt;/code&gt; either. In the real world, an application is likely going to have only 
handful of user tunable parameters, and many other resources are less frequent used. I would recommand put the most frequently used parameters in these
config properties only. For all other (for example most of the Spring context files in an application do not belong to a typical users config level, they are more developer level config files. In another word, changing these files would have catastrophic effect to your application!) You should put these inside as part of your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;myapp.jar&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;You might ask, ‘Oh, but what happen if I must want to override one of 
the resource in the jar?’. But in that very unusual case, you would still have an option to override! You have the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config&lt;/code&gt; as prefix in CLASSPATH, remember? Even when you nested resources inside a package inside the 
jar, you would still able to overwrite by simply create same directory structure inside &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config&lt;/code&gt;. You probably only do this for emmergency and less frequent use anyway.&lt;/p&gt;

&lt;h2 id=&quot;feedback&quot;&gt;Feedback&lt;/h2&gt;

&lt;p&gt;So what are some clever ways you have seen or done with your application configuration? I hope to hear from you and share.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Simple Variable Substitution in Java String</title>
   <link href="http://localhost:4000/2012/10/24/simple-variable-substitution-in-java-string/"/>
   <updated>2012-10-24T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/10/24/simple-variable-substitution-in-java-string</id>
   <content type="html">&lt;p&gt;When I wrote about how to improve the Java Properties class using &lt;a href=&quot;http://saltnlight5.blogspot.com/2012/09/improving-javautilproperties.html&quot;&gt;Props&lt;/a&gt;, I’ve shown
a feature where you can use variable substition such as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mypath=${user.home}&lt;/code&gt; in your config file. The implementation underneath it uses the Apache Common Lang library with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;org.apache.commons.lang.text.StrSubstitutor&lt;/code&gt;. There is nothing wrong with this, but I was curious how bad would it be to remove such dependency, so the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Props&lt;/code&gt; can be more standalone.&lt;/p&gt;

&lt;p&gt;Here is a quick implementation in Groovy, but you should able to translate to Java easily.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    // String variable substitutions
    def parseVariableNames(String text) {
        def names = []
        def pos = 0, max = text.length()
        while (pos &amp;lt; max) {
            pos = text.indexOf('${', pos)
            if (pos == -1)
                break
            def end = text.indexOf('}', pos + 2)
            if (end == -1)
                break
            def name = text.substring(pos + 2, end)
            names.add(name)
            pos = end + 1
        }
        return names
    }
    def replaceVariable(String key, String value, String text) {
        //println &quot;DEBUG: Replacing '${key}'' with '${value}'&quot;
        result = text.replaceAll('\\$\\{' + key + '}', value)
        return result
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Probably not the most efficient thing, but it should work. Let’s have some tests.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    // Test
    def map = [&quot;name&quot;: &quot;Zemian&quot;, &quot;id&quot;: &quot;1001&quot;]
    def inputs  = [
        'Hello ${name}',
        'My id is ${id}',
        '${name} is a good programmer.',
        '${name}\'s id is ${id}.'
    ]
    
    result = inputs.collect{ line -&amp;gt;
        def names = parseVariableNames(line)
        names.each{ key -&amp;gt;
            line = replaceVariable(key, map.get(key), line) 
        }
        line
    }
    assert result == [
        'Hello Zemian',
        'My id is 1001',
        'Zemian is a good programmer.',
        'Zemian\'s id is 1001.'
    ]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The output should print nothing, as it passed the test. What do you think?&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Exploring different scheduling types with Quartz 2</title>
   <link href="http://localhost:4000/2012/10/22/exploring-different-scheduling-types-with-quartz-2/"/>
   <updated>2012-10-22T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/10/22/exploring-different-scheduling-types-with-quartz-2</id>
   <content type="html">&lt;p&gt;We often think of Cron when we want to schedule a job. Cron is very flexible in expressing an repeating occurance of an event/job in a very compact expression. However it’s not answer for everything, as I often see people are asking for help in the Quartz user forum. Did you know that the popular &lt;a href=&quot;http://quartz-scheduler.org&quot;&gt;Quartz 2&lt;/a&gt; library provide many other schedule types (called Trigger) besides cron? I will show you each of the Quartz 2 built-in schedule types here within a complete, standalone Groovy script that you can run and test it out. Let’s start with a simple one.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    @Grab('org.quartz-scheduler:quartz:2.1.6')
    @Grab('org.slf4j:slf4j-simple:1.7.1')
    import org.quartz.*
    import org.quartz.impl.*
    import org.quartz.jobs.*
    
    import static org.quartz.DateBuilder.*
    import static org.quartz.JobBuilder.*
    import static org.quartz.TriggerBuilder.*
    import static org.quartz.SimpleScheduleBuilder.*
    
    def trigger = newTrigger()
        .withSchedule(
            simpleSchedule()
            .withIntervalInSeconds(3)
            .repeatForever())
        .startNow()
        .build()
    dates = TriggerUtils.computeFireTimes(trigger, null, 20)
    dates.each{ println it }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is the Quartz’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SimpleTrigger&lt;/code&gt;, and it allows you to create a fixed rate repeating job. You can even limit to certain number of count if you like. I have imported all the nessary classes the script needs, and I use the latest Quartz 2.x builder API to create an instance of the trigger.&lt;/p&gt;

&lt;p&gt;The quickest way to explore and test out whether a scheduling fits your need is to print out its future execution times. Hence you see me using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TriggerUtils.computeFireTimes&lt;/code&gt; in the script. Run the above and you should get the datetimes as scheduled to be run, in this case every 3 seconds.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    bash&amp;gt; $ groovy simpleTrigger.groovy
        Tue Oct 23 20:28:01 EDT 2012
        Tue Oct 23 20:28:04 EDT 2012
        Tue Oct 23 20:28:07 EDT 2012
        Tue Oct 23 20:28:10 EDT 2012
        Tue Oct 23 20:28:13 EDT 2012
        Tue Oct 23 20:28:16 EDT 2012
        Tue Oct 23 20:28:19 EDT 2012
        Tue Oct 23 20:28:22 EDT 2012
        Tue Oct 23 20:28:25 EDT 2012
        Tue Oct 23 20:28:28 EDT 2012
        Tue Oct 23 20:28:31 EDT 2012
        Tue Oct 23 20:28:34 EDT 2012
        Tue Oct 23 20:28:37 EDT 2012
        Tue Oct 23 20:28:40 EDT 2012
        Tue Oct 23 20:28:43 EDT 2012
        Tue Oct 23 20:28:46 EDT 2012
        Tue Oct 23 20:28:49 EDT 2012
        Tue Oct 23 20:28:52 EDT 2012
        Tue Oct 23 20:28:55 EDT 2012
        Tue Oct 23 20:28:58 EDT 2012
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The most frequent used scheduling type is the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CronTrigger&lt;/code&gt;, and you can test it out in similar way.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    @Grab('org.quartz-scheduler:quartz:2.1.6')
    @Grab('org.slf4j:slf4j-simple:1.7.1')
    import org.quartz.*
    import org.quartz.impl.*
    import org.quartz.jobs.*
    
    import static org.quartz.DateBuilder.*
    import static org.quartz.JobBuilder.*
    import static org.quartz.TriggerBuilder.*
    import static org.quartz.CronScheduleBuilder.*
    
    def trigger = newTrigger()
        .withSchedule(cronSchedule(&quot;0 30 08 * * ?&quot;))
        .startNow()
        .build()
    dates = TriggerUtils.computeFireTimes(trigger, null, 20)
    dates.each{ println it }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The javadoc for &lt;a href=&quot;http://quartz-scheduler.org/api/2.1.5/org/quartz/CronExpression.html&quot;&gt;CronExpression&lt;/a&gt; is very good and you should definately read it throughly to use it effectively. With the script, you can explore all the combination you want easily and verify future fire times before your job is invoked.&lt;/p&gt;

&lt;p&gt;Now, if you have some odd scheduling needs such as run a job every 30 mins from MON to FRI and only between 8:00AM to 10:00AM, then don’t try to cramp all that into the Cron expression. The Quartz 2.x has a dedicated trigger type just for this use, and it’s 
called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DailyTimeIntervalTrigger&lt;/code&gt;! Check this out:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    @Grab('org.quartz-scheduler:quartz:2.1.6')
    @Grab('org.slf4j:slf4j-simple:1.7.1')
    import org.quartz.*
    import org.quartz.impl.*
    import org.quartz.jobs.*
    
    import static org.quartz.DateBuilder.*
    import static org.quartz.JobBuilder.*
    import static org.quartz.TriggerBuilder.*
    import static org.quartz.DailyTimeIntervalScheduleBuilder.*
    import static java.util.Calendar.*
    
    def trigger = newTrigger()
        .withSchedule(
            dailyTimeIntervalSchedule()
            .startingDailyAt(TimeOfDay.hourMinuteAndSecondOfDay(8, 0, 0))
            .endingDailyAt(TimeOfDay.hourMinuteAndSecondOfDay(10, 0, 0))
            .onDaysOfTheWeek(MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY)
            .withInterval(10, IntervalUnit.MINUTE))
        .startNow()
        .build()
    dates = TriggerUtils.computeFireTimes(trigger, null, 20)
    dates.each{ println it }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Another hidden Trigger type from Quartz is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CalendarIntervalTrigger&lt;/code&gt;, and you would use this if you need to repeat job that’s in every interval of a calendar period, such as every year or month etc, where the interval is not fixed, but calendar specific. Here is a test script for that.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    @Grab('org.quartz-scheduler:quartz:2.1.6')
    @Grab('org.slf4j:slf4j-simple:1.7.1')
    import org.quartz.*
    import org.quartz.impl.*
    import org.quartz.jobs.*
    
    import static org.quartz.DateBuilder.*
    import static org.quartz.JobBuilder.*
    import static org.quartz.TriggerBuilder.*
    import static org.quartz.CalendarIntervalScheduleBuilder.*
    import static java.util.Calendar.*
    
    def trigger = newTrigger()
        .withSchedule(
            calendarIntervalSchedule()
            .withInterval(2, IntervalUnit.MONTH))
        .startAt(futureDate(10, IntervalUnit.MINUTE))
        .build()
    dates = TriggerUtils.computeFireTimes(trigger, null, 20)
    dates.each{ println it }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I hope these will help you get started on most of your scheduling need with Quartz 2. Try these out and see your future fire times before even scheduling a job into the scheduler should save you some times and troubles.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>A very lean war file for MySchedule</title>
   <link href="http://localhost:4000/2012/10/22/a-very-lean-war-file-for-myschedule/"/>
   <updated>2012-10-22T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/10/22/a-very-lean-war-file-for-myschedule</id>
   <content type="html">&lt;p&gt;On the next coming MySchedule release, I’ve been working on removing few dependencies in the project to improve its size, but yet still keeping all the original functionality.&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;http://code.google.com/p/myschedule/downloads/list&quot;&gt;result&lt;/a&gt; is about 70% reduction in war file size!&lt;/p&gt;

&lt;p&gt;There are few things that I removed that resulted in a much smaller webapp.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Removed MySQL jdbc driver. Not every one uses Quartz with this DB, so including it in distribution is not necessary. You can easily add it into a server classpath without modifying the war.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Removed Groovy. I’ve improved the UI and the ScriptingJob component so that it works with any Java standard script engine. The JDK comes with JavaScript engine built-in! So now Groovy can be optional, and yet user can still use it by simply add it to the server classpath, and they can select the language in MySchedule UI. Without it, MySchedule will just default to JavaScript for scripting.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Removed Spring (MVC) Framework. Now this is a big task because MySchedule uses Spring annotations, controllers and service beans in IoC config to bootstrap the entire webapp. I’ve replaced it with a simple static &lt;a href=&quot;http://code.google.com/p/myschedule/source/browse/myschedule-web/src/main/java/myschedule/web/AppConfig.java&quot;&gt;AppConfig&lt;/a&gt; that wired my services together, and then used the plain Servlet API to process all http requests.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;So why remove Spring? Don’t get me wrong, I like working with Spring, and I think it’s awesome framework. I have been working with Spring based projects for a long time, and I even have my own set of &lt;a href=&quot;http://code.google.com/p/zemiandeng/source/browse/springmvc-project-template&quot;&gt;SpringMVC template&lt;/a&gt; to
start any web application quickly. I know where things are configured and where to add new code to make a Spring app works, and it’s flexibility are fantastic for development, especially for larger projects.  But in MySchedule case, it is just a small webapp that has it’s focus is on Quartz. I wanted to remove Spring to create less confusion for any one who want to look at the code. The Spring bundled with Quartz in its core, and I want to avoid (I didn’t use any of that any way.) I also want to shrink the war file size. And lastly, just to challenge of myself that, yes there is life outside of Spring, and it still can be maintainable. :-P&lt;/p&gt;

&lt;p&gt;So in replacing Spring, but kept very much of same coding style, I have created my tiny little web request processing library. It only has few classes, and it will allow me to use single Servlet controller to map and process all URL actions through many smaller unit of code, which I called action handler. Now MySchedule can be easily configured through one &lt;a href=&quot;http://code.google.com/p/myschedule/source/browse/myschedule-web/src/main/java/myschedule/web/servlet/app/MainServlet.java&quot;&gt;MainServlet&lt;/a&gt;class. Not bad!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Running maven commands with multi modules project</title>
   <link href="http://localhost:4000/2012/10/14/running-maven-commands-with-multi-modules-project/"/>
   <updated>2012-10-14T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/10/14/running-maven-commands-with-multi-modules-project</id>
   <content type="html">&lt;p&gt;Have you ever tried running Maven commands inside a sub-module of a multi modules Maven project, and get &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Could not resolve dependencies for project&lt;/code&gt; error msg? And you checked the dependencies that it’s missing are those sister modules within the same project! So what gives? It turns out you have to give few more options to get this running correctly, and you have to remember always stays in the parent pom directory to run it!&lt;/p&gt;

&lt;p&gt;For exmaple if you checkout the TimeMachine scheduler project, you can invoke the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;timemachine-hibernate&lt;/code&gt; module with maven commands like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash&amp;gt; hg clone https://bitbucket.org/timemachine/scheduler
bash&amp;gt; cd scheduler
bash&amp;gt; mvn -pl timemachine-hibernate -am clean test-compile
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can start the scheduler using Maven like this (remember to stay in the parent pom directory!):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bash &amp;gt; mvn -pl timemachine-scheduler exec:java -Dexec.mainClass=timemachine.scheduler.tool.SchedulerServer -Dexec.classpathScope=test
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I have added the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-Dexec.classpathScope=test&lt;/code&gt; so you will see logging output, because there is an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;log4j.properties&lt;/code&gt; in the classpath for testing.&lt;/p&gt;

&lt;p&gt;Without these, you can always run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mvn install&lt;/code&gt; in the project root directory, then you can cd into any sub-module and run Maven commands. However you will have to keep a tab on what changed in the dependencies, even if they are in sister modules.&lt;/p&gt;

&lt;p&gt;You can read more from this &lt;a href=&quot;http://www.sonatype.com/people/2009/10/maven-tips-and-tricks-advanced-reactor-options&quot;&gt;article&lt;/a&gt; from Sonatype.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>What's up with the JUnit and Hamcrest dependencies?</title>
   <link href="http://localhost:4000/2012/10/06/whats-up-with-the-junit-and-hamcrest-dependencies/"/>
   <updated>2012-10-06T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/10/06/whats-up-with-the-junit-and-hamcrest-dependencies</id>
   <content type="html">&lt;p&gt;It’s awesome that &lt;a href=&quot;http://www.junit.org/&quot;&gt;JUnit&lt;/a&gt; is recognizing the usefulness of &lt;a href=&quot;http://code.google.com/p/hamcrest/&quot;&gt;Hamcrest&lt;/a&gt;, because I use these two a lot. However, I find JUnit packaging of their dependencies odd, and can cause class loading problem if you are not careful.&lt;/p&gt;

&lt;p&gt;Let’s take a closer look. If you look at &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;junit:junit:4.10&lt;/code&gt; from Maven Central, you will see that it has this dependencies graph:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    +- junit:junit:jar:4.10:test
        |  - org.hamcrest:hamcrest-core:jar:1.1:test
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is great, except that inside the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;junit-4.10.jar&lt;/code&gt;, you will also find the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hamcrest-core-1.1.jar&lt;/code&gt; content are &lt;em&gt;embedded&lt;/em&gt;!&lt;/p&gt;

&lt;p&gt;But &lt;strong&gt;why???&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;I suppose it’s a convenient for folks who use Ant, so that they save one jar to package in their &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lib&lt;/code&gt; folder, but it’s not very Maven friendly. And you also expect classloading trouble if you want to upgrade Hamcrest or use extra Hamcrest modules.&lt;/p&gt;

&lt;p&gt;Now if you use Hamcrest long enough, you know that most of their goodies are in the second module named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hamcrest-library&lt;/code&gt;, but this JUnit didn’t package in. JUnit however chose to include some JUnit+Hamcrest extension of their own. Now including duplicated classes in jar are very trouble maker, so JUnit has a separated module &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;junit-dep&lt;/code&gt; that doesn’t include Hamcrest core package and help you avoid this issue. So if you are using Maven project, you should use this instead.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;junit&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;junit-dep&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;4.10&amp;lt;/version&amp;gt;
        &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;
        &amp;lt;exclusions&amp;gt;
            &amp;lt;exclusion&amp;gt;
                &amp;lt;groupId&amp;gt;org.hamcrest&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;hamcrest-core&amp;lt;/artifactId&amp;gt;
            &amp;lt;/exclusion&amp;gt;
        &amp;lt;/exclusions&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.hamcrest&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;hamcrest-library&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;1.2.1&amp;lt;/version&amp;gt;
        &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;
    &amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice that’s a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;junit-dep&lt;/code&gt;, and also on how I have to exclude hamcrest from it. This is needed if you want &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hamcrest-library&lt;/code&gt; that has higher version than the one JUnit comes with, which is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;1.1&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Interesting enough, Maven’s dependencies in pom is order sensitive when it comes to auto resolving conflicting versions dependencies. Actually it would just pick the first one found and ignore the rest. So you can shorten above without exclusion if, only if, you place the Hamcrest bofore JUnit like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.hamcrest&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;hamcrest-library&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;1.2.1&amp;lt;/version&amp;gt;
        &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;junit&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;junit-dep&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;4.10&amp;lt;/version&amp;gt;
        &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;
    &amp;lt;/dependency&amp;gt;    
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This should make Maven use the following dependencies:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    +- org.hamcrest:hamcrest-library:jar:1.2.1:test
    |  \- org.hamcrest:hamcrest-core:jar:1.2.1:test
    +- junit:junit-dep:jar:4.10:test
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However I think using the exclusion tag would probably give you more stable build and not rely on Maven implicit ordering rule. And it avoid easy mistake for Maven beginer users. However I wish JUnit would do a better job at packaging and remove duplicated classes in jar. I personally think it’s more productive for JUnit to also include &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hamcrest-libray&lt;/code&gt; instead of just the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hamcrest-core&lt;/code&gt; jar.&lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>High Level Design Diagrams for TimeMachine Scheduler</title>
   <link href="http://localhost:4000/2012/09/29/high-level-design-diagrams-for-timemachine-scheduler/"/>
   <updated>2012-09-29T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/09/29/high-level-design-diagrams-for-timemachine-scheduler</id>
   <content type="html">&lt;p&gt;Despite the advance of all the computers, I am one of those guys who still carry a pen and composition notebook around. I am far from those who has photographic memories, nor one who can digest every thing in their heads. Especially when it comes to doing software design. I still find my self scribbling on my notebook quite a bit, or even on piece of napkin if no paper is available. I am also one of those who only need high level ideas drawn out, then I can usually go directly to code, map it to some API and then write some simple implementations to get started.&lt;/p&gt;

&lt;p&gt;That’s how I started with the &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler&quot;&gt;TimeMachine Scheduler&lt;/a&gt; project a while back. However, as we come to a point where we have a solid runnable code, we must also start to present it to others. Showing my composition notebook is not the prettier thing in the world, specially when I have no gift in penmenship at all. This is a time to look into some professional diagram and design tools to draw up the high level architecture.&lt;/p&gt;

&lt;p&gt;I was contacted by &lt;a href=&quot;http://www.architexa.com&quot;&gt;Architexa&lt;/a&gt; to give them some review of their tool. I think this is a great opportunity for me to try it to draw up some diagrams on the TimeMachine project. Most of what I have diagrammed here are explained in details in the project &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/wiki/ReferenceManual&quot;&gt;reference manual&lt;/a&gt;, so if you want to know more, please do read it up for further reference.&lt;/p&gt;

&lt;h1 id=&quot;timemachine-top-level-packages&quot;&gt;TimeMachine top level packages&lt;/h1&gt;

&lt;p&gt;First, the Architexa provides their software as an Eclipse plugin, and after installing it, it can analysis an existing project. I did that and here is the package level view it presents me for the TimeMachine.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://bitbucket.org/saltnlight5/images/raw/84cde5b1e9ba/timemachine-diagrams/package-dependencies.png&quot; alt=&quot;TimeMachine packages dependencies diagram&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The graph is not very clear on why everything depends on &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;schedule&lt;/code&gt; package, but perhaps Schedule is used through the code. Any way the TimeMachine has been carefully separating out the pakcages so it’s easy for user to use. All the interfaces you need to scheduler jobs are in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;timemachine.scheduler&lt;/code&gt;. In it, there are couple static factories class: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Schedules&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;JobTasks&lt;/code&gt; provide majority of the functionity you need. So the goal is you can do quiet a bit with just &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;import timemachine.scheduler.*;&lt;/code&gt;; then as you need each layer functionality, you can import them explicitly the sub-packages.&lt;/p&gt;

&lt;h1 id=&quot;timemachine-main-classes-diagrams&quot;&gt;TimeMachine main classes diagrams&lt;/h1&gt;

&lt;p&gt;In TimeMachine, you have few major class hierarchy that you must need to get familiar in order to write effective scheduling jobs.&lt;/p&gt;

&lt;p&gt;A job in TimeMachine is implemented by a class with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;JobTask&lt;/code&gt; interface. The project provide few for you to get started.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://bitbucket.org/saltnlight5/images/raw/84cde5b1e9ba/timemachine-diagrams/jobtask-class-hierarchy.png&quot; alt=&quot;TimeMachine JobTask class diagram&quot; /&gt;&lt;/p&gt;

&lt;p&gt;How often and frequent to run your job in the scheduler is provided by a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Schedule&lt;/code&gt;. Here we provided some most used implementations, including the customizable &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DateListSchedule&lt;/code&gt; that uses a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;provider&lt;/code&gt; generator.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://bitbucket.org/saltnlight5/images/raw/84cde5b1e9ba/timemachine-diagrams/schedule-class-hierarchy.png&quot; alt=&quot;TimeMachine Schedule class diagram&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The TimeMachine is a scheduler composed by a stackable service container. Here are some of the services that power the scheduler as a whole. The user/developer can write their own user &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Service&lt;/code&gt; and add into the container as well.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://bitbucket.org/saltnlight5/images/raw/84cde5b1e9ba/timemachine-diagrams/service-class-hierarchy.png&quot; alt=&quot;TimeMachine SchedulerEngine class diagram&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The services above are then combined together to form the scheduler engine.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://bitbucket.org/saltnlight5/images/raw/84cde5b1e9ba/timemachine-diagrams/scheduler-engine-class-hierarchy.png&quot; alt=&quot;TimeMachine SchedulerEngine class diagram&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;timemachine-in-action-diagrams&quot;&gt;TimeMachine in action diagrams&lt;/h1&gt;

&lt;p&gt;Depicting sequence diagram is pretty challenging. The Architexa plugin is pretty good in this area, especially when you already have code already done. The Architexa plugin would take advantage of existing code and Java reflection and give you a selectable choice on what and to where as action. Here I will highlight couple actions in TimeMachine.&lt;/p&gt;

&lt;p&gt;The most basic startup of the TimeMachine sequence would look something like this.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://bitbucket.org/saltnlight5/images/raw/84cde5b1e9ba/timemachine-diagrams/scheduler-start-up-sequence.png&quot; alt=&quot;TimeMachine Scheduler startup up sequence diagram&quot; /&gt;&lt;/p&gt;

&lt;p&gt;In the heart of the scheduler logic is in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PollingScheduleRunner&lt;/code&gt; service, and here are some of the actions depicted.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://bitbucket.org/saltnlight5/images/raw/84cde5b1e9ba/timemachine-diagrams/polling-schedule-runner-sequence.png&quot; alt=&quot;TimeMachine PollingScheduleRunner sequence diagram&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;using-architexa&quot;&gt;Using Architexa&lt;/h1&gt;

&lt;p&gt;Over all, I think Architexa provided a pretty good plugin for Eclipse. I have some problems when generating the sequence diagrams. For example, I can’t resize the width between two actors(classes) to display full method name. And in some actions there are no lines drawn! I suspect it’s due to the tool is using code inspection, and some of the call are called by different threads.&lt;/p&gt;

&lt;p&gt;The plugin itself seems pretty solid. You can install and uninstall without harm. They currently offer free download for small number of users, which I think it’s a great way for you to explorer.&lt;/p&gt;

&lt;p&gt;I am not too sure how effective of Architexa on builing a collabration of sharing these diagrams as platform. I treat these diagrams as supplement to the project. It certainly helps in explaining high level architeture, but it’s far from the complete documentation. No documentation can get any closer to the code. I think the strength of Java being static already provided some level of documentation when just reading the code alone. I would rather Architexa to focus and perfecting the plugin that draw the diagram, because these are more important to me.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Enhancing Spring Test Framework with beforeClass and afterClass setup</title>
   <link href="http://localhost:4000/2012/09/28/enhancing-spring-test-framework-with-beforeclass-and-afterclass-setup/"/>
   <updated>2012-09-28T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/09/28/enhancing-spring-test-framework-with-beforeclass-and-afterclass-setup</id>
   <content type="html">&lt;h1 id=&quot;how-to-allow-instance-methods-to-run-as-junit-beforeclass-behavior&quot;&gt;How to allow instance methods to run as JUnit BeforeClass behavior&lt;/h1&gt;

&lt;p&gt;JUnit allows you to setup methods on the class level once before and after all tests methods invocation. However, by design on purpose that they restrict this to only &lt;em&gt;static&lt;/em&gt; methods using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@BeforeClass&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@AfterClass&lt;/code&gt; annotations. For example this simple demo shows the typical Junit setup:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package deng.junitdemo;
    
    import org.junit.AfterClass;
    import org.junit.BeforeClass;
    import org.junit.Test;
    
    public class DemoTest {
    
        @Test
        public void testOne() {
            System.out.println(&quot;Normal test method #1.&quot;);
        }
    
        @Test
        public void testTwo() {
            System.out.println(&quot;Normal test method #2.&quot;);
        }
    
        @BeforeClass
        public static void beforeClassSetup() {
            System.out.println(&quot;A static method setup before class.&quot;);
        }
    
        @AfterClass
        public static void afterClassSetup() {
            System.out.println(&quot;A static method setup after class.&quot;);
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And above should result the following output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    A static method setup before class.
    Normal test method #1.
    Normal test method #2.
    A static method setup after class.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This usage is fine for most of the time, but there are times you want to use non-static methods to setup the test. I will show you a more detailed use case later, but for now, let’s see how we can solve this naughty problem with JUnit first. We can solve this by making the test
implements a Listener that provide the before and after callbacks, and we will need to digg into JUnit to detect this Listener to invoke our methods. This is a solution I came up with:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package deng.junitdemo;
    
    import org.junit.Test;
    import org.junit.runner.RunWith;
    
    @RunWith(InstanceTestClassRunner.class)
    public class Demo2Test implements InstanceTestClassListener {
    
        @Test
        public void testOne() {
            System.out.println(&quot;Normal test method #1&quot;);
        }
    
        @Test
        public void testTwo() {
            System.out.println(&quot;Normal test method #2&quot;);
        }
    
        @Override
        public void beforeClassSetup() {
            System.out.println(&quot;An instance method setup before class.&quot;);
        }
    
        @Override
        public void afterClassSetup() {
            System.out.println(&quot;An instance method setup after class.&quot;);
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As stated above, our Listener is a simple contract:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package deng.junitdemo;
    
    public interface InstanceTestClassListener {
        void beforeClassSetup();
        void afterClassSetup();
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Our next task is to provide the JUnit runner implementation that will trigger the setup methods.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package deng.junitdemo;
    
    import org.junit.runner.notification.RunNotifier;
    import org.junit.runners.BlockJUnit4ClassRunner;
    import org.junit.runners.model.InitializationError;
    
    public class InstanceTestClassRunner extends BlockJUnit4ClassRunner {
    
        private InstanceTestClassListener instanceSetupListener;
    
        public InstanceTestClassRunner(Class&amp;lt;?&amp;gt; klass) throws InitializationError {
            super(klass);
        }
    
        @Override
        protected Object createTest() throws Exception {
            Object test = super.createTest();
            // Note that JUnit4 will call this createTest() multiple times for each
            // test method, so we need to ensure to call &quot;beforeClassSetup&quot; only once.
            if (test instanceof InstanceTestClassListener &amp;amp;&amp;amp; instanceSetupListener == null) {
                instanceSetupListener = (InstanceTestClassListener) test;
                instanceSetupListener.beforeClassSetup();
            }
            return test;
        }
    
        @Override
        public void run(RunNotifier notifier) {
            super.run(notifier);
            if (instanceSetupListener != null)
                instanceSetupListener.afterClassSetup();
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now we are in business. If we run above test, it should give us similar result, but this time we are using instance methods instead!&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    An instance method setup before class.
    Normal test method #1
    Normal test method #2
    An instance method setup after class.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;a-concrete-use-case-working-with-spring-test-framework&quot;&gt;A concrete use case: Working with Spring Test Framework&lt;/h1&gt;

&lt;p&gt;Now let me show you a real use case with above. If you use Spring Test Framework, you would normally setup a test like this so that you may have test fixture injected as member instance.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package deng.junitdemo.spring;
    
    import static org.hamcrest.Matchers.is;
    import static org.junit.Assert.assertThat;
    
    import java.util.List;
    
    import javax.annotation.Resource;
    
    import org.junit.Test;
    import org.junit.runner.RunWith;
    import org.springframework.test.context.ContextConfiguration;
    import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
    
    @RunWith(SpringJUnit4ClassRunner.class)
    @ContextConfiguration
    public class SpringDemoTest {
    
        @Resource(name=&quot;myList&quot;)
        private List&amp;lt;String&amp;gt; myList;
    
        @Test
        public void testMyListInjection() {
            assertThat(myList.size(), is(2));
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You would also need a spring xml under that same package for above to run:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
    &amp;lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&amp;gt;
         &amp;lt;bean id=&quot;myList&quot; class=&quot;java.util.ArrayList&quot;&amp;gt;
            &amp;lt;constructor-arg&amp;gt;
                &amp;lt;list&amp;gt;
                    &amp;lt;value&amp;gt;one&amp;lt;/value&amp;gt;
                    &amp;lt;value&amp;gt;two&amp;lt;/value&amp;gt;
                &amp;lt;/list&amp;gt;
            &amp;lt;/constructor-arg&amp;gt;
         &amp;lt;/bean&amp;gt;
    &amp;lt;/beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Pay very close attention to member instance &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;List&amp;lt;String&amp;gt; myList&lt;/code&gt;. When running JUnit test, that field will be injected by Spring, and it can be used in any test method. However, if you ever want a one time setup of some code and get a reference to a Spring injected field, then you are in bad luck. This is because the JUnit &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@BeforeClass&lt;/code&gt; will force your method to be static; and if you make your field static, Spring injection won’t work in your test!&lt;/p&gt;

&lt;p&gt;Now if you are a frequent Spring user, you should know that Spring Test Framework already provided a way for you to handle this type of use case. Here is a way for you to do class level setup with Spring’s style:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package deng.junitdemo.spring;
    
    import static org.hamcrest.Matchers.is;
    import static org.junit.Assert.assertThat;
    
    import java.util.List;
    
    import javax.annotation.Resource;
    
    import org.junit.Test;
    import org.junit.runner.RunWith;
    import org.springframework.test.context.ContextConfiguration;
    import org.springframework.test.context.TestContext;
    import org.springframework.test.context.TestExecutionListeners;
    import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
    import org.springframework.test.context.support.AbstractTestExecutionListener;
    import org.springframework.test.context.support.DependencyInjectionTestExecutionListener;
    
    @RunWith(SpringJUnit4ClassRunner.class)
    @TestExecutionListeners(listeners = {
            DependencyInjectionTestExecutionListener.class, 
            SpringDemo2Test.class})
    @ContextConfiguration
    public class SpringDemo2Test extends AbstractTestExecutionListener {
    
        @Resource(name=&quot;myList&quot;)
        private List&amp;lt;String&amp;gt; myList;
    
        @Test
        public void testMyListInjection() {
            assertThat(myList.size(), is(2));
        }
    
        @Override
        public void afterTestClass(TestContext testContext) {
            List&amp;lt;?&amp;gt; list = testContext.getApplicationContext().getBean(&quot;myList&quot;, List.class);
            assertThat((String)list.get(0), is(&quot;one&quot;));
        }
    
        @Override
        public void beforeTestClass(TestContext testContext) {
            List&amp;lt;?&amp;gt; list = testContext.getApplicationContext().getBean(&quot;myList&quot;, List.class);
            assertThat((String)list.get(1), is(&quot;two&quot;));
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you can see, Spring offers the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@TestExecutionListeners&lt;/code&gt; annotation to allow you to write any Listener, and in it you will have a reference to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TestContext&lt;/code&gt; which has the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ApplicationContext&lt;/code&gt; for you to get to the injected field reference. This works, but I find it not very elegant. It forces you to look up the bean, while your injected field is already available as field. But you can’t use it unless you go through the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TestContext&lt;/code&gt; parameter.&lt;/p&gt;

&lt;p&gt;Now if you mix the solution we provided in the beginning, we will see a more prettier test setup. Let’s see it:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package deng.junitdemo.spring;
    
    import static org.hamcrest.Matchers.is;
    import static org.junit.Assert.assertThat;
    
    import java.util.List;
    
    import javax.annotation.Resource;
    
    import org.junit.Test;
    import org.junit.runner.RunWith;
    import org.springframework.test.context.ContextConfiguration;
    
    import deng.junitdemo.InstanceTestClassListener;
    
    @RunWith(SpringInstanceTestClassRunner.class)
    @ContextConfiguration
    public class SpringDemo3Test implements InstanceTestClassListener {
    
        @Resource(name=&quot;myList&quot;)
        private List&amp;lt;String&amp;gt; myList;
    
        @Test
        public void testMyListInjection() {
            assertThat(myList.size(), is(2));
        }
    
        @Override
        public void beforeClassSetup() {
            assertThat((String)myList.get(0), is(&quot;one&quot;));
        }
    
        @Override
        public void afterClassSetup() {
            assertThat((String)myList.get(1), is(&quot;two&quot;));
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now JUnit only allow you to use single &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Runner&lt;/code&gt;, so we must extends the Spring’s version to insert what we did before.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package deng.junitdemo.spring;
    
    import org.junit.runner.notification.RunNotifier;
    import org.junit.runners.model.InitializationError;
    import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
    
    import deng.junitdemo.InstanceTestClassListener;
    
    public class SpringInstanceTestClassRunner extends SpringJUnit4ClassRunner {
    
        private InstanceTestClassListener instanceSetupListener;
    
        public SpringInstanceTestClassRunner(Class&amp;lt;?&amp;gt; clazz) throws InitializationError {
            super(clazz);
        }
    
        @Override
        protected Object createTest() throws Exception {
            Object test = super.createTest();
            // Note that JUnit4 will call this createTest() multiple times for each
            // test method, so we need to ensure to call &quot;beforeClassSetup&quot; only once.
            if (test instanceof InstanceTestClassListener &amp;amp;&amp;amp; instanceSetupListener == null) {
                instanceSetupListener = (InstanceTestClassListener) test;
                instanceSetupListener.beforeClassSetup();
            }
            return test;
        }
    
        @Override
        public void run(RunNotifier notifier) {
            super.run(notifier);
            if (instanceSetupListener != null)
                instanceSetupListener.afterClassSetup();
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That should do the trick. Running the test will give use this output:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    12:58:48 main INFO  org.springframework.test.context.support.AbstractContextLoader:139 | Detected default resource location &quot;classpath:/deng/junitdemo/spring/SpringDemo3Test-context.xml&quot; for test class [deng.junitdemo.spring.SpringDemo3Test].
    12:58:48 main INFO  org.springframework.test.context.support.DelegatingSmartContextLoader:148 | GenericXmlContextLoader detected default locations for context configuration [ContextConfigurationAttributes@74b23210 declaringClass = 'deng.junitdemo.spring.SpringDemo3Test', locations = '{classpath:/deng/junitdemo/spring/SpringDemo3Test-context.xml}', classes = '{}', inheritLocations = true, contextLoaderClass = 'org.springframework.test.context.ContextLoader'].
    12:58:48 main INFO  org.springframework.test.context.support.AnnotationConfigContextLoader:150 | Could not detect default configuration classes for test class [deng.junitdemo.spring.SpringDemo3Test]: SpringDemo3Test does not declare any static, non-private, non-final, inner classes annotated with @Configuration.
    12:58:48 main INFO  org.springframework.test.context.TestContextManager:185 | @TestExecutionListeners is not present for class [class deng.junitdemo.spring.SpringDemo3Test]: using defaults.
    12:58:48 main INFO  org.springframework.beans.factory.xml.XmlBeanDefinitionReader:315 | Loading XML bean definitions from class path resource [deng/junitdemo/spring/SpringDemo3Test-context.xml]
    12:58:48 main INFO  org.springframework.context.support.GenericApplicationContext:500 | Refreshing org.springframework.context.support.GenericApplicationContext@44c9d92c: startup date [Sat Sep 29 12:58:48 EDT 2012]; root of context hierarchy
    12:58:49 main INFO  org.springframework.beans.factory.support.DefaultListableBeanFactory:581 | Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@73c6641: defining beans [myList,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; root of factory hierarchy
    12:58:49 Thread-1 INFO  org.springframework.context.support.GenericApplicationContext:1025 | Closing org.springframework.context.support.GenericApplicationContext@44c9d92c: startup date [Sat Sep 29 12:58:48 EDT 2012]; root of context hierarchy
    12:58:49 Thread-1 INFO  org.springframework.beans.factory.support.DefaultListableBeanFactory:433 | Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@73c6641: defining beans [myList,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0]; root of factory hierarchy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Obviously the output shows nothing interesting here, but the test should run with all assertion passed. The point is that now we have a more elegant way to invoking a before and after test setup that are at class level, and they can be instance methods to allow Spring injection.&lt;/p&gt;

&lt;h1 id=&quot;download-the-demo-code&quot;&gt;Download the demo code&lt;/h1&gt;

&lt;p&gt;You may get above demo code in a working Maven project from &lt;a href=&quot;https://bitbucket.org/saltnlight5/sandbox/src/8d545b15fbbd/junit-examples&quot;&gt;my sandbox&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>TimeMachine Scheduler 1.2.2 Release</title>
   <link href="http://localhost:4000/2012/09/25/timemachine-scheduler-1-2-2-release/"/>
   <updated>2012-09-25T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/09/25/timemachine-scheduler-1-2-2-release</id>
   <content type="html">&lt;p&gt;This is a bug fix release for couple of issues:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Fixed an issue with parsing release date string with “EDT” timezone that can cause the scheduler fail to startup&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Added the optional slf4j-log4j binding to view log output in war file.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;You may download the latest here: &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/downloads&quot;&gt;https://bitbucket.org/timemachine/scheduler/downloads&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Where did Git go?</title>
   <link href="http://localhost:4000/2012/09/18/where-did-git-go/"/>
   <updated>2012-09-18T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/09/18/where-did-git-go</id>
   <content type="html">&lt;p&gt;My git is gone after I upgraded to latest MacOSX updates! What a annoying thing.&lt;/p&gt;

&lt;p&gt;Appearently it’s in here now: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local/git/bin/git&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;You can edit your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$PATH&lt;/code&gt; like it says &lt;a href=&quot;http://stackoverflow.com/questions/6810059/git-on-mac-os-x-lion&quot;&gt;here&lt;/a&gt;, or you could just relink it.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ln -s /usr/local/git/bin/git /usr/local/bin/git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Building message based application using Camel</title>
   <link href="http://localhost:4000/2012/09/14/building-message-based-application-using-camel/"/>
   <updated>2012-09-14T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/09/14/building-message-based-application-using-camel</id>
   <content type="html">&lt;p&gt;This is a long article that contains three separate topics:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Getting started with Apache Camel with Java&lt;/li&gt;
  &lt;li&gt;Improving startup of routes with a CamelRunner&lt;/li&gt;
  &lt;li&gt;Building message based application using Camel&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;But since I’ve prepared a &lt;a href=&quot;https://bitbucket.org/saltnlight5/sandbox/downloads&quot;&gt;camel-demo-1.0.0-SNAPSHOT-project.zip&lt;/a&gt; that has all these materials included, I thought it would easier to combine them and present it as whole.&lt;/p&gt;

&lt;h1 id=&quot;getting-started-with-apache-camel-with-java&quot;&gt;Getting started with Apache Camel with Java&lt;/h1&gt;

&lt;p&gt;Trying out &lt;a href=&quot;http://saltnlight5.blogspot.com/2012/08/getting-started-with-apache-camel-using.html&quot;&gt;Camel with few Groovy lines&lt;/a&gt; is one thing, but 
getting a full scale project in Java is another matter. Today, I will show you how to get things started on &lt;a href=&quot;http://camel.apache.org/&quot;&gt;Apache Camel&lt;/a&gt; with 
&lt;a href=&quot;http://maven.apache.org/&quot;&gt;Maven&lt;/a&gt; based project. You may also use the provided &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;camel-demo&lt;/code&gt; as project template to jump start your own Apache Camel 
project. You would just need to rename the Java package and rename the pom’s group and artifact id’s to match your need.&lt;/p&gt;

&lt;h2 id=&quot;preparing-a-maven-based-project-with-camel-dependencies&quot;&gt;Preparing a Maven based project with Camel dependencies&lt;/h2&gt;

&lt;p&gt;Unzip the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;camel-demo&lt;/code&gt; project source, and you will see the basic directory layout.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    camel-demo
        +- bin
        +- config
        +- data
        +- src
        +- pom.xml
        +- README.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What makes this demo a Camel based project is just the declaration in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pom.xml&lt;/code&gt;. Let’s take a look the file and its dependencies.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
    &amp;lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
        xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0   http://maven.apache.org/maven-v4_0_0.xsd&quot;&amp;gt;
    
        &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;
        &amp;lt;groupId&amp;gt;deng.cameldemo&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;camel-demo&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;1.0.0-SNAPSHOT&amp;lt;/version&amp;gt;
        &amp;lt;packaging&amp;gt;jar&amp;lt;/packaging&amp;gt;
    
        &amp;lt;properties&amp;gt;
            &amp;lt;project.build.sourceEncoding&amp;gt;UTF-8&amp;lt;/project.build.sourceEncoding&amp;gt;
            &amp;lt;slf4j.version&amp;gt;1.6.6&amp;lt;/slf4j.version&amp;gt;
            &amp;lt;camel.version&amp;gt;2.10.1&amp;lt;/camel.version&amp;gt;
        &amp;lt;/properties&amp;gt;
    
        &amp;lt;build&amp;gt;
            &amp;lt;plugins&amp;gt;
                &amp;lt;plugin&amp;gt;
                    &amp;lt;artifactId&amp;gt;maven-compiler-plugin&amp;lt;/artifactId&amp;gt;
                    &amp;lt;version&amp;gt;2.3.2&amp;lt;/version&amp;gt;
                    &amp;lt;configuration&amp;gt;
                        &amp;lt;source&amp;gt;1.6&amp;lt;/source&amp;gt;
                        &amp;lt;target&amp;gt;1.6&amp;lt;/target&amp;gt;
                    &amp;lt;/configuration&amp;gt;
                &amp;lt;/plugin&amp;gt;
                &amp;lt;plugin&amp;gt;
                    &amp;lt;artifactId&amp;gt;maven-assembly-plugin&amp;lt;/artifactId&amp;gt;
                    &amp;lt;version&amp;gt;2.3&amp;lt;/version&amp;gt;
                    &amp;lt;configuration&amp;gt;
                        &amp;lt;descriptorRefs&amp;gt;
                            &amp;lt;descriptorRef&amp;gt;project&amp;lt;/descriptorRef&amp;gt;
                            &amp;lt;descriptorRef&amp;gt;jar-with-dependencies&amp;lt;/descriptorRef&amp;gt;
                        &amp;lt;/descriptorRefs&amp;gt;
                    &amp;lt;/configuration&amp;gt;
                    &amp;lt;executions&amp;gt;
                        &amp;lt;execution&amp;gt;
                            &amp;lt;id&amp;gt;make-assembly&amp;lt;/id&amp;gt;
                            &amp;lt;phase&amp;gt;package&amp;lt;/phase&amp;gt;
                            &amp;lt;goals&amp;gt;
                                &amp;lt;goal&amp;gt;single&amp;lt;/goal&amp;gt;
                            &amp;lt;/goals&amp;gt;
                        &amp;lt;/execution&amp;gt;
                    &amp;lt;/executions&amp;gt;
                &amp;lt;/plugin&amp;gt;
            &amp;lt;/plugins&amp;gt;
        &amp;lt;/build&amp;gt;
    
        &amp;lt;dependencies&amp;gt;
    
            &amp;lt;!-- Unit testing lib --&amp;gt;
            &amp;lt;dependency&amp;gt;
                &amp;lt;groupId&amp;gt;junit&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;junit-dep&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;4.10&amp;lt;/version&amp;gt;
                &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;
            &amp;lt;/dependency&amp;gt;
            &amp;lt;dependency&amp;gt;
                &amp;lt;groupId&amp;gt;org.hamcrest&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;hamcrest-library&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;1.2.1&amp;lt;/version&amp;gt;
                &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;
            &amp;lt;/dependency&amp;gt;
    
            &amp;lt;!-- Logging lib --&amp;gt;
            &amp;lt;dependency&amp;gt;
                &amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;slf4j-api&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;${slf4j.version}&amp;lt;/version&amp;gt;
            &amp;lt;/dependency&amp;gt;
            &amp;lt;dependency&amp;gt;
                &amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;slf4j-log4j12&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;${slf4j.version}&amp;lt;/version&amp;gt;
                &amp;lt;scope&amp;gt;runtime&amp;lt;/scope&amp;gt;
                &amp;lt;optional&amp;gt;true&amp;lt;/optional&amp;gt;
            &amp;lt;/dependency&amp;gt;
    
            &amp;lt;!-- Apache Commons lib --&amp;gt;
            &amp;lt;dependency&amp;gt;
                &amp;lt;groupId&amp;gt;commons-lang&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;commons-lang&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;2.6&amp;lt;/version&amp;gt;
            &amp;lt;/dependency&amp;gt;
            &amp;lt;dependency&amp;gt;
                &amp;lt;groupId&amp;gt;commons-io&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;commons-io&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;2.0.1&amp;lt;/version&amp;gt;
            &amp;lt;/dependency&amp;gt;
    
            &amp;lt;!-- Apache Camel --&amp;gt;
            &amp;lt;dependency&amp;gt;
                &amp;lt;groupId&amp;gt;org.apache.camel&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;camel-core&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;${camel.version}&amp;lt;/version&amp;gt;
            &amp;lt;/dependency&amp;gt;
            &amp;lt;dependency&amp;gt;
                &amp;lt;groupId&amp;gt;org.apache.camel&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;camel-spring&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;${camel.version}&amp;lt;/version&amp;gt;
            &amp;lt;/dependency&amp;gt;
            &amp;lt;dependency&amp;gt;
                &amp;lt;groupId&amp;gt;org.apache.camel&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;camel-groovy&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;${camel.version}&amp;lt;/version&amp;gt;
            &amp;lt;/dependency&amp;gt;
            &amp;lt;dependency&amp;gt;
                &amp;lt;groupId&amp;gt;org.apache.camel&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;camel-jackson&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;${camel.version}&amp;lt;/version&amp;gt;
            &amp;lt;/dependency&amp;gt;
            &amp;lt;dependency&amp;gt;
                &amp;lt;groupId&amp;gt;org.apache.camel&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;camel-mina&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;${camel.version}&amp;lt;/version&amp;gt;
            &amp;lt;/dependency&amp;gt;
    
        &amp;lt;/dependencies&amp;gt;
    
    &amp;lt;/project&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pom.xml&lt;/code&gt; decalares a Java based application and it will produce &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jar&lt;/code&gt;. It requires minimal of JDK 6 or higher. Besides the typical &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;junit&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hamcrest&lt;/code&gt; for unit testing, I also added &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;slf4j&lt;/code&gt; for logging. I have added couple Apache’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;commons-lang/io&lt;/code&gt; to the project as well. I think these are basic settings that any Java based application should use them.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;maven-assembly-plugin&lt;/code&gt; I have declared is only for this demo packging purpose, and you may change or remove to suite your own project need.&lt;/p&gt;

&lt;p&gt;For Camel dependencies, you would need minimal &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;camel-core&lt;/code&gt; for routes building. And then you can add any additional components you plan to use in your project. I have added the following for building typical message based application development:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;camel-spring&lt;/code&gt; - we want to have option to declare Camel routes in xml files as configuration. See &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;camel-demo/config&lt;/code&gt; directory for samples.&lt;/li&gt;
  &lt;li&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;camel-jackson&lt;/code&gt; - we want to process messaging data in our application as JSON format.&lt;/li&gt;
  &lt;li&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;camel-mina&lt;/code&gt; - we want to send messaging data accross network through TCP socket.&lt;/li&gt;
  &lt;li&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;camel-groovy&lt;/code&gt; - [optional] we want to be able to add dynamic scripting to route, even inside the xml config. This is great for debug and POC.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Note that since we use multiple camel components dependencies, I choose to set a Maven property &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;${camel.version}&lt;/code&gt; so that when we upgrade Camel, 
it’s easier to maintain the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pom.xml&lt;/code&gt; file in one place.&lt;/p&gt;

&lt;p&gt;You should able to cd into the project directory and run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mvn compile&lt;/code&gt; to verify that the project. It should compile without error.&lt;/p&gt;

&lt;h1 id=&quot;improving-startup-of-routes-with-a-camelrunner&quot;&gt;Improving startup of routes with a CamelRunner&lt;/h1&gt;

&lt;p&gt;With the project &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pom.xml&lt;/code&gt; file ready, you can start creating Camel routes to handle your own business logics. Before we get too excited, let’s try out
a simple &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HelloRoute&lt;/code&gt; to see how it works and how we can run it first. Here is the route defnition code in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/java/deng/cameldemo/HelloRoute.java&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package deng.cameldemo;
    
    import org.apache.camel.builder.RouteBuilder;
    
    public class HelloRoute extends RouteBuilder {
        @Override
        public void configure() throws Exception {
            from(&quot;timer://helloTimer?period=3000&quot;).
                to(&quot;log:&quot; + getClass().getName());
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;take-a-test-ride-with-the-camel&quot;&gt;Take a test ride with the Camel&lt;/h2&gt;

&lt;p&gt;To see above in action, we need to add it into a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CamelContext&lt;/code&gt; and start the context. For Java standalone program, we would write this setup code
in a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Main&lt;/code&gt; class. The Camel actually comes with a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;org.apache.camel.main.MainSupport&lt;/code&gt; abstract class that you may use to extend your own &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Main&lt;/code&gt;. 
However, I think it would be even nicer if Camel would provide a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CamelRunner&lt;/code&gt; that can run like this.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ java CamelRunner deng.cameldemo.HelloRoute
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Such &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CamelRunner&lt;/code&gt; would be very user friendly and re-usable to have, so that’s what I did. I wrote one like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package deng.cameldemo;
    
    import org.apache.camel.CamelContext;
    import org.apache.camel.builder.RouteBuilder;
    import org.apache.camel.impl.DefaultCamelContext;
    import org.slf4j.Logger;
    import org.slf4j.LoggerFactory;
    import org.springframework.context.ConfigurableApplicationContext;
    import org.springframework.context.support.FileSystemXmlApplicationContext;
    
    /** 
     * A main program to start Camel and run as a server using RouteBuilder class names or 
     * Spring config files.
     * 
     * &amp;lt;p&amp;gt;Usage:
     * 
     * java deng.cameldemo.CamelRunner deng.cameldemo.HelloRoute
     * 
     * or
     * 
     * java -Dspring=true deng.cameldemo.CamelRunner /path/to/camel-spring.xml
     * 
     * @author Zemian Deng
     */
    public class CamelRunner {
        public static void main(String[] args) throws Exception {
            CamelRunner runner = new CamelRunner();
            runner.run(args);
        }
    
        private static Logger logger = LoggerFactory.getLogger(CamelRunner.class);
        public void run(String[] args) throws Exception {
            if (Boolean.parseBoolean(System.getProperty(&quot;spring&quot;, &quot;false&quot;)))
                runWithSpringConfig(args);
            else
                runWithCamelRoutes(args);
    
            // Wait for user to hit CRTL+C to stop the service
            synchronized(this) {
                this.wait();
            }
        }
    
        private void runWithSpringConfig(String[] args) {
            final ConfigurableApplicationContext springContext = new FileSystemXmlApplicationContext(args);
    
            // Register proper shutdown.
            Runtime.getRuntime().addShutdownHook(new Thread() { 
                @Override
                public void run() {
                    try {
                        springContext.close();
                        logger.info(&quot;Spring stopped.&quot;);
                    } catch (Exception e) {
                        logger.error(&quot;Failed to stop Spring.&quot;, e);
                    }
                }
            });
    
            // Start spring
            logger.info(&quot;Spring started.&quot;);
        }
    
        private void runWithCamelRoutes(String[] args) throws Exception {
            final CamelContext camelContext = new DefaultCamelContext();        
            // Register proper shutdown.
            Runtime.getRuntime().addShutdownHook(new Thread() { 
                @Override
                public void run() {
                    try {
                        camelContext.stop();
                        logger.info(&quot;Camel stopped for {}&quot;, camelContext);
                    } catch (Exception e) {
                        logger.error(&quot;Failed to stop Camel.&quot;, e);
                    }
                }
            });
    
            // Added RouteBuilder from args
            for (String className : args) {
                Class&amp;lt;?&amp;gt; cls = Class.forName(className);
                if (RouteBuilder.class.isAssignableFrom(cls)) {
                    Object obj = cls.newInstance();
                    RouteBuilder routeBuilder = (RouteBuilder)obj;
                    camelContext.addRoutes(routeBuilder);
                } else {
                    throw new RuntimeException(&quot;Unable to add Camel RouteBuilder &quot; + className);
                }
            }
    
            // Start camel
            camelContext.start();
            logger.info(&quot;Camel started for {}&quot;, camelContext);
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To help you run the main class, I have provided a &lt;a href=&quot;http://saltnlight5.blogspot.com/2012/08/a-better-java-shell-script-wrapper.html&quot;&gt;run-java&lt;/a&gt; 
wrapper script under the project’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bin&lt;/code&gt; directory, so that you may quickly test it without having to setup classpath.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ mvn package
$ bin/run-java deng.cameldemo.CamelRunner deng.cameldemo.HelloRoute
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You will see that the program will load the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HelloRoute&lt;/code&gt; in a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DefaultCamelContext&lt;/code&gt; and start it as a server. The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HelloRoute&lt;/code&gt; itself will 
generate a 3 seconds timer message and send it to a logger, which should be printing onto your console screen. This will continue forever 
until you hit &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CTRL+C&lt;/code&gt; to end it.&lt;/p&gt;

&lt;p&gt;NOTE: You only have to invoke &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mvn package&lt;/code&gt; command once, so that it will package up all the dependencies jars in order for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run-java&lt;/code&gt; to auto-detect
them. If you are not going to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;maven-assembly-plugin&lt;/code&gt; during &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;package&lt;/code&gt; phase, then use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mvn dependency:copy-dependencies&lt;/code&gt; command 
explicitly will work fine as well.&lt;/p&gt;

&lt;h2 id=&quot;take-a-test-ride-with-the-camel-part-2-running-camel-with-spring-xml-configuration&quot;&gt;Take a test ride with the Camel, Part 2: running Camel with Spring xml configuration&lt;/h2&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HelloRoute&lt;/code&gt; example above would simply provide route definition that formed by using component URI’s. It will be nice if
we can configure the route in a declarative manner so that we may change the route without re-compile a class file. This will be very handy especially
if you are not familiar with each component’s options and want to explore and try things out. Well, that’s what the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;camel-spring&lt;/code&gt; is for. Beside 
giving you an option to load route in xml config file, it also provides a very flexible way to register custom services/processors bean in the Spring
IoC container.&lt;/p&gt;

&lt;p&gt;If you are a keen reader, you will notice in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CamelRunner&lt;/code&gt; code above that it has an extra &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;runWithSpringConfig&lt;/code&gt; part. So the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CamelRunner&lt;/code&gt; 
can actually bootstrap any Spring xml file and start a context as a server. You may use it like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ bin/run-java deng.cameldemo.CamelRunner -Dspring=true config/hellocamel-spring.xml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config/hellocamel-spring.xml&lt;/code&gt; is just an equivalent of our &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HelloRoute&lt;/code&gt; code but in Spring xml form:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
        xsi:schemaLocation=&quot;
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd&quot;&amp;gt;
    
        &amp;lt;camelContext id=&quot;helloCamel&quot; xmlns=&quot;http://camel.apache.org/schema/spring&quot;&amp;gt;
            &amp;lt;route&amp;gt;
                &amp;lt;from uri=&quot;timer://jdkTimer?period=3000&quot;/&amp;gt;
                &amp;lt;to uri=&quot;log://deng.cameldemo.HelloCamel&quot;/&amp;gt;
            &amp;lt;/route&amp;gt;
        &amp;lt;/camelContext&amp;gt;
    
    &amp;lt;/beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This remove the need to compile/re-compile &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HelloRoute&lt;/code&gt; to define the Camel route to run.&lt;/p&gt;

&lt;h1 id=&quot;building-message-based-application-using-camel&quot;&gt;Building message based application using Camel&lt;/h1&gt;

&lt;p&gt;To present you with a more practical demo, I would show you further on how to setup Camel to process message based application. In many IT
shops, it’s common that you would have a server to take message data as input and process them. A practical use case is to take any JSON
formated message and transform it into object and process it. To do this in Camel, what you want to build is a route that will take 
input messages from a TCP port, and then process it in a pipeflow with any business logic you may have. You will run the route as a server, 
and then client may use any mean to submit the message to the TCP port. Client may even be another thin Camel client app to submit data as well. 
Let me show you how to get started.&lt;/p&gt;

&lt;h2 id=&quot;writing-the-server-side-code-with-camel-route&quot;&gt;Writing the server side code with Camel route&lt;/h2&gt;

&lt;p&gt;The server side would need a route to listen from a TCP port, and this is provided by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;camel-mina&lt;/code&gt; component. The first step is you need a route.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package deng.cameldemo;
    
    import org.apache.camel.builder.RouteBuilder;
    
    public class TcpMsgRoute extends RouteBuilder {
        @Override
        public void configure() throws Exception {
            String port = System.getProperty(&quot;port&quot;, &quot;12345&quot;);
            from(&quot;mina:tcp://localhost:&quot; + port + &quot;?sync=false&quot;).
                to(&quot;log:&quot; + getClass().getName());
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then the next step is … done! No way, you mean that’s all there to it for a server? Too good to be true? Well, let’s try it out&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    $ bin/run-java deng.cameldemo.CamelRunner deng.cameldemo.TcpMsgRoute -Dport=12345
    15:21:41 main INFO  org.apache.camel.impl.DefaultCamelContext:1391 | Apache Camel 2.10.1 (CamelContext: camel-1) is starting
    15:21:41 main INFO  org.apache.camel.management.ManagementStrategyFactory:43 | JMX enabled.
    15:21:42 main INFO  org.apache.camel.impl.converter.DefaultTypeConverter:45 | Loaded 172 type converters
    15:21:42 main INFO  org.apache.camel.component.mina.MinaConsumer:59 | Binding to server address: localhost/127.0.0.1:12345 using acceptor: org.apache.mina.transport.socket.nio.SocketAcceptor@2ffad8fe
    15:21:42 main INFO  org.apache.camel.impl.DefaultCamelContext:2045 | Route: route1 started and consuming from: Endpoint[mina://tcp://localhost:12345?sync=true]
    15:21:42 main INFO  org.apache.camel.management.DefaultManagementLifecycleStrategy:859 | StatisticsLevel at All so enabling load performance statistics
    15:21:42 main INFO  org.apache.camel.impl.DefaultCamelContext:1426 | Total 1 routes, of which 1 is started.
    15:21:42 main INFO  org.apache.camel.impl.DefaultCamelContext:1427 | Apache Camel 2.10.1 (CamelContext: camel-1) started in 0.505 seconds
    15:21:42 main INFO  deng.cameldemo.CamelRunner:93 | Camel started for CamelContext(camel-1)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Voila! The server is up and waiting for your users to send messages through port &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;12345&lt;/code&gt;. Not too bad for few lines of code.&lt;/p&gt;

&lt;h2 id=&quot;writing-the-client-side-code-with-camel-producertemplate&quot;&gt;Writing the client side code with Camel ProducerTemplate&lt;/h2&gt;

&lt;p&gt;Since our server expose a TCP port and take in any text content message, you can create any client that’s capable writing to a TCP socket. In here, 
I will show you how to use Camel to write a thin client.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package deng.cameldemo.client;
    
    import java.io.FileReader;
    import org.apache.camel.CamelContext;
    import org.apache.camel.ProducerTemplate;
    import org.apache.camel.impl.DefaultCamelContext;
    import org.apache.commons.io.IOUtils;
    import org.slf4j.Logger;
    import org.slf4j.LoggerFactory;
    
    public class TcpMsgSender {
        public static void main(String[] args) throws Exception {
            TcpMsgSender runner = new TcpMsgSender();
            runner.run(args);
        }
    
        private static Logger logger = LoggerFactory.getLogger(TcpMsgSender.class);
        public void run(String[] args) throws Exception {
            String fileName = args.length &amp;gt; 0 ? args[0] : &quot;data/msg.txt&quot;;
            String[] hostPort = (args.length &amp;gt; 1 ? args[1] : &quot;localhost:12345&quot;).split(&quot;:&quot;);
            String host = hostPort[0];
            String port = hostPort.length &amp;gt; 1 ? hostPort[1] : &quot;12345&quot;;
            logger.info(&quot;Sending tcp message {} to host={}, port={}&quot;, new Object[]{ fileName, host, port});
    
            String text = IOUtils.toString(new FileReader(fileName));
            logger.debug(&quot;File size={}&quot;, text.length());
    
            CamelContext camelContext = new DefaultCamelContext();
            ProducerTemplate producer = camelContext.createProducerTemplate();
            producer.sendBody(&quot;mina:tcp://&quot; + host + &quot;:&quot; + port + &quot;?sync=false&quot;, text);
            logger.info(&quot;Message sent.&quot;);
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TcpMsgSender&lt;/code&gt; can send any text file to your server endpoint. Try this out while your server is running:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    $ bin/run-java deng.cameldemo.client.TcpMsgSender data/test-msg.json localhost:12345
    15:22:35 main INFO  deng.cameldemo.client.TcpMsgSender:24 | Sending tcp message data/test-msg.json to host=localhost, port=12345
    15:22:35 main DEBUG deng.cameldemo.client.TcpMsgSender:27 | File size=47
    15:22:35 main INFO  org.apache.camel.impl.converter.DefaultTypeConverter:45 | Loaded 172 type converters
    15:22:35 main INFO  org.apache.camel.management.ManagementStrategyFactory:43 | JMX enabled.
    15:22:35 main INFO  deng.cameldemo.client.TcpMsgSender:32 | Message sent.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You should able to verify from your server console output that it received the msg. The msg I sent is in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;data/test-msg.json&lt;/code&gt;, which 
contains this simple text:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{ &quot;firstName&quot; : &quot;Zemian&quot;, &quot;lastName&quot; : &quot;Deng&quot; }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that our server simply receive plain text and log it. We will discuss how to process the message next.&lt;/p&gt;

&lt;h2 id=&quot;processing-message-data-in-json-format-with-camel-and-spring-xml-config&quot;&gt;Processing message data in JSON format with Camel and Spring xml config&lt;/h2&gt;

&lt;p&gt;You thought the server code was easy from above, guess again. You can actually replace the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;TcpMsgRoute&lt;/code&gt; with just some simple xml lines!&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
        xsi:schemaLocation=&quot;
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd&quot;&amp;gt;
    
        &amp;lt;camelContext id=&quot;tcpMsgServer&quot; xmlns=&quot;http://camel.apache.org/schema/spring&quot;&amp;gt;
            &amp;lt;route&amp;gt;
                &amp;lt;from uri=&quot;mina:tcp://localhost:12345?sync=false&quot;/&amp;gt;
                &amp;lt;to uri=&quot;log://deng.cameldemo.TcpMsgServer&quot;/&amp;gt;
            &amp;lt;/route&amp;gt;
        &amp;lt;/camelContext&amp;gt;
    
    &amp;lt;/beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Save it as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config/tcpmsgserver-spring.xml&lt;/code&gt;. Then re-run the server, and you should get the same result as above.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ bin/run-java deng.cameldemo.CamelRunner -Dspring=true config/tcpmsgserver-spring.xml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now let us improve the above xml to further process the JSON message data. We will like to transform the plain text to a Java object then process 
by a custom bean. To do that, we first would need to add unmarshal component to the route. This is where the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;camel-jackson&lt;/code&gt; comes into play. 
In our demo, the unmarshalling step would convert the JSON text into a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;java.util.Map&lt;/code&gt; and then pass it to a processor bean named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;myMsgProcessor&lt;/code&gt;.
Let’s create a new xml file named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config/tcpmsgserver-json-spring.xml&lt;/code&gt; as follow.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
        xsi:schemaLocation=&quot;
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd&quot;&amp;gt;
    
        &amp;lt;camelContext id=&quot;tcpMsgServer&quot; xmlns=&quot;http://camel.apache.org/schema/spring&quot;&amp;gt;
            &amp;lt;route&amp;gt;
                &amp;lt;from uri=&quot;mina:tcp://localhost:12345?sync=false&quot;/&amp;gt;
                &amp;lt;to uri=&quot;log://deng.cameldemo.TcpMsgServer&quot;/&amp;gt;
                &amp;lt;unmarshal&amp;gt;
                    &amp;lt;json library=&quot;Jackson&quot;/&amp;gt;
                &amp;lt;/unmarshal&amp;gt;
                &amp;lt;to uri=&quot;bean:myMsgProcessor?method=process&quot;/&amp;gt;
            &amp;lt;/route&amp;gt;
        &amp;lt;/camelContext&amp;gt;
    
        &amp;lt;bean id=&quot;myMsgProcessor&quot; class=&quot;deng.cameldemo.MyMsgProcessor&quot;&amp;gt;
        &amp;lt;/bean&amp;gt;
    
    &amp;lt;/beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;myMsgProcessor&lt;/code&gt; is an Spring bean that we provide custom logic code to process the data. At this point we have a full Java object
to manipulate. The content of the processor can be any POJO with the method name specified in the URI. Here is an example one:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package deng.cameldemo;
    
    import org.apache.camel.builder.RouteBuilder;
    import org.slf4j.Logger;
    import org.slf4j.LoggerFactory;
    import java.util.Map;
    
    public class MyMsgProcessor {
        private static Logger logger = LoggerFactory.getLogger(MyMsgProcessor.class);
        public void process(Map&amp;lt;String, String&amp;gt; data) {
            logger.info(&quot;We should slice and dice the data: &quot; + data);
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Try re-run the server with the new xml file above, and you should able to re-invoke the same client command to test it out. Here is a sample 
output of my server:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    $ bin/run-java deng.cameldemo.CamelRunner -Dspring=true config/tcpmsgserver-json-spring.xml
    17:05:25 main INFO  org.springframework.context.support.FileSystemXmlApplicationContext:456 | Refreshing org.springframework.context.support.FileSystemXmlApplicationContext@4200309: startup date [Sat Sep 15 17:05:25 EDT 2012]; root of context hierarchy
    17:05:25 main INFO  org.springframework.beans.factory.xml.XmlBeanDefinitionReader:315 | Loading XML bean definitions from file [/Users/zemian/projects/sandbox/camel-demo/config/tcpmsgserver-json-spring.xml]
    17:05:27 main INFO  org.springframework.beans.factory.support.DefaultListableBeanFactory:557 | Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@27b75165: defining beans [template,consumerTemplate,tcpMsgServer:beanPostProcessor,tcpMsgServer,myMsgProcessor]; root of factory hierarchy
    17:05:27 main INFO  org.apache.camel.spring.SpringCamelContext:1391 | Apache Camel 2.10.1 (CamelContext: tcpMsgServer) is starting
    17:05:27 main INFO  org.apache.camel.management.ManagementStrategyFactory:43 | JMX enabled.
    17:05:27 main INFO  org.apache.camel.impl.converter.DefaultTypeConverter:45 | Loaded 172 type converters
    17:05:28 main INFO  org.apache.camel.component.mina.MinaConsumer:59 | Binding to server address: localhost/127.0.0.1:12345 using acceptor: org.apache.mina.transport.socket.nio.SocketAcceptor@5a3cae4a
    17:05:28 main INFO  org.apache.camel.spring.SpringCamelContext:2045 | Route: route1 started and consuming from: Endpoint[mina://tcp://localhost:12345?sync=false]
    17:05:28 main INFO  org.apache.camel.management.DefaultManagementLifecycleStrategy:859 | StatisticsLevel at All so enabling load performance statistics
    17:05:28 main INFO  org.apache.camel.spring.SpringCamelContext:1426 | Total 1 routes, of which 1 is started.
    17:05:28 main INFO  org.apache.camel.spring.SpringCamelContext:1427 | Apache Camel 2.10.1 (CamelContext: tcpMsgServer) started in 0.695 seconds
    17:05:28 main INFO  deng.cameldemo.CamelRunner:61 | Spring started.
    17:05:35 Camel (tcpMsgServer) thread #3 - MinaThreadPool INFO  deng.cameldemo.TcpMsgServer:96 | Exchange[ExchangePattern:InOnly, BodyType:String, Body:{ &quot;firstName&quot; : &quot;Zemian&quot;, &quot;lastName&quot; : &quot;Deng&quot; }]
    17:05:35 Camel (tcpMsgServer) thread #3 - MinaThreadPool INFO  deng.cameldemo.MyMsgProcessor:11 | We should slice and dice the data: {lastName=Deng, firstName=Zemian}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Pay attention that Camel will auto convert the data format in your route! Our client only sends the plain text as JSON format, but when
server receives it, it unmarshals it using Jackson library, and then converts it into a java Map object. It then passes the map object into our
processor bean. Also, in this demo, I choose to use a generic &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;java.util.Map&lt;/code&gt; as processor method argument (which is output of the JSON unmarshal), but
you can easily define your own business data type, such as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MyCustomerData&lt;/code&gt;. This reveals the power of Camel, since you don’t need to push the message
in your flow, but only worry about writing your “processor” as a POJO. The Camel will “glue” components together to form a route and carry the message data through the pipeline flow.&lt;/p&gt;

&lt;p&gt;On the same token, when you write your business logic in one or more processors, it’s a good idea that you limit your POJO logic to be as small 
unit as possible. When you do this, then you can maximize the reusability of the processors. The bigger POJO you make, with many business logics mixed in, it will also make it
difficult to test. So I recommend you when developing these processor beans, try to think them as LEGO pieces – small POJO. You want to let Camel define the route and glue the LEGO
pieces togther. Once you get into this habit of thiking, then you can use Camel in a more effectively way to solve many of your domain problems.&lt;/p&gt;

&lt;p&gt;Well, that’s all for today folks. I hope you enjoyed the Camel ride. Happy programming!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Boost your Groovy with NailGun</title>
   <link href="http://localhost:4000/2012/09/13/boost-your-groovy-with-nailgun/"/>
   <updated>2012-09-13T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/09/13/boost-your-groovy-with-nailgun</id>
   <content type="html">&lt;p&gt;Are you working on a large Hibernate project that takes long time to load up all the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hbm.xml&lt;/code&gt; files when creating the 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Session&lt;/code&gt; object? This is fine during deployment and runtime because it only loads it once. However, often time we also 
need to the same &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Session&lt;/code&gt; object to do some ad-hoc &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HQL&lt;/code&gt; queries to debug or validate data. Loading and re-loading
large mapping files in a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Session&lt;/code&gt; to just execute single query is very painful.&lt;/p&gt;

&lt;p&gt;Now, I like to poke around Java things with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Groovy&lt;/code&gt;, and it’s a great tool to peek at your data as ad-hoc queries as well. 
You can easily do this with their &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;groovyConsole&lt;/code&gt; GUI tool and add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--classpath&lt;/code&gt; option to include your project classes. This
will bring up a tiny Editor, and you can script to load your hibernate &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Session&lt;/code&gt; there. Once the first run is loaded (the 
hibenrate &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Session&lt;/code&gt; created), then second run is almost in an instant.&lt;/p&gt;

&lt;p&gt;Running the little &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;groovyConsole&lt;/code&gt; had wet my appetite, and I was hungry for a better text editor, but yet I don’t really
want a full blow IDE for scripting. I like do my scripting in a plain editor. Now if you have an editor such as &lt;a href=&quot;http://sublimetext.com&quot;&gt;Sublime Text 2&lt;/a&gt; (ST2) that has a “build” feature to execute a external command, then you will enjoy scripting much more. With
ST2, I can have it call &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;groovy.bat&lt;/code&gt; from inside the editor on the script that I am editing. However, there is another problem: the external command will restart a new JVM process on each run! Now I am back to square one.&lt;/p&gt;

&lt;p&gt;To solve this problem, and still have my cake (editor), I recalled an awesome tool called &lt;a href=&quot;http://www.martiansoftware.com/nailgun/index.html&quot;&gt;NailGun&lt;/a&gt;. This works perfectly with Groovy and my problem. I can start a server like this&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;java -cp &quot;groovy-all-2.0.1.jar:nailgun-0.7.1.jar&quot; -server com.martiansoftware.nailgun.NGServer
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And then in my ST2 editor, I can run an external command like this as the NailGun client:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/path/to/nailgun-0.7.1/ng groovy.ui.GroovyMain test.groovy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Nail gun client sends the script file content to the server and prints the result. Again, after first run, the second run should
be instantaneously.&lt;/p&gt;

&lt;p&gt;There, I scratched my itch.&lt;/p&gt;

&lt;h1 id=&quot;details-on-how-to-setup-sublime-text-2-to-run-nailgun-client&quot;&gt;Details on how to setup Sublime Text 2 to run NailGun client&lt;/h1&gt;

&lt;ol&gt;
  &lt;li&gt;Go to menu: “Preference &amp;gt; Browse Packages”&lt;/li&gt;
  &lt;li&gt;Open the Groovy folder&lt;/li&gt;
  &lt;li&gt;Save a file named “GroovyNailGunClient.sublime-build” with the following:&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  {
  &quot;cmd&quot;: [&quot;/path/to/nailgun-0.7.1/ng&quot;, &quot;groovy.ui.GroovyMain&quot;, &quot;$file&quot;],
  &quot;file_regex&quot;: &quot;^(...*?):([0-9]*):?([0-9]*)&quot;,
  &quot;selector&quot;: &quot;source.groovy&quot;
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;Select menu “Tool &amp;gt; Build System &amp;gt; GroovyNailGunClient”&lt;/li&gt;
  &lt;li&gt;Press &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CTRL+B&lt;/code&gt; to run any groovy file in your editor.&lt;/li&gt;
&lt;/ol&gt;
</content>
 </entry>
 
 <entry>
   <title>Improving java.util.Properties</title>
   <link href="http://localhost:4000/2012/09/07/improving-java-util-properties/"/>
   <updated>2012-09-07T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/09/07/improving-java-util-properties</id>
   <content type="html">&lt;p&gt;The Java built-in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;java.util.Properties&lt;/code&gt; class could really use some love. I have written a slightly improved version called
&lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/src/15f066cc6dad/timemachine-scheduler/src/main/java/timemachine/scheduler/support/Props.java&quot;&gt;timemachine.scheduler.support.Props&lt;/a&gt;, and below are some features that I use often.&lt;/p&gt;

&lt;h1 id=&quot;you-can-use-it-as-a-string-map-of-properties&quot;&gt;You can use it as a “String Map” of properties&lt;/h1&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    Props props1 = new Props();
    props1.put(&quot;foo&quot;, &quot;bar&quot;);
    
    // It can load from/to the Java Properties
    Props props2 = new Props(System.getProperties());
    java.util.Properties javaProps = props3.toProperties();
    
    // It can load from/to a basic java.util.Map
    Props props3 = new Props(System.getenv());
    
    // Props is a HashMap&amp;lt;String, String&amp;gt;, so no need to convert. Just use it
    for(Map.Entry&amp;lt;String, String&amp;gt; entry : props3.entrySet())
        System.our.println(entry.getKey() + &quot;: &quot; + entry.getValue());
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;you-can-load-from-a-file-in-a-single-line&quot;&gt;You can load from a file in a single line&lt;/h1&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    Props props1 = new Props(&quot;config.properties&quot;);
    Props props2 = new Props(&quot;/path/to/config.properties&quot;);
    Props props3 = new Props(new java.net.URL(&quot;http://myhost/config/config.properties&quot;));
    Props props4 = new Props(ClasspathURLStreamHandler.createURL(&quot;classpath://config/config.properties&quot;));
    
    // You can re-load on top of existing instance to override values
    props4.load(&quot;config2.properties&quot;);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;NOTE: The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ClasspathURLStreamHandler&lt;/code&gt; is a utility class from the same package under &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;timemachine.scheduler.support&lt;/code&gt; that can load any resources that’s in the classpath.&lt;/p&gt;

&lt;h1 id=&quot;you-can-get-many-basic-types-conversion&quot;&gt;You can get many basic types conversion&lt;/h1&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    Props props = new Props();
    props.put(&quot;str&quot;, &quot;foo&quot;);
    props.put(&quot;num&quot;, &quot;123&quot;);
    props.put(&quot;dec&quot;, &quot;99.99&quot;);
    props.put(&quot;flag&quot;, &quot;true&quot;);
    
    String str = props.getString(&quot;str&quot;);
    int num = props.getInt(&quot;num&quot;);
    double dec = props.getDouble(&quot;dec&quot;);
    boolean flag = props.getBoolean(&quot;flag&quot;);
    
    // You can even get default value when key is not found too
    int num2 = props.getInt(&quot;num2&quot;, -1);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;you-can-auto-expand-variable-from-any-existing-properties&quot;&gt;You can auto expand ${variable} from any existing properties&lt;/h1&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    Props props = new Props(System.getProperties());
    props.put(&quot;configDir&quot;, &quot;${user.home}/myapp/config&quot;);
    props.expandVariables();
    
    // The ${user.home} should be expanded to actual user home dir value.
    File dir = new File(props.get(&quot;configDir&quot;));
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There you have it. You see more code than words in this post, but I believe simple code speak louder than words and docs. I find these features very convenient and practical 
for many Java applications to use. I wish the JDK would provide these out of the box, and make the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;java.util.Properties&lt;/code&gt; more
developer friendly.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to write better POJO Services</title>
   <link href="http://localhost:4000/2012/09/01/how-to-write-better-pojo-services/"/>
   <updated>2012-09-01T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/09/01/how-to-write-better-pojo-services</id>
   <content type="html">&lt;p&gt;In Java, you can easily implement some business logic in Plain Old Java Object (POJO) classes, and then able to run them in a fancy
server or framework without much hassle. There many server/frameworks, such as JBossAS, Spring or Camel etc, that 
would allow you to deploy POJO without even hardcoding to their API. Obviously you would get advance features if you willing to couple to
their API specifics, but even if you do, you can keep these to minimal by encapsulating your own POJO and their API in a wrapper. 
By writing and designing your own application as simple POJO as possible, you will have the most flexible ways in choose a framework or server to 
deploy and run your application. One effective way to write your business logic in these environments is to use &lt;em&gt;Service&lt;/em&gt; component. 
In this article I will share few things I learned in writing &lt;em&gt;Services&lt;/em&gt;.&lt;/p&gt;

&lt;h1 id=&quot;what-is-a-service&quot;&gt;What is a Service?&lt;/h1&gt;

&lt;p&gt;The word &lt;em&gt;Service&lt;/em&gt; is overly used today, and it could mean many things to different people. When I say &lt;em&gt;Service&lt;/em&gt;, my definition is a software 
component that has minimal of life-cycles such as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;init&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;start&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;stop&lt;/code&gt;, and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;destroy&lt;/code&gt;. You may not need all these
stages of life-cycles in every service you write, but you can simply ignore ones that don’t apply. When writing large application that 
intended for long running such as a server component, definining these life-cycles and ensure they are excuted in proper order is crucial!&lt;/p&gt;

&lt;p&gt;I will be walking you through a Java demo project that I have prepared. It’s very basic and it should run as stand-alone. The only dependency it has is
the &lt;a href=&quot;http://www.slf4j.org&quot;&gt;SLF4J&lt;/a&gt; logger. If you don’t know how to use logger, then simply replace them with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;System.out.println&lt;/code&gt;. However I would strongly 
encourage you to learn how to use logger effectively during application development though. Also if you want to try out the 
&lt;a href=&quot;http://www.springsource.org/spring-framework&quot;&gt;Spring&lt;/a&gt; related demos, then obviously you would need their jars as well.&lt;/p&gt;

&lt;h1 id=&quot;writing-basic-pojo-service&quot;&gt;Writing basic POJO service&lt;/h1&gt;

&lt;p&gt;You can quickly define a contract of a Service with life-cycles as below in an interface.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package servicedemo;
    
    public interface Service {
        void init();
        void start();
        void stop();
        void destroy();
        boolean isInited();
        boolean isStarted();
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Developers are free to do what they want in their Service implementation, but you might want to give them an adapter class so that 
they don’t have to re-write same basic logic on each Service. I would provide an abstract service like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package servicedemo;
    
    import java.util.concurrent.atomic.*;
    import org.slf4j.*;
    public abstract class AbstractService implements Service {
        protected Logger logger = LoggerFactory.getLogger(getClass());
        protected AtomicBoolean started = new AtomicBoolean(false);
        protected AtomicBoolean inited = new AtomicBoolean(false);
    
        public void init() {
            if (!inited.get()) {
                initService();
                inited.set(true);
                logger.debug(&quot;{} initialized.&quot;, this);
            }
        }
    
        public void start() {
            // Init service if it has not done so.
            if (!inited.get()) {
                init();
            }
            // Start service now.
            if (!started.get()) {
                startService();
                started.set(true);
                logger.debug(&quot;{} started.&quot;, this);
            }
        }
    
        public void stop() {
            if (started.get()) {
                stopService();
                started.set(false);
                logger.debug(&quot;{} stopped.&quot;, this);
            }
        }
    
        public void destroy() {
            // Stop service if it is still running.
            if (started.get()) {
                stop();
            }
            // Destroy service now.
            if (inited.get()) {
                destroyService();
                inited.set(false);
                logger.debug(&quot;{} destroyed.&quot;, this);
            }
        }
    
        public boolean isStarted() {
            return started.get();
        }
    
        public boolean isInited() {
            return inited.get();
        }
    
        @Override
        public String toString() {
                return getClass().getSimpleName() + &quot;[id=&quot; + System.identityHashCode(this) + &quot;]&quot;;
        }
    
        protected void initService() {
        }
    
        protected void startService() {
        }
    
        protected void stopService() {
        }
    
        protected void destroyService() {
        }
    }

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This abstract class provide the basic of most services needs. It has a logger and states to keep track of the life-cycles. It then delegate new
sets of life-cycle methods so subclass can choose to override. Notice that the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;start()&lt;/code&gt; method is checking auto calling &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;init()&lt;/code&gt; if it hasn’t 
already done so. Same is done in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;destroy()&lt;/code&gt; method to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;stop()&lt;/code&gt; method. This is important if we’re to use it in a container that only have 
two stages life-cycles invocation. In this case, we can simply invoke &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;start()&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;destroy()&lt;/code&gt; to match to our service’s life-cycles.&lt;/p&gt;

&lt;p&gt;Some frameworks might go even further and create separate interfaces for each stage of the life-cycles, such as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;InitableService&lt;/code&gt; or 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;StartableService&lt;/code&gt; etc. But I think that would be too much in a typical app. In most of the cases, you want something simple, so I like it just
one interface. User may choose to ignore methods they don’t want, or simply use an adaptor class.&lt;/p&gt;

&lt;p&gt;Before we end this section, I would throw in a silly Hello world service that can be used in our demo later.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package servicedemo;
    
    public class HelloService extends AbstractService {
        public void initService() {
            logger.info(this + &quot; inited.&quot;);
        }
        public void startService() {
            logger.info(this + &quot; started.&quot;);
        }
        public void stopService() {
            logger.info(this + &quot; stopped.&quot;);
        }
        public void destroyService() {
            logger.info(this + &quot; destroyed.&quot;);
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;managing-multiple-pojo-services-with-a-container&quot;&gt;Managing multiple POJO Services with a container&lt;/h1&gt;

&lt;p&gt;Now we have the basic of &lt;em&gt;Service&lt;/em&gt; definition defined, your development team may start writing business logic code! Before long, you will have 
a library of your own services to re-use. To be able group and control these services into an effetive way, we want also provide a container 
to manage them. The idea is that we typically want to control and manage multiple services with a container as a group in a higher level. Here 
is a simple implementation for you to get started:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package servicedemo;
    
    import java.util.*;
    public class ServiceContainer extends AbstractService {
        private List&amp;lt;Service&amp;gt; services = new ArrayList&amp;lt;Service&amp;gt;();
    
        public void setServices(List&amp;lt;Service&amp;gt; services) {
            this.services = services;
        }
        public void addService(Service service) {
            this.services.add(service);
        }
    
        public void initService() {
            logger.debug(&quot;Initializing &quot; + this + &quot; with &quot; + services.size() + &quot; services.&quot;);
            for (Service service : services) {
                logger.debug(&quot;Initializing &quot; + service);
                service.init();
            }
            logger.info(this + &quot; inited.&quot;);
        }
        public void startService() {
                logger.debug(&quot;Starting &quot; + this + &quot; with &quot; + services.size() + &quot; services.&quot;);
                for (Service service : services) {
                    logger.debug(&quot;Starting &quot; + service);
                    service.start();
                }
                logger.info(this + &quot; started.&quot;);
        }
        public void stopService() {
                int size = services.size();
                logger.debug(&quot;Stopping &quot; + this + &quot; with &quot; + size + &quot; services in reverse order.&quot;);
                for (int i = size - 1; i &amp;gt;= 0; i--) {
                    Service service = services.get(i);
                    logger.debug(&quot;Stopping &quot; + service);
                    service.stop();
                }
                logger.info(this + &quot; stopped.&quot;);
        }
        public void destroyService() {
                int size = services.size();
                logger.debug(&quot;Destroying &quot; + this + &quot; with &quot; + size + &quot; services in reverse order.&quot;);
                for (int i = size - 1; i &amp;gt;= 0; i--) {
                    Service service = services.get(i);
                    logger.debug(&quot;Destroying &quot; + service);
                    service.destroy();
                }
                logger.info(this + &quot; destroyed.&quot;);
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From above code, you will notice few important things:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;We extends the AbstractService, so a container is a service itself.&lt;/li&gt;
  &lt;li&gt;We would invoke all service’s life-cycles before moving to next. No services will start unless all others are inited.&lt;/li&gt;
  &lt;li&gt;We should stop and destroy services in reverse order for most general use cases.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The above container implementation is simple and run in synchronized fashion. This mean, you start container, then all services
will start in order you added them. Stop should be same but in reverse order.&lt;/p&gt;

&lt;p&gt;I also hope you would able to see that there is plenty of room for you to improve this container as well. For example, you may 
add thread pool to control the execution of the services in asynchronized fashion.&lt;/p&gt;

&lt;h1 id=&quot;running-pojo-services&quot;&gt;Running POJO Services&lt;/h1&gt;

&lt;h2 id=&quot;running-services-with-a-simple-runner-program&quot;&gt;Running services with a simple runner program.&lt;/h2&gt;

&lt;p&gt;In the simplest form, we can run our POJO services on our own without any fancy server or frameworks. Java programs start its life from a 
static &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main&lt;/code&gt; method, so we surely can invoke &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;init&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;start&lt;/code&gt; of our services in there. But we also need to address the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;stop&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;destroy&lt;/code&gt;
life-cycles when user shuts down the program (usually by hitting &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CTRL+C&lt;/code&gt;.) For this, the Java has the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;java.lang.Runtime#addShutdownHook()&lt;/code&gt;
facility. You can create a simple stand-alone server to bootstrap &lt;em&gt;Service&lt;/em&gt; like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package servicedemo;
    
    import org.slf4j.*;
    public class ServiceRunner {
        private static Logger logger = LoggerFactory.getLogger(ServiceRunner.class);
    
        public static void main(String[] args) {
            ServiceRunner main = new ServiceRunner();
            main.run(args);
        }
    
        public void run(String[] args) {
            if (args.length &amp;lt; 1)
                throw new RuntimeException(&quot;Missing service class name as argument.&quot;);
    
            String serviceClassName = args[0];
            try {
                logger.debug(&quot;Creating &quot; + serviceClassName);
                Class&amp;lt;?&amp;gt; serviceClass = Class.forName(serviceClassName);
                if (!Service.class.isAssignableFrom(serviceClass)) {
                    throw new RuntimeException(&quot;Service class &quot; + serviceClassName + &quot; did not implements &quot; + Service.class.getName());
                }
                Object serviceObject = serviceClass.newInstance();
                Service service = (Service)serviceObject;
    
                registerShutdownHook(service);
    
                logger.debug(&quot;Starting service &quot; + service);
                service.init();
                service.start();
                logger.info(service + &quot; started.&quot;);
    
                synchronized(this) {
                    this.wait();
                }
            } catch (Exception e) {
                throw new RuntimeException(&quot;Failed to create and run &quot; + serviceClassName, e);
            }
        }
    
        private void registerShutdownHook(final Service service) {
            Runtime.getRuntime().addShutdownHook(new Thread() {
                public void run() {
                    logger.debug(&quot;Stopping service &quot; + service);
                    service.stop();
                    service.destroy();
                    logger.info(service + &quot; stopped.&quot;);
                }
            });
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With abover runner, you should able to run it with this command:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ java demo.ServiceRunner servicedemo.HelloService
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Look carefully, and you’ll see that you have many options to run multiple services with above runner. Let me highlight couple:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Improve above runner directly and make all &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;args&lt;/code&gt; for each new service class name, instead of just first element.&lt;/li&gt;
  &lt;li&gt;Or write a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MultiLoaderService&lt;/code&gt; that will load multiple services you want. You may control argument passing using System Properties.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Can you think of other ways to improve this runner?&lt;/p&gt;

&lt;h2 id=&quot;running-services-with-spring&quot;&gt;Running services with Spring&lt;/h2&gt;

&lt;p&gt;The Spring framework is an IoC container, and it’s well known to be easy to work POJO, and Spring lets you wire your application 
together. This would be a perfect fit to use in our POJO services. However, with all the features Spring brings, it missed a easy
to use, out of box &lt;em&gt;main&lt;/em&gt; program to bootstrap spring config xml context files. But with what we built so far, this is actually an
easy thing to do. Let’s write one of our POJO &lt;em&gt;Service&lt;/em&gt; to bootstrap a spring context file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package servicedemo;
    
    import org.springframework.context.ConfigurableApplicationContext;
    import org.springframework.context.support.FileSystemXmlApplicationContext;
    
    public class SpringService extends AbstractService {
        private ConfigurableApplicationContext springContext;
    
        public void startService() {
            String springConfig = System.getProperty(&quot;springContext&quot;, &quot;spring.xml);
            springContext = new FileSystemXmlApplicationContext(springConfig);
            logger.info(this + &quot; started.&quot;);
        }
        public void stopService() {
            springContext.close();
            logger.info(this + &quot; stopped.&quot;);
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With that simple &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SpringService&lt;/code&gt; you can run and load any spring xml file. For example try this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ java -DspringContext=config/service-demo-spring.xml demo.ServiceRunner servicedemo.SpringService
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Inside the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config/service-demo-spring.xml&lt;/code&gt; file, you can easily create our container that hosts one or more service in Spring beans.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&amp;gt;
    
        &amp;lt;bean id=&quot;helloService&quot; class=&quot;servicedemo.HelloService&quot;&amp;gt;
        &amp;lt;/bean&amp;gt;
    
        &amp;lt;bean id=&quot;serviceContainer&quot; class=&quot;servicedemo.ServiceContainer&quot; init-method=&quot;start&quot; destroy-method=&quot;destroy&quot;&amp;gt;
            &amp;lt;property name=&quot;services&quot;&amp;gt;
                &amp;lt;list&amp;gt;
                    &amp;lt;ref bean=&quot;helloService&quot;/&amp;gt;
                &amp;lt;/list&amp;gt;
            &amp;lt;/property&amp;gt;
        &amp;lt;/bean&amp;gt;
    
    &amp;lt;/beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice that I only need to setup &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;init-method&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;destroy-method&lt;/code&gt; once on the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;serviceContainer&lt;/code&gt; bean. You can then add one or more
other service such as the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;helloService&lt;/code&gt; as much as you want. They will all be started, managed, and then shutdown when you close the
Spring context.&lt;/p&gt;

&lt;p&gt;Note that Spring context container did not explicitly have the same life-cycles as our services. The Spring context will automatically
instanciate all your dependency beans, and then invoke all beans who’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;init-method&lt;/code&gt; is set. All that is done inside the constructor
of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FileSystemXmlApplicationContext&lt;/code&gt;. No explicit init method is called from user. However at the end, during stop of the service, Spring provide
the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;springContext#close()&lt;/code&gt; to clean things up. Again, they do not differentiate &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;stop&lt;/code&gt; from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;destroy&lt;/code&gt;. Because of this, we must merge our
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;init&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;start&lt;/code&gt; into Spring’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;init&lt;/code&gt; state, and then merge &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;stop&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;destroy&lt;/code&gt; into Spring’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;close&lt;/code&gt; state. Recall our 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AbstractService#destory&lt;/code&gt; will auto invoke &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;stop&lt;/code&gt; if it hasn’t already done so. So this is trick that we need to understand
in order to use Spring effectively.&lt;/p&gt;

&lt;h2 id=&quot;running-services-with-jee-app-server&quot;&gt;Running services with JEE app server&lt;/h2&gt;

&lt;p&gt;In a corporate env, we usually do not have the freedom to run what we want as a stand-alone program. Instead they usually have some 
infrustructure and stricter standard technology stack in place already, such as using a JEE application server. In these situation, the most 
portable way to run POJO services is in a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;war&lt;/code&gt; web application. In a Servlet web application, you can write a class that implements 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;javax.servlet.ServletContextListener&lt;/code&gt; and this will provide you the life-cycles hook via &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;contextInitialized&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;contextDestroyed&lt;/code&gt;.
In there, you can instanciate your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ServiceContainer&lt;/code&gt; object and call &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;start&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;destroy&lt;/code&gt; methods accordingly.&lt;/p&gt;

&lt;p&gt;Here is an example that you can explore:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    package servicedemo;
    import java.util.*;
    import javax.servlet.*;
    public class ServiceContainerListener implements ServletContextListener {
        private static Logger logger = LoggerFactory.getLogger(ServiceContainerListener.class);
        private ServiceContainer serviceContainer;
    
        public void contextInitialized(ServletContextEvent sce) {
            serviceContainer = new ServiceContainer();
            List&amp;lt;Service&amp;gt; services = createServices();
            serviceContainer.setServices(services);
            serviceContainer.start();
            logger.info(serviceContainer + &quot; started in web application.&quot;);
        }
    
        public void contextDestroyed(ServletContextEvent sce) {
            serviceContainer.destroy();
            logger.info(serviceContainer + &quot; destroyed in web application.&quot;);
        }
    
        private List&amp;lt;Service&amp;gt; createServices() {
            List&amp;lt;Service&amp;gt; result = new ArrayList&amp;lt;Service&amp;gt;();
            // populate services here.
            return result;
        }
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You may configure above in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WEB-INF/web.xml&lt;/code&gt; like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;        &amp;lt;listener&amp;gt;
            &amp;lt;listener-class&amp;gt;servicedemo.ServiceContainerListener&amp;lt;/listener-class&amp;gt;
        &amp;lt;/listener&amp;gt;
    
    &amp;lt;/web-app&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The demo provided a placeholder that you must add your services in code. But you can easily make that configurable using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;web.xml&lt;/code&gt; for
context parameters.&lt;/p&gt;

&lt;p&gt;If you were to use Spring inside a Servlet container, you may directly use their &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;org.springframework.web.context.ContextLoaderListener&lt;/code&gt; 
class that does pretty much same as above, except they allow you to specify their xml configuration file using the
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;contextConfigLocation&lt;/code&gt; context parameter. That’s how a typical Spring MVC based application is configure. Once you have this setup, you
can experiment our POJO service just as the Spring xml sample given above to test things out. You should see our service in action by
your logger output.&lt;/p&gt;

&lt;p&gt;PS: Actually what we described here are simply related to Servlet web application, and not JEE specific. So you can use Tomcat server just
fine as well.&lt;/p&gt;

&lt;h1 id=&quot;the-importance-of-services-life-cycles-and-its-real-world-usage&quot;&gt;The importance of Service’s life-cycles and it’s real world usage&lt;/h1&gt;

&lt;p&gt;All the information I presented here are not novelty, nor a killer design pattern. In fact they have been used in many popular open source projects.
However, in my past experience at work, folks always manage to make these extremely complicated, and worse case is that they completely disregard the 
importance of life-cycles when writing services. It’s true that not everything you going to write needs to be fitted into a service, but if you find
the need, please do pay attention to them, and take good care that they do invoked properly. The last thing you want is to exit JVM without clean up
in services that you allocated precious resources for. These would become more disastrous if you allow your application to be dynamically reloaded during
deployment without exiting JVM, in which will lead to system resources leakage.&lt;/p&gt;

&lt;p&gt;The above &lt;em&gt;Service&lt;/em&gt; practice has been put into use in the &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler&quot;&gt;TimeMachine&lt;/a&gt; project. In fact, if you 
look at the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;timemachine.scheduler.service.SchedulerEngine&lt;/code&gt;, it would just be a container of many &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/src/15f066cc6dad/timemachine-scheduler/src/main/java/timemachine/scheduler/service&quot;&gt;services&lt;/a&gt; 
running together. And that’s how user can extend the scheduler functionalities as well, by writing a &lt;em&gt;Service&lt;/em&gt;. You can load these services dynamically by a simple properties file.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to manage Quartz remotely</title>
   <link href="http://localhost:4000/2012/08/27/how-to-manage-quartz-remotely/"/>
   <updated>2012-08-27T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/08/27/how-to-manage-quartz-remotely</id>
   <content type="html">&lt;h2 id=&quot;option-1-jmx&quot;&gt;Option 1: JMX&lt;/h2&gt;

&lt;p&gt;Many people asked can they manage Quartz via JMX, and that the documentation on this is not clear enough to help them get started. So, let me highlight couple ways you can do this.&lt;/p&gt;

&lt;p&gt;Yes you can enable JMX in quartz with the following in 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;quartz.properties&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;org.quartz.scheduler.jmx.export = true
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After this, you use standard JMX client such as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$JAVA_HOME/bin/jconsole&lt;/code&gt; to connect and manage remotely.&lt;/p&gt;

&lt;h2 id=&quot;option-2-rmi&quot;&gt;Option 2: RMI&lt;/h2&gt;

&lt;p&gt;Another way to manage quartz remotely is to enable RMI in Quartz. If you use this, you basically run one instance of Quartz as RMI server, and then 
you can create second Quartz instance as RMI client. These two can talk remotely via a TCP port.&lt;/p&gt;

&lt;p&gt;For server scheduler instance, you want to add these in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;quartz.properties&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    org.quartz.scheduler.rmi.export = true
    org.quartz.scheduler.rmi.createRegistry = true
    org.quartz.scheduler.rmi.registryHost = localhost
    org.quartz.scheduler.rmi.registryPort = 1099
    org.quartz.scheduler.rmi.serverPort = 1100
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And for client scheduler instance, you want to add these in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;quartz.properties&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    org.quartz.scheduler.rmi.proxy = true
    org.quartz.scheduler.rmi.registryHost = localhost
    org.quartz.scheduler.rmi.registryPort = 1099
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The RMI feature is mentioned in Quartz doc &lt;a href=&quot;http://quartz-scheduler.org/documentation/quartz-2.x/configuration/ConfigRMI&quot;&gt;here&lt;/a&gt;. Quartz doesn’t have 
a &lt;em&gt;client&lt;/em&gt; API, but use the same &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;org.quartz.Scheduler&lt;/code&gt; for both server and client. It’s just the configuration are different.
By different configuration, you get very different behavior. For server, your scheduler is running all the jobs, while for client, it’s simply a
proxy. Your client scheduler instance will not run any jobs! You must be really careful when shutting down client because it does allow you to bring
down the server!&lt;/p&gt;

&lt;p&gt;These configurations have been highlighted in the &lt;a href=&quot;http://code.google.com/p/myschedule&quot;&gt;MySchedule&lt;/a&gt; project. If you run the webapp, you should see
a screen like &lt;a href=&quot;http://stormy-flower-6956.herokuapp.com/main/dashboard/create&quot;&gt;this demo&lt;/a&gt;, and you will see it provided many sample of quartz configurations
with these remote managment config properties.&lt;/p&gt;

&lt;p&gt;If configure with RMI option, you can actually still use MySchedule web UI to manage the Quartz as proxy. You can view and drill down jobs, and you can
even stop or shutdown remote server!&lt;/p&gt;

&lt;p&gt;Based on my experience, there is a down side of using Quartz RMI feature though. That is it creates a single point of failure. There is no fail over 
if your RMI server port is down!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Taming those Java editors on MacOSX</title>
   <link href="http://localhost:4000/2012/08/26/taming-those-java-editors-on-macosx/"/>
   <updated>2012-08-26T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/08/26/taming-those-java-editors-on-macosx</id>
   <content type="html">&lt;p&gt;Today, I learned that you can open multiple Eclipse instances in MacOSX like this&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ open -n -a Eclipse
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This comes pretty handy if you want a separate workspace per large project that has dozen or so modules (try importing the Camel or SpringFramework 
project source and you will see what I mean!)&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-a&lt;/code&gt; is for name of an application to open, and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-n&lt;/code&gt; means to open with new instance.&lt;/p&gt;

&lt;h1 id=&quot;finding-a-programmer-friendly-text-editor-on-macosx&quot;&gt;Finding a programmer friendly text editor on MacOSX&lt;/h1&gt;

&lt;p&gt;Despite I use Eclipse for most of my large Java projects, I still often find myself the need of a plain text editor. I use plain text editor for most
of my scripting programming. I also use it for notes taking, text file browsing, or even writing Blog post in markdown format!&lt;/p&gt;

&lt;p&gt;I guess for most programmers, choosing an Editor is a very personally thing. So I am not here to convert anybody. However, for those who never heard of 
&lt;a href=&quot;http://www.jedit.org&quot;&gt;jEdit&lt;/a&gt;, you ought to give it a try. It’s open source, full features, programmers friendly text editor that works 
across many of OS systems consistenly. It works because it’s Java based! If you use one of decent computer now a day, the performance 
is excellent as well.&lt;/p&gt;

&lt;p&gt;However, for some strange reason, the jedit installer on MacOSX doesn’t comes with a normal java command line script wrapper. The only thing 
I can see is the actual binary under &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/Applications/jEdit.app/Contents/MacOS/jedit&lt;/code&gt;. We can certainly run this as full jedit command, but then 
it always liter the console with strange GUI warnings. So a better way to run it is actually to use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;open&lt;/code&gt; command.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ open -a jedit $HOME/.bash_profile
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or you can add this in your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.bash_profile&lt;/code&gt; file:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function jedit(){ open -a jedit &quot;$@&quot; ; }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you can use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jedit&lt;/code&gt; command on the terminal.&lt;/p&gt;

&lt;h2 id=&quot;some-of-my-favorite-features-of-jedit&quot;&gt;Some of my favorite features of jEdit&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;It’s open source and has very active community of users.&lt;/li&gt;
  &lt;li&gt;It works across MacOSX, Windows and Linux Desktop.&lt;/li&gt;
  &lt;li&gt;Support many common programming language syntax highlights.&lt;/li&gt;
  &lt;li&gt;Support multi columns editing.&lt;/li&gt;
  &lt;li&gt;Support rich feature search (reg ex, hyper-search, all buffers search, search and replace etc.)&lt;/li&gt;
  &lt;li&gt;Support multi buffers tabs editing.&lt;/li&gt;
  &lt;li&gt;Supports Macro recording and scripting.&lt;/li&gt;
  &lt;li&gt;Support plugin extension and there are many external plugins available (eg: XML formater, Diff viewer, SFTP client/editing, etc).&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;openning-other-stuff-on-macosx&quot;&gt;Openning other stuff on MacOSX&lt;/h1&gt;

&lt;p&gt;The little &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;open&lt;/code&gt; command can open not just application, but it can also open directories or files by extension associations. For
example, to configure any &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.properties&lt;/code&gt; files to be open by jEdit, try the the following.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Use Finder to browse and find one of properties&lt;/li&gt;
  &lt;li&gt;Right click, “Open With” &amp;gt; “Other…”&lt;/li&gt;
  &lt;li&gt;Choose “jEdit” under Applications folder.&lt;/li&gt;
  &lt;li&gt;Enable “Always Open With”, then click Open button.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This change should affect your Terminal &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;open&lt;/code&gt; command as well, and if you run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;open my.properties&lt;/code&gt;, your jEdit should pop up.&lt;/p&gt;

&lt;p&gt;You can find more options by running it without any options, and it will print you full help page.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    Usage: open [-e] [-t] [-f] [-W] [-R] [-n] [-g] [-h] [-b &amp;lt;bundle identifier&amp;gt;] [-a &amp;lt;application&amp;gt;] [filenames] [--args arguments]
    Help: Open opens files from a shell.
          By default, opens each file using the default application for that file.  
          If the file is in the form of a URL, the file will be opened as a URL.
    Options: 
          -a                Opens with the specified application.
          -b                Opens with the specified application bundle identifier.
          -e                Opens with TextEdit.
          -t                Opens with default text editor.
          -f                Reads input from standard input and opens with TextEdit.
          -F  --fresh       Launches the app fresh, that is, without restoring windows. Saved persistent state is lost, excluding Untitled documents.
          -R, --reveal      Selects in the Finder instead of opening.
          -W, --wait-apps   Blocks until the used applications are closed (even if they were already running).
              --args        All remaining arguments are passed in argv to the application's main() function instead of opened.
          -n, --new         Open a new instance of the application even if one is already running.
          -j, --hide        Launches the app hidden.
          -g, --background  Does not bring the application to the foreground.
          -h, --header      Searches header file locations for headers matching the given filenames, and opens them.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>myschedule-2.4.4 is out!</title>
   <link href="http://localhost:4000/2012/08/20/myschedule-2-4-4-release/"/>
   <updated>2012-08-20T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/08/20/myschedule-2-4-4-release</id>
   <content type="html">&lt;p&gt;For those of you who are using Quartz, you might find http://code.google.com/p/myschedule[MySchedule] useful. I’ve made another minor release to upgrade it to latest Quartz 2.1.6 and few minor fixes.&lt;/p&gt;

&lt;p&gt;Enjoy!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Getting started with Apache Camel using Groovy</title>
   <link href="http://localhost:4000/2012/08/18/getting-started-with-apache-camel-using-groovy/"/>
   <updated>2012-08-18T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/08/18/getting-started-with-apache-camel-using-groovy</id>
   <content type="html">&lt;p&gt;From their site, it says the &lt;a href=&quot;http://camel.apache.org&quot;&gt;Apache Camel&lt;/a&gt; is a versatile open-source integration framework based on known Enterprise Integration Patterns. It might seem like a vague definition, but I want to tell you that this is a very productive Java library that can solve many of typical IT problems! You can think of it as a very light weight ESB framework with “batteries” included.&lt;/p&gt;

&lt;p&gt;In every jobs I’ve been to so far, folks are writing their own solutions in one way or another to solve many common problems (or they would buy some very expensive enterprisy ESB servers that takes months and months to learn, config, and maintain). Things that we commonly solve are integration (glue) code of existing business services together, process data in a certain workflow manner, or move and transform data from one place to another etc. These are very typical need in many IT environments. The Apache Camel can be used in cases like these; not only that, but also in a very productive and effective way!&lt;/p&gt;

&lt;p&gt;In this article, I will show you how to get started with Apache Camel along with just few lines of &lt;a href=&quot;http://groovy.codehaus.org/&quot;&gt;Groovy&lt;/a&gt; script. You can certainly also start off with a full Java project to try out Camel, but I find Groovy will give you the shortest working example and learning curve.&lt;/p&gt;

&lt;h2 id=&quot;getting-started-with-apache-camel-using-groovy&quot;&gt;Getting started with Apache Camel using Groovy&lt;/h2&gt;

&lt;p&gt;So let’s begin. First let’s see a hello world demo with Camel + Groovy.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    @Grab('org.apache.camel:camel-core:2.10.0')
    @Grab('org.slf4j:slf4j-simple:1.6.6')
    import org.apache.camel.*
    import org.apache.camel.impl.*
    import org.apache.camel.builder.*
    
    def camelContext = new DefaultCamelContext()
    camelContext.addRoutes(new RouteBuilder() {
        def void configure() {
            from(&quot;timer://jdkTimer?period=3000&quot;)
                .to(&quot;log://camelLogger?level=INFO&quot;)
        }
    })
    camelContext.start()
    
    addShutdownHook{ camelContext.stop() }
    synchronized(this){ this.wait() }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Save above into a file named &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;helloCamel.groovy&lt;/code&gt; and then run it like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    $ groovy helloCamel.groovy
    388 [main] INFO org.apache.camel.impl.DefaultCamelContext - Apache Camel 2.10.0 (CamelContext: camel-1) is starting
    445 [main] INFO org.apache.camel.management.ManagementStrategyFactory - JMX enabled.
    447 [main] INFO org.apache.camel.management.DefaultManagementLifecycleStrategy - StatisticsLevel at All so enabling load performance statistics
    678 [main] INFO org.apache.camel.impl.converter.DefaultTypeConverter - Loaded 170 type converters
    882 [main] INFO org.apache.camel.impl.DefaultCamelContext - Route: route1 started and consuming from: Endpoint[timer://jdkTimer?period=3000]
    883 [main] INFO org.apache.camel.impl.DefaultCamelContext - Total 1 routes, of which 1 is started.
    887 [main] INFO org.apache.camel.impl.DefaultCamelContext - Apache Camel 2.10.0 (CamelContext: camel-1) started in 0.496 seconds
    898 [Camel (camel-1) thread #1 - timer://jdkTimer] INFO camelLogger - Exchange[ExchangePattern:InOnly, BodyType:null, Body:[Body is null]]
    3884 [Camel (camel-1) thread #1 - timer://jdkTimer] INFO camelLogger - Exchange[ExchangePattern:InOnly, BodyType:null, Body:[Body is null]]
    6884 [Camel (camel-1) thread #1 - timer://jdkTimer] INFO camelLogger - Exchange[ExchangePattern:InOnly, BodyType:null, Body:[Body is null]]
    ...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The little script above is simple but it presented few key features of Camel Groovyness. The first and last section of the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;helloCamel.groovy&lt;/code&gt; script are just Groovy featuers. The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@Grab&lt;/code&gt; annotation will automatically download the dependency jars you specify. We import Java packages to use its classes later. At the end we ensure to shutdown Camel before exiting JVM through the Java Shutdown Hook mechanism. The program will sit and wait until user press &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CTRL+C&lt;/code&gt;, just as a typical server process behavior.&lt;/p&gt;

&lt;p&gt;The middle section is where the Camel action is. You would always create a Camel context to begin (think of it as the server or manager for the process.) And then you would add a Camel route (think of it as a workflow or pipeflow) that you like to process data (Camel likes to call these data “messages”). The route consists of a “from” starting point (where data generated), and one or more “to” points (where data going to be processed). Camel calls these destination ‘points’ as ‘Endpoints’. These endpoints can be expressed in simple URI string format such as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&quot;timer://jdkTimer?period=3000&quot;&lt;/code&gt;. Here we are generating timer message in every 3 secs into the pipeflow, and then process by a logger URI, which will simply print to console output.&lt;/p&gt;

&lt;p&gt;After Camel context started, it will start processing data through the workflow, as you can observe from the output example above. Now try pressing &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CTRL+C&lt;/code&gt; to end its process. Notice how the Camel will shutdown everything very gracefully.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    7312 [Thread-2] INFO org.apache.camel.impl.DefaultCamelContext - Apache Camel 2.10.0 (CamelContext: camel-1) is shutting down
    7312 [Thread-2] INFO org.apache.camel.impl.DefaultShutdownStrategy - Starting to graceful shutdown 1 routes (timeout 300 seconds)
    7317 [Camel (camel-1) thread #2 - ShutdownTask] INFO org.apache.camel.impl.DefaultShutdownStrategy - Route: route1 shutdown complete, was consuming from: Endpoint[timer://jdkTimer?period=3000]
    7317 [Thread-2] INFO org.apache.camel.impl.DefaultShutdownStrategy - Graceful shutdown of 1 routes completed in 0 seconds
    7321 [Thread-2] INFO org.apache.camel.impl.converter.DefaultTypeConverter - TypeConverterRegistry utilization[attempts=2, hits=2, misses=0, failures=0] mappings[total=170, misses=0]
    7322 [Thread-2] INFO org.apache.camel.impl.DefaultCamelContext - Apache Camel 2.10.0 (CamelContext: camel-1) is shutdown in 0.010 seconds. Uptime 7.053 seconds.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So that’s our first taste of Camel ride! However, we titled this section as “Hello World!” demo, and yet we haven’t seen any. But you might have also noticed that above script are mostly boiler plate code that we setup. No user logic has been added yet. Not even the logging the message part! We simply configuring the route.&lt;/p&gt;

&lt;p&gt;Now let’s modify the script little bit so we will actually add our user logic to process the timer message.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    @Grab('org.apache.camel:camel-core:2.10.0')
    @Grab('org.slf4j:slf4j-simple:1.6.6')
    import org.apache.camel.*
    import org.apache.camel.impl.*
    import org.apache.camel.builder.*
    
    def camelContext = new DefaultCamelContext()
    camelContext.addRoutes(new RouteBuilder() {
        def void configure() {
            from(&quot;timer://jdkTimer?period=3000&quot;)
                .to(&quot;log://camelLogger?level=INFO&quot;)
                .process(new Processor() {
                    def void process(Exchange exchange) {
                        println(&quot;Hello World!&quot;)
                    }
                })
        }
    })
    camelContext.start()
    
    addShutdownHook{ camelContext.stop() }
    synchronized(this){ this.wait() }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice how I can simply append the process code part right after the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;to(&quot;log...&quot;)&lt;/code&gt; line. I have added a “processor” code block to process the timer message. The logic is simple: we greet the world on each tick.&lt;/p&gt;

&lt;h2 id=&quot;making-camel-route-more-concise-and-practical&quot;&gt;Making Camel route more concise and practical&lt;/h2&gt;

&lt;p&gt;Now, do I have you at Hello yet? If not, then I hope you will be patient and continue to follow along for few more practical features of Camel. First, if you were to put Camel in real use, I would recommend you setup your business logic separately from the workflow route definition. This is so that you can clearly express and see your entire pipeflow of route at a glance. To do this, you want to move the “processor”, into a service bean.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    @Grab('org.apache.camel:camel-core:2.10.0')
    @Grab('org.slf4j:slf4j-simple:1.6.6')
    import org.apache.camel.*
    import org.apache.camel.impl.*
    import org.apache.camel.builder.*
    import org.apache.camel.util.jndi.*
    
    class SystemInfoService {
        def void run() {
            println(&quot;Hello World!&quot;)
        }
    }
    def jndiContext = new JndiContext();
    jndiContext.bind(&quot;systemInfoPoller&quot;, new SystemInfoService())
    
    def camelContext = new DefaultCamelContext(jndiContext)
    camelContext.addRoutes(new RouteBuilder() {
        def void configure() {
            from(&quot;timer://jdkTimer?period=3000&quot;)
                .to(&quot;log://camelLogger?level=INFO&quot;)
                .to(&quot;bean://systemInfoPoller?method=run&quot;)
        }
    })
    camelContext.start()
    
    addShutdownHook{ camelContext.stop() }
    synchronized(this){ this.wait() }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now, see how compact this workflow route has become? The Camel’s Java DSL such as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&quot;from().to().to()&quot;&lt;/code&gt; for defining route are so clean and simple to use. You can even show this code snip to your Business Analysts, and they would likely be able to verify your business flow easily! Wouldn’t that alone worth a million dollars?&lt;/p&gt;

&lt;h1 id=&quot;how-about-another-demo-filepoller-processing&quot;&gt;How about another demo: FilePoller Processing&lt;/h1&gt;

&lt;p&gt;File polling processing is a very common and effective way to solve many business problems. If you work for commercial companies long enough, you might have written one before. A typical file poller would process incoming files from a directory and then process the content, and then move the file into a output directory. Let’s make a Camel route to do just that.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    @Grab('org.apache.camel:camel-core:2.10.0')
    @Grab('org.slf4j:slf4j-simple:1.6.6')
    import org.apache.camel.*
    import org.apache.camel.impl.*
    import org.apache.camel.builder.*
    import org.apache.camel.util.jndi.*
    
    class UpperCaseTextService {
        def String transform(String text) {
            return text.toUpperCase()
        }
    }
    def jndiContext = new JndiContext();
    jndiContext.bind(&quot;upperCaseTextService&quot;, new UpperCaseTextService())
    
    def dataDir = &quot;/${System.properties['user.home']}/test/file-poller-demo&quot;
    def camelContext = new DefaultCamelContext(jndiContext)
    camelContext.addRoutes(new RouteBuilder() {
        def void configure() {
            from(&quot;file://${dataDir}/in&quot;)
                .to(&quot;log://camelLogger&quot;)
                .to(&quot;bean://upperCaseTextService?method=transform&quot;)
                .to(&quot;file://${dataDir}/out&quot;)
        }
    })
    camelContext.start()
    
    addShutdownHook{ camelContext.stop() }
    synchronized(this){ this.wait() }    
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here you see I defined a route to poll a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$HOME/test/file-poller-demo/in&lt;/code&gt; directory for text files. Once it’s found it will log it to console, and then process by a service that transform the content text into upper case. After this, it will send the file into &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$HOME/test/file-poller-demo/out&lt;/code&gt; directory. My goodness, reading the Camel route above probably express what I wrote down just as effective. Do you see the benefits here?&lt;/p&gt;

&lt;h2 id=&quot;whats-the-batteries-included-part&quot;&gt;What’s the “batteries” included part.&lt;/h2&gt;

&lt;p&gt;If you’ve used Python programming before, you might have heard the pharase that they claim often: Python has “batteries” included. This means their interpreter comes with a rich of libaries for most of the common programming need. You can often write python program without have to download separated external libraries.&lt;/p&gt;

&lt;p&gt;I am making similar analogies here with Apache Camel. The Camel project comes with so many ready to use &lt;a href=&quot;http://camel.apache.org/components.html&quot;&gt;components&lt;/a&gt; that you can find just about any transport protocals that can carry data. These Camel “components” are ones that support different ‘Endpoint URI’ that we have seen in our demos above. We have simply shown you &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;timer&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;log&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bean&lt;/code&gt;, and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;file&lt;/code&gt; components, but there are over 120 more. You will find &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jms&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ftp&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cfx&lt;/code&gt;, or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tcp&lt;/code&gt;  just to name a few.&lt;/p&gt;

&lt;p&gt;The Camel project also has an option for you to define route in &lt;a href=&quot;http://camel.apache.org/spring.html&quot;&gt;declarative xml format&lt;/a&gt;. The xml is just an extension of a Spring xml config with Camel’s namespace handler added on top. Spring is optional in Camel, but you can use it together in a very powerful way.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to integrate TimeMachine Scheduler in Spring based application</title>
   <link href="http://localhost:4000/2012/08/17/how-to-integrate-timemachine-scheduler-in-spring-based-application/"/>
   <updated>2012-08-17T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/08/17/how-to-integrate-timemachine-scheduler-in-spring-based-application</id>
   <content type="html">&lt;p&gt;One of the goals for &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler&quot;&gt;TimeMachine Scheduler&lt;/a&gt; is to make use of POJO as friendly as possible so that we can integrate into any IoC container easily. I’ve prepared a demo that will show you how to integrate TimeMachine with &lt;a href=&quot;http://www.springsource.org/&quot;&gt;Spring&lt;/a&gt; based application.&lt;/p&gt;

&lt;p&gt;We will mainly focus on the Spring xml config part in this article, so if you don’t feel like checking out the  &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler-demo/src/fab518eb64ce/scheduler-spring&quot;&gt;demo project source code&lt;/a&gt; in details, then simply grab the binary package of the  &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler-demo/downloads&quot;&gt;timemachine-spring-demo.zip&lt;/a&gt; and follow along.&lt;/p&gt;

&lt;h1 id=&quot;introducing-a-tiny-spring-server&quot;&gt;Introducing a tiny Spring Server&lt;/h1&gt;

&lt;p&gt;If you don’t already have a Spring project going, then take a look at my little Spring server. It can bootstrap any spring configuration xml file and then sits and wait for a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CTRL+C&lt;/code&gt; to end. Unzip the demo and try it out like this.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cd timemachine-spring-demo
$ bin/run-spring config/hello-spring.xml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You should see a “Hello World!” message printed. Hit &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CTRL+C&lt;/code&gt; to end it. The xml just declares a simple &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HelloService&lt;/code&gt; bean like this.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
         http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&amp;gt;
    
        &amp;lt;bean id=&quot;helloService&quot; class=&quot;timemachine.spring.HelloService&quot; init-method=&quot;run&quot;&amp;gt;
            &amp;lt;property name=&quot;name&quot; value=&quot;World&quot;&amp;gt;&amp;lt;/property&amp;gt;
        &amp;lt;/bean&amp;gt;
    
    &amp;lt;/beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That’s your typical Spring declaration file. With this tiny Spring server, you can quickly experiment any POJOs wired up in any way you wish and put them in action.&lt;/p&gt;

&lt;h1 id=&quot;setting-up-timemachine-scheduler-beans&quot;&gt;Setting up TimeMachine Scheduler beans&lt;/h1&gt;

&lt;p&gt;In Java code, you can easily create an instance of the TimeMachine scheduler as follow:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    SchedulerFactory schedulerFactory = new SchedulerFactory(&quot;config/scheduler.properties&quot;);
    Scheduler scheduler = schedulerFactory.createScheduler();
    scheduler.start();
    // Then we would also need to call scheduler.destroy() before we exit the Java program. (eg: in shutdownHook)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can easily translate that into Spring xml config like in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config/timemachine-pojo-spring.xml&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
         http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&amp;gt;
    
        &amp;lt;bean id=&quot;schedulerFactory&quot; class=&quot;timemachine.scheduler.SchedulerFactory&quot;&amp;gt;
            &amp;lt;constructor-arg value=&quot;config/scheduler.properties&quot;&amp;gt;&amp;lt;/constructor-arg&amp;gt;
        &amp;lt;/bean&amp;gt;
        &amp;lt;bean id=&quot;scheduler&quot; class=&quot;timemachine.scheduler.Scheduler&quot; 
            factory-bean=&quot;schedulerFactory&quot; factory-method=&quot;createScheduler&quot;
            init-method=&quot;start&quot; destroy-method=&quot;destroy&quot;&amp;gt;
        &amp;lt;/bean&amp;gt;
    
    &amp;lt;/beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The benefit of using Spring xml is that your scheduler lifecycles would be automatically taken care of without setting any shutdown hook. Running above should give you a plain scheduler started, and pressing &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CTRL+C&lt;/code&gt; should shutdown gracefully.&lt;/p&gt;

&lt;h1 id=&quot;going-further-with-a-custom-schedulerfactorybean&quot;&gt;Going further with a custom SchedulerFactoryBean&lt;/h1&gt;

&lt;p&gt;Now above is not much excitement using Spring since you would still configure the scheduler through &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config/scheduler.properties&lt;/code&gt;. You certainly can load jobs and add custom services there. But if we are going to use Spring, we might as well take full advantage of it to create the Job Definition and Schedule inside the xml config! To do this, I created a simple &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;timemachine.scheduler.spring.SchedulerFactoryBean&lt;/code&gt; in my demo project, and you can try it out like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
         http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&amp;gt;
    
        &amp;lt;bean id=&quot;scheduler&quot; class=&quot;timemachine.scheduler.spring.SchedulerFactoryBean&quot;&amp;gt;
            &amp;lt;property name=&quot;configPropsUrl&quot; value=&quot;config/scheduler.properties&quot;&amp;gt;&amp;lt;/property&amp;gt;
            &amp;lt;property name=&quot;autoStart&quot; value=&quot;true&quot;&amp;gt;&amp;lt;/property&amp;gt;
            &amp;lt;property name=&quot;autoAddJobDef&quot; value=&quot;true&quot;&amp;gt;&amp;lt;/property&amp;gt;
        &amp;lt;/bean&amp;gt;
        &amp;lt;bean id=&quot;jobDef01&quot; class=&quot;timemachine.scheduler.JobDef&quot;&amp;gt;
            &amp;lt;property name=&quot;jobTaskClassName&quot; value=&quot;timemachine.scheduler.jobtask.ScriptingJobTask&quot;&amp;gt;&amp;lt;/property&amp;gt;
            &amp;lt;property name=&quot;props&quot;&amp;gt;
                &amp;lt;map&amp;gt;
                    &amp;lt;entry key=&quot;scriptEngineName&quot; value=&quot;Groovy&quot;&amp;gt;&amp;lt;/entry&amp;gt;
                    &amp;lt;entry key=&quot;scriptText&quot; value=&quot;println('Hello World.')&quot;&amp;gt;&amp;lt;/entry&amp;gt;
                &amp;lt;/map&amp;gt;
            &amp;lt;/property&amp;gt;
            &amp;lt;property name=&quot;schedules&quot;&amp;gt;
                &amp;lt;list&amp;gt;              
                    &amp;lt;bean class=&quot;timemachine.scheduler.schedule.CronSchedule&quot;&amp;gt;
                        &amp;lt;property name=&quot;expression&quot; value=&quot;0/3 * * * * ?&quot;&amp;gt;&amp;lt;/property&amp;gt;
                    &amp;lt;/bean&amp;gt;
                &amp;lt;/list&amp;gt;
            &amp;lt;/property&amp;gt;
        &amp;lt;/bean&amp;gt;
    
    &amp;lt;/beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Above will create not only the scheduler but also auto manage the lifecycles for you without you explicitly declare it. The factory bean will also auto detect any JobDef and Schedule bean types and add them into the scheduler instance. This would make your scheduler config all in the Spring xml, and it’s well integrated.&lt;/p&gt;

&lt;p&gt;There is also another similar sample in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config/timemachine-spring.xml&lt;/code&gt; you may try. It will invoke an external groovy script instead of inline text.&lt;/p&gt;

&lt;h1 id=&quot;going-extra-mile-on-exposing-timemachine-scheduler-through-jmx&quot;&gt;Going extra mile on exposing TimeMachine Scheduler through JMX&lt;/h1&gt;

&lt;p&gt;The TimeMachine doesn’t support any JMX instrumentation, however when running with the Spring, you can easily expose any Java interface to the local MBean Server Platform using Spring’s MBeanExporter. For example in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config/timemachine-jmx-spring.xml&lt;/code&gt; you will see:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans
         http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&amp;gt;
    
        &amp;lt;bean id=&quot;scheduler&quot; class=&quot;timemachine.scheduler.spring.SchedulerFactoryBean&quot;&amp;gt;
            &amp;lt;property name=&quot;configPropsUrl&quot; value=&quot;config/scheduler.properties&quot;/&amp;gt;
        &amp;lt;/bean&amp;gt; 
        &amp;lt;bean id=&quot;exporter&quot; class=&quot;org.springframework.jmx.export.MBeanExporter&quot;&amp;gt;
            &amp;lt;property name=&quot;assembler&quot;&amp;gt;
                &amp;lt;bean class=&quot;org.springframework.jmx.export.assembler.InterfaceBasedMBeanInfoAssembler&quot;&amp;gt;
                    &amp;lt;property name=&quot;managedInterfaces&quot;&amp;gt;
                        &amp;lt;list&amp;gt;
                            &amp;lt;value&amp;gt;timemachine.scheduler.Scheduler&amp;lt;/value&amp;gt;
                        &amp;lt;/list&amp;gt;
                    &amp;lt;/property&amp;gt;
                &amp;lt;/bean&amp;gt;
            &amp;lt;/property&amp;gt;
            &amp;lt;property name=&quot;beans&quot;&amp;gt;
                &amp;lt;map&amp;gt;
                    &amp;lt;entry key=&quot;timemachine.scheduler:name=Scheduler&quot; value-ref=&quot;scheduler&quot;/&amp;gt;
                &amp;lt;/map&amp;gt;
            &amp;lt;/property&amp;gt;
        &amp;lt;/bean&amp;gt;
    
    &amp;lt;/beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Above will start an empty scheduler, and expose the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;timemachine.scheduler.Scheduler&lt;/code&gt; interface to the JMX local server. You may use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$JAVA_HOME/bin/jconsole&lt;/code&gt; to connect and will see all the methods automatically exposed. There few methods that contains custom java objects that exporter will not able to convert properly, but at least you will get all the lifecycles and some simple getters that available to you.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to make an executable WAR file</title>
   <link href="http://localhost:4000/2012/08/14/how-to-make-an-executable-war-file/"/>
   <updated>2012-08-14T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/08/14/how-to-make-an-executable-war-file</id>
   <content type="html">&lt;p&gt;If you ever used &lt;a href=&quot;http://jenkins-ci.org&quot;&gt;Jenkin&lt;/a&gt; CI server, you have probably seen their super easy one-line instruction to get started: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;java -jar jenkins.war&lt;/code&gt;. Now that’s one awesome way to get your users to try out your product!&lt;/p&gt;

&lt;p&gt;In this article, I will show you how to make a WAR file self executable just like above. Before I do that, let me tell you a little web app that I made, and then I will show how I converted it into runnable &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;war&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;the-requirement-taking-notes-efficiently&quot;&gt;The Requirement: Taking Notes Efficiently&lt;/h2&gt;

&lt;p&gt;I tend take a lot of notes when I do my work. Instead of using the crapy Windows Notepad.exe, I would setup my cygwin &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.bash_profile&lt;/code&gt; like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function e() { /cygdrive/C/apps/notepad++.exe $(cygpath -w &quot;$@&quot;) ; }
function n() { F=&quot;$HOME/notes/$(date &quot;+%Y%m%d-%H%M%S&quot;).markdown&quot;; touch $F; e $F; }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I happen to have &lt;a href=&quot;http://notepad-plus-plus.org&quot;&gt;Notepad++&lt;/a&gt; installed, but you can use just about any text editor you like. With that setup, then anywhere in my terminal I can simply type &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;n&lt;/code&gt; to have a GUI editor pop open, and I will have my note file ready to record notes. The file name would have a timestamp date, and I like to record them with simple &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Markdown&lt;/code&gt; syntax for easy viewing later. Since I write them in plain text, it’s easy and fast to search using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep MYSTUFF ~/notes/*&lt;/code&gt;. Once I found it, I can quickly edit it by &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;e ~/notes/20120814-000000.markdown&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;This method of taking notes is fast and portable between my Linux and Windows systems (well, I have to choose a different editor between OS but not big deal). Now since I already recorded my notes in markdown, there is no way I can see the pretty result unless I use an &lt;a href=&quot;http://daringfireball.net/projects/markdown/dingus&quot;&gt;online converter&lt;/a&gt;. So I thought it would be awesome if I can have a web app that let me record these notes, and yet give me a nice quick &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Markdown&lt;/code&gt; to html view.&lt;/p&gt;

&lt;h2 id=&quot;introducing-the-webnotepadwar&quot;&gt;Introducing the webnotepad.war&lt;/h2&gt;

&lt;p&gt;To improve my notes taking, I created little web app called &lt;a href=&quot;https://bitbucket.org/saltnlight5/sandbox/downloads&quot;&gt;webnotepad.war&lt;/a&gt;. It’s really simply one page web app that record notes in Markdown syntax, preview it, and allow you to search it. It also let you edit old notes too. The whole thing is just a Servlet class, and it doesn’t even use JSP.&lt;/p&gt;

&lt;p&gt;However, after I have this little web app, it bothers me that I would always need an app server to run it. (I can run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mvn tomcat7:run&lt;/code&gt; directly from my source project, but it would require me be online to satisfy initial Maven build.) So here is a perfectly example use case that would be super nice to make this war file self executable. In fact I have succeeded in this little experiement. You can download it and try it out yourself with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;java -jar webnotepad.war&lt;/code&gt;, and then browse &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;http://localhost:8080&lt;/code&gt;. If you get port conflict, try &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--httpPort=8081&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Of course you continue to deploy &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;webnotepad.war&lt;/code&gt; into any app server too.&lt;/p&gt;

&lt;h2 id=&quot;making-war-file-executable&quot;&gt;Making war file executable&lt;/h2&gt;

&lt;p&gt;Before you want to make war executable, you want to build and package your normal web application first. The trick to make the war file runnable is that you want additionally add a Main-Class in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;META-INF/MANIFEST.MF&lt;/code&gt; in the war file. And from this we need to load and run an embedded Servlet server with the self war file deployed. I noticed Jenkins uses one called &lt;a href=&quot;winstone.sourceforge.net&quot;&gt;Winstone&lt;/a&gt; container server. I was amazed to find that this server only has 300K in size! It support full Servlet 2.5 spec! It can optionally support JSP with Jasper which will cost you up to 3MB in size. That’s still a very small price to pay compare to any Servlet container out there!&lt;/p&gt;

&lt;p&gt;Making a Main-Class &lt;a href=&quot;https://bitbucket.org/saltnlight5/sandbox/src/4e80e4b4114e/webnotepad/src/main/winstone/WinstoneMain.java&quot;&gt;WinstoneMain.java&lt;/a&gt; is not hard. However making Maven to package everything is pretty tricky. Now my &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;webnotepad.war&lt;/code&gt; doesn’t need Jasper, but if you do, you specially want these jars outside of &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WEB-INF/lib&lt;/code&gt; because you don’t want your normal app server to load these! Else you will get very odd errors.&lt;/p&gt;

&lt;p&gt;In my example I added into &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WEB-INF/lib-winstone&lt;/code&gt;, and then the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WinstoneMain&lt;/code&gt; would extract these and then load the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;winstone.Launcher&lt;/code&gt; using a custom class loader. Also, we need to use some Winstone options to start a web server properly. I use this &lt;a href=&quot;https://bitbucket.org/saltnlight5/sandbox/src/4e80e4b4114e/webnotepad/pom.xml&quot;&gt;webnotepad/pom.xml&lt;/a&gt; to package it all up the war file. You can easily use my example because I have create them under a separate &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;profile&lt;/code&gt; and you just need add to your web module/pom.xml. In my project demo you would run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mvn package -Pdist&lt;/code&gt; to generate the executable war file.&lt;/p&gt;

&lt;p&gt;NOTE: I noticed Winstone project didn’t show much activity since last release since 2008. But I was happy to find that there is a fork project on &lt;a href=&quot;http://code.google.com/p/winstone/&quot;&gt;GoogleCode Winstone&lt;/a&gt; that shows activities. I didn’t use this for my demo, but it looks promising.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Checking DB Connection using Java</title>
   <link href="http://localhost:4000/2012/08/11/checking-db-connection-using-java/"/>
   <updated>2012-08-11T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/08/11/checking-db-connection-using-java</id>
   <content type="html">&lt;p&gt;For complete sake, here is a Java version of the http://saltnlight5.blogspot.com/2012/12/checking-db-connection-using-groovy.html[Groovy post] to test your Oracle Database connection.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package atest;
import java.sql.*;
/**
 * Run arguments sample:
 * jdbc:oracle:thin:@localhost:1521:XE system mypassword123 oracle.jdbc.driver.OracleDriver
 */
public class DbConn {
    public static void main(String[] args) throws Exception {
        String url = args[0];
        String username = args[1];
        String password = args[2];
        String driver = args[3];

        Class.forName(driver);
        Connection conn = DriverManager.getConnection(url, username, password);
        try {
            Statement statement = conn.createStatement();
            ResultSet rs = statement.executeQuery(&quot;SELECT SYSDATE FROM DUAL&quot;);
            while(rs.next()) {
                System.out.println(rs.getObject(1));
            }
        } finally {
            conn.close();
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>How to generate Redmine WAR application to run with Java</title>
   <link href="http://localhost:4000/2012/08/06/how-to-generate-redmine-war-application-to-run-with-java/"/>
   <updated>2012-08-06T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/08/06/how-to-generate-redmine-war-application-to-run-with-java</id>
   <content type="html">&lt;p&gt;If you survey around Java open source land, it’s really disappointing in not able to  find a decent project management web app that we can use. The Java war file deployment in an app server is easy to use, and it would give us good performance. Especially if we already in a Java shop, having a project management tool that deploys in an existing app server would be easier to maintain.&lt;/p&gt;

&lt;p&gt;I have found the Ruby’s &lt;a href=&quot;http://www.redmine.org&quot;&gt;Redmine&lt;/a&gt; to be a very good ONE-STOP-SHOP for most of your project development need. It has nice clean web interface, and the features are loaded: projects, users, issue tracking, wiki, source control viewer, documents, and it even has time tracking.&lt;/p&gt;

&lt;p&gt;Altough the application is written in Ruby on Rails, you can run this with the JRuby perfectly fine on any Java app server. I’ve just done this and able to run it on JBossAS7.1.0 with jruby-1.6.7.2 and redmine-2.03.&lt;/p&gt;

&lt;p&gt;For the impatients, you can actually grab my generated &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;redmine-2.0.3.war&lt;/code&gt; from &lt;a href=&quot;https://bitbucket.org/saltnlight5/sandbox/downloads&quot;&gt;my sandbox&lt;/a&gt;. I even provided an MySQL sql dump for you to get started without have to go through the building the war file. If you want to change the DB or any other settings, you can simply unpack the war file and edit the config files, then re-jar the war backup. This is still easier than building the war from scratch.&lt;/p&gt;

&lt;p&gt;Here is how I build the war file. First step is setup a database. I picked MySQL.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mysql&amp;gt; create database redmine character set utf8;
mysql&amp;gt; create user 'redmine'@'localhost' identified by 'redmine123';
mysql&amp;gt; grant all privileges on redmine.* to 'redmine'@'localhost';
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then prepare the Redmine with JRuby. Download the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;redmine-2.0.3.zip&lt;/code&gt; and unzip and then cd into this directory. Then run the following:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ $JRUBY_HOME/bin/gem install bundler
$ $JRUBY_HOME/bin/bundle install --without development test rmagick postgresql sqlite
$ cp config/database.yml.example config/database.yml
$ # edit config/database.yml
$ # type in your database connection info for &quot;production&quot; env.
$ $JRUBY_HOME/bin/rake generate_secret_token
$ RAILS_ENV=production $JRUBY_HOME/bin/rake db:migrate
$ RAILS_ENV=production $JRUBY_HOME/bin/rake redmine:load_default_data
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now create the war file.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ $JRUBY_HOME/bin/gem install warbler
$ $JRUBY_HOME/bin/warble config
$ # edit config/warble.rb
$ # replace: config.dirs = %w(app config lib log vendor tmp extra files)
$ # add: config.gems += [&quot;activerecord-jdbcmysql-adapter&quot;, &quot;jruby-openssl&quot;, &quot;i18n&quot;, &quot;rack&quot;]
$ $JRUBY_HOME/bin/warble
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After this, you will see &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;redmine-2.0.3.war&lt;/code&gt; in the directory. Now you can drop it into any app server and you may kick start any projects!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>TimeMachine jars size and dependencies</title>
   <link href="http://localhost:4000/2012/08/03/timemachine-jars-size-and-dependencies/"/>
   <updated>2012-08-03T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/08/03/timemachine-jars-size-and-dependencies</id>
   <content type="html">&lt;p&gt;From the &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/downloads&quot;&gt;TimeMachine Scheduler&lt;/a&gt; download page you will see that the latest 1.2.1 release zip package size is around 13M. It may seem large for a scheduler application, but let’s examine it closely to see what’s in there. Here is how the zip package looks like inside&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    timemachine-scheduler-1.2.1
    +-- bin
    +-- lib
    +-- config
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config&lt;/code&gt; directory contains many sample configurations and scripts to help new users get started. The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bin&lt;/code&gt; contains few startup wrapper scripts that let you start the scheduler. The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lib&lt;/code&gt; contains the libraries for the scheduler application. I want to go into more details on these.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    +-- lib
    -rw-r--r--@  1 zemian  staff   445288 Jun 20 23:20 antlr-2.7.7.jar
    -rw-r--r--@  1 zemian  staff   610790 Jun 20 23:26 c3p0-0.9.1.2.jar
    -rw-r--r--@  1 zemian  staff   109043 Jun 20 23:20 commons-io-1.4.jar
    -rw-r--r--@  1 zemian  staff   279193 Jun 20 23:20 commons-lang-2.5.jar
    -rw-r--r--@  1 zemian  staff   313898 Jun 20 23:26 dom4j-1.6.1.jar
    -rw-r--r--@  1 zemian  staff  6156866 Aug  2 22:05 groovy-all-2.0.0.jar
    -rw-r--r--@  1 zemian  staff  1267149 Jun 20 23:26 h2-1.3.163.jar
    -rw-r--r--@  1 zemian  staff    81271 Jun 20 23:26 hibernate-commons-annotations-4.0.1.Final.jar
    -rw-r--r--@  1 zemian  staff  4407494 Jun 20 23:26 hibernate-core-4.1.3.Final.jar
    -rw-r--r--@  1 zemian  staff   102661 Jun 20 23:26 hibernate-jpa-2.0-api-1.0.1.Final.jar
    -rw-r--r--@  1 zemian  staff   648253 Jun 20 23:26 javassist-3.15.0-GA.jar
    -rw-r--r--@  1 zemian  staff    60768 Jun 20 23:26 jboss-logging-3.1.0.GA.jar
    -rw-r--r--@  1 zemian  staff    11209 Jun 20 23:26 jboss-transaction-api_1.1_spec-1.0.0.Final.jar
    -rw-r--r--@  1 zemian  staff   481535 Jun 20 23:20 log4j-1.2.16.jar
    -rw-r--r--@  1 zemian  staff    25496 Jun 20 23:20 slf4j-api-1.6.1.jar
    -rw-r--r--@  1 zemian  staff     9753 Jun 20 23:20 slf4j-log4j12-1.6.1.jar
    -rw-r--r--@  1 zemian  staff    46885 Aug  2 22:37 timemachine-hibernate-1.2.1.jar
    -rw-r--r--@  1 zemian  staff   154925 Aug  2 22:36 timemachine-scheduler-1.2.1.jar
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The core of the scheduler &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;timemachine-scheduler-1.2.1.jar&lt;/code&gt; would only need &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;slf4j-api-1.6.1.jar&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;commons-io-1.4.jar&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;commons-lang-2.5.jar&lt;/code&gt; to run. These would support full scheduler with in memory data store. As you can see these add up to only about 500K!&lt;/p&gt;

&lt;p&gt;To be able to see useful logging output, you need an SLF4j impl. You may use built-in JDK’s logger if you choose, or you may use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;slf4j-log4j12-1.6.1.jar&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;log4j-1.2.16.jar&lt;/code&gt;. I personally think the JDK logger is horrible to use and configure, so I package up log4j as option for you.&lt;/p&gt;

&lt;p&gt;A Java scripting engine is only optional in TimeMachine, and JDK already comes with JavaScript. To be practical, I also package the Groovy engine &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;groovy-all-2.0.0.jar&lt;/code&gt;. It’s much more easy to use. But the full groovy engine is costing us 6M in size!&lt;/p&gt;

&lt;p&gt;The TimeMachine allows you to switch data store service. We provided the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HibernateDataService&lt;/code&gt; service in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;timemachine-scheduler-1.2.1.jar&lt;/code&gt;. This service would require the Hibernate dependencies, which is pretty heavy. They are: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hibernate-*.jar&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jboss-*.jar&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;javassist-3.15.0-GA.jar&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;antlr-2.7.7.jar&lt;/code&gt;, and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dom4j-1.6.1.jar&lt;/code&gt;. These can add up to another 5M in size!&lt;/p&gt;

&lt;p&gt;Now with the Hibernate data service, you would also need a database driver that match to your database. I have included a H2Database, a Java database that provides full SQL database service including its driver in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;h2-1.3.163.jar&lt;/code&gt;. This alone is about 1.2M in size.&lt;/p&gt;

&lt;p&gt;When you working with Hibernate and Database, you should always use a Database connection pool. I packaged the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;c3p0-0.9.1.2.jar&lt;/code&gt; implementation which Hibernate can automatically detects.&lt;/p&gt;

&lt;p&gt;I hope these information can help you decide what to remove or add in case you want to customize your scheduler to fit into your application. You may also visit the project to see the Maven site dependencies report that has all the details. This also means that if you use Maven to bring in TimeMachine scheduler as dependency, you will automatically gets the minimal because I have carefully set all the optional items not to be included with the proper Maven scopes.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>A better java shell script wrapper</title>
   <link href="http://localhost:4000/2012/08/01/a-better-java-shell-script-wrapper/"/>
   <updated>2012-08-01T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/08/01/a-better-java-shell-script-wrapper</id>
   <content type="html">&lt;p&gt;In many Java projects, you often see wrapper shell script to invoke the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;java&lt;/code&gt; command with its custom application parameters. For example, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$ANT_HOME/bin/ant&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$GROOVY_HOME/bin/groovy&lt;/code&gt;, or even in our &lt;a href=&quot;http://bitbucket.org/timemachine/scheduler&quot;&gt;TimeMachine Scheduler&lt;/a&gt; you will see &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$TIMEMACHINE_HOME/bin/scheduler.sh&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Writing these wrapper script is boring and error prone. Most of the problems come from setting the correct classpath for the application. If you’re working on an in-house project for a company, then you can get away with hardcoding paths and your environment vars. But for open source projects, folks have to make the wrapper more flexible and generic. Most of them even provide a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.bat&lt;/code&gt; version of it. Windows DOS is really a brutal and limited terminal to script away your project need. For this reason, I often encourage others to use Cygwin as much as they can. It at least has a real bash shell to work with. Another common problem with these wrappers is it can quickly get out of hand and have too many duplication of similar scripts liter every where in your project.&lt;/p&gt;

&lt;p&gt;In this post, I will show you a Java wrapper script that I’ve written. It’s simple to use and very flexible for running just about any Java program. Let’s see how it’s used first, and then I will print its content at the bottom of the post.&lt;/p&gt;

&lt;h2 id=&quot;introducing-the-run-java-wrapper-script&quot;&gt;Introducing the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run-java&lt;/code&gt; wrapper script&lt;/h2&gt;

&lt;p&gt;If you take a look at &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$TIMEMACHINE_HOME/bin/scheduler.sh&lt;/code&gt;, you will see that it in turns calls a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run-java&lt;/code&gt; script that comes in the same directory.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;DIR=$(dirname $0)
SCHEDULER_HOME=$DIR/..
$DIR/run-java -Dscheduler.home=&quot;$SCHEDULER_HOME&quot; timemachine.scheduler.tool.SchedulerServer &quot;$@&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you can see, our &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run-java&lt;/code&gt; can take &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-D&lt;/code&gt; options. Not only this, it can also take &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-cp&lt;/code&gt; option as well! What’s more is that you can specify these options even &lt;strong&gt;after&lt;/strong&gt; the main class! This makes the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run-java&lt;/code&gt; re-wrappable by other script, and still be able to add additional system properties and classpath.&lt;/p&gt;

&lt;p&gt;For examples, the TimeMachine comes with Groovy library, so instead of downloading it’s full distribution again, you can simply invoke the groovy like this&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$TIMEMACHINE_HOME/bin/run-java groovy.ui.GroovyMain test.groovy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run-java&lt;/code&gt; in any directory you’re in, so it’s convenient. It will resolve it’s own directory and load any jars in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lib&lt;/code&gt; directory automatically. Now if you want Groovy to run with more additional jars, you can use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-cp&lt;/code&gt; option like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$TIMEMACHINE_HOME/bin/run-java -cp &quot;$HOME/apps/my-app/lib/*&quot; groovy.ui.GroovyMain test.groovy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Often times things will go wrong if you are not careful with Java classpath, but with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run-java&lt;/code&gt; script you can perform a dry run first:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;RUN_JAVA_DRY=1 $TIMEMACHINE_HOME/bin/run-java -cp &quot;$HOME/apps/my-app/lib/*&quot; groovy.ui.GroovyMain test.groovy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You would run the above all in single line on a command prompt. It should print out your full java command with all options and arguments for you to inspect.&lt;/p&gt;

&lt;p&gt;There are many more options to the script, which you can find out more by reading the comments in it. The current script will work on any Linux bash or on a Windows Cygwin terminal.&lt;/p&gt;

&lt;h2 id=&quot;using-run-java-during-development-with-maven&quot;&gt;Using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run-java&lt;/code&gt; during development with Maven&lt;/h2&gt;

&lt;p&gt;Above examples are assuming you are in a released project structure such as this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    $TIMEMACHINE_HOME
      +- bin/run-java
      +- lib/*.jar
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But what about during development? A frequent use case is that you want to be able to run your latest compiled classes under &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target/classes&lt;/code&gt; without have to package up or release the entire project. You can use our &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run-java&lt;/code&gt; in these scenario as well. First, simply add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bin/run-java&lt;/code&gt; in your project, then you run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mvn compile dependency:copy-dependencies&lt;/code&gt; that will generate all the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jar&lt;/code&gt; files into &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target/dependency&lt;/code&gt;. That’s all. The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run-java&lt;/code&gt; will automatically detect these directories and create the correct classpath to run your main class.&lt;/p&gt;

&lt;p&gt;If you use Eclipse IDE for development, then your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target/classes&lt;/code&gt; will be always up-to-date, and the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run-java&lt;/code&gt; can be a great gem to have in your project even for development.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to print text file content inside a jar file</title>
   <link href="http://localhost:4000/2012/07/30/how-to-print-text-file-content-inside-a-jar-file/"/>
   <updated>2012-07-30T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/07/30/how-to-print-text-file-content-inside-a-jar-file</id>
   <content type="html">&lt;p&gt;Have you ever wonder what’s the exact version of your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ojdbc6.jar&lt;/code&gt; that you have? All the jar files will contain a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;META-INF/MANIFEST.MF&lt;/code&gt; file, and chances are the version will be in it! You may try using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$JAVA_HOME/bin/jar -xvf&lt;/code&gt; to extract the jar and then view the text file. But afterward you would have to clean up the extracted file so not to liter.&lt;/p&gt;

&lt;p&gt;However, if you got Groovy, you can print any text file inside a jar without above mess.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;file = new File(args[0])
name = args.size() &amp;gt; 1 ? args[1] : &quot;META-INF/MANIFEST.MF&quot;
jar = new java.util.jar.JarFile(file)
entry = jar.getEntry(name)
istream = jar.getInputStream(entry)
println(istream.text)
istream.close()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You may use this script like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ groovy printjar.groovy /path/to/objdbc6.jar

# Or give an explicit entry name
$ groovy printjar.groovy $JBOSS_HOME/jboss-modules.jar 'META-INF/maven/org.jboss.modules/jboss-modules/pom.properties'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;UPDATES:&lt;/p&gt;

&lt;p&gt;Here are different implementations of similar program in differnet JVM based languages.&lt;/p&gt;

&lt;p&gt;Java&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.Enumeration;
import java.util.jar.JarEntry;
import java.util.jar.JarFile;

/**
 * Print text based resource file inside a jar file. (eg: META-INF/MANIFEST.MF)
 * 
 * @author Zemian Deng
 */
public class printjar {
    public static void main(String[] args) throws Exception {
        // Search given name in a jar
        JarFile jarFile = new JarFile(args[0]);
        final String searchName = (args.length &amp;gt;= 2) ? args[1]
                : &quot;META-INF/MANIFEST.MF&quot;;

        Enumeration&amp;lt;JarEntry&amp;gt; entries = jarFile.entries();
        while (entries.hasMoreElements()) {
            JarEntry entry = entries.nextElement();
            if (entry.getName().contains(searchName)) {
                // Print the JarEntry
                InputStream instream = jarFile.getInputStream(entry);
                try {
                    BufferedReader reader = new BufferedReader(
                            new InputStreamReader(instream));
                    String line = null;
                    while ((line = reader.readLine()) != null) {
                        System.out.println(line);
                    }
                } finally {
                    if (instream != null)
                        instream.close();
                }
            }
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;JavaScript (Run it with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jrunscript&lt;/code&gt; command)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;jar = new java.util.jar.JarFile(arguments[0])
pattern = arguments[arguments.length -1];
entries = jar.entries();
while(entries.hasMoreElements()) {
    jarEntry = entries.nextElement();
    if (jarEntry.toString().search(pattern) != -1) {
        istream = jar.getInputStream(jarEntry);
        cat(istream);
        istream.close();
        break;
    }
}
jar.close();
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Kotlin&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import java.io.BufferedReader
import java.io.InputStreamReader
import java.util.jar.JarFile
val jarFile = JarFile(args[0])
val searchName = if (args.size() &amp;gt;= 2) args[1] else &quot;META-INF/MANIFEST.MF&quot;
for (entry in jarFile.entries()) {
    if (entry.getName().contains(searchName)) {
        jarFile.getInputStream(entry).use { it -&amp;gt;
            val reader = BufferedReader(InputStreamReader(it))
            for (line in reader.lineSequence())
            println(line)
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Getting jboss-cli.sh to work on MacOSX</title>
   <link href="http://localhost:4000/2012/07/28/getting-jboss-cli-sh-to-work-on-macosx/"/>
   <updated>2012-07-28T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/07/28/getting-jboss-cli-sh-to-work-on-macosx</id>
   <content type="html">&lt;p&gt;If you use MacOSX and JBossAS, then you might have encountered this problem when using the jboss-client.sh tool:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ bin/jboss-cli.sh 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You are disconnected at the moment. Type ‘connect’ to connect to the server or ‘help’ for the list of supported commands.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[disconnected /] connect
The controller is not available at localhost:9999
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Or you will get this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ bin/jboss-cli.sh --connect
org.jboss.as.cli.CliInitializationException: Failed to connect to the controller
at org.jboss.as.cli.impl.CliLauncher.initCommandContext(CliLauncher.java:229)
at org.jboss.as.cli.impl.CliLauncher.main(CliLauncher.java:207)
at org.jboss.as.cli.CommandLineMain.main(CommandLineMain.java:34)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.jboss.modules.Module.run(Module.java:260)
at org.jboss.modules.Main.main(Main.java:291)
Caused by: org.jboss.as.cli.CommandLineException: The controller is not available at localhost:9999
at org.jboss.as.cli.impl.CommandContextImpl.connectController(CommandContextImpl.java:639)
at org.jboss.as.cli.impl.CommandContextImpl.connectController(CommandContextImpl.java:613)
at org.jboss.as.cli.impl.CliLauncher.initCommandContext(CliLauncher.java:227)
... 8 more
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It turns out this is bug on the JDK 1.7 that only appears on MacOSX JDK7! To be exact, I have the following: MacOSX 10.7.4 with JDK 1.7.0_05 and JBossAS 7.1.1.Final.&lt;/p&gt;

&lt;p&gt;This problem has already been discovered by these posts:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7159361&quot;&gt;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7159361&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://community.jboss.org/message/750861#750861&quot;&gt;https://community.jboss.org/message/750861#750861&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Except after ready through all, and I can’t still get it to work because no one listed a clear steps by steps solution. So I re-summarize it again. You need to use that bug’s report workaround solution on both the server and client!&lt;/p&gt;

&lt;p&gt;Start the server:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    $ bin/standalone.sh -Djava.nio.channels.spi.SelectorProvider=sun.nio.ch.KQueueSelectorProvider 
    ... 
    18:37:22,555 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: JBoss AS 7.1.1.Final &quot;Brontes&quot; started in 1686ms - Started 133 of 208 services (74 services are passive or on-demand)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And on separate terminal, run the CLI:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    $JAVA_OPTS=&quot;-Djava.nio.channels.spi.SelectorProvider=sun.nio.ch.KQueueSelectorProvider&quot; bin/jboss-cli.sh --connect 
    [standalone@localhost:9999 /] 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There, now we may continue to explore the cool JBossAS on the fancy OS.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Using TimeMachine Scheduler on JBossAS 7</title>
   <link href="http://localhost:4000/2012/07/23/using-timemachine-scheduler-on-jbossas-7/"/>
   <updated>2012-07-23T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/07/23/using-timemachine-scheduler-on-jbossas-7</id>
   <content type="html">&lt;p&gt;I’ve written an article for MasterTheBoss.com on integrating
&lt;a href=&quot;http://mastertheboss.com/jboss-quartz/using-timemachine-scheduler-on-jbossas-7&quot;&gt;TimeMachine Scheduler on
JBossAS7&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Script Console Tool for any WAR application</title>
   <link href="http://localhost:4000/2012/07/21/script-console-tool-for-any-war-application/"/>
   <updated>2012-07-21T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/07/21/script-console-tool-for-any-war-application</id>
   <content type="html">&lt;p&gt;In the latest release of &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler&quot;&gt;TimeMachine scheduler project&lt;/a&gt;, I’ve added a Groovy scripting console to the web app and allow user to script the scheduler. This feature is actually very useful for any servlet application as well. Imagine that if you have a script/shell console for your web application that allow you to dynamically inspect any variables or data?&lt;/p&gt;

&lt;p&gt;With the same idea, I’ve written a very basic JSP file &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;script-console.jsp&lt;/code&gt; that provides a great ad hoc tool. For simplicity sake, I put everything into single file. All you need is just add this one file into your java webapp root directory, and you’ll have an instant scripting console shell! (Yes, I am aware having code in JSP is bad, but having everything in one page is convenient, specially if you plan to just use this as one time inspection.)&lt;/p&gt;

&lt;p&gt;The JSP will automatically detect all the scripting engine available in your JVM (1.6+) and let you choose any one to use. In the text area you can enter any script codes. All the JSP implicit variables are available for you to use as well. JVM 1.6 or higher will have at least JavaScript engine available, so you can use it immediately.&lt;/p&gt;

&lt;p&gt;Be aware that this is a huge security risk since the script console not only expose your application, it also expose your entire JVM! It must be use with care, and if possible, it needs to be added as protected resources in your web application.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>TimeMachine Scheduler 1.2.0 release is out!</title>
   <link href="http://localhost:4000/2012/07/15/timemachine-scheduler-1-2-0-release-is-out/"/>
   <updated>2012-07-15T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/07/15/timemachine-scheduler-1-2-0-release-is-out</id>
   <content type="html">&lt;p&gt;I just released the &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/downloads&quot;&gt;timemachine-scheudler-1.2.0&lt;/a&gt;, and it now comes with both stand-alone server (zip) and web application (war) distribution packages.&lt;/p&gt;

&lt;p&gt;In this &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/wiki/ReleaseNotes&quot;&gt;release&lt;/a&gt;, I fixed few major bugs and made many small clean ups and minor fixes. I also added few new features. I will briefly introduce them to you here.&lt;/p&gt;

&lt;h2 id=&quot;groovy-20&quot;&gt;Groovy 2.0&lt;/h2&gt;

&lt;p&gt;I have upgraded the optional script engine dependency to latest groovy 2.0.0 within our scheduler distribution. The groovy-2.0.0 has modularized their jar distribution, and our scheduler only requires minimal of jsr-223 module, so our overall package size should be smaller.&lt;/p&gt;

&lt;h2 id=&quot;timemachine-web&quot;&gt;TimeMachine-Web&lt;/h2&gt;

&lt;p&gt;I have added a web application that can provide a fully running scheduler. This web app provides UI screens that let you manage and view jobs/schedules, and it can even edit the scheduler configuration online.&lt;/p&gt;

&lt;p&gt;You can see more info on &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/wiki/WebConsole&quot;&gt;WebConsole&lt;/a&gt; doc, or try it out with our &lt;a href=&quot;http://demos-tmscheduler.rhcloud.com/timemachine-web&quot;&gt;demo&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;schedule-priority&quot;&gt;Schedule Priority&lt;/h2&gt;

&lt;p&gt;You may now set a priority value 1-9 on any Schedule, and the default is 5. These are used if you have schedules that has same nextRun time, and having the lower priority value will get to run first.&lt;/p&gt;

&lt;h2 id=&quot;event-and-job-histories&quot;&gt;Event and Job Histories&lt;/h2&gt;

&lt;p&gt;In this release, I also provided a EventHistoryService that can record all major scheduler events such as when scheduler init, start, stop or destroyed. Also when scheduling data are added or deleted. And all the job run events are also recorded. To support this, we added a new built-in data model: EventHistory. You may retrieve and store these with our DataStore service if you desire. As convenience, we have added a History screen on our web application that display all the events happening in the scheduler.&lt;/p&gt;

&lt;p&gt;This feature is disabled by default, but to enable it is easy. You simply add the following value in the scheduler configuration file:
timemachine.scheduler.eventHistory.class = timemachine.scheduler.service.EventHistoryService&lt;/p&gt;

&lt;p&gt;There are few more options you may configure with this service, and you can read more it on the scheduler &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/wiki/ReferenceManual&quot;&gt;reference doc&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>CTRL+C not working on Cygwin 1.7.15-1</title>
   <link href="http://localhost:4000/2012/07/12/ctrl-c-not-working-on-cygwin-1-7-15-1/"/>
   <updated>2012-07-12T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/07/12/ctrl-c-not-working-on-cygwin-1-7-15-1</id>
   <content type="html">&lt;p&gt;When I installed new package in my Cygwin recently, it also automatically upgraded to latest Cygwin 1.7.15-1 DLL. After this, pressing CTRL+C no longer work&lt;/p&gt;

&lt;p&gt;on a running Java process the cygwin shell. I found the reason why this happens, and here is the email I sent to cygwin mailing list:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Okay, I finally found out what’s going on.&lt;/p&gt;

  &lt;p&gt;I used to have an old cygwin installed (not even sure what version) that only has “C:\Cygwin\Cygwin.bat” to start an terminal. This batch file open a terminal that I can run java.exe, and I used to hit CTRL+C to end it (not only that, it will also invoke the Java’s shutdown hook.)&lt;/p&gt;

  &lt;p&gt;After I upgraded to cygwin 1.7.15-1 (it will auto upgrade when we run setup.exe!). The above behavior no longer works!&lt;/p&gt;

  &lt;p&gt;It turns out the new cygwin 1.7.15-1 automatically comes with Mintty terminal now, and will default to create a Shortcut to this on desktop. Well I still have a shortcut to “C:\Cygwin\Cygwin.bat”. What I discover is that Java will no longer work with terminal that opens with “C:\Cygwin\Cygwin.bat”! But it DOES work with the Mintty terminal!&lt;/p&gt;

  &lt;p&gt;It’s all great for me, because I kind of like Mintty terminal. It’s kindda funny because for years I would love to use Mintty, but only to stop because CTRL+C wont’ work there. Now we have reverse!&lt;/p&gt;

  &lt;p&gt;However, I have to point out also that although I can hit CTRL+C in mintty to kill a java.exe process, but it DOES NOT invoke the Java’s shutdown hook process! Which is shame, because now I can’t test my shutdown procedure code.&lt;/p&gt;

  &lt;p&gt;I hope cygwin team can look at this further and provide a good solution, even for the Java folks like myself. I can only cope with Windows because of cygwin exists, so kudo to all the cygwin team and their hard work!&lt;/p&gt;

  &lt;p&gt;Hope also this post will help other Java developers out there.&lt;/p&gt;

  &lt;p&gt;Cheers,
Zemian&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Ref: &lt;a href=&quot;http://old.nabble.com/CTRL%2BC-is-not-working-with-java-on-latest-cygwin-1.7.15-tt34147441.html&quot;&gt;http://old.nabble.com/CTRL%2BC-is-not-working-with-java-on-latest-cygwin-1.7.15-tt34147441.html&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Quick way to benchmark Java code</title>
   <link href="http://localhost:4000/2012/07/11/quick-way-to-benchmark-java-code/"/>
   <updated>2012-07-11T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/07/11/quick-way-to-benchmark-java-code</id>
   <content type="html">&lt;p&gt;Don’t you envy Ruby has the Benchmark module? Yes, there are many art and science go behind how to setup and run a good micro benchmark code, especially with the JVM. But many times you just want to see some result, quickly. There is actually a very groovy and quick way to bench mark Java code with gbench! Check this out:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;@Grab('com.googlecode.gbench:gbench:0.3.1-groovy-2.0')
@Grab('commons-lang:commons-lang:2.6')
import gbench.*
import org.apache.commons.lang.StringUtils
new BenchmarkBuilder().run {
    'jdk.String.split' {
        100.times{ &quot;a b c d e f g h i j k l m n o p q r s t u v w x y z&quot;.split(&quot; &quot;) }
    }
    'commons-lang.StringUtils.split' {
        100.times{ StringUtils.split(&quot;a b c d e f g h i j k l m n o p q r s t u v w x y z&quot;, &quot; &quot;) }
    }
}.prettyPrint()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I ran above and get the following on my machine:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$ groovy benchmarkSplit.groovy&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Environment
===========
* Groovy: 2.0.0
* JVM: Java HotSpot(TM) Client VM (20.1-b02, Sun Microsystems Inc.)
    * JRE: 1.6.0_26
    * Total Memory: 15.5 MB
    * Maximum Memory: 247.5 MB
* OS: Windows XP (5.1, x86)

Options
=======
* Warm Up: Auto
* CPU Time Measurement: On

                                  user  system     cpu    real

jdk.String.split                663219       0  663219  693382
commons-lang.StringUtils.split  192721       0  192721  212359
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Creating Oracle Stored Procedure using Java</title>
   <link href="http://localhost:4000/2012/07/11/creating-oracle-stored-procedure-using-java/"/>
   <updated>2012-07-11T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/07/11/creating-oracle-stored-procedure-using-java</id>
   <content type="html">&lt;p&gt;Did you know you can write Oracle database stored procedure in Java? Give this a try in your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sqlplus&lt;/code&gt; prompt.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sql&amp;gt; create or replace and compile java source named &quot;MyJavaDbProcedure&quot; as
sql&amp;gt; public class MyJavaDbProcedure {
sql&amp;gt;   public static String upcase(String text) {
sql&amp;gt;     return text.toUpperCase();
sql&amp;gt;   }
sql&amp;gt; };
sql&amp;gt; /
sql&amp;gt; 
sql&amp;gt; create or replace function upcase (s in varchar2)
sql&amp;gt;   return varchar2
sql&amp;gt; as language java
sql&amp;gt;   name 'MyJavaDbProcedure.upcase(java.lang.String) return java.lang.String';
sql&amp;gt; /
sql&amp;gt; 
sql&amp;gt; select upcase('hello') from dual;
sql&amp;gt; /
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I let the database compile a Java source directly, but there is also the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;java class&lt;/code&gt; PL/SQL that you can load Java binary &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.class&lt;/code&gt; file as well. I am sure your DBA will fight all their might to prevent you doing stuff like this. But it’s cool to see that this option is available.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Minimal Java webapp with Maven</title>
   <link href="http://localhost:4000/2012/07/10/minimal-java-webapp-with-maven/"/>
   <updated>2012-07-10T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/07/10/minimal-java-webapp-with-maven</id>
   <content type="html">&lt;p&gt;Below are the shortest steps I know that would get you the smallest Java web application ready in Maven.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ mkdir -p webapp/src/main/webapp/WEB-INF/classes
$ echo '&amp;lt;web-app&amp;gt;&amp;lt;/web-app&amp;gt;' &amp;gt; webapp/src/main/webapp/WEB-INF/web.xml
$ echo '&amp;lt;html&amp;gt;Hello World.&amp;lt;/html&amp;gt;' &amp;gt; webapp/src/main/webapp/index.jsp
$ echo '&amp;lt;project&amp;gt;
    &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;
    &amp;lt;groupId&amp;gt;atest&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;webapp&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;1.0-SNAPSHOT&amp;lt;/version&amp;gt;
    &amp;lt;packaging&amp;gt;war&amp;lt;/packaging&amp;gt;
&amp;lt;/project&amp;gt;' &amp;gt; webapp/pom.xml
$ cd webapp
$ mvn org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-beta-1:run
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You should able to visit http://localhost:8080/webapp after that. Editing any JSP files should auto refresh by the server, and you don’t need to restart it. This is a fast way to prototype and test out your ideas.&lt;/p&gt;

&lt;p&gt;(Yes, I am aware that maven has the archetype for webapp, but it above do give you the bare minimal and you see each lines what go into your project.)&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Kickstart TimeMachine Scheduler with a quick Groovy script</title>
   <link href="http://localhost:4000/2012/07/09/kickstart-timemachine-scheduler-with-a-quick-groovy-script/"/>
   <updated>2012-07-09T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/07/09/kickstart-timemachine-scheduler-with-a-quick-groovy-script</id>
   <content type="html">&lt;p&gt;If you have &lt;a href=&quot;http://groovy.codehaus.org/&quot;&gt;Groovy&lt;/a&gt;installed, you can kick start a &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler&quot;&gt;TimeMachine Scheduler&lt;/a&gt; job without any setup! Try this out:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// Create a repeating schedule job that runs every 3 seconds.
@Grab('org.slf4j:slf4j-simple:1.6.6')
@Grab('org.bitbucket.timemachine:timemachine-scheduler:1.2.2')
import timemachine.scheduler.*
scheduler = new SchedulerFactory().createScheduler()
scheduler.init()
jobDef = JobDefs.groovyJobDef('''
    println(&quot;Hello World.&quot;)
''')
jobDef.addSchedule(Schedules.secondly(3))
scheduler.schedule(jobDef)
scheduler.start()
addShutdownHook{ scheduler.destroy() }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>Getting JDK6 src.zip for new iMac</title>
   <link href="http://localhost:4000/2012/07/03/getting-jdk6-src-zip-for-new-imac/"/>
   <updated>2012-07-03T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/07/03/getting-jdk6-src-zip-for-new-imac</id>
   <content type="html">&lt;p&gt;I got a new iMac, and I have activated the first time usage of JDK6. It’s all working, but it doesn’t come with src.zip! I googled around but other’s solution didn’t work for me. (eg: http://stackoverflow.com/questions/4011002/java-eclipse-on-macosx-where-is-the-src-zip). I tried download their Apple JDK updates, but it still doesn’t have the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src.zip&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;So finally realized that this is easier than it needs to be. You can download the full JDK source here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://download.java.net/openjdk/jdk6&quot;&gt;http://download.java.net/openjdk/jdk6&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;After unzip, you should see the src folder under like this:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;openjdk-6-src-b25-01_may_2012/jdk/src/share/classes&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;I’ve set this in my Eclipse’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;classes.jar&lt;/code&gt; as source folder and it works great.&lt;/p&gt;

&lt;p&gt;PS: If you install the JDK7 from Oracle for MacOSX, it does come with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src.zip&lt;/code&gt; properly. However if you use Eclipse IDE with maven that set target to 1.6, it still convenient to browse that version of the source.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>TimeMachine Scheduler Tour - Part7</title>
   <link href="http://localhost:4000/2012/06/24/timemachine-scheduler-tour-part7/"/>
   <updated>2012-06-24T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/06/24/timemachine-scheduler-tour-part7</id>
   <content type="html">&lt;p&gt;This is part 7 of 7 in a series of articles that will give you a tour of the &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/wiki/Home&quot;&gt;TimeMachine Scheduler&lt;/a&gt; project. These articles will introduce you to the scheduler, how to load jobs and schedules, and explore some of its advanced features. For the most current and accurate instructions, please visit the ReferenceManual from the project site.&lt;/p&gt;

&lt;h2 id=&quot;running-multiple-schedulers-in-a-clustering-mode&quot;&gt;Running Multiple Schedulers in a Clustering Mode&lt;/h2&gt;

&lt;p&gt;One of TimeMachine Scheduler goal is to be scalable and run high number of jobs. One of the way to do this is be able to run multiple schedulers on separate JVM under a single logical scheduler data space. In previous articles, you might already have noticed that our data models were designed to support multiple scheduler data space from the begining. This feature is actually already implicitly enabled by default, and you do not have to do much to take advantage of it!&lt;/p&gt;

&lt;p&gt;When running multiple schedulers (usually on separated JVM, but not required), your scheduler configuration is still all the same, except you need to pay attention to these two properties:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;timemachine.scheduler.schedulerName = TimeMachineScheduler

timemachine.scheduler.nodeName = #{hostname}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In order to keep all data in a single logical scheduler, your schedulerName must be unique among all other nodes configuration files that belong in same cluster. Within the cluster, each nodeName must be unique. In fact, as default, the schedulerNode is default to your hostname already. So if you are running each scheduler on separate machines, you automatically will join into the default logical scheduler named “TimeMachineScheduler” with your hostname as node name.&lt;/p&gt;

&lt;h2 id=&quot;using-hibernatedatastore&quot;&gt;Using HibernateDataStore&lt;/h2&gt;

&lt;p&gt;A typical and common way to run scalable data store is to use a database persistence. Our HibernateDataStore would let you run all clustered scheduler configuration and store the data in a database of your choice (well as many as Hibernate would support). Each scheduler node would record itself during start and stop with host IP and timestamp and etc. And each JobDef and Schedule are store per each logical SchedulerData, so the namespace is already in place. Each scheduler node would execute whatever schedule that’s next run is due in a first “poll” first “run” fashion. If no schedules to be run, then the node would just be idling.&lt;/p&gt;

&lt;h2 id=&quot;using-memorydatastore&quot;&gt;Using MemoryDataStore&lt;/h2&gt;

&lt;p&gt;Our MemoryDataStore implementation actually supports multiple scheduler as well! But it’s not enabled as default. The default config is to use a new instance of the MemoryDataStore for data space, and thus the data will be lost and reset per scheduler start/stop. But if you add this config property:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;timemachine.scheduler.dataStore.memoryDataStore.useSingleton = true
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This would make the MemoryDataStore service to use a singleton instance of the MemoryDataStore  for multiple schedulers to store data, thus making it cluster enable as well. This would be handy if you want to explore Big Memory or Data environment.&lt;/p&gt;

&lt;h2 id=&quot;summary&quot;&gt;Summary&lt;/h2&gt;

&lt;p&gt;This would conclude our tour with the TimeMachine Scheduler. We hope these articles have given you helpful information to explore more. Our goals are to provide a scheduler that can scale well, able to run high concurrent jobs, allow flexible schedules, and easy to configure. We love to hear your feedback. Please visit the project site and join the user forum to participate.&lt;/p&gt;

&lt;p&gt;End of part 7. You may see &lt;a href=&quot;http://saltnlight5.blogspot.com/2012/06/timemachine-scheduler-tour-part6.html&quot;&gt;previous tour&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>TimeMachine Scheduler Tour - Part6</title>
   <link href="http://localhost:4000/2012/06/22/timemachine-scheduler-tour-part6/"/>
   <updated>2012-06-22T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/06/22/timemachine-scheduler-tour-part6</id>
   <content type="html">&lt;p&gt;This is part 6 of 7 in a series of articles that will give you a tour of the &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/wiki/Home&quot;&gt;TimeMachine Scheduler&lt;/a&gt; project. These articles will introduce you to the scheduler, how to load jobs and schedules, and explore some of its advanced features. For the most current and accurate instructions, please visit the ReferenceManual from the project site.&lt;/p&gt;

&lt;h2 id=&quot;configuring-multiple-threadpools&quot;&gt;Configuring Multiple ThreadPools&lt;/h2&gt;

&lt;p&gt;By now you know how to write your own JobTask and even write your own Schedule implementation in TimeMachine Scheduler. We will switch back to configuration for a bit to talk about how to control the job execution.&lt;/p&gt;

&lt;p&gt;By default the scheduler will have two thread pools. The first one is reserved for system services, and default to only 1 fixed thread pool (used by PoolingScheduleRunner). The second thread pool is default to 4 dynamic threads exclusively for running JobTask only. Here is how the default config looks like for these pools:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# System service thread pool (you only need one pool!)
timemachine.scheduler.systemThreadPool.class = timemachine.scheduler.service.FixedSizeThreadPool
timemachine.scheduler.systemThreadPool.maxSize = 1
timemachine.scheduler.systemThreadPool.threadNamePrefix = ${timemachine.scheduler.schedulerName}-System-Thread-

# Default jobTask thread pool (you may define more than one pool!)
timemachine.scheduler.jobTaskThreadPool.DEFAULT.class = timemachine.scheduler.service.DynamicThreadPool
timemachine.scheduler.jobTaskThreadPool.DEFAULT.minSize = 0
timemachine.scheduler.jobTaskThreadPool.DEFAULT.maxSize = 4
timemachine.scheduler.jobTaskThreadPool.DEFAULT.timeToLive = 300000
timemachine.scheduler.jobTaskThreadPool.DEFAULT.useShutdownNow = false
timemachine.scheduler.jobTaskThreadPool.DEFAULT.maxShutdownWaitTime = 1000
timemachine.scheduler.jobTaskThreadPool.DEFAULT.threadNamePrefix = ${timemachine.scheduler.schedulerName}-JobTask-Thread-
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you use the scheduler for more jobs, you might run into situation where you want to create multiple thread pools to run certain specific JobTask’s. In this case, you want to configure certain jobs that would only run in a isolated threads pool. The TimeMachine Scheduler has this feature that you create multiple thread pools, and it allow you to match to job task’s name. When you do this, you would also need to create a JobTaskPoolNameResolver that would resolve JobTask’s name match to one of the thread pool you configured. Here is an example of scheduler configuration file that exercise this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Extra job tasks thread pool
timemachine.scheduler.jobTaskThreadPool.MYPOOL2.class = timemachine.scheduler.service.DynamicThreadPool
timemachine.scheduler.jobTaskThreadPool.MYPOOL2.maxSize = 4
timemachine.scheduler.jobTaskThreadPool.MYPOOL2.threadNamePrefix = MYPOOL2-Thread-

# Extra job tasks thread pool
timemachine.scheduler.jobTaskThreadPool.MYPOOL3.class = timemachine.scheduler.service.DynamicThreadPool
timemachine.scheduler.jobTaskThreadPool.MYPOOL3.maxSize = 4
timemachine.scheduler.jobTaskThreadPool.MYPOOL3.threadNamePrefix = MYPOOL3-Thread-

# Resolving multiple jobTask thread pools
timemachine.scheduler.jobTaskPoolNameResolver.poolName.MYPOOL2.matchToJobNameRexp = MyJobType2.*
timemachine.scheduler.jobTaskPoolNameResolver.poolName.MYPOOL3.matchToJobNameRexp = MyJobType3.*
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The name to pool matching is done using the Java regular expression. The example above setup two set of job task names match to each of their pool instance. Any job names starting with MyJobType2 will be executed by MYPOOL2, while any starting with MyJobType3 will be executed by MYPOOL3. And finally if any JobTask name that doesn’t match will use the DEFAULT pool.&lt;/p&gt;

&lt;p&gt;Note that JobTask’s name is only optional (only ID is required and it’s auto generated), so to use this features, you want to ensure to set the JobTask’s name that match your configured pool, or else they all default back to single DEFAULT pool.&lt;/p&gt;

&lt;p&gt;End of part 6. You may continue &lt;a href=&quot;http://saltnlight5.blogspot.com/2012/06/timemachine-scheduler-tour-part7.html&quot;&gt;next tour&lt;/a&gt;, or see &lt;a href=&quot;http://saltnlight5.blogspot.com/2012/06/timemachine-scheduler-tour-part5.html&quot;&gt;previous tour&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>TimeMachine Scheduler Tour - Part5</title>
   <link href="http://localhost:4000/2012/06/20/timemachine-scheduler-tour-part5/"/>
   <updated>2012-06-20T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/06/20/timemachine-scheduler-tour-part5</id>
   <content type="html">&lt;p&gt;This is part 5 of 7 in a series of articles that will give you a tour of the &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/wiki/Home&quot;&gt;TimeMachine Scheduler&lt;/a&gt; project. These articles will introduce you to the scheduler, how to load jobs and schedules, and explore some of its advanced features. For the most current and accurate instructions, please visit the ReferenceManual from the project site.&lt;/p&gt;

&lt;h2 id=&quot;how-to-create-custom-schedule&quot;&gt;How to create Custom Schedule&lt;/h2&gt;

&lt;p&gt;We have shown you how to create custom JobTask in previous tour. In most cases, you would write a custom JobTask and then pick one of built-in Schedule to run it. The TimeMachine Scheduler currently provides 3 built-in Schedule’s: CronSchedule, RepeatSchedule and DateListSchedule. So what happen if these are not want you wanted, and you need special scheduling pattern? You can certainly write and extend the timemachine.scheduler.Schedule class and provide all the needed methods. But writing such Schedule implementation is much harder. Not only you would need to fully understand the base class, you would also need to deal with the persistence side in the DataStore; saving and re-load the states of your new Schedule implementation. In case of HibernateDataStore, you would also need to add a new entity mapping file etc. This is a lot of work to create a customized Schedule to run in a scheduler. Fortunately we provide something better and easier.&lt;/p&gt;

&lt;p&gt;Our solution is in the DateListSchedule. By default this schedule only let you set a list of dates explicitly to run. The scheduler would simply run on those specified dates and times, and when the schedule has reached at the end of the list, it’s done. The Schedule will be mark it as completed and remove it after the last job task has been run.&lt;/p&gt;

&lt;p&gt;However, there is another usage of DateListSchedule, that is to use a DateListProvider to supply a new dates list whenever the Schedule has reached the end of the list. You simply need to set a DateListProvider implementation class name in the schedule instance.&lt;/p&gt;

&lt;h2 id=&quot;writing-and-using-datelistprovider&quot;&gt;Writing and using DateListProvider&lt;/h2&gt;

&lt;p&gt;Let’s say you want a job to be run on every midnight end of month. We will show you how this can be done with our DateListSchdule.&lt;/p&gt;

&lt;p&gt;First, write a class that implements timemachine.scheduler.DateListProvider interface that will return last day of the month each time it’s called, like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package schedulerdemo;
import java.util*;
import timemachine.scheduler.*;
import timemachine.scheduler.schedule.*;
public class MyEndOfMonthDateListProvider implements DateListSchedule.DateListProvider {
  public List&amp;lt;Date&amp;gt; getDateList(DateListSchedule schedule) {
    List&amp;lt;Date&amp;gt; result = new ArrayList&amp;lt;Date&amp;gt;();
    Date prevDate = schedule.getPrevRun();
    if (prevDate == null)
      result.add(Schedules.endOfMonth(Schedules.time(&quot;00:00:00&quot;)));
    else
      result.add(Schedules.endOfMonth(Schedules.addMonths(prevDate, 1)));
    return result;
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Noticed that we take care to use prevRun date as starting point to calculate the next last-day-of-Month. And if prevRun is null, then we know that it’s the first time it’s called, so we need to create an initial date first. Again, our Schedules utility class can be a great help when handling with Java dates calculation.&lt;/p&gt;

&lt;p&gt;Now you can use above class in a DateListSchedule to schedule any job def. For example, you may schedule a job in a user service during init of the scheduler like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package schedulerdemo;
import timemachine.scheduler.*;
import timemachine.scheduler.schedule.*;
import timemachine.scheduler.support.*;
public class MyService extends AbstractService implements SchedulerListener {
  private Scheduler scheduler;
  public void onScheduler(Scheduler scheduler) { this.scheduler = scheduler; }
  public void init() {
    DateListSchedule schedule = new DateListSchedule();
    schedule.setDateListProviderClassName(MyEndOfMonthDateListProvider.class);
    JobDef jobDef = JobDefs.groovyJobDef(&quot;logger.info('Hello')&quot;);
    jobDef.addSchedule(schedule);
    scheduler.schedule(jobDef);
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Next, run the scheduler with the following config file:&lt;/p&gt;

&lt;p&gt;timemachine.scheduler.userservice.myService.class = schedulerdemo.MyService&lt;/p&gt;

&lt;h2 id=&quot;using-scriptingdatelistprovider&quot;&gt;Using ScriptingDateListProvider&lt;/h2&gt;

&lt;p&gt;With the same concept as above, we also provided a built-in ScriptingDateListProvider class that let you create custom date list with Scripting. This allow you to write custom schedule without even recompiling a Java project!&lt;/p&gt;

&lt;p&gt;In order to support  ScriptingDateListProvider, the DateListSchedule has another field that can be set using setDateListProviderData() method. This field is a string of data map in the key=value,key2=value2 format. We need this information to tell what scriptEngineName to use, and the scriptText to be executed (or scriptFile).&lt;/p&gt;

&lt;p&gt;To mimic above example again , we are going to switch to Groovy scripting completly, even writing the user service in Groovy initScript, so no Java compile is needed.&lt;/p&gt;

&lt;p&gt;First create a scheduler config file like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;timemachine.scheduler.userservice.myScriptService.class = timemachine.scheduler.userservice.ScriptingService
ScriptingService.scriptEngineName = Groovy
ScriptingService.initScript = config/init.groovy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now create the config/init.groovy initScript file:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import timemachine.scheduler.*
import timemachine.scheduler.schedule.*
import timemachine.scheduler.support.*
schedule = new DateListSchedule()
schedule.setDateListProviderClassName(ScriptingDateListProvider.class)
schedule.setDataListProviderData('''
  scriptEngineName=Groovy,scriptText=
    import timemachine.scheduler.*
    prevDate = dateListSchedule.getPrevRun()
    if (prevDate == null)
      [Schedules.endOfMonth(Schedules.time(&quot;00:00:00&quot;))]
    else
      [Schedules.endOfMonth(Schedules.addMonths(prevDate, 1))]
''')
jobDef = JobDefs.groovyJobDef(&quot;logger.info('Hello')&quot;)
jobDef.addSchedule(schedule)
scheduler.schedule(jobDef)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There, you just experienced a little bit of script within script! Pretty cool huh? Go ahead and re-start your scheduler with above config and you shall see your custom schedule in action.&lt;/p&gt;

&lt;p&gt;As you can see, our DateListSchedule can give you a very flexible way to customize any schedule needs, even with dynamic scripting. Since this DateListSchedule is already part of the built-in schedule, all the persistence layer would work correctly without modifying any classes nor database structure.&lt;/p&gt;

&lt;p&gt;End of part 5. You may continue &lt;a href=&quot;http://saltnlight5.blogspot.com/2012/06/timemachine-scheduler-tour-part6.html&quot;&gt;next tour&lt;/a&gt;, or see &lt;a href=&quot;http://saltnlight5.blogspot.com/2012/06/timemachine-scheduler-tour-part4.html&quot;&gt;previous tour&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>TimeMachine Scheduler Tour - Part4</title>
   <link href="http://localhost:4000/2012/06/17/timemachine-scheduler-tour-part4/"/>
   <updated>2012-06-17T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/06/17/timemachine-scheduler-tour-part4</id>
   <content type="html">&lt;p&gt;This is part 4 of 7 in a series of articles that will give you a tour of the &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/wiki/Home&quot;&gt;TimeMachine Scheduler&lt;/a&gt; project. These articles will introduce you to the scheduler, how to load jobs and schedules, and explore some of its advanced features. For the most current and accurate instructions, please visit the ReferenceManual from the project site.&lt;/p&gt;

&lt;h2 id=&quot;developing-with-timemachine-scheduler-in-java&quot;&gt;Developing with TimeMachine scheduler in Java&lt;/h2&gt;

&lt;p&gt;The TimeMachine scheduler is written in Java, so the primary language to extend and write custom job task is with Java as well. The obvious benefit of using Java over a Scripting language is it’s speed and IDE tooling when developing.&lt;/p&gt;

&lt;p&gt;Recall from previous tour that the scheduler allows you to create a job definition and add any schedules to be run. The actual job execution is provided by a JobTask implementation class name given to the job definition. You may write your own JobTask implementation in Java. After this, then you may write a user service that will register the job task with the scheduler. Through this user service layer, you can also implement event listeners that get invoked when scheduler runs a job, add a schedule, or delete a job def etc.&lt;/p&gt;

&lt;p&gt;Before we start, let me show you a Java project setup using Maven3 so that you can use the rest of the tour as demo.&lt;/p&gt;

&lt;p&gt;Let start by setup a maven project &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;scheduler-demo/pom.xml&lt;/code&gt; file like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&amp;gt;
&amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;
&amp;lt;groupId&amp;gt;scheduler-demo&amp;lt;/groupId&amp;gt;
&amp;lt;artifactId&amp;gt;scheduler-demo&amp;lt;/artifactId&amp;gt;
&amp;lt;version&amp;gt;1.0.0-SNAPSHOT&amp;lt;/version&amp;gt;

&amp;lt;build&amp;gt;
&amp;lt;plugins&amp;gt;
&amp;lt;plugin&amp;gt;
&amp;lt;artifactId&amp;gt;maven-compiler-plugin&amp;lt;/artifactId&amp;gt;
&amp;lt;version&amp;gt;2.3.2&amp;lt;/version&amp;gt;
&amp;lt;configuration&amp;gt;
&amp;lt;source&amp;gt;1.6&amp;lt;/source&amp;gt;
&amp;lt;target&amp;gt;1.6&amp;lt;/target&amp;gt;
&amp;lt;/configuration&amp;gt;
&amp;lt;/plugin&amp;gt;
&amp;lt;/plugins&amp;gt;
&amp;lt;/build&amp;gt;

&amp;lt;dependencies&amp;gt;
&amp;lt;dependency&amp;gt;
&amp;lt;groupId&amp;gt;org.bitbucket.timemachine&amp;lt;/groupId&amp;gt;
&amp;lt;artifactId&amp;gt;timemachine-scheduler&amp;lt;/artifactId&amp;gt;
&amp;lt;version&amp;gt;1.1.1&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;dependency&amp;gt;
&amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;
&amp;lt;artifactId&amp;gt;slf4j-simple&amp;lt;/artifactId&amp;gt;
&amp;lt;version&amp;gt;1.6.1&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;
&amp;lt;/dependencies&amp;gt;
&amp;lt;/project&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The timemachine scheduler artifact should already in Maven central, so cd into the scheduler-demo directory and run mvn installshould get your project compiled and installed into your local repository. If you are curious, you may also run mvn dependency:tree to see what are the scheduler dependencies are. You will discover that although the scheduler uses many optional runtime dependencies, the actual compile time dependencies only have few.&lt;/p&gt;

&lt;h2 id=&quot;writing-jobtask-in-java&quot;&gt;Writing JobTask in Java&lt;/h2&gt;

&lt;p&gt;Now create a new &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/java/schedulerdemo/MyTask.java&lt;/code&gt; Java file with following:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package schedulerdemo;

import timemachine.scheduler.*;

import org.slf4j.*;

public class MyJobTask implements JobTask {

  public static Logger logger = LoggerFactory.getLogger(MyJobTask.class);

  public void run(JobContext jobContext) {

    logger.info(&quot;Hello, I am jobTask with &quot; + jobContext.getSchedule());

  }

}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The JobTask interface is a very simple one, and the JobContext parameter would give you all the runtime information you need to query and interact with the scheduler. With above, you can immediately run the scheduler server within your maven project setup. But let’s also create a scheduler 
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config/scheduler.properties&lt;/code&gt; file that looks like this first:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# config/scheduler.properties
timemachine.scheduler.userservice.jobLoader.class = timemachine.scheduler.userservice.JobLoaderService

JobLoaderService.01myJob.schedulerdemo.MyJobTask = CronSchedule{expression=* * * * * ?}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you can run the scheduler with your config by using this maven command:&lt;/p&gt;

&lt;p&gt;$ mvn exec:java -Dexec.mainClass=timemachine.scheduler.tool.SchedulerServer -Dexec.args=config/scheduler.properties&lt;/p&gt;

&lt;h2 id=&quot;writing-user-service-in-java&quot;&gt;Writing User Service in Java&lt;/h2&gt;

&lt;p&gt;Continue with the setup above, you may explore more advanced features of the scheduler. The scheduler API exposes a simple way to let you customize the scheduler. Recall that the scheduler application itself is a container of many system services. The scheduler also has a separate container that holds user services only. To register, you just need to implements the timemachine.scheduler.Service interface.&lt;/p&gt;

&lt;p&gt;Try create a new  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src/main/java/schedulerdemo/MyService.java&lt;/code&gt; Java file with following:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package schedulerdemo;

import timemachine.scheduler.*;

import org.slf4j.*;

public class MyService implements Service {

  public static Logger logger = LoggerFactory.getLogger( MyService.class);

  public void init() { logger.info(&quot;I am initializing.&quot;); }

  public void start() {}
  public void stop() {}
  public void destroy() {}
  public void isInited() { return true; }
  public void isStarted() { return true; }

  public String getName() { return &quot;MyService&quot;; }

}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We also provide a convenient &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;timemachine.scheduler.support.AbstractService&lt;/code&gt; class so you may extend it instead. With the abstract class you only need to override the method you interested, and it auto manage the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;isInited()&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;isStarted()&lt;/code&gt; states correctly for you.&lt;/p&gt;

&lt;p&gt;With your service ready, you may register it to scheduler with following scheduler config properties appended from earlier:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# config/scheduler.properties

timemachine.scheduler.userservice.jobLoader.class = timemachine.scheduler.userservice.JobLoaderService

JobLoaderService.01myJob.schedulerdemo.MyJobTask = CronSchedule{expression=* * * * * ?}

timemachine.scheduler.userservice.myService.class = schedulerdemo.MyService
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now re-start your scheduler again, and you should see your service initialized with log output to verify.&lt;/p&gt;

&lt;p&gt;The above service implementation would not do much because you don’t have a reference to the scheduler to setup or do anything. To obtains this, you simply implements timemachine.scheduler.SchedulerListener interface to your existing service class. With that you will have a reference to the scheduler that’s fully initialized already. You may pre-setup jobs or manipulate the scheduler any way you want in your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;init()&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;start()&lt;/code&gt;method once you save the scheduler reference.&lt;/p&gt;

&lt;p&gt;Besides the SchedulerListener, there is also JobListener, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ConfigPropsListener&lt;/code&gt;, or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CoreServiceListener&lt;/code&gt; you may use in the same manner. The JobListener would provide all the events callback methods you would typically want to monitor the scheduler. Since there are many methods to implements, there is a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SchedulerListener&lt;/code&gt; adaptor class that’s ready for you to extends as well.&lt;/p&gt;

&lt;p&gt;In  this tour, I have introduced and setup a Java Maven based project for you to explore the TimeMachine Scheduler. Go ahead and give these API a try and let us know what you think. If there is any features you are looking for that’s not in current scheduler, then please help file an Issue in the project site. We will be glad to evaluate and look forward to improve the project with you.&lt;/p&gt;

&lt;p&gt;End of part 4. You may continue &lt;a href=&quot;http://saltnlight5.blogspot.com/2012/06/timemachine-scheduler-tour-part5.html&quot;&gt;next tour&lt;/a&gt;, or see &lt;a href=&quot;http://saltnlight5.blogspot.com/2012/06/timemachine-scheduler-tour-part3.html&quot;&gt;previous tour&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>TimeMachine Scheduler Tour - Part3</title>
   <link href="http://localhost:4000/2012/06/13/timemachine-scheduler-tour-part3/"/>
   <updated>2012-06-13T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/06/13/timemachine-scheduler-tour-part3</id>
   <content type="html">&lt;p&gt;This is part 3 of 7 in a series of articles that will give you a tour of the &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/wiki/Home&quot;&gt;TimeMachine Scheduler&lt;/a&gt; project. These articles will introduce you to the scheduler, how to load jobs and schedules, and explore some of its advanced features. For the most current and accurate instructions, please visit the ReferenceManual from the project site.&lt;/p&gt;

&lt;h2 id=&quot;scheduler-data-models&quot;&gt;Scheduler Data Models&lt;/h2&gt;

&lt;p&gt;The main API entry to TimeMachine Scheduler is the timemachine.scheduler.Scheduler interface. Our default Scheduler implementation is simply a container that hosts many Service’s, and one of the system service is reponsible for storing data. Before I cover more on these system service functionalities, I should introduce to you on the data models that the store service will use.&lt;/p&gt;

&lt;p&gt;There four major data models that we persist and managed in the scheduler. They are listed here.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;SchedulerData - Represents a logical scheduler. It has an id and a name. A logical scheduler may have one or more physical ScheduleNode.&lt;/li&gt;
  &lt;li&gt;SchedulerNode - Represents a physical scheduler instance that runs on a JVM server node. It has an id, name, hostname, IP address, start time, and stop time etc.&lt;/li&gt;
  &lt;li&gt;JobDef - A job definition has all the information about a job to be run in a scheduler that belong to a SchedulerData. A JobDef will have an id, an optional name, job task class name, and zero or more Schedule associated with it. A job definition may also contains a map of String properties store data that’s specific for that job task.&lt;/li&gt;
  &lt;li&gt;Schedule- A schedule has all the information to tell when and how often a JobDef’s job task will be run. It must exists under a JobDef instance. Besides some common properties, there are 3 specific sub-classes of Schedule that we store separately: CronSchedule, RepeatSchedule, and DateListSchedule. They all share some comon fields such as id, name, startTime, nextRun datetime, missedRunPolicy etc. But they each also have their own additional fields for their specific function as well.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Note that the scheduler DataStore system service will auto generate ID value for each instance of model to be store. You can always uniquely identified an model object by it’s ID value. Both JobDef and Schedule’s name is optional and only used to help user perform search by a string name.&lt;/p&gt;

&lt;h2 id=&quot;how-the-scheduler-works&quot;&gt;How the Scheduler Works&lt;/h2&gt;

&lt;p&gt;When the scheduler starts, it will first create and initialize a SchedulerNode. Each SchedulerNode must belong to a SchedulerData. If this logical SchedulerData doesn’t exists yet, then it will be auto created, else it will use the existing one. Recall that in our scheduler config file, you have the option to set schedulerName and nodeName, and these two values will uniquecally identify the node instance.&lt;/p&gt;

&lt;p&gt;Next the scheduler will initialize and execute the ScheduleRunner system service that will check the DataStore for any job definitions (JobDef) to be run. If they exists, then it checks to see if they have Schedule associated. For each Schedule that belong to a JobDef, it will then check for nextRun datetime. When it’s time to run, the runner service will instanciate the JobDef’s jobTaskClassName object dynamically at runtime, and invoke it’s run() method. That’s when the actual job’s task, or work, begins.&lt;/p&gt;

&lt;p&gt;Note that JobDef do not store the task instance directly, but only the class name instead. This is so we can scale and store many job defintions instead of the in-memory objects. The creation of the job task object is at runtime, and you may completely control it by override the JobTaskFactory service.&lt;/p&gt;

&lt;p&gt;Before a JobDef’s Schedule is to be run, the scheduler also track and update it’s states. It will go from WAITING to STAGING to RUNNING, and then back to WAITING. Through the Scheduler interface, you may also pause or resume each Schedule individually. If a scheduler is paused, it will not be polled for job task run.&lt;/p&gt;

&lt;p&gt;A Schedule may also support a missedRunPolicy that tells scheduler how to handle in case when nextRun has missed the time to run. When it passes the max missed run interval allowed, which is configurable, the scheduler will use this policy value to determine what to do. The default policy is to simply skip to the current date time and continue again. However when this happens, we record and increase this Schedule’s missedRunCount value so you may keep watch of it. Obvously we also track the normal Schedule.runCount as well.&lt;/p&gt;

&lt;p&gt;In a nutshell, that’s about how the scheduler works internally with these data models. We have a very flexible API in managing our scheduler system services, and we also allow user to make custom services to be register with the scheduler. All of the system services have well defined interfaces, and you are allow to swap any implementation you wish. For example we provide MemoryDataStore and HiberanteDataStore services that you may choose on how to persist your data. All these are configurable through the simple scheduler properties file. We shall cover some of these settings in future tour.&lt;/p&gt;

&lt;p&gt;End of part 3. You may continue &lt;a href=&quot;http://saltnlight5.blogspot.com/2012/06/timemachine-scheduler-tour-part4.html&quot;&gt;next tour&lt;/a&gt;, or see &lt;a href=&quot;http://saltnlight5.blogspot.com/2012/06/timemachine-scheduler-tour-part2.html&quot;&gt;previous tour&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>The HibernateDataStore preview is available</title>
   <link href="http://localhost:4000/2012/06/11/the-hibernatedatastore-preview-is-available/"/>
   <updated>2012-06-11T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/06/11/the-hibernatedatastore-preview-is-available</id>
   <content type="html">&lt;p&gt;One of the reason I delayed the first release of &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/wiki/Home&quot;&gt;TimeMachine Scheduler&lt;/a&gt; is that I started the HibernateDataStore implementation while polishing the scheduler API. This gave me chance to look ahead on what I need, as this is the major component in the coming 1.1.0 release. The initial Hibernate impl is actually working now! I have made an snapshot of the latest code today, and you may get a preview on how it works. Get the 1.1.0-SNAPSHOT here:
&lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/downloads&quot;&gt;https://bitbucket.org/timemachine/scheduler/downloads&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I also started a wiki doc on how to use it here:
&lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/wiki/HibernateDataStoreConfig&quot;&gt;https://bitbucket.org/timemachine/scheduler/wiki/HibernateDataStoreConfig&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So give it a try and let me know what you think so far!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>TimeMachine Scheduler Tour - Part2</title>
   <link href="http://localhost:4000/2012/06/10/timemachine-scheduler-tour-part2/"/>
   <updated>2012-06-10T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/06/10/timemachine-scheduler-tour-part2</id>
   <content type="html">&lt;p&gt;This is part 2 of 7 in a series of articles that will give you a tour of the &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/wiki/Home&quot;&gt;TimeMachine Scheduler&lt;/a&gt; project. These articles will introduce you to the scheduler, how to load jobs and schedules, and explore some of its advanced features. For the most current and accurate instructions, please visit the ReferenceManual from the project site.&lt;/p&gt;

&lt;h2 id=&quot;scripting-the-scheduler-with-groovy&quot;&gt;Scripting the Scheduler with Groovy&lt;/h2&gt;

&lt;p&gt;Scripting language is a great way to extend an application, and with Java 6 or higher it has ScriptingEngine API baked right in. There are many solid JVM based scripting engines available out there today. For example Groovy, Ruby or Jython are just few popular open source ones. The TimeMachine Scheduler embraced the easy and flexibility of scripting. I will be covering some of these features in this tour.&lt;/p&gt;

&lt;p&gt;Starting JVM 6 or higher, it already comes with JavaScript engine implementation, and there is no external dependency with this. So TimeMachine has default to use “JavaScript” as scripting engine. You may add any other script engine jars in to the “lib” directory and specify the scriptEngineName parameter to change it.&lt;/p&gt;

&lt;p&gt;We have found the &lt;a href=&quot;http://groovy.codehaus.org/&quot;&gt;Groovy&lt;/a&gt; scripting engine to be very productive, and its syntax are very similar to Java language itself, but yet very concise and expressive. So we decided to make TimeMachine distribution zip file pre-packaged the Groovy jars for user convenient. (Note that Groovy is only an optional dependency for TimeMachine scheduler itself, and we have properly set our maven pom.xml as such.)&lt;/p&gt;

&lt;p&gt;All the demo code in this tour will use Groovy. You are free to choose other engine if you want to explore it further.&lt;/p&gt;

&lt;h2 id=&quot;the-scriptingservice&quot;&gt;The ScriptingService&lt;/h2&gt;

&lt;p&gt;You may initialize the scheduler along with a script file and let it execute and prepare jobs or anything you would need before the scheduler is started. You will start by create a config/scheduler.properties file like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;timemachine.scheduler.userservice.scriptingService.class = timemachine.scheduler.userservice.ScriptingService

ScriptingService.scriptEngineName = Groovy

ScriptingService.initScript = config/myscript.groovy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In your config/myscript.groovy file, you may try this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;logger.info(&quot;Hello World!&quot;)

logger.info(&quot;I have access to &quot; + scheduler)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now you can fire off the scheduler:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ bin/scheduler.sh config/scheduler.properties
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You should see the scheduler started with the hello world message printed on log output.&lt;/p&gt;

&lt;h2 id=&quot;the-scheduler-api&quot;&gt;The Scheduler API&lt;/h2&gt;

&lt;p&gt;From above  you can see that we give you two variables to play with in the script. The logger is simple one, and you probably don’t do anything more than logging info message. The more interesting one is the scheduler variable. This variable would have full access to the scheduler; it  is an instance of  &lt;a href=&quot;http://tmschedulersite-zdeng.rhcloud.com/scheduler-site/timemachine-scheduler/target/site-deploy/timemachine-scheduler/apidocs/timemachine/scheduler/Scheduler.html&quot;&gt;timemachine.scheduler.Scheduler&lt;/a&gt; class. Let’s use this variable to create a cron job in the following Groovy initScript:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import timemachine.scheduler.*
import timemachine.scheduler.schedule.*
import timemachine.scheduler.jobtask.*

jobDef = new JobDef()

jobDef.setJobTaskClass(LoggerJobTask.class)

schedule = new CronSchedule()
schedule.setExpression(&quot;* * * * * ?&quot;)

jobDef.addSchedule(schedule)

scheduler.schedule(jobDef)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The scheduler API is pretty self explanatory, but let me be more explicit to help along. We imported all the packages and classes that we need first, then we created a job definition object. We told it what task to do and how often to do it. We created 3 schedules/jobs that will run the task. We finally scheduled and stored this job definition to the scheduler. These jobs will run according to the schedule (every second) as soon as your scheduler starts. You may verify through the output log.&lt;/p&gt;

&lt;p&gt;For convenience sake, we also provide factory classes that can make above program even shorter.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import timemachine.scheduler.*
jobDef = JobDefs.loggerJobDef()
jobDef.add(Schedules.cron(&quot;* * * * * ?&quot;))
scheduler.schedule(jobDef)

## Schedule Types

Besides the CronSchedule, we also have RepeatSchedule and DateListSchedule schedule types. We have created a nice factory methods in Schedules that return one of these schedule. For example, we may create a minutely repeat schedule and an explicit date list schedules in the initScript like this: 

import timemachine.scheduler.*
jobDef = JobDefs.osCommandJobDef(&quot;cmd.exe /c echo 'Hello World.'&quot;)
jobDef.addSchedule(Schedules.minutely(5))
jobDef.addSchedule(Schedules.datelist(*[Schedules.datetime(&quot;01/01/2013 08:00:00&quot;), Schedules.datetime(&quot;01/01/2014 08:00:00&quot;)]))

scheduler.schedule(jobDef)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In above, we have scheduled one job definition with two schedules to run. First one runs every 5 mins, and the second one runs twice on an explicit given dates.&lt;/p&gt;

&lt;p&gt;Note: The asterisk in front of left bracket is needed due to Groovy syntax on passing an list object into Java’s wildcard variable argument.&lt;/p&gt;

&lt;h2 id=&quot;jobtask-types&quot;&gt;JobTask Types&lt;/h2&gt;

&lt;p&gt;Besides the LoggerJobTask and OsCommandJobTask built-in JobTask you have seen above, we also have a powerful ScriptingJobTask that let you build a job task in Groovy code! This means you may add a new job without even compiling Java code! Here is an example of Groovy initScript script that will create a new “scripting” job.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import timemachine.scheduler.*
jobDef = JobDefs.groovyJobDef('''
file= new File(&quot;/tmp/counter.data&quot;)
if (!file.exists())
  num = 1
else
  num  = file.text.toInteger() + 1
logger.info(&quot;Incrementing counter $num in $file&quot;)
file.write(num)
''')
jobDef.addSchedule(Schedules.secondly(1)) // run every second.

scheduler.schedule(jobDef)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In above example, we created a job that runs every second. The job task will increment a counter in a file and re-save it every time the job runs.&lt;/p&gt;

&lt;h2 id=&quot;pretty-groovy-&quot;&gt;Pretty Groovy …&lt;/h2&gt;

&lt;p&gt;There you go. Above is your first custom job in TimeMachine Scheduler! The Groovy language is very similar to Java in syntax, yet minus all the noises, so it’s very productive. Groovy also access and integrate with existing &lt;a href=&quot;http://docs.oracle.com/javase/6/docs/api/&quot;&gt;Java API&lt;/a&gt; seamlessly, so you may access and control the scheduler with easy.&lt;/p&gt;

&lt;p&gt;Interested? Go and &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/downloads&quot;&gt;download&lt;/a&gt;the scheduler today and give it a try!&lt;/p&gt;

&lt;p&gt;End of part 2. You may continue &lt;a href=&quot;http://saltnlight5.blogspot.com/2012/06/timemachine-scheduler-tour-part3.html&quot;&gt;next tour&lt;/a&gt;, or see &lt;a href=&quot;http://saltnlight5.blogspot.com/2012/06/timemachine-scheduler-tour-part1.html&quot;&gt;previous tour&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>TimeMachine Scheduler Tour - Part1</title>
   <link href="http://localhost:4000/2012/06/06/timemachine-scheduler-tour-part1/"/>
   <updated>2012-06-06T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/06/06/timemachine-scheduler-tour-part1</id>
   <content type="html">&lt;p&gt;This is part 1 of 7 in a series of articles that will give you a tour of the &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/wiki/Home&quot;&gt;TimeMachine Scheduler&lt;/a&gt; project. These articles will introduce you to the scheduler, how to load jobs and schedules, and explore some of its advanced features. For the most current and accurate instructions, please visit the ReferenceManual from the project site.&lt;/p&gt;

&lt;h2 id=&quot;what-is-timemachine-scheduler&quot;&gt;What is TimeMachine Scheduler&lt;/h2&gt;

&lt;p&gt;TimeMachine is a Java scheduler that can scale and run high volume of jobs with many different types of schedules, such as repeating on fixed interval or based on CRON expressions. The scheduler may control the job executions with thread pools, and it can persist job data into different storage. Users may use the built-in scheduler server with easy configuration file, or developers may use it as a library to extend the scheduler and write custom jobs, schedules, or user services.&lt;/p&gt;

&lt;h2 id=&quot;getting-started&quot;&gt;Getting started&lt;/h2&gt;
&lt;p&gt;First step is to download the latest scheduler distribution and uznip it into your system. Then fire up the scheduler with some sample jobs.&lt;/p&gt;

&lt;p&gt;We will be printing commands and its output running on a MacOSX terminal. If you have a Microsoft Windows, then running a Cygwin terminal would also work. Or if you are Linux user then you just use a Terminal.&lt;/p&gt;

&lt;p&gt;(NOTE: If you don’t feel like downloading software, you may try our &lt;a href=&quot;http://tmschedulerdemo-zdeng.rhcloud.com/scheduler-demo/job-list&quot;&gt;online demo&lt;/a&gt;. You may edit the scheduler configuration directly in a web form, and it will restart the scheduler immediately upon Save.)&lt;/p&gt;

&lt;p&gt;If you have downloaded the zip file under an “apps” directory in your HOME folder, then follow these steps to get a scheduler instance running:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ cd $HOME/apps
$ unzip timemachine-scheduler-1.1.1.zip
$ cd timemachine-scheduler-1.1.1
$ bin/scheduler.sh config/scheduler.properties
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You should see some log output on the terminal console screen like this&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;22:57:08 main INFO| TimeScheduler system services initialized: [
  scheduler: SchedulerData[id=1, name=TimeMachineScheduler],
  schedulerNode: SchedulerNode[nodeId=1, name=ZEMIANs-iMac.local, ip=192.168.1.130],
  configProps: config/scheduler.properties,
  dataStore: MemoryDataStore[name=386981384],
  scheduleRunner: PollingScheduleRunner[name=1186906970],
  classLoader: SimpleClassLoaderService[name=1363910379],
  jobTaskFactory: SimpleJobTaskFactory[name=621450213],
  jobTaskPoolNameResolver: SimpleJobTaskPoolNameResolver[name=1945442111],
  jobTaskThreadPool: DynamicThreadPool[name=jobTaskThreadPool.DEFAULT],
]
22:57:08 main INFO| Scheduler[id=1, nodeId=1, nodeIp=192.168.1.130] initialized. Version=1.1.1.062720122255
22:57:08 main INFO| Scheduler[id=1, nodeId=1, nodeIp=192.168.1.130] started.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You may hit CTRL+C to exit the scheduler. The above config/scheduler.properties configuration file would not do much other than load an empty scheduler. To see more in action, try the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;config/crontab.properties&lt;/code&gt; config instead. It should look something like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;timemachine.scheduler.userservice.crontabService.class = timemachine.scheduler.userservice.CrontabService
CrontabService.01 = 0 0 * * * ?        | sh -c echo &quot;Hourly task begins.&quot;
CrontabService.02 = 0/5 * * * * ?      | sh -c echo &quot;Heart beat.&quot;
CrontabService.03 = 0 0/5 * * * ?      | sh -c echo &quot;Five minutes job.&quot;
CrontabService.04 = 0 0 12 * JAN,JUN ? | sh -c echo &quot;We should clean up every 6 months.&quot;
CrontabService.05 = 0 0 8 ? * 1-5      | sh -c echo &quot;Every workday at 8AM.&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above configuration will make the scheduler to work similar to the Unix crontab service. It let you input a &lt;a href=&quot;http://tmschedulersite-zdeng.rhcloud.com/scheduler-site/timemachine-scheduler/target/site-deploy/timemachine-scheduler/apidocs/index.html&quot;&gt;CRON expression&lt;/a&gt;, and then follow by a OS executable command to be run. Go ahead, try to replace the “echo” command in the config file with any other commands that you know of (ping for example), and then restart the scheduler. Our default log settings should display all the external command’s output as it execute.&lt;/p&gt;

&lt;p&gt;There are few more configuration entries that you may add to customize the scheduler. Here are few we will examine closely. For example:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;timemachine.scheduler.schedulerName = TimeMachineScheduler
timemachine.scheduler.nodeName = ZEMIANs-iMac.local
timemachine.scheduler.dataStore.class = timemachine.scheduler.service.MemoryDataStore
timemachine.scheduler.jobTaskThreadPool.DEFAULT.class = timemachine.scheduler.service.DynamicThreadPool
timemachine.scheduler.jobTaskThreadPool.DEFAULT.minSize = 0
timemachine.scheduler.jobTaskThreadPool.DEFAULT.maxSize = 4
timemachine.scheduler.jobTaskThreadPool.DEFAULT.threadNamePrefix = ${timemachine.scheduler.schedulerName}-JobTask-Thread-
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You are free to change the scheduler name. Both the schedulerName and nodeName together will form a unique name for this instance of scheduler. These are printed as you start the scheduler so you can verify and identify them.&lt;/p&gt;

&lt;p&gt;We allow you to switch to different datastore, and we are using a in-memory store in this case. We also  provide a HibernateDataStore that you may use to persist the data into a database of your choice. We will cover this later in the tour, but for now we will focus on the simple in-memory store.&lt;/p&gt;

&lt;p&gt;One benefit of using our scheduler over a typical Unix cron is that you may control the thread pool to execute your jobs. You see the last few lines of configuration that defined a dynamic thread pool (it will not create the threads if your scheduler is idle without jobs to run.) You may change the min and max pool size, and you may even change the thread name. You may see the thread name in any JDK management tool such as jvisualvm.&lt;/p&gt;

&lt;p&gt;Notice one feature of our scheduler configuration, it allow you to substitude an existing value with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;${key}&lt;/code&gt; format! We use this to set our thread name that reuse the value you already set as schedulerName.&lt;/p&gt;

&lt;p&gt;End of part 1. You may continue &lt;a href=&quot;http://saltnlight5.blogspot.com/2012/06/timemachine-scheduler-tour-part2.html&quot;&gt;next tour&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Intro to TimeMachine Scheduler 1.0.0</title>
   <link href="http://localhost:4000/2012/05/28/intro-to-timemachine-scheduler-1-0-0/"/>
   <updated>2012-05-28T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/05/28/intro-to-timemachine-scheduler-1-0-0</id>
   <content type="html">&lt;p&gt;Hello developers,&lt;/p&gt;

&lt;p&gt;I am happy to annouce the first release of TimeMachine Scheduler is available for you to download here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/downloads&quot;&gt;https://bitbucket.org/timemachine/scheduler/downloads&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Our first release of the scheduler comes with many features ready to use already. I will briefly describe 
them here.&lt;/p&gt;

&lt;p&gt;Out of the box, you can use it as an Unix Crontab system replacement. Since it’s Java based, you can run it in Windows as well.You may pass a config file that loos like this and kick of the scheduler server to execute any OS commands or scripts you wish:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    timemachine.scheduler.userservice.crontab.class = timemachine.scheduler.userservice.CrontabService
    CrontabService.01 = 0 0 * * * ?        | sh -c echo &quot;Hourly task begins.&quot;
    CrontabService.02 = 0/5 * * * * ?      | sh -c echo &quot;Heart beat.&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The scheduler has flexible configuration and allow full control on the job executions settings. For example you may configure the job task thread pool to be dynamic, so that it only creates threads when there are jobs to be run, else the pool size will shrink. Or you can even create multiple thread pools and match your jobs, effectively separated them in running Queues.&lt;/p&gt;

&lt;p&gt;Besides using external native commands, the scheduler also let you write your own job tasks. You can write new job task in either Java, JavaScript or Groovy scripting language. We package the optional Groovy engine in our distribution so it can be more convenient to write your own job, without even the need to re-compile source files, nor restart the scheduler instance!&lt;/p&gt;

&lt;p&gt;The scheduler comes with 3 built-in Schedule implementations that you may use to configure how often a job task runs. There is a RepeatSchedule that runs job in a fixed interval manner; a CronSchedule that uses a Unix CRON expression; and we have the DateListSchedule that simply let you use any arbituray dates to run.&lt;/p&gt;

&lt;p&gt;For this initial release, we only provide a in-memory data store implementation for persisting job and scheduling data. Our goal is to support other type of data store persistance such as using a database in the future. But even with this release, we’ve designed our API to support multiple scheduler nodes that run under a single logic scheduler. You can even do this with our in-memory data store!&lt;/p&gt;

&lt;p&gt;The TimeMachien Scheduler is designed to run with high volumes of jobs, and to give you flexible 
control on time scheduling, threads executions and data storage. You can learn more on our project site &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/wiki&quot;&gt;https://bitbucket.org/timemachine/scheduler/wiki&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Enjoy,&lt;/p&gt;

&lt;p&gt;Zemian Deng&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Changing Oracle XE apex webapp port</title>
   <link href="http://localhost:4000/2012/05/11/changing-oracle-xe-apex-webapp-port/"/>
   <updated>2012-05-11T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/05/11/changing-oracle-xe-apex-webapp-port</id>
   <content type="html">&lt;p&gt;If you use Oracle XE for development, then you know it has a simple web interface through http://localhost:8080/apex. Now port 8080 is a common port used by Tomcat server, so letting Oracle XE permanently have taken it is not convenient. But you can change it like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; sql&amp;gt; select dbms_xdb.gethttpport from dual;
 sql&amp;gt; exec dbms_xdb.sethttpport('8081');
 sql&amp;gt; commit;

 bash&amp;gt; open http://localhost:8081/apex
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also, if you ever deleted the HR sample database on the XE installation, you can restore it like this:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; bash&amp;gt; cd /c/oraclexe/app/oracle/product/10.2.0/server/demo/schema/human_resources
 bash&amp;gt; sqlplus system &amp;lt; hr_main.sql
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>TimeMachine Scheduler Demo</title>
   <link href="http://localhost:4000/2012/04/28/timemachine-scheduler-demo/"/>
   <updated>2012-04-28T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/04/28/timemachine-scheduler-demo</id>
   <content type="html">&lt;p&gt;I just put out a scheduler demo live on &lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/wiki/SchedulerWebDemo&quot;&gt;https://bitbucket.org/timemachine/scheduler/wiki/SchedulerWebDemo&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can poke around the scheduler using Groovy scripting on this quick demo. The bad thing is that everyone in public has access and can add/delete and modify the scheduler! But it’s a good way for you to explore around. Check it out and let me know what you think!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Tryout TimeMachine Scheduler</title>
   <link href="http://localhost:4000/2012/04/25/tryout-timemachine-scheduler/"/>
   <updated>2012-04-25T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/04/25/tryout-timemachine-scheduler</id>
   <content type="html">&lt;p&gt;There are few updates with TimeMachine Scheduler project:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;The project has a new home: 
&lt;a href=&quot;https://bitbucket.org/timemachine/scheduler/wiki/Home&quot;&gt;https://bitbucket.org/timemachine/scheduler/wiki/Home&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;I’ve been updating with SNAPSHOT downloads frequently lately, and the zip file binary distribution is fairly stable now. We are close to making the first official release.&lt;/li&gt;
  &lt;li&gt;I’ve been working hard to update the ReferenceManual under wiki so users can get started and use it effectively.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Give the project a try and let me know what you think!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Inspecting your Oracle database</title>
   <link href="http://localhost:4000/2012/04/11/inspecting-your-oracle-database/"/>
   <updated>2012-04-11T01:00:00-04:00</updated>
   <id>http://localhost:4000/2012/04/11/inspecting-your-oracle-database</id>
   <content type="html">&lt;p&gt;Some quick tips on how to inspect what you have in your Oracle database.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-- show all schemas
select distinct owner from dba_segments where owner in
     (select username from dba_users where default_tablespace not in ('SYSTEM','SYSAUX'));

-- show all tables from a schema/owner
select * from all_tables where owner = 'HR';

-- show table description
desc HR.EMPLOYEES;

-- show all users
select * from all_users;
select username, * from dba_users;


-- See who is taking up a DB lock
select c.*, b.* from v$lock a, dba_locks b, v$session c 
  where a.id1 = b.lock_id1 and b.session_id = c.sid

-- See internal SQL id
select * from v$sql

-- See Oracle latches:
select * from v$latch

-- See Library Cache of SGA (System Global Area) like buffer cache size:
select * from v$sgastat

-- See tx locks (TX) and DML locks (TM):
select * from v$lock where type in ('TX', 'TM')
select * from dba_locks where lock_type in ('Transaction', 'DML')
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>How to get JAXB (xjc) to work on Maven</title>
   <link href="http://localhost:4000/2012/03/11/how-to-get-jaxb-xjc-to-work-on-maven/"/>
   <updated>2012-03-11T00:00:00-05:00</updated>
   <id>http://localhost:4000/2012/03/11/how-to-get-jaxb-xjc-to-work-on-maven</id>
   <content type="html">&lt;p&gt;I got it working by using the following&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &amp;lt;build&amp;gt;
        &amp;lt;plugins&amp;gt;
            &amp;lt;!-- Generate JAXB Java source files from an XSD file --&amp;gt;
            &amp;lt;plugin&amp;gt;
                &amp;lt;groupId&amp;gt;org.codehaus.mojo&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;jaxb2-maven-plugin&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;1.3.1&amp;lt;/version&amp;gt;
                &amp;lt;executions&amp;gt;
                    &amp;lt;execution&amp;gt;
                        &amp;lt;goals&amp;gt;
                            &amp;lt;goal&amp;gt;xjc&amp;lt;/goal&amp;gt;
                        &amp;lt;/goals&amp;gt;
                    &amp;lt;/execution&amp;gt;
                &amp;lt;/executions&amp;gt;
                &amp;lt;configuration&amp;gt;
                    &amp;lt;packageName&amp;gt;my.jaxb.data&amp;lt;/packageName&amp;gt;
                    &amp;lt;outputDirectory&amp;gt;${project.build.directory}/generated-source/jaxb&amp;lt;/outputDirectory&amp;gt;
                    &amp;lt;schemaDirectory&amp;gt;${basedir}/src/main/resources&amp;lt;/schemaDirectory&amp;gt;
                    &amp;lt;schemaFiles&amp;gt;mydata.xsd&amp;lt;/schemaFiles&amp;gt;
                &amp;lt;/configuration&amp;gt;
            &amp;lt;/plugin&amp;gt;

            &amp;lt;!-- Build helper plugin adds the sources generated by the JAXB to the compile path --&amp;gt;
            &amp;lt;plugin&amp;gt;
                &amp;lt;groupId&amp;gt;org.codehaus.mojo&amp;lt;/groupId&amp;gt;
                &amp;lt;artifactId&amp;gt;build-helper-maven-plugin&amp;lt;/artifactId&amp;gt;
                &amp;lt;version&amp;gt;1.7&amp;lt;/version&amp;gt;
                &amp;lt;executions&amp;gt;      
                    &amp;lt;execution&amp;gt; 
                        &amp;lt;phase&amp;gt;process-sources&amp;lt;/phase&amp;gt;
                        &amp;lt;configuration&amp;gt;
                            &amp;lt;sources&amp;gt;
                                &amp;lt;source&amp;gt;${project.build.directory}/generated-sources/jaxb&amp;lt;/source&amp;gt;
                            &amp;lt;/sources&amp;gt;
                        &amp;lt;/configuration&amp;gt;
                        &amp;lt;goals&amp;gt;
                            &amp;lt;goal&amp;gt;add-source&amp;lt;/goal&amp;gt;
                        &amp;lt;/goals&amp;gt;
                    &amp;lt;/execution&amp;gt;
                &amp;lt;/executions&amp;gt;
            &amp;lt;/plugin&amp;gt;
        &amp;lt;/plugins&amp;gt;
    &amp;lt;/build&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</content>
 </entry>
 
 <entry>
   <title>First snapshot of TimeMachine scheduler is ready</title>
   <link href="http://localhost:4000/2012/03/09/first-snapshot-of-timemachine-scheduler-is-ready/"/>
   <updated>2012-03-09T00:00:00-05:00</updated>
   <id>http://localhost:4000/2012/03/09/first-snapshot-of-timemachine-scheduler-is-ready</id>
   <content type="html">&lt;p&gt;The first snapshot of TimeMachine, a new open source Java Scheduler library, is aviable to download. Check it out at &lt;a href=&quot;https://bitbucket.org/saltnlight5/timemachine-scheduler/downloads&quot;&gt;https://bitbucket.org/saltnlight5/timemachine-scheduler/downloads&lt;/a&gt; and let me know what you think!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>TimeMachine Scheduler</title>
   <link href="http://localhost:4000/2012/02/28/timemachine-scheduler/"/>
   <updated>2012-02-28T00:00:00-05:00</updated>
   <id>http://localhost:4000/2012/02/28/timemachine-scheduler</id>
   <content type="html">&lt;p&gt;Wanna contribute to an opensource project? Check out &lt;a href=&quot;https://bitbucket.org/saltnlight5/timemachine-scheduler/wiki/Home&quot;&gt;https://bitbucket.org/saltnlight5/timemachine-scheduler/wiki/Home&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>MySchedule-2.4.0 release</title>
   <link href="http://localhost:4000/2012/02/27/myschedule-2-4-0-release/"/>
   <updated>2012-02-27T00:00:00-05:00</updated>
   <id>http://localhost:4000/2012/02/27/myschedule-2-4-0-release</id>
   <content type="html">&lt;p&gt;I have released version 2.4.0 of MySchedule project, and you may get it here: &lt;a href=&quot;http://code.google.com/p/myschedule/downloads/list&quot;&gt;http://code.google.com/p/myschedule/downloads/list&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In this release, I have added these:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Quartz is running on Heroku! Check it out: &lt;a href=&quot;http://stormy-flower-6956.herokuapp.com/&quot;&gt;http://stormy-flower-6956.herokuapp.com&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Added JdbcSchedulerHistoryPlugin that will record job history in DB.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Added Cron Tool expression validation on web page.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Added AppConfig configurable by a Properties file.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Upgraded to quartz-2.1.1&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Fixed trigger display page.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Enjoy!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Working on Quartz Queue Job Feature</title>
   <link href="http://localhost:4000/2012/02/17/working-on-quartz-queue-job-feature/"/>
   <updated>2012-02-17T00:00:00-05:00</updated>
   <id>http://localhost:4000/2012/02/17/working-on-quartz-queue-job-feature</id>
   <content type="html">&lt;p&gt;My job at Bank of New York Mellon has been keeping me fairly busy lately. It’s hard to juggle with Church, a family, a full time job, and time for open source projects. But it seems God has blessed me with not many skills nor hobbies other than programming, which I enjoy the most. So I tend to endup writing more code on weekend when the kids are asleep!&lt;/p&gt;

&lt;p&gt;I haven’t able to put much time into &lt;a href=&quot;http://code.google.com/p/myschedule&quot;&gt;MySchedule&lt;/a&gt;other than fixed couple of urgent issues recently. If you are using this app, you should get the latest download now.&lt;/p&gt;

&lt;p&gt;However, I did spent time helping out on &lt;a href=&quot;http://quartz-scheduler.org/&quot;&gt;Quartz&lt;/a&gt;development on their next major feature: &lt;a href=&quot;http://svn.terracotta.org/fisheye/browse/Quartz/branches/quartz-2.2-prototype&quot;&gt;Queue Jobs&lt;/a&gt;. I got most of the initial ground work done. I need to think more about how the concurrent issues with database row locking etc. This feature would allow you to add jobs into a queue structure that the quartz system will process without a trigger (meaning they are process immediatly.) These queue jobs would have a priority value that sorted by the queue as they are processed. We hope this feature would give some users to use the Quartz system to process jobs more effectively.&lt;/p&gt;

&lt;p&gt;More of these to come in the future, so stay tuned.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>How to build Ruby on Cygwin and setup Heroku</title>
   <link href="http://localhost:4000/2011/11/19/how-to-build-ruby-on-cygwin-and-setup-heroku/"/>
   <updated>2011-11-19T00:00:00-05:00</updated>
   <id>http://localhost:4000/2011/11/19/how-to-build-ruby-on-cygwin-and-setup-heroku</id>
   <content type="html">&lt;p&gt;I like to use ruby that comes with Cygwin instead of the RubyInstaller for Windows, because the path it handles are more consistenly in Linux form. But the current Cygwin only comes with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ruby-1.8.7&lt;/code&gt;, so to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ruby-1.9.3&lt;/code&gt;, I have to built it on Cygwin on my own. And when building ruby from source on Cygwin, you would also have to install gem on your own as well. Turns out there are few issues that you have to fix too. Here are the steps I got it working:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Ensure you have the typical Cygwin/Linux build tools (gcc, make, autoconf, libiconv, openssl and etc.)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Download source for the following:&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;a) LibYAML 0.1.4 from http://pyyaml.org/wiki/LibYAML&lt;/p&gt;

&lt;p&gt;b) ruby-1.9.3-p0 source from http://ruby-lang.org&lt;/p&gt;

&lt;p&gt;c) rubygems-1.8.11 from http://rubygems.org&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Unzip/tar them all in /tmp&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;a)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  $ cd /tmp/yaml-0.1.4 

  $ ./configure &amp;amp;&amp;amp; make &amp;amp;&amp;amp; make install
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;b)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  $ cd /tmp/ruby-1.9.3-p0/ext/openssl
  $ ruby extconf.rb
  $ make &amp;amp;&amp;amp; make install
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;c)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  $ cd /tmp/ruby-1.9.3-p0
  $ export CPPFLAGS=-I/usr/local/include
  $ export LDFLAGS=-L/usr/local/lib     
  $ ./configure &amp;amp;&amp;amp; make &amp;amp;&amp;amp; make install
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;e)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  $ cd /tmp/rubygems-1.8.11
  $ ruby setup.rb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With these completed, you may now install Heroku client tool as ruby gem:&lt;/p&gt;

&lt;p&gt;c)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  $ gem install heroku
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You would also need Git to successful push and deploy application to Heroku, but you can get Cygwin &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git&lt;/code&gt; package if you haven’t already done so.&lt;/p&gt;

&lt;p&gt;NOTE: FYI, all the user built applications are usually install into &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr/local&lt;/code&gt; directory, while those system (comes with cygwin packages) are in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/usr&lt;/code&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>MySchedule-2.3.0 release is out</title>
   <link href="http://localhost:4000/2011/11/06/myschedule-2-3-0-release/"/>
   <updated>2011-11-06T01:00:00-04:00</updated>
   <id>http://localhost:4000/2011/11/06/myschedule-2-3-0-release</id>
   <content type="html">&lt;p&gt;MySchedule is a web application that let you manage and run Quartz in a servlet container. You can get Quartz running and start exploring by simply dropping the war file into a web server such as Tomcat.&lt;/p&gt;

&lt;p&gt;Here is a short list of what’s in this release:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Use myschedule-2.3.0 to manage Quartz-2.x&lt;/li&gt;
  &lt;li&gt;Use myschedule-1.6.0 to manage Quartz-1.8.x&lt;/li&gt;
  &lt;li&gt;Removed all unnecessary dependencies, and making the war file tiny (~ 3MB)&lt;/li&gt;
  &lt;li&gt;Support any Java ScriptEngine, and many examples are provided for you to script and manage the scheduler.&lt;/li&gt;
  &lt;li&gt;There is an independent quartz-extra jar that you may use outside of webapp, and it has been backported consistently to 1.x version as well.&lt;/li&gt;
  &lt;li&gt;Documentation is available on the project site.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Try it out and let me know what you think.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://code.google.com/p/myschedule&quot;&gt;http://code.google.com/p/myschedule&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Enjoy!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Quartz Extra!</title>
   <link href="http://localhost:4000/2011/10/17/quartz-extra/"/>
   <updated>2011-10-17T01:00:00-04:00</updated>
   <id>http://localhost:4000/2011/10/17/quartz-extra</id>
   <content type="html">&lt;p&gt;Looking for some extra goodies for Quartz Scheduler? Check out &lt;a href=&quot;http://code.google.com/p/myschedule/downloads/list&quot;&gt;myschedule-2.2.0 release&lt;/a&gt;!&lt;/p&gt;

&lt;p&gt;Besides some small update to the web UI for quartz management, this release comes with a standalone quartz-extra jar you may download. See what it can do in &lt;a href=&quot;http://code.google.com/p/myschedule/wiki/QuartzExtraUserGuide&quot;&gt;QuartzExtraUserGuide&lt;/a&gt;.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Some of my googlecode projects</title>
   <link href="http://localhost:4000/2011/09/24/some-of-my-googlecode-projects/"/>
   <updated>2011-09-24T01:00:00-04:00</updated>
   <id>http://localhost:4000/2011/09/24/some-of-my-googlecode-projects</id>
   <content type="html">&lt;p&gt;I have created number of googlecode projects in attempt to try out new codes and ideas in the past. I now have links to all of them in my consolidated playground area &lt;a href=&quot;http://code.google.com/p/zemiandeng/&quot;&gt;http://code.google.com/p/zemiandeng/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I also kept few Java project templates (Maven based) in there: &lt;a href=&quot;http://code.google.com/p/zemiandeng/source/browse/&quot;&gt;http://code.google.com/p/zemiandeng/source/browse/&lt;/a&gt; These can get you started a project fairly quickly. See the README.txt in each for more details. I have added:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;java-project-template&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;servlet-project-template&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;springmvc-project-template&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;There is also the “java-tool” with misc command line programs that I have collected over the years.&lt;/p&gt;

&lt;p&gt;I also have stored a more reasonable preferences with Eclipse workspace, and few more custom Cygwin/Bash scripts setup.&lt;/p&gt;

&lt;p&gt;All these are publicly and freely available (Apache License 2.0) if you find it useful. Enjoy!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Quartz 2.1.0 has been released!</title>
   <link href="http://localhost:4000/2011/09/24/quartz-2-1-0-has-been-released/"/>
   <updated>2011-09-24T01:00:00-04:00</updated>
   <id>http://localhost:4000/2011/09/24/quartz-2-1-0-has-been-released</id>
   <content type="html">&lt;p&gt;&lt;a href=&quot;http://quartz-scheduler.org/downloads/catalog&quot;&gt;Quartz 2.1.0&lt;/a&gt; has been released!&lt;/p&gt;

&lt;p&gt;In this release, I have helped fixed some bugs, and added a new built-in trigger type: DailyTimeIntervalTrigger. This new trigger will allow you to specify a interval time in either seconds, minutes, or hours interval on each day (Like fire every 72 mins starting at 7am everyday). And the daily start time will be reset each day regardless what time it ended in that day! You may even limit daily ending time too. And you may limit the days to run on certain weekdays only as well. You may see many examples on how this trigger is used here: &lt;a href=&quot;http://svn.terracotta.org/fisheye/browse/Quartz/trunk/quartz/src/test/java/org/quartz/DailyTimeIntervalScheduleBuilderTest.java?r=HEAD&quot;&gt;http://svn.terracotta.org/fisheye/browse/Quartz/trunk/quartz/src/test/java/org/quartz/DailyTimeIntervalScheduleBuilderTest.java?r=HEAD&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Another feature worthy of note in this release is the “batch” mode is finally working! You may turn this on by using “org.quartz.scheduler.batchTriggerAcquisitionMaxCount” and “org.quartz.scheduler.batchTriggerAcquisitionFireAheadTimeWindow” in your quartz.properties file. See config doc here: &lt;a href=&quot;http://quartz-scheduler.org/documentation/quartz-2.1.x/configuration/ConfigMain&quot;&gt;http://quartz-scheduler.org/documentation/quartz-2.1.x/configuration/ConfigMain&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>myschedule-2.1.2 (for Quartz-2.1.0) and myschedule-1.5.2(for Quartz-1.8.5) releases</title>
   <link href="http://localhost:4000/2011/09/24/myschedule-2-1-2-for-quartz-2-1-0-and-myschedule-1-5-2for-quartz-1-8-5-releases/"/>
   <updated>2011-09-24T01:00:00-04:00</updated>
   <id>http://localhost:4000/2011/09/24/myschedule-2-1-2-for-quartz-2-1-0-and-myschedule-1-5-2for-quartz-1-8-5-releases</id>
   <content type="html">&lt;p&gt;Both myschedule-2.1.2 (for Quartz-2.1.0) and myschedule-1.5.2(for Quartz-1.8.5) releases are available for download here: &lt;a href=&quot;http://code.google.com/p/myschedule/downloads/list&quot;&gt;http://code.google.com/p/myschedule/downloads/list&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have fixed few bugs and improved the UI slightly. Both of these releases should now deployable on Tomcat6, Tomcat7, and JBossAS servers!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>MySchedule-2.0.0 released</title>
   <link href="http://localhost:4000/2011/07/23/myschedule-2-0-0-release/"/>
   <updated>2011-07-23T01:00:00-04:00</updated>
   <id>http://localhost:4000/2011/07/23/myschedule-2-0-0-release</id>
   <content type="html">&lt;p&gt;The lastest myschedule-2.x release supports the latest Quartz 2.0 API. The Quartz 2.0 is not backward compatible to Quartz 1.8.x, so the MySchedule has matained the myschedule-1.x for the older one.&lt;/p&gt;

&lt;p&gt;Try it out here: &lt;a href=&quot;http://code.google.com/p/myschedule/downloads/list&quot;&gt;http://code.google.com/p/myschedule/downloads/list&lt;/a&gt; !&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Becoming a Quartz commiter</title>
   <link href="http://localhost:4000/2011/07/22/becoming-a-quartz-commiter/"/>
   <updated>2011-07-22T01:00:00-04:00</updated>
   <id>http://localhost:4000/2011/07/22/becoming-a-quartz-commiter</id>
   <content type="html">&lt;p&gt;I started my &lt;a href=&quot;http://svn.terracotta.org/fisheye/changelog/Quartz/?cs=1575&quot;&gt;first commit&lt;/a&gt; to the Quartz’s svn repository yesterday. I hope to contribute some effort in helping the project. I think the &lt;a href=&quot;http://quartz-scheduler.org/&quot;&gt;Quartz&lt;/a&gt;is an exellent open source project to work with and it’s already been use by many users. The project offer many opportunities in dealing with real world situations. The quartz project has a scheduler layer, cron expression implementation, job persistence storage layer (using JDBC), and many framework components such as plugins and listeners. Many users have integrated Quartz in various environments such in standalone JavaSE, Spring, Servlet container (Tomcat eg), or application server (JBoss eg). In helping this community, I also get a chance to expose to these programming models. It will be great experience to have.&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>MySchedule-1.3.3 release</title>
   <link href="http://localhost:4000/2011/07/01/myschedule-1-3-3-release/"/>
   <updated>2011-07-01T01:00:00-04:00</updated>
   <id>http://localhost:4000/2011/07/01/myschedule-1-3-3-release</id>
   <content type="html">&lt;p&gt;The Quartz Scheduler project is great to create any fancy and heavy duty scheduling tasks in Java project. One area it’s missing is that the quartz library is very much targeted for developer, and there is not many user front end to allow end user to immediately exploring the scheduler system. This is the reason I created myschedule project. It’s free, open source (Apache License 2.0) dashboard manager for Quartz. It’s conveniently packaged as war file and you may deploy into any Servlet 2.5+ Web Container server to run it.&lt;/p&gt;

&lt;p&gt;The myschedule-1.3.3 release let you manage multiple quartz schedulers on a single webapp, and you may create and delete the config right in the webapp. The myschedule will quickly let a end user to load and run jobs without doing any programming. But myschedule also comes with a Scripting tool that let power uses to schedule any jobs using Groovy programming language. The myschedule’s job listing page and management of the UI has also greatly been improved since the first release.&lt;/p&gt;

&lt;p&gt;So if you need Quartz or want any scheduling jobs, you should check it out. http://code.google.com/p/myschedule/downloads/list&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>MySchedule-1.0.0 ready to use</title>
   <link href="http://localhost:4000/2011/06/04/myschedule-1-0-0-release/"/>
   <updated>2011-06-04T01:00:00-04:00</updated>
   <id>http://localhost:4000/2011/06/04/myschedule-1-0-0-release</id>
   <content type="html">&lt;p&gt;I have made MySchedule-1.0.0 ready to use.&lt;/p&gt;

&lt;p&gt;MySchedule is an open source web application dashboard for Quartz scheduler. Get the war file here: &lt;a href=&quot;http://code.google.com/p/myschedule/downloads/list&quot;&gt;http://code.google.com/p/myschedule/downloads/list&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It doesn’t look pretty at the moment, but for those who are looking  for more Quartz examples, especially on how to use Spring and run  Quartz in a Web Container environment, the MySchedule project should get  you jump started quickly.&lt;/p&gt;

&lt;p&gt;If you have any issues or comments, feel free to enter them at &lt;a href=&quot;http://code.google.com/p/myschedule/issues/list&quot;&gt;http://code.google.com/p/myschedule/issues/list&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Enjoy!&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>jQuery doesn't suport ajax over the file protocol</title>
   <link href="http://localhost:4000/2011/05/29/jquery-doesnt-suport-ajax-over-the-file-protocol/"/>
   <updated>2011-05-29T01:00:00-04:00</updated>
   <id>http://localhost:4000/2011/05/29/jquery-doesnt-suport-ajax-over-the-file-protocol</id>
   <content type="html">&lt;p&gt;I was playing with jQueryUI today, and a simple example like this failed to update an page.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    $.get('data1.xml', function(data) {
        $('#main-panel').html(data)
    });
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Running under Firefox4 locally on a PC (static local file protocols), I get errors like this inside Firebug:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Node cannot be inserted at the specified point in the hierarchy&quot;  code: &quot;3

fragment.appendChild( ret[i] ); jquery.js (line 6134)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Turns out that this failure only occur when fetching local files because the same code works when deployed and run from a web server. Reading from a bug report here http://bugs.jqueryui.com/ticket/7225 seems to indicate that jQuery AJAX doesn’t support local file protocol.&lt;/p&gt;

&lt;p&gt;Interestingly, an IE browser works with above code! And also the jQuery’s load method like $(‘#main-panel’).load(‘data1.xml’); works fine with local file!&lt;/p&gt;
</content>
 </entry>
 

</feed>
