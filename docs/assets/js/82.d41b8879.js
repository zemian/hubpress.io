(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{464:function(e,r,t){"use strict";t.r(r);var a=t(10),o=Object(a.a)({},(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("Here are some simple steps to get you fully started with Quartz Scheduler on MySQL database using Groovy. The script below will allow you to quickly experiment different Quartz configuration settings using an external file.")]),e._v(" "),t("p",[e._v("First step is to setup the database with tables. Assuming you already have installed MySQL and have access to create database and tables.")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("bash> mysql -u root -p\n\nsql> create database quartz2;\nsql> create user 'quartz2'@'localhost' identified by 'quartz2123';\nsql> grant all privileges on quartz2.* to 'quartz2'@'localhost';\nsql> exit;\n\nbash> mysql -u root -p quartz2 < /path/to/quartz-dist/docs/dbTables/tables_mysql.sql\n")])])]),t("p",[e._v("The "),t("code",[e._v("tables_mysql.sql")]),e._v(" can be found from Quartz distribution download, or directly from their source "),t("a",{attrs:{href:"http://svn.terracotta.org/svn/quartz/tags/quartz-2.1.6/docs/dbTables",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("p",[e._v("Once the database is up, you need to write some code to start up the Quartz Scheduler. Here is a simply Groovy script "),t("code",[e._v("quartzServer.groovy")]),e._v(" that will run as a tiny scheduler server.")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("```\n// Run Quartz Scheduler as a server\n// Author: Author: Zemian Deng, date: 2012-12-15T00:00:00-05:00\n@GrabConfig(systemClassLoader=true)\n@Grab('mysql:mysql-connector-java:5.1.22')\n@Grab('org.slf4j:slf4j-simple:1.7.1')\n@Grab('org.quartz-scheduler:quartz:2.1.6')\nimport org.quartz.*\nimport org.quartz.impl.*\nimport org.quartz.jobs.*\n\nconfig = args.length > 0 ? args[0] : \"quartz.properties\"\nscheduler = new StdSchedulerFactory(config).getScheduler()\nscheduler.start()\n\n// Register shutdown\naddShutdownHook {\n  scheduler.shutdown()\n}\n\n// Quartz has its own thread, so now put this script thread to sleep until\n// user hit CTRL+C\nwhile (!scheduler.isShutdown()) {\n Thread.sleep(Long.MAX_VALUE)\n}\n```\n")])])]),t("p",[e._v("And now you just need a config file "),t("code",[e._v("quartz-mysql.properties")]),e._v(" that looks like this:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("    # Main Quartz configuration\n    org.quartz.scheduler.skipUpdateCheck = true\n    org.quartz.scheduler.instanceName = DatabaseScheduler\n    org.quartz.scheduler.instanceId = NON_CLUSTERED\n    org.quartz.scheduler.jobFactory.class = org.quartz.simpl.SimpleJobFactory\n    org.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTX\n    org.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.StdJDBCDelegate\n    org.quartz.jobStore.dataSource = quartzDataSource\n    org.quartz.jobStore.tablePrefix = QRTZ_\n    org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool\n    org.quartz.threadPool.threadCount = 5\n    \n    # JobStore: JDBC jobStoreTX\n    org.quartz.dataSource.quartzDataSource.driver = com.mysql.jdbc.Driver\n    org.quartz.dataSource.quartzDataSource.URL = jdbc:mysql://localhost:3306/quartz2\n    org.quartz.dataSource.quartzDataSource.user = quartz2\n    org.quartz.dataSource.quartzDataSource.password = quartz2123\n    org.quartz.dataSource.quartzDataSource.maxConnections = 8\n")])])]),t("p",[e._v("You can run the Groovy script as usual")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("```\nbash> groovy quartzServer.groovy quartz-mysql.properties\nDec 15, 2012 6:20:26 PM com.mchange.v2.log.MLog \nINFO: MLog clients using java 1.4+ standard logging.\nDec 15, 2012 6:20:27 PM com.mchange.v2.c3p0.C3P0Registry banner\nINFO: Initializing c3p0-0.9.1.1 [built 15-March-2007 01:32:31; debug? true; trace:10]\n[main] INFO org.quartz.impl.StdSchedulerFactory - Using default implementation for ThreadExecutor\n[main] INFO org.quartz.core.SchedulerSignalerImpl - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl\n[main] INFO org.quartz.core.QuartzScheduler - Quartz Scheduler v.2.1.6 created.\n[main] INFO org.quartz.core.QuartzScheduler - JobFactory set to: org.quartz.simpl.SimpleJobFactory@1a40247\n[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - Using thread monitor-based data access locking (synchronization).\n[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - JobStoreTX initialized.\n[main] INFO org.quartz.core.QuartzScheduler - Scheduler meta-data: Quartz Scheduler (v2.1.6) 'DatabaseScheduler' with instanceId 'NON_CLUSTERED'\n  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.\n  NOT STARTED.\n  Currently in standby mode.\n  Number of jobs executed: 0\n  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 5 threads.\n  Using job-store 'org.quartz.impl.jdbcjobstore.JobStoreTX' - which supports persistence. and is not clustered.\n\n[main] INFO org.quartz.impl.StdSchedulerFactory - Quartz scheduler 'DatabaseScheduler' initialized from the specified file : 'quartz-mysql.properties' from the class resource path.\n[main] INFO org.quartz.impl.StdSchedulerFactory - Quartz scheduler version: 2.1.6\nDec 15, 2012 6:20:27 PM com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource getPoolManager\nINFO: Initializing c3p0 pool... com.mchange.v2.c3p0.ComboPooledDataSource [ acquireIncrement -> 3, acquireRetryAttempts\n-> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> false, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, dataSourceName -> 1hge16k8r18mveoq1iqtotg|1486306, debugUnreturnedConnectionStackTraces -> fals\ne, description -> null, driverClass -> com.mysql.jdbc.Driver, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> 1hge16k8r18mveoq1iqtotg|1486306, idleConnectionTestPeriod -> 0, initialPoolSize -> 3, jdbcUrl -> jdbc:mysql://localhost:3306/quartz2, lastAcquisitionFailureDefaultUser -> null, maxAdministrativeTaskTime -> 0\n, maxConnectionAge -> 0, maxIdleTime -> 0, maxIdleTimeExcessConnections -> 0, maxPoolSize -> 8, maxStatements -> 0, maxStatementsPerConnection -> 120, minPoolSize -> 1, numHelperThreads -> 3, numThreadsAwaitingCheckoutDefaultUser -> 0, pref\nerredTestQuery -> null, properties -> {user=******, password=******}, propertyCycle -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> false, unreturnedConnectionTimeout -> 0, usesTraditionalReflectiveProxies -> false ]\n[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - Freed 0 triggers from 'acquired' / 'blocked' state.[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - Recovering 0 jobs that were in-progress at the time of the last shut-down.\n[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - Recovery complete.\n[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - Removed 0 'complete' triggers.\n[main] INFO org.quartz.impl.jdbcjobstore.JobStoreTX - Removed 0 stale fired job entries.\n[main] INFO org.quartz.core.QuartzScheduler - Scheduler DatabaseScheduler_$_NON_CLUSTERED started.\n\n\n... CTRL+C\n[Thread-6] INFO org.quartz.core.QuartzScheduler - Scheduler DatabaseScheduler_$_NON_CLUSTERED shutting down.\n[Thread-6] INFO org.quartz.core.QuartzScheduler - Scheduler DatabaseScheduler_$_NON_CLUSTERED paused.\n[Thread-6] INFO org.quartz.core.QuartzScheduler - Scheduler DatabaseScheduler_$_NON_CLUSTERED shutdown complete.\n```\n")])])]),t("p",[e._v("That's a full run of above setup. Go ahead and play with different config. Read "),t("a",{attrs:{href:"http://quartz-scheduler.org/documentation/quartz-2.1.x/configuration/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://quartz-scheduler.org/documentation/quartz-2.1.x/configuration"),t("OutboundLink")],1),e._v(" for more details.")]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("Here I will post couple more easy config that will get you started in a commonly used config set.")]),e._v(" "),t("p",[e._v("A MySQL cluster enabled configuration. With this, you can start one or more shell terminal and run different instance of "),t("code",[e._v("quartzServer.groovy")]),e._v(" with the same config. All the quartz scheduler instances should cluster themselve and distribute your jobs evenly.")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("```\n# Main Quartz configuration\norg.quartz.scheduler.skipUpdateCheck = true\norg.quartz.scheduler.instanceName = DatabaseClusteredScheduler\norg.quartz.scheduler.instanceId = AUTO\norg.quartz.scheduler.jobFactory.class = org.quartz.simpl.SimpleJobFactory\norg.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreTX\norg.quartz.jobStore.driverDelegateClass = org.quartz.impl.jdbcjobstore.StdJDBCDelegate\norg.quartz.jobStore.dataSource = quartzDataSource\norg.quartz.jobStore.tablePrefix = QRTZ_\norg.quartz.jobStore.isClustered = true\norg.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool\norg.quartz.threadPool.threadCount = 5\n\n# JobStore: JDBC jobStoreTX\norg.quartz.dataSource.quartzDataSource.driver = com.mysql.jdbc.Driver\norg.quartz.dataSource.quartzDataSource.URL = jdbc:mysql://localhost:3306/quartz2\norg.quartz.dataSource.quartzDataSource.user = quartz2\norg.quartz.dataSource.quartzDataSource.password = quartz2123\norg.quartz.dataSource.quartzDataSource.maxConnections = 8\n```\n")])])]),t("p",[e._v("Here is another config set for a simple in-memory scheduler.")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("```\n# Main Quartz configuration\norg.quartz.scheduler.skipUpdateCheck = true\norg.quartz.scheduler.instanceName = InMemoryScheduler\norg.quartz.scheduler.jobFactory.class = org.quartz.simpl.SimpleJobFactory\norg.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool\norg.quartz.threadPool.threadCount = 5\n```\n")])])]),t("p",[e._v("Now, if you need more fancy UI management of Quartz, give "),t("a",{attrs:{href:"http://code.google.com/p/myschedule",target:"_blank",rel:"noopener noreferrer"}},[e._v("MySchedule"),t("OutboundLink")],1),e._v(" a try.")]),e._v(" "),t("p",[e._v("Happy scheduling!")])])}),[],!1,null,null,null);r.default=o.exports}}]);