<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Zemian's Blog &middot; Life in programming world!
    
  </title>

  
  <link rel="canonical" href="http://localhost:4000/page11/">
  

  <link rel="stylesheet" href="http://localhost:4000/public/css/poole.css">
  <link rel="stylesheet" href="http://localhost:4000/public/css/syntax.css">
  <link rel="stylesheet" href="http://localhost:4000/public/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="http://localhost:4000/public/favicon.ico">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://localhost:4000/atom.xml">

  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-135626598-1', 'auto');
    ga('send', 'pageview');
  </script>
  
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>A weblog on software development.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item active" href="http://localhost:4000/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="http://localhost:4000/about/">About</a>
        
      
    
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    

  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2020. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Zemian's Blog</a>
            <small>Life in programming world!</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2015/10/11/how-to-specify-same-target-table-for-update-in-from-clause/">
        How to specify SAME target table for update in FROM clause
      </a>
    </h1>

    <span class="post-date">11 Oct 2015</span>

    <p>Have you tried updating something simple as following?</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>update category_tmp set last_update=NOW() 
where category_id in (
  select category_id from category_tmp where name like 'A%'
);
</code></pre></div></div>

<p>In MySQL you will get an error like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Error Code: 1093. You can't specify target table 'category_tmp' for update in FROM clause.
</code></pre></div></div>

<p>So it says that you can’t use the same update TABLE name within the sub query in where condition. The trick to get around this is to use another sub query in the where clause so it won’t see the TABLE name being used! Here is a workaround:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>update category_tmp set last_update=NOW() 
where category_id in (
  select category_id from (
    select category_id from category_tmp where name like 'A%'
  ) ID_LIST
);
</code></pre></div></div>

<p>Noticed that in MySQL, you must name your sub query result such as <code class="language-plaintext highlighter-rouge">ID_LIST</code>, in order for it to be re-select it again on the outer query! Otherwise it will error out with this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Error Code: 1248. Every derived table must have its own alias
</code></pre></div></div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2015/10/10/setup-python-on-mac/">
        Setup Python on Mac
      </a>
    </h1>

    <span class="post-date">10 Oct 2015</span>

    <h2 id="setup-python-2">Setup Python 2</h2>

<p>The default MacOS should already come with latest Python 2.7. It will be pre-installed along with some pyobjc packages as well.</p>

<p>If you like to play around with python and external packages, it’s best not to touch the original Python install from the System. Unfortunately, this Python 2.7 does not come with pip nor virtualenv packages to help setup separate environment! So it’s okay to install these two into the system first. The easiest to setup is simply download get-pip.py from https://bootstrap.pypa.io/get-pip.py, then run</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bash&gt; sudo python get-pip.py

With this, you may now able install virtualenv

bash&gt; sudo /usr/local/bin/pip install virtualenv

Now you can setup Python2 virtual env on a separate directory.

bash&gt; python -m virtualenv mypy

bash&gt; source mypy/bin/activate

(mypy) bash&gt; python -c 'import sys; print sys.path'
</code></pre></div></div>

<p>You should able to verify the output above that you are indeed using your own setup of an isolated  Python2 env, and it even has your own pip installed list, so you won’t mess up the built-in System version of python!</p>

<h2 id="setup-python-3">Setup Python 3</h2>

<p>The MacOS comes with latest Python 2.7, but no Python3. You can download the latest Python3 from python.org site and install it. It will give you a new ‘python3’ command so not to conflict with your existing Python. (NOTE: It’s best not to remove or override the default Python2.7 that comes with the system!) But if you want to use ‘python’ command for Python3 for dev, then I suggest you create a new virtual environment of your own. The Python3 install should come with a ‘pyvenv’ command. For Example</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bash&gt; pyvenv mypy3
bash&gt; source mypy3/bin/activate
(mypy3) bash&gt; python -c 'import sys; print(sys.path)'
</code></pre></div></div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2015/10/10/macbook-air-is-not-displaying-scroll-bar-on-finder/">
        MacBook Air is not displaying scroll bar on Finder
      </a>
    </h1>

    <span class="post-date">10 Oct 2015</span>

    <p>For odd reason that I don’t see scrollbar shows up on Finder in MacBook
Air when I have a long list of files. Can’t scroll down with my
trackpad, but I can do it with <code class="language-plaintext highlighter-rouge">Fn + Down Arrow</code> key though. To fix
this, I have to go into System Preference, General and set “Show scroll
bar” to “Always”.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2015/10/09/checking-mysql-database-connection-with-mysql-connector-python/">
        Checking MySQL database connection with mysql-connector-python
      </a>
    </h1>

    <span class="post-date">09 Oct 2015</span>

    <p>First install the MySQL package</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bash&gt;pip install --allow-all-external mysql-connector-python
</code></pre></div></div>

<p>Now you may test the database connection with this Python code</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from mysql.connector import connect

conn = connect(user='dev', password='dev123', database='mysql')
cur = conn.cursor()
cur.execute('select 1+1')
for row in cur:
print(row)
</code></pre></div></div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2015/10/04/setup-mysql-datasource-on-wls/">
        Setup MySQL DataSource on WLS
      </a>
    </h1>

    <span class="post-date">04 Oct 2015</span>

    <p>Here is a WLST script to setup MySQL DataSource in WebLogic server after you have created a domain. The script will also assign this DataSource to one or more servers you pass in at the end of arguments.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Update an existing domain to setup a DataSource and assign it to servers
# Example
#   wlst.cmd setupDataSource.py C:\data\wls11g_domains\dev MYTESTDB jdbc/MYTESTDB com.mysql.jdbc.Driver jdbc:mysql://localhost/mytestdb test test123 AdminServer

import os, sys, os.path
(domain_home, ds_name, jndi_name, driver_name, url, user, password) = sys.argv[1:8]
servers = sys.argv[8:]

domain_home = os.path.abspath(domain_home)

readDomain(domain_home)

print("Setting up WLS DataSource: %s" % ds_name)
create(ds_name, 'JDBCSystemResource')
cd('/JDBCSystemResource/%s/JdbcResource/%s' %(ds_name, ds_name))
create('myJdbcDriverParams','JDBCDriverParams')
cd('JDBCDriverParams/NO_NAME_0')
set('DriverName',driver_name)
set('URL', url)
set('PasswordEncrypted', password)
set('UseXADataSourceInterface', 'false')
create('myProps','Properties')
cd('Properties/NO_NAME_0')
create('user', 'Property')
create('characterEncoding', 'Property')
create('connectionCollation', 'Property')
create('useUnicode', 'Property')
cd('Property/user')
cmo.setValue(user)
cd('../characterEncoding')
cmo.setValue('utf-8')
cd('../connectionCollation')
cmo.setValue('utf8_general_ci')
cd('../useUnicode')
cmo.setValue('true')

cd('/JDBCSystemResource/%s/JdbcResource/%s' %(ds_name, ds_name))
create('myJdbcDataSourceParams','JDBCDataSourceParams')
cd('JDBCDataSourceParams/NO_NAME_0')
set('JNDIName', java.lang.String(jndi_name))

cd('/')
for server in servers:
print("Assigning DS to server: %s" % server)
assign('JDBCSystemResource', ds_name, 'Target', server)

updateDomain()
exit()
</code></pre></div></div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2015/10/02/creating-new-weblogic-domain-using-wlst-script/">
        Creating new WebLogic domain using WLST script
      </a>
    </h1>

    <span class="post-date">02 Oct 2015</span>

    <p>Here is how to creating new WebLogic domain using WLST script without starting up a WebLogic server instance. The default AdminServer console login username is <code class="language-plaintext highlighter-rouge">weblogic</code>, and the script allow you to change its password and a port number for the AdminServer instance.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Usage: wlst.cmd createDomain.py &lt;domain_home&gt; &lt;port&gt; &lt;password&gt;
# Example: 
#   cd D:\apps\wls1036_dev\wlserver\common\bin
#   wlst.cmd scripts\createDomain.py C:\data\wls11g_domains\dev 7001 weblogic1

import os, sys, os.path
domain_home, port_s, password = sys.argv[1:]

port = int(port_s)
domain_home = os.path.abspath(domain_home)
domain_name = os.path.basename(os.path.normpath(domain_home))
template = "%s/wlserver/common/templates/domains/wls.jar" % os.environ['MW_HOME']

print("Creating WLS domain: %s" % domain_name)
# MW_HOME should be auto set by wlst.cmd script
readTemplate(template)

# Set domain name
set('Name', domain_name)

# Set AdminServer port 
cd('Servers/AdminServer')
set('ListenAddress','')
set('ListenPort', port)

# Set weblogic password
cd('/Security/%s/User/weblogic' % domain_name)
cmo.setPassword(password)

# Write domain
#setOption('OverwriteDomain', 'true')
writeDomain(domain_home)
closeTemplate()
exit()
</code></pre></div></div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2015/09/25/create-simple-wls-domain-using-wlst-and-built-in-template-jar/">
        Create simple WLS domain using WLST and built-in template jar
      </a>
    </h1>

    <span class="post-date">25 Sep 2015</span>

    <p>You can easily <a href="http://saltnlight5.blogspot.com/2014/01/getting-started-with-weblogic-server.html">start up a WebLogic Server</a> on an empty directory and it will create a domain. Here is another way to create WLS domain structure folder without actually starting up a WLS server.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Usage: wlst.cmd createDomain.py &lt;domain_home&gt; &lt;port&gt; &lt;password&gt;

# NOTE: the &lt;domain_home&gt; must be a absolute path.

# Example: C:\wls12130\wlserver\common\bin\wlst.cmd scripts\createDomain.py C:\data\wls12c_domains\dev 7001 weblogic1

import os, sys

domain_home = sys.argv[1]
domain_name = 'mydomain'

port = int(sys.argv[2])

password = sys.argv[3]

readTemplate(os.environ['MW_HOME'] + "/wlserver/common/templates/wls/wls.jar")

cd('/Server/AdminServer')

set('Name', domain_name + '-admin')

set('ListenAddress','')

set('ListenPort', port)

cd('/Security/base_domain/User/weblogic')

cmo.setPassword(password)

cd('/')

set('Name', domain_name)

writeDomain(domain_home)

closeTemplate()

exit()
</code></pre></div></div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2015/09/09/javascript-jdbc-quick-test/">
        JavaScript Jdbc Quick Test
      </a>
    </h1>

    <span class="post-date">09 Sep 2015</span>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>importPackage(java.sql)
url = "jdbc:mysql://localhost/test";
username = "test";
password = "test123";

// Util for nice print of result
function printResultSet(rs) {
colCount = rs.getMetaData().getColumnCount();
while (rs.next()) {
for (i=1; i &lt;= colCount; i++) {
printf("%s\t", rs.getObject(i));
}
println();
}
}

// Get a DB conn
sql = "SELECT * FROM ztest_issues";
conn = DriverManager.getConnection(url, username, password);

// Example of simple query
st = conn.createStatement();
rs = st.executeQuery(sql);
while (rs.next()) {
for (i=1; i &lt;= 4; i++) {
printf("%s\t", rs.getObject(i));
}
println();
}
st.close();

// Example of prepared statment with binding params
sql = "SELECT * FROM ztest_issues WHERE title=?";
st = conn.prepareStatement(sql);
st.setObject(1, "test");
rs = st.executeQuery();
printResultSet(rs);
st.close();

// Close DB conn
conn.close();
</code></pre></div></div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2015/08/23/be-aware-of-the-count-0-when-using-pythons-re-sub-to-find-and-replace-text/">
        Be aware of the count - 0 when using Python's re.sub() to find and replace text
      </a>
    </h1>

    <span class="post-date">23 Aug 2015</span>

    <p>I have an xml file and I want to remove a whole section of element without actually parsing the XML file. I wrote an Python script to do just that. I first tested it out like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import re
input_text = open('my.xml').read()
result = re.findall(r'&lt;library-ref&gt;.*&lt;/library-ref&gt;', input_text, re.S)
print(result)
</code></pre></div></div>

<p>The result IS what I wanted, so I thought I can quickly replace it with something like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>result = re.sub(r'&lt;library-ref&gt;.*&lt;/library-ref&gt;', '', input_text, re.S)
</code></pre></div></div>

<p>And to my surprise this does not work. It took me a while to notice that I mis used the method according to the documentation, which has this signature:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>re.sub(pattern, repl, string, count=0, flags=0)
</code></pre></div></div>

<p>At first glace, I thought that count is already default to zero and I do not need to set it, but because that is a positional parameter, you must include it! So you suppose to call it explicit like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>result = re.sub(r'&lt;library-ref&gt;.*&lt;/library-ref&gt;', '', input_text, 0, re.S)
</code></pre></div></div>

<p>Or, if you like, you can use the “flags” parameter name explicitly without the odd looking zero.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>result = re.sub(r'&lt;library-ref&gt;.*&lt;/library-ref&gt;', '', input_text, flags=re.S)
</code></pre></div></div>

<p>So here is an example of flexible dynamic typing of optional parameters can bite if you are not careful.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2015/08/21/view-and-terminate-oracle-database-user-sessions/">
        View and terminate Oracle Database user sessions
      </a>
    </h1>

    <span class="post-date">21 Aug 2015</span>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Verify sessions:
SELECT USERNAME FROM V$SESSION;

SELECT USERNAME, SID, SERIAL#, STATUS
  FROM V$SESSION
  WHERE USERNAME like 'SCOTT%';

Generate SQL to terminate sessions:
SELECT 'ALTER SYSTEM KILL SESSION ''' || SID || ',' || SERIAL# || ''';'
  FROM V$SESSION
  WHERE USERNAME like 'SCOTT%';
</code></pre></div></div>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="http://localhost:4000/page12">Older</a>
  
  
    
      <a class="pagination-item newer" href="http://localhost:4000/page10">Newer</a>
    
  
</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script src='/public/js/script.js'></script>
  </body>
</html>
